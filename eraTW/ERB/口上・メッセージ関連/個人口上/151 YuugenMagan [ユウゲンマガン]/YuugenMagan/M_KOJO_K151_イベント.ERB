;更新日期：2024年10月16日
;-------------------------------------------------
; eraTheWorld 4.841用 ○○口上（キャラクターの名前を入れる、下にコンセプトなど一言あれば入れる）
;-------------------------------------------------
;Any modifications, additions, or alterations by others must be in accordance with the included license terms.
;他者による修正、追加、改变については、同梱のライセンス条项に从ってください。

;------ ｷﾘﾄﾘ ｶｲｼ -----------
;eraTheWorld proto4.07パッチ取り込み用 Ver1.13
;テンプレートの使い方
;初めに置换コマンド等により K151 を K(キャラNo) に变更して下さい  
;キャラNoはCSVフォルダのCharaファイルを参照　例(雾雨 魔理沙の场合)：K151 =置换=> K11
;
;------ ｷﾘﾄﾘ ｵﾜﾘ -----------

;**** FlagManagement **********************************************************
;List the CFLAGs, TCVARs, etc. used in this file
;本口上にて使用しているCFLAG・TCVAR等
;
;
;
;******************************************************************************

;### 口上存在判定 ###################################
@M_KOJO_K151(ARG)
;别人版を作成する际はこのテンプレではなく别人版用口上テンプレをご利用ください

;口上存在判定です、けしてコメントアウトしないでください
;他の处理は一切行わないように

;Dialogue alt codename, 
;if function codenames are already occupied by another dialogue,
;write something after the under dash and mass rename the function codenames
;for example:
;RESULTS = _ABC
;@M_KOJO_FLAGSETTING_K12345 -> @M_KOJO_ABC_FLAGSETTING_K12345
;RESULTS = _

;Dialogue name, write something here and it won't show up as Reimu Default
;RESULTS:1 =

;Dialogue description
;RESULTS:2 = 

RETURN 1

;### 口上基本フラグ设定 #############################
@M_KOJO_FLAGSETTING_K151
;基本フラグ设定はここで行ってください
;共通の口上フラグは必要な部位のコメントアウトを外してご利用ください
;口上専用フラグはご自由に
;Xにはキャラ番号を入れてください

;眠奸口上有、时间停止口上有、扮演に1を入れると、それぞれ时间停止时、眠奸时、扮演时にコマンド口上が读み込まれるように
;入れないと时间停止时、眠奸时、扮演时は一切喋りません
;Enable sleep rape dialogue
;CFLAG:X:眠奸口上有 = 0


;Enable time stop rape dialogue
;CFLAG:X:时间停止口上有 = 0


;Enable custom dialogue if playing as an existing character (Yuugi, etc.)?
;CFLAG:X:扮演口上有 = 0

;破瓜中止口上有に1を入れると、@M_KOJO_EVENT_K151_LOST_VIRGIN_STOPで中止の成否を操作できます
;CFLAG:X:破瓜中止口上有 = 0

;口上内抱き寄せ判定_初回と口上内抱き寄せ判定_通常に1を入れると、M_KOJO_EVENT_K151_PERMISSIONで推倒の成否を操作できます
;CFLAG:X:口上内抱き寄せ判定_初回 = 0

;If 1, you can use M_KOJO_EVENT_K151_PERMISSION to make it so pushing down always succeeds or always fails
;CFLAG:X:口上内抱き寄せ判定_通常 = 0

;If 1, you can use M_KOJO_EVENT_K151_PERMISSION to make it so taking a character's penile virginity always succeeds or always fails
;CFLAG:X:口上用童贞丧失判定 = 0

;If 1, you can use M_KOJO_EVENT_K151_PERMISSION to make it so taking a character's anal virginity always succeeds or always fails
;CFLAG:X:口上用肛门处女丧失判定 = 0

;推倒禁止に1を入れると、自分から推倒てこなくなります
;以下は恋慕か炮友がつくまで推倒てこなくなる使用例
;Setting CFLAG:推倒禁止 to 1 will make it so a character will not push you down
;For instance, the below code will ensure that a character will not push you down unless they have Yearning or Sex Friend:
;IF !TALENT:X:恋慕 && !TALENT:X:炮友
;	CFLAG:X:推倒禁止 = 1
;ELSE
;	CFLAG:X:推倒禁止 = 0
;ENDIF

;来访不能に1を入れると、来访してこなくなります
;以下は认识があるまで来访してこなくなる使用例
;Setting CFLAG:来访不能 to 1 will make it so the character will never attempt to visit the player.
;For instance, the below code will ensure that a character will not attempt to visit the player unless the player has met them before:
;IF !CFLAG:X:认识
;	CFLAG:X:来访不能 = 1
;ELSE
;	CFLAG:X:来访不能 = 0
;ENDIF

;Custom: If 1, this character has tips which can appear at night
CFLAG:TARGET:MORNING_TIPS = 0

;### 口上色判定 ###################################
@M_KOJO_COLOR_K151

;ここでSETCOLORすることで口上に色を付けられます
;例：SETCOLOR 0xC07070
SETCOLOR 0xE77C33

@CHARA_INFO_KOJO_K151()
CALL M_KOJO_COLOR_K151
;PRINTFORML %nameArray:[[幽幻魔眼]]:na_Title%
PRINTFORML %CSVCSTR(151, 10)%
RESETCOLOR
PRINTL 
PRINTFORML 口上版本v{CFLAG:151:K151EN_FLAG_VER / 100}.{CFLAG:151:K151EN_FLAG_VER / 10}.{CFLAG:151:K151EN_FLAG_VER % 10}
PRINTL
PRINTFORML 来自另一个位面的神秘造物
PRINTFORML 这幅女人的躯壳只是幽幻魔眼用来与幻想乡居民互动的人造产物，那些眼睛才是她的本相貌
PRINTFORML 幽幻魔眼坚信不久的将来，幻想乡将会毁灭，而她将会见证这一“事件”
SIF CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0
	PRINTFORML 但你觉得她并没有她说的那么置身事外，而你决定...
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"UPDATE判定"
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_UPDATE_K151
#DIM VERSION
;口上独自のUPDATE用
;ENCOUNTER専用に独自分岐フラグを仕込んだ场合等にどうぞ
;UPDATE判定でCFLAG等のキャラ变量を使う场合、キャラ番号の指定が必要になります
IF CFLAG:151:K151EN_FLAG_VER == K151EN_VER
	PRINTFORMDL 如果%CALLNAME:151%的文本不是最新版，请更新%FORMAT_VERSION(K151EN_VER)%
ELSE
	PRINTFORMDL 更新%CALLNAME:151%文本至v%FORMAT_VERSION(K151EN_VER)%...
	IF CFLAG:151:K151EN_FLAG_VER < 4
		PRINTFORMDW 你将重新选择路径，因为我把变量搞乱了（作者原话）
		PRINTFORMDL 当你第一次遇到幽幻魔眼，你感觉...
		CALL K151_ROUTE_SELECT
	ENDIF
	CFLAG:151:K151EN_FLAG_VER = K151EN_VER
	PRINTFORMDL 更新完力！
ENDIF
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;Custom dialogue settings, custom code
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;made it as a way to speed up the update process and separate simple flag updates from various customization options
;note: options start from 1!
@KOJO_OPTION_K151
CALL KOJO_OPTION_ITEM("Dialogue setting customization", 1)

;process the input portion
@KOJO_OPTION_K151_RESULT_1
CALL KOJO_UPDATE_K151

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"ENCOUNTER"系イベント（エクストラ构文）
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_ENCOUNTER_K151
;初对面、挨拶のタイミング
;TALENTの变更はここでどうぞ。
;経験の变更は龃龉が出る场合がありますので、CSVを修正し同梱する事を推奖します
PRINTFORMDW 你正若无其事的走在路上，突然你感觉到整个后颈上的寒毛的竖了起来。有人，或者说什么东西正在盯着你...
PRINTFORMDW 你向四周看去...看到了一个眼球？仅仅是一个漂浮在空中的眼球
PRINTFORMDW 你细细看去，眼球固定在一团由紫色线团填充着的黄色矩阵，外壳像一个电风扇...？
PRINTFORMDW 回过神来才发现祂也在紧紧地盯着你
PRINTFORMDW 接着，另外两个眼球从祂的一旁弹出，毫无征兆。你觉得他们并非突然显现，而是平常通过闭眼隐藏自己
PRINTFORMDW 接着更多的两个眼球暴露出来，徘徊在最初的那一对下面，你感觉有点看不过来了
PRINTFORMDW 一双眼怎么抵得过五颗眼珠子？你后退了两步，祂们的视线让你浑身发毛...
PRINTFORMDW 得赶紧离开才行，你浑身每一个细胞都在战栗
PRINTFORMDW 你转过身想立刻跑路，但在那之前...一道闪电击中了你前面的地面
PRINTFORMDW 你出于本能的停止了脚步，双眼也被闪电的高亮致盲了一小段时间
PRINTFORMDW 不好!你心中暗惊，立刻打算时停逃走
PRINTFORMDW 同一时刻，你又重新看清了眼前的景色...在你面前站着一位...女子？
PRINTFORMDW 虽然没有立刻逃走，但你还是警惕的看着前面的这位“女性”，明显是之前的那五个眼睛
PRINTFORMDW 她对着你微笑着鞠了一躬，这反而使她显得更加诡异
PRINTFORMDW 她的笑容...与其说是笑容，不如说只是单纯的弧度
PRINTFORMDW 她并没有表现出任何的不耐烦
PRINTFORMDW 她的嘴唇就像是从一个普通人脸上撕扯下来，旋转180°，再重新贴了上去，皮笑肉不笑
PRINTFORMDW 你感觉到...
CALL K151_ROUTE_SELECT
CALL M_KOJO_COLOR_K151
PRINTFORMDW 她说话的声音有着难以辨别的口音，感觉像是外星人，语言也听上去比较扭曲，混杂着不同的声音，忽高忽低，没有任何的明显的语气
PRINTFORMW 「你是新的外来者，来自外界」
PRINTFORMW 「我们也是外来者，但和你不同，我们来自...」
PRINTFORMDW 你清楚地听到了“我们”，眼前的祂只是那五个眼球的集合体
PRINTFORMDW 她微微顿了一下，是在和体内的那些东西说话吗？你突然注意到，她的双眼在说话时几乎没有任何眨动的迹象
PRINTFORMW 「下面，不是你们口中的新旧地狱，或者魔界...那是一个完全不同的地方」
PRINTFORMW 「我们真正的名字没法用你们的器官来发音，如果你执意要尝试的话，你的精神会受到不可逆的创伤」
PRINTFORMW 「但你可以称呼我们为幽幻魔眼」
PRINTFORMW 「很高兴见到你」
PRINTFORMDW 她又展示出了那个诡异的微笑
PRINTFORMW 「我们很快会在再见的」
PRINTFORMDL 
CALL KOJO_UPDATE_K151
PRINTFORMDL 
RETURN 1

@K151_ROUTE_SELECT
RESETCOLOR
$YM_ROUTE_SELECT
LOCAL = LINECOUNT
PRINTFORMDL [0]面前的这个人好古怪...
PRINTFORMDL [1]好像在面对什么不可明状物
PRINTFORMDL [2]进行一个简短的介绍（作者的话）
$YM_CONFIGURE
INPUT
SELECTCASE RESULT
	CASE 0
		CFLAG:[[魔眼]]:K151EN_YM_NATURE = 0

	CASE 1
		CFLAG:[[魔眼]]:K151EN_YM_NATURE = 1
		TALENT:[[魔眼]]:怀孕愿望 = 1

	CASE 2
		PRINTFORMDL 我原本设想幽幻魔眼是一个无口，负面的魔界人物，她用拟态将自己变为人类，这样人类才可以和她好好相处
		PRINTFORMDW 我不确定该不该这么做，所以我问了别人要不要把她作为一个纯粹的魔界生物
		PRINTFORMDW 最后我决定将这两个结合一下
		PRINTFORMDW 所以，你可能看到一个完全不同的她
		PRINTFORMDW （译者注：不同的选项将进入完全不同的路线，请慎重选择）
		CLEARLINE LINECOUNT - LOCAL
		GOTO YM_ROUTE_SELECT

	CASEELSE
		GOTO YM_CONFIGURE

ENDSELECT
PRINTFORMDL 

@KOJO_UPDATE_K151
;set character update version
nCharaSaveUp:[[魔眼]]:0:21 = VAR_OR_DEFAULT("K151EN_VER")

;config menu
{
	CALL KOJO_CONFIGURE(
		151,
		"PHYSICAL",
		"",
		@" 不久之前「时机终于到来，群星归于正位，我们也没有多少时间了...」\n「(这个世界真奇怪!我们还没有适应他们的...物理法则，神绮女士是这么称呼的？)」\n「如果我们要产下群星之子，也就只有这个机会了」\n「但我们需要一个肉体，不是吗？它应该是...」",
		151,
		)
}

@K151_SETTING_PHYSICAL
IF !nCharaSaveUp:[[魔眼]]:0:20
	{
		CALL KOJO_SETTING_SEX(
			151, 0,
			@"「人类有不同的性好...？....哪个更加适合产下子嗣？我们都忘了...」", 151,
			)
	}

	{
		CALL KOJO_SETTING_SIZE(
			151, 1, "「我们的躯壳应该和本地居民差不多...或者，更高的躯壳可以诞生更加强大的子嗣？」", 151)
	}

	{
		CALL KOJO_SETTING_BREASTS(
			151, 2, "「我们必须确保我们的胸部大小合适，这样可以用来吸引一个异类...」", 151)
	}
ENDIF

@K151_Defaults
#FUNCTION
#DIM C_ID
#DIM D_ID
REGEXPMATCH  GETDOINGFUNCTION(), @"K(\\d+)_", RESULT, RESULTS
C_ID = TOINT(RESULTS:1)
D_ID = CFLAG:C_ID:口上セレクタ

nCharaUpdate:C_ID:D_ID:0 = 1
nCharaUpdate:C_ID:D_ID:1 = 3
nCharaUpdate:C_ID:D_ID:2 = 3

@K151_SETTING_SUBMIT
CALL KOJO_SUBMIT_SEX(151, 0)
CALL KOJO_SUBMIT_SIZE(151, 1)
CALL KOJO_SUBMIT_BREASTS(151, 2)
CALL M_KOJO_COLOR_K151
PRINTFORMW 「完成了」
PRINTFORMDL 当房间的闪光熄灭过后，一个人影站在了那里
PRINTFORMDW 他看向周围满意的笑了
PRINTFORMW 「完美的躯壳，现在，去找到一个合适的伴侣...」
PRINTFORMDL 
RESETCOLOR

;一日の开始时、正确には来访判定时に读み込む函数
;ここでCFLAG:XX:翌日来访を设定して确实に来访させたりTCVAR:XX:发情で朝っぱらからサカらせることもできる
;ただし「每天早上例外なく读み込まれる」ため、条件を设定しておくことが望ましい
IF !GROUPMATCH(CFLAG:[[魔眼]]:K151EN_YM_NATURE, 1, 2)
	PRINTFORMDL 当你第一次遇到幽幻魔眼，你感觉到...
	CALL K151_ROUTE_SELECT
ENDIF


;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"SP_EVENT" events
;"SP_EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;First kiss on the way home from a date
;デート归りにファーストKISS（合意も付く）
;==================================================
@M_KOJO_SPEVENT_K151_1(ARG,ARG:1)
;口上主はTARGET
;地の文表示
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE K151_YM_NATURE()
		CASE 0, 1
			PRINTFORMW 「迄今为止，你做的很好」
			PRINTFORMDW 幽幻魔眼用她全部的七只眼睛紧紧注视着你
			PRINTFORMDW 虽然听上去在夸你，脸上却依然是一如既往的冷漠
			PRINTFORMW 「像你这样的人确实是我们合格的伴侣」
			PRINTFORMDW 她用独属于自己的奇怪笑容微笑着
			PRINTFORMW 「别动。对于适格者，我们会给予相应的奖励」
			PRINTFORMDW 幽幻魔眼抓着你的头，以一种很新奇的方式亲吻了你
			PRINTFORMDW 至少你觉得她是在和你接吻。在用自己的嘴唇抵住你的后，她伸出舌头在你嘴中轻轻点了一下下唇内部
			IF CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0
				PRINTFORMDW 她的嘴唇比想象中的要柔软...
			ELSE
				PRINTFORMDW 她的嘴唇就像其他部分一样冰冷，就像一块冰，或者...一具尸体
				PRINTFORMDW 你浑身起鸡皮疙瘩，打算在她不注意的时候擦一擦嘴
			ENDIF
			PRINTFORMDW 继续服侍我们，我们也会给予更多的奖励
			PRINTFORMDW 幽幻魔眼转过身走了，就像什么都没发生一样。你赶紧跟了上去
			PRINTFORMDW 更多的"奖励"，嗯...

			IF CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0
				PRINTFORMDW 或许你应该先问问会奖励些什么。说实话，她的"亲吻"没有那么糟糕，但下一次你还是想要普通一点的奖励
			ELSE
				PRINTFORMDW 你擦了擦嘴后，希望下次还是给一些特殊能力或者什么圣遗物比较好....
			ENDIF

		CASE 2
			PRINTFORMW 「嘿，那个...」
			PRINTFORMDW 幽幻魔眼红着脸支支吾吾地拉住了你
			PRINTFORMW 「虽然我们是恋人，但实际上我们还没有真正地...接吻过...」
			PRINTFORMW 「所以...」
			PRINTFORMDW 她尴尬地看着你...然后在你反应过来之前就一把拉住了你与你接吻
			PRINTFORMDW 她赶紧把你推开，大口喘息着，脸比刚才还有红
			PRINTFORMDW 你们两个互相尴尬地看着对方，最后是幽幻魔眼先开的口
			PRINTFORMW 「唔...」
			PRINTFORMDW 她看上去点坐立不安
			PRINTFORMW 「感觉怎么样？」
			IF EXP:MASTER:接吻经验 <= 1
				PRINTFORMDW 这是你的初吻，你也没法和别人比...
				PRINTFORMDW 但说实话，感觉很棒
			ELSE
				PRINTFORMDW 说实话，不怎么好
			ENDIF
			PRINTFORMDW 你打算表现得绅士一点，告诉她感觉很棒
			PRINTFORMW 「欸嘿嘿...」
			PRINTFORMDW 幽幻魔眼咯咯地笑着，看上去还是有点尴尬
			PRINTFORMW 「呼~至少没有低于平均水平」
			PRINTFORMDW 她看着你笑了笑
			PRINTFORMW 「那么...在我地接吻更加令人"神魂颠倒"之前，可以帮我多练习一下吗〜？」
			PRINTFORMDW 作为回应，你毫不犹豫地回吻对方
			PRINTFORMDW 你们俩个一直互相亲吻着对方，直到意识到现在已经很晚了，赶紧往家的方向赶去...
			EXP:MASTER:接吻经验 += 5
			EXP:[[魔眼]]:接吻经验 += 5
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;Confessing on the way home from a date
;デート归りに告白（恋人が付く）
;==================================================
@M_KOJO_SPEVENT_K151_2(ARG,ARG:1)
;口上主はTARGET
;地の文表示
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Confession
	;After this dialogue is displayed, the player will have a choice to become the character's lover or turn them down.
	;告白内容
	;この告白内容表示后に受けるかどうかの选择分が表示されます
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
		PRINTFORMW 「%CALLNAME:MASTER%?」
		PRINTFORMDW 幽幻魔眼紧张地看着你。她害羞地看着你，脸上因为紧张出的汗闪闪发光
		IF FIRSTTIME("YMConfesses")
			SELECTCASE K151_YM_NATURE()
				CASE 0
					PRINTFORMW 「我...我有一件事要坦白」
					PRINTFORMDW 她吞了吞口水
					PRINTFORMW 「实际上，是两件事。但首先...」
					PRINTFORMDW 她闭上双眼深吸一口气
					PRINTFORMW 「我实际上不是什么未知造物。我只是...一名从魔界魔法学院辍学的一名学生」
					PRINTFORMW 「但我的名字确实是幽幻魔眼。我的父母是...」
					PRINTFORMDW 她叹了一口气
					PRINTFORMW 「还是聊聊那些"奇怪的"部分吧」
					PRINTFORMDW 幽幻魔眼紧咬着嘴唇正视着你的眼睛
					PRINTFORMW 「我知道。 这很荒唐，一直以来我都在骗你...那是因为，我觉得这是唯一可以让人们认真对待我的方法」
					PRINTFORMW 「而在我开始表演之后...」
					PRINTFORMDW 她笑得很苍白
					PRINTFORMW 「我陷入太深了。所以我就干脆破罐子破摔...但不知道为什么，再也没有人和我说话了」
					PRINTFORMW 「就连神琦大人也是，哪怕她在我小时候就认识我了」
					PRINTFORMW 「但是现在，我愿意告诉你我的秘密...那是因为...」
					PRINTFORMDW 幽幻魔眼更加用力地紧咬嘴唇，深吸了一口气
					PRINTFORMW 「我爱你，%CALLNAME:MASTER%」
					PRINTFORMW 「我...我不指望你会原谅我一直在撒谎，更不要说会回应我的感情...但我想对我所爱的人实话实说」
					PRINTFORMDW 幽幻魔眼羞愧地低下了头，开始小声啜泣
					PRINTFORMW 「对不起，%CALLNAME:MASTER%!我很对不起...」
				CASE 1
					PRINTFORMW 「在来到你们世界之前，你们口中的情感并没有出现在我们身上。我们仅仅是我们」
					PRINTFORMW 「但它们竟然出现在了我们身上。快乐，悲伤，恐惧，愤怒...」
					PRINTFORMW 「我们尚不清楚为什么会这样，这种从来没有经历过的感觉...」
					PRINTFORMW 「但当我们和你在一起时，我们只感受到了一种情感」
					PRINTFORMDW 她所有的七只眼睛都锁定在了你的身上
					PRINTFORMW 「那是————渴望。我们渴望不仅仅是作为一个伴侣对待你」
					PRINTFORMW 「我们渴望...」
					PRINTFORMDW 她吞了吞唾沫。你看到她的双手微微颤抖
					PRINTFORMW 「我们渴望像配偶一般对待你...」
			ENDSELECT
		ELSE

			SELECTCASE K151_YM_NATURE()
				CASE 0
					PRINTFORMW 「我...仍然爱着你」
					PRINTFORMW 「如果你没有带我来约会的话，我根本没有勇气说出这些话...你也不会恨我」
					PRINTFORMDW 幽幻魔眼紧张地咽了咽口水
					PRINTFORMW 「那么...%CALLNAME:MASTER%，你是怎么看待我的呢？」

				CASE 1
					PRINTFORMW 「我们尝试过抑制它们，但这一切都是徒劳」
					PRINTFORMW 「你...打算接受它们吗？」
			ENDSELECT
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Confession accepted (player and character become lovers)
	;告白オッケー（恋人が付く）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		SELECTCASE K151_YM_NATURE()
			CASE 0
				PRINTFORMDW 幽幻魔眼难以置信的喘息着
				PRINTFORMW 「你...你是认真的吗？」
				PRINTFORMDW 你对她微笑着点了点头，牵起了她的手
				PRINTFORMDW 她兴奋地小声惊呼了一声，然后紧紧抱住了你
				PRINTFORMW 「谢谢你, %CALLNAME:MASTER%...谢谢你...」
				PRINTFORMDW 她又开始哭了，但这一次你知道是因为高兴
				PRINTFORMDW 你将她拥入怀中，轻轻的拍着她的背
				PRINTFORMDW 短暂地抚慰过后，幽幻魔眼轻轻推开了你，笑了笑.高兴的泪水闪烁在她的眼中
				PRINTFORMW 「我想...我想，我应该开始慢慢告诉大家我的真面目了，对吧？」
				PRINTFORMW 「我不想立刻和所有人说.我也不想吓到别人」
				PRINTFORMW 「但我还是会去做的.我不会在害怕那个真正的我了」
				PRINTFORMDW 她对你笑了笑
				PRINTFORMW 「就算所有人会因为我的谎言而讨厌我...我的男友也会接纳我.这就够了」

			CASE 1
				PRINTFORMDW 幽幻魔眼依然保持着那不自然的微笑
				PRINTFORMW 「我们不善言辞...但我们很高兴」
				PRINTFORMW 「亲吻我们，亲爱的」
				PRINTFORMDW 你凑近了她冰冷的嘴唇
				CALL MUTUAL_KISS
				PRINTFORMDW 真奇怪...你感觉她的双唇似乎...有一点点温暖？
				PRINTFORMDW 当你结束了这段接吻时，她好奇地盯着你，摸了摸自己的双唇
				PRINTFORMW 「这就是...」
				PRINTFORMDW 几乎完全听不到的声音
				PRINTFORMW 「这就是祂所说的...真正的活着...？」
		ENDSELECT

		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Confession rejected
	;告白失败
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		SELECTCASE K151_YM_NATURE()
			CASE 0
				PRINTFORMW 「...」
				PRINTFORMW 「...意料之中的回答呢」
				PRINTFORMDW 幽幻魔眼苍白地笑了笑
				PRINTFORMW 「至少我说出了我的心声」
				PRINTFORMDW 二人默默回到了自己家中

			CASE 1
				PRINTFORMW 「啊...」
				PRINTFORMDW 幽幻魔眼开始哽咽
				PRINTFORMW 「我们知道了...」
				PRINTFORMW 「%CALLNAME:MASTER%,我们身上发生什么了？这感觉...好痛...仿佛来自身体里面」
				PRINTFORMDW 「这是...什么液体？完全控制不住...」
				PRINTFORMDW 「怎么会这样...？」
				PRINTFORMDW 幽幻魔眼一边生疏地抹擦着眼泪，一边自顾自地离开了

		ENDSELECT
		RETURN 1
	ENDIF

ENDIF
RETURN 1

;==================================================
;Returning home from a date
;デート归り
;==================================================
@M_KOJO_SPEVENT_K151_3(ARG,ARG:1)
;口上主はTARGET
;地の文表示
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Standard dialogue
	;通常回家
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
		IF CFLAG:[[魔眼]]:K151EN_YM_NATURE == 3
			PRINTFORML 「我还是不敢相信，你竟然会邀请我去公共场合约会」
			PRINTFORML 「每次当我开始说那些不明所以的话，我都想找个地方钻进去...」
			PRINTFORML 「太奇怪了，明明之前还从来没有觉得是我的困扰，那个身份就是我的一部分」
			PRINTFORMW 「不过现在我觉得我太习惯于诡异的怪物这一身份了，甚至都快忘了我自己...」
		ELSE
			SELECTCASE RAND:3
				CASE 0
					PRINTFORMW 「嗯...我们认为这很有意义」
					PRINTFORMW 「或许之后，我们可以经常这样？」
					PRINTFORMDW 你觉得她不像是在问你
				CASE 1
					PRINTFORMW 「之后我们再一起出门吧」
					PRINTFORMW 「留给这个世界的时间不多了...」
					PRINTFORMDW 你想询问更多关于终末之刻的事情，但看来幽幻魔眼似乎并不想回答
				CASE 2
					PRINTFORMW 「所以，这就是你们人类忘却自己是茫茫宇宙中的一粒沙尘的方法吗」
					PRINTFORMW 「有趣至极...」
					PRINTFORMDW 幽幻魔眼自言自语到
			ENDSELECT
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Hate Mark 1 removed
	;反抗刻印消去イベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORMDW 幽幻魔眼脸上只有浅薄的微笑，看上去比第一次见面时的还要苍白
		PRINTFORMW 「介于最近一段时间，我们和你相处的很愉快」
		PRINTFORMW 「我们决定再给你一次机会」
		PRINTFORMW 「这一次，别犯同样的错误。事不过三」

		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Hate Mark 2 removed (changes to Hate Mark 1)
	;反抗刻印2>1レベルダウンイベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORMW 「根据我们的观测，你今天看上去格外顺眼」
		PRINTFORMW 「你确确实实在恭迎我们，这很好」
		PRINTFORMW 「多努力一些吧，这样或许我们可以让你成为我们的仆人」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Hate Mark 3 removed (changes to Hate Mark 2)
	;反抗刻印3>2レベルダウンイベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMW 「据观测，我们发现你的表现比平常更加惹人喜爱」
		PRINTFORMW 「或许，当祂们到来的时候，我们会特许你成为第一个被献祭的人类」
		RETURN 1
	ENDIF
	PRINTFORML
ENDIF
RETURN 1

;==================================================
;Morning sex events
;朝イベント（诶嘿嘿）
;==================================================
;==================================================
;Optional: Determines if the standard description should be skipped.
;Return 0 if description and KOJO should be shown, 1 if description should be hidden and KOJO shown, 2 if description should be shown and KOJO hidden, and 3 if both description and KOJO should be hidden.
;==================================================
@M_KOJO_SPEVENT_MESSAGECHECK_K151_4
RETURN 0

@M_KOJO_SPEVENT_K151_4(ARG,ARG:1)
;口上主はTARGET
;共通メッセージ出力
;-------------------------------------------------
;The character wakes the player up with a blowjob (or cunnilingus)
;フェラ、クンニで起こされる
;记入チェック
LOCAL:1 = 1
;-------------------------------------------------
IF LOCAL:1 && ARG == 1
	IF TALENT:[[魔眼]]:恋人
		SELECTCASE K151_YM_NATURE()
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 「我们需要你的\@ HAS_PENIS(MASTER) ? 精液 # 蜜汁\@」
						CALL HPH_PRINT, @"「现在，保持不动，以让我们提取它HPH」", "W"
					CASE 1
						PRINTFORML 「我们不在在意这种行为是否能产下子嗣」
						CALL HPH_PRINT, @"「给予我们你的\@ HAS_PENIS(MASTER) ? 精液 # 蜜汁\@HPH」", "W"
					CASE 2
						PRINTFORMW 「啊，亲爱的...你尝上去非常美味...」
				ENDSELECT
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORMW 「咖啡现在对我来说没有任何作用啦~我需要你的\@ HAS_PENIS(MASTER) ? 精液 # 蜜汁\@来提神〜」
					CASE 1
						PRINTFORML 「哼哼~我看到你的\@ HAS_PENIS(MASTER) ? %FSYN_CN("阴茎")% # %FSYN_CN("阴道")%\@已经先醒过来了〜」
						CALL HPH_PRINT, @"「现在，赶紧射出来然后剩下的部分也会醒过来的HPH」", "W"
					CASE 2
						PRINTFORMW 「嗯...真希望我可以整个早上\@ HAS_PENIS(MASTER) ? 给你口交 # 扣你\@...」
				ENDSELECT
		ENDSELECT
	ELSEIF TALENT:[[魔眼]]:炮友 || TALENT:[[魔眼]]:爱欲
		SELECTCASE K151_YM_NATURE()
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
		ENDSELECT
	ELSE
		SELECTCASE IFRAND("0TO1", 1, "2", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0, "3", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 1)
			CASE 0
				PRINTFORMW 「我们允许你把\@ HAS_PENIS(MASTER) ? 精液 # 蜜汁\@射进我们嘴中，但下不为例」
				PRINTFORM 「而你必须把今天剩余的时间
				IF HAS_PENIS(MASTER)
					PRINTFORM 射精在我们子宫中」
				ELSEIF HAS_PENIS(TARGET)
					PRINTFORM 让我们射在你的子宫里」
				ELSE
					PRINTFORM 让我们用精液填满你的子宫」
				ENDIF
			CASE 1
				PRINTFORML 「我们渴望摄取你的\@ HAS_PENIS(MASTER) ? 精液 # 蜜汁\@」
				PRINTFORMW 「放弃抵抗...」
			CASE 2
				PRINTFORML 「嗯...」
				PRINTFORMDW 幽幻魔眼 \@ HAS_PENIS(MASTER) ? 在给你的%FSYN_CN("阴茎")%口交同时脸上十分满意 # 在你射出来之后满意地舔了舔嘴唇\@
			CASE 3
				PRINTFORMDL 幽幻魔眼 \@ HAS_PENIS(MASTER) ? 整个吞下了你的肉棒 # 面无表情地扣着你的%FSYN_CN("阴道")%\@，整个房间都充满了喘气的声音
				PRINTFORMW 「难以置信的有趣，或许下一次我们还会这样做的」
		ENDSELECT
	ENDIF
	RETURN 1
ENDIF

;--------------------------------------------------
;The character wakes the player up with a titjob
;乳交で起こされる
;记入チェック
LOCAL:1 = 1
;-------------------------------------------------
IF LOCAL:1 && ARG == 2
	IF TALENT:[[魔眼]]:恋人
		SELECTCASE K151_YM_NATURE()
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 「赶紧...我在我们胸上...」
						CALL HPH_PRINT, @"「我们想品尝每一滴美味HPH」", "W"
					CASE 1
						PRINTFORML 「感觉很舒服吗，让我们的胸部包裹着你的肉棒？」
						PRINTFORMW 「那么，射在我们身上...」
					CASE 2
						PRINTFORMDL 在做乳交时，幽幻魔眼贪婪地用舌尖点着你的%FSYN_CN("阴茎")%头部
						PRINTFORMW 「给我们你的精液!就现在!」
				ENDSELECT
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORMW 「加油，亲爱的...将我染成白色吧...」
					CASE 1
						PRINTFORMDW 在做乳交时，幽幻魔眼贪婪地用舌尖点着你的%FSYN_CN("阴茎")%头部
						PRINTFORML 「嗯...有点咸...」
						PRINTFORMW 「你还给我准备了更多，不是吗？非——常多〜」
					CASE 2
						PRINTFORMW 「呵呵...如果没有你的%FSYN_CN("阴茎")%的话，我的欧派会很孤独的...」
						PRINTFORMW 「那么赶紧给它们想要的东西吧〜」
				ENDSELECT
		ENDSELECT
	ELSEIF TALENT:[[魔眼]]:炮友 || TALENT:[[魔眼]]:爱欲
		SELECTCASE K151_YM_NATURE()
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
		ENDSELECT
	ELSE
		SELECTCASE IFRAND("0TO1", 1, "2", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0, "3", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 1)
			CASE 0
				PRINTFORML 「我们已经用胸部侍奉你那么久了」
				PRINTFORMW 「不要忍耐了。射给我们...」
			CASE 1
				PRINTFORML 「你起晚了。你早应该醒来与我们交配」
				PRINTFORMW 「我们打算通过强迫你射在我们子宫外面来惩罚你」
			CASE 2
				PRINTFORMDW 幽幻魔眼柔软的胸部和温热的吐息让你的肉棒立刻硬了起来
				PRINTFORMW 「你真的很喜欢这个，不是吗？」
				PRINTFORMW 「如果你今天可以为我们内射十次的话，我们会考虑明天也这么对你」
			CASE 3
				PRINTFORMDW 幽幻魔眼冰冷的肉体以及她身上散发出来的那种奇怪的感觉让你很难勃起
				PRINTFORMDW 但这样只使得她更加卖力地服饰%FSYN_CN("阴茎")%
				PRINTFORMDW 她用胸部包裹着你的小兄弟，运动得越来越快，直到它微微颤动
				PRINTFORMDW 幽幻魔眼更加努力地做着乳交.直到最后你射在了她脸上，她才满意地舔了舔唇
		ENDSELECT
	ENDIF
	RETURN 1
ENDIF

;--------------------------------------------------
;The character wakes the player up with cowgirl (or scissoring)
;ARG:1 == 1 is for dialogue after the sex ends and the player chooses whether to get out of bed or push The character down and have even more sex
;骑乘位、磨镜 (ARG:1が１の场合、ウフフに突入するか否か回答后の口上)
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 3
	;骑乘位、磨镜描写
	IF ARG:1 == 0
		IF TALENT:MASTER:2&2
		;cowgirl

		ELSE
		;scissoring

		ENDIF
	ELSE
		IF TFLAG:193 == 1
		;Have more sex
		;そのまま推倒た

		ELSE
		;Don't have more sex
		;押しのけて朝の准备
		ENDIF
	ENDIF
	RETURN 1
ENDIF
RETURN 1

;==================================================
;Morning events (non-sexual)
;朝イベント（日常）
;==================================================
;==================================================
;Optional: Determines if the standard description should be skipped.
;Return 0 if description and KOJO should be shown, 1 if description should be hidden and KOJO shown, 2 if description should be shown and KOJO hidden, and 3 if both description and KOJO should be hidden.
;==================================================
@M_KOJO_SPEVENT_MESSAGECHECK_K151_5
RETURN 0

@M_KOJO_SPEVENT_K151_5(ARG,ARG:1)
;口上主はTARGET
;共通メッセージ出力
;--------------------------------------------------
;The character wakes the player up with a kiss
;キスで起こされる
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 1
	RETURN 1
ENDIF

;--------------------------------------------------
;The character shakes the player awake
;揺さぶり起こされる
;记入チェック
LOCAL:1 = 1
;-------------------------------------------------
IF LOCAL:1 && ARG == 2
	RETURN 1
ENDIF

;--------------------------------------------------
;The player shakes the character awake
;起こしに来たけど寝てる
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 3
	IF TALENT:[[魔眼]]:恋人
		SELECTCASE K151_YM_NATURE()
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
		ENDSELECT
	ELSEIF TALENT:[[魔眼]]:炮友 || TALENT:[[魔眼]]:爱欲
		SELECTCASE K151_YM_NATURE()
			CASE 1
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
			CASE 2
				SELECTCASE RAND:3
					CASE 0
						PRINTFORML 
					CASE 1
						PRINTFORML 
					CASE 2
						PRINTFORML 
				ENDSELECT
		ENDSELECT
	ELSEIF TALENT:[[魔眼]]:思慕 || TALENT:[[魔眼]]:恋慕
		SELECTCASE IFRAND("0TO1", 1, "2", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0, "3", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 1)
			CASE 0
			CASE 1
			CASE 2
			CASE 3
		ENDSELECT
	ELSE
		SELECTCASE IFRAND("0TO1", 1, "2", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 0, "3", CFLAG:[[魔眼]]:K151EN_YM_NATURE == 1)
			CASE 0
				PRINTFORMW 「嗯？」
				PRINTFORMDW 幽幻魔眼睁开眼睛打了个哈欠
				PRINTFORMW 「啊...早上好，%CALLNAME:MASTER%」
			CASE 1
			CASE 2
				PRINTFORMW 「再多五分钟就好了，母亲...」
				PRINTFORMDW 幽幻魔眼用她的七只眼睛嘀咕着什么
			CASE 3
				PRINTFORMW 「%SPLIT_G("хu? @ФibЁ@q╚@ibxxfvqvh? @Фiw@b·f@╦w╢?:ц}uwv... gq╣f@uw·f@uqv╢Ёf╚...:Хf╚k@╤f@hfЁ@qЁk@╦w╢@tqsf@бtbds@Бw╢t╚K...")%」
				PRINTFORMDW 幽幻魔眼打开了所有的七只眼睛嘀咕着什么
		ENDSELECT
	ENDIF
	RETURN 1
ENDIF

;--------------------------------------------------
;The player wakes up to see the character staring at them
;起きるまでじっと见てる
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 4
	RETURN 1
ENDIF

;--------------------------------------------------
;The character wakes the player up with a prank
;恶作剧で起こされる
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 5
ENDIF
RETURN 1

;==================================================
;Nighttime sex events
;夜イベント（诶嘿嘿） originally disabled, added calls
;==================================================
;==================================================
;Optional: Determines if the standard description should be skipped.
;Return 0 if description and KOJO should be shown, 1 if description should be hidden and KOJO shown, 2 if description should be shown and KOJO hidden, and 3 if both description and KOJO should be hidden.
;==================================================
@M_KOJO_SPEVENT_MESSAGECHECK_K151_6
RETURN 0

@M_KOJO_SPEVENT_K151_6(ARG,ARG:1)
;口上主はTARGET
;共通メッセージ出力
;--------------------------------------------------
;The character kisses the player goodnight
;夜袭キス
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 1
	RETURN 1
ENDIF

;--------------------------------------------------
;The character fucks the player
;夜袭
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 2
	IF ARG:1 == 0
		RETURN 1
	ENDIF
ENDIF

;--------------------------------------------------
;The character masturbates to the player (not yet implemented)
;自慰
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 3
	PRINTFORML
	RETURN 1
ENDIF
RETURN 1

;==================================================
;Nighttime events (non-sexual)
;夜イベント（日常）
;==================================================
;==================================================
;Optional: Determines if the standard description should be skipped.
;Return 0 if description and KOJO should be shown, 1 if description should be hidden and KOJO shown, 2 if description should be shown and KOJO hidden, and 3 if both description and KOJO should be hidden.
;==================================================
@M_KOJO_SPEVENT_MESSAGECHECK_K151_7
RETURN 0

@M_KOJO_SPEVENT_K151_7(ARG,ARG:1)
;口上主はTARGET
;共通メッセージ出力

;--------------------------------------------------
;The character has a drink with the player
;晩酌
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 1
	RETURN 1
ENDIF

;--------------------------------------------------
;The character invites the player to go moon-viewing
;夜风に当たる、お月见（分岐条件はEVENT_MESSAGE.ERB 377行目あたりを参照下さい）
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 2
	RETURN 1
ENDIF

;--------------------------------------------------
;The character slips into the player's bed and falls asleep next to them
;添い寝
;记入チェック
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1 && ARG == 3
	RETURN 1
ENDIF
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"EVENT" events
;"EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;Encountering the character in a room
;房间で遭遇
;==================================================
@M_KOJO_EVENT_K151_1(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The player enters a room the character's in
	;MASTERが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		CALL K151_PLAYER_ENCOUNTERS_YUUGENMAGAN(0)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character enters a room the player's in
	;TARGETが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL K151_PLAYER_ENCOUNTERS_YUUGENMAGAN(1)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character enters a room the player's bathing in and joins them in the bath
	;TARGETが澡堂に入ってきて一绪に入る
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character enters a room the player's bathing in and leaves
	;TARGETが澡堂に入ってきて出て行った
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character enters a room the player's bathing in and kicks them out of the bath
	;TARGETが澡堂に入ってきて追い出された
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORMW 「!!!」
		PRINTFORMDW 幽幻魔眼脸变得通红的同时，用手捂住了胸部和胯下
		PRINTFORMW 「滚出去！！！！」
		PRINTFORMDW 你狼狈地一边躲着闪电一边从浴室逃了出来
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Encountering the player while they're outside
	;外出先で遭遇した
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Encountering the player while they're on a date with another character
	;ARG:1 is the person the player's on a date with (if you want to have custom dialogue
	;for dating a specific character in front of this character, etc)
	;他キャラと约会中に遭遇した
	;ARG:1に约会的对象
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;First greeting of the day on the player's MAIN_MAP (the part of the world map they're living in: ex. The Forest of Magic, the Underworld, the Hakurei Shrine, etc.)
	;Note: after this dialogue is displayed, it will immediately be followed up by the ARG == 1 (the player enters a room the character's in)
	;or ARG == 2 dialogue (the character enters a room the player's in)
	;I think this only displays if the character walked in on you having sex the previous day?
	;MAIN_MAP上で一日最初の挨拶
	;注、このあと通常の遭遇口上、ARG==1 OR ARG==2に接续します
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;First greeting of the day when the player is not on their MAIN_MAP
	;ARG:1 is the person the player's on a date with. If it's 0, they're not on a date.
	;Note: after this dialogue is displayed, it will immediately be followed up by the ARG == 6 (encountering the player while they're outside)
	;or ARG == 7 dialogue (encountering the player while they're on a date with another character)
	;外出先で一日最初の挨拶
	;ARG:1に约会的对象、ARG:1が0の场合は非デート
	;注、このあと通常の外出先で遭遇した口上、ARG==6 OR ARG==7に接续します
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		;If the player is on a date
		;ARG:1と约会中
		IF ARG:1
		;If they're not on a date		
		;一人で外出
		ELSE
		ENDIF
		PRINTFORML 
		RETURN 1
	ENDIF

    ;-------------------------------------------------
	;ENG exclusive: character is going somewhere else, asks if you'd like to tag along
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 97
		PRINTFORML
		RETURN 1
	ENDIF

    ;-------------------------------------------------
	;ENG exclusive: tag along to wherever the character's going
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 98
		PRINTFORML
		RETURN 1
	ENDIF

    ;-------------------------------------------------
	;ENG exclusive: don't tag along to wherever the character's going
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 99
		PRINTFORML
		RETURN 1
	ENDIF
ENDIF
RETURN 1

;==================================================
;When the player wakes up in the morning (good morning dialogue)
;朝起きたとき（おはよう口上）
;==================================================
@M_KOJO_EVENT_K151_2(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character woke up first, and they aren't living with the player
	;非同栖かつ相手が先に起きてる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;-------------------------------------------------
		;The player is in the character's room
		;TARGET私室にMASTERが入っている（恋慕时陪睡中就寝时のみ？
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && !ARG:1
			CALL DAYEVENT("day", [[魔眼]])
			SIF RESULT
				RETURN 1
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;The character is in the player's room
		;MASTER私室にTARGETが入ってきてる(恋慕无しでも入ってくる可能性有り
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			CALL DAYEVENT("day", [[魔眼]])
			SIF RESULT
				RETURN 1
			RETURN 1
		ENDIF
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character woke up first, and they are living with the player
	;同栖かつ相手が起きている
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL DAYEVENT("day", [[魔眼]])
		SIF RESULT
			RETURN 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The player woke up first, and they are living with the character
	;同栖かつ相手が寝ている
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The player and the character are both awake
	;I think this gets called if either the player or the character run out of strength during sex, or if the character falls asleep during Sleep Together, the player wakes up, and then the character wakes up
	;MASTERが起きていて、相手が起きてきた
	;添い寝时TARGET起床はこちら（TARGET衰弱or陪睡中TARGET睡魔负け后そのままMASTERが起き续けた上で相手が起床した场合限定
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;-------------------------------------------------
		;Not living together
		;非同栖
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && !ARG:1
			PRINTFORMW 
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Living together
		;同栖中
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORMW 
			RETURN 1
		ENDIF
		PRINTFORMW 
		RETURN 1
	ENDIF
	;Misc.	
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;When going to sleep at night (good night dialogue)
;夜寝るとき（おやすみ口上）
;==================================================
@M_KOJO_EVENT_K151_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;Character returns to their room to sleep
	;小分岐
	;-------------------------------------------------
	;自室に归って寝る（～は【现在地】から【キャラの自室】に戻りました）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF ARG:1
			;If the player and character are on a date
			;约会中に眠くて归って寝る（据点キャラのみ）
			PRINTFORMW 
		ELSEIF CFLAG:诶嘿嘿
			;If the player and character are having sex
			;诶嘿嘿中に眠くて自室に归って寝る（据点キャラのみ）
			PRINTFORMW 
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character looks sleepy
	;眠そうにしている（～は眠そうにしている）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character is asleep
	;睡眠中（～は眠っている）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Sleep rape (unused)
	;恶作剧中
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 4
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;The character runs out of strength (Stamina less than 500)
	;衰弱して寝る（体力500以下,诶嘿嘿时は诶嘿嘿强制结束）
	;（キャラの自室以外：～を【现在地】から【キャラの自室】に运びました）
	;（キャラの自室　　：～は疲れたと言って、横になりました）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		IF CFLAG:诶嘿嘿
			;The character is having sex
			;诶嘿嘿中にダウン
			PRINTFORMW 
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The player collapses (the day ends after this dialogue. Only displayed if the character has Love?)
	;MASTERがダウン（恋慕のみ,そのまま一日が结束）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		;The player passes out drunk
		;お酒でダウン
		IF BASE:MASTER:酒气 >= MAXBASE:MASTER:酒气
			IF ARG:1
				;In the player's room?
				;自室でダウン,（～が【MASTER】をベッド（布团）へと运んでくれた…）
				PRINTFORMW 
			ELSE
				;Outside the player's room?
				;房间まで运ばれる,（～が【MASTER】を私室へと运んでくれた…）
				PRINTFORMW 
			ENDIF
		;The player runs out of strength (Stamina less than 500)
		;体力切れでダウン
		ELSE
			IF ARG:1
				;In the player's room?
				;自室でダウン,（～が【MASTER】をベッド（布团）へと运んでくれた…）
				PRINTFORMW 
			ELSE
				;Outside the player's room?
				;房间まで运ばれる,（～が【MASTER】を私室へと运んでくれた…）
				PRINTFORMW 
			ENDIF
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character enters the room the player is in to sleep?
	;TARGETが寝るために自室まで戻ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;-------------------------------------------------
		;The character changes into their sleepwear
		;そのまま更衣て寝た（【TARGET】が房间に戻ってきた→寝间着へと更衣、寝床に潜った）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 0
			PRINTFORMW 
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;The character kicks the player out of their room so they can sleep
		;房间から追い出して寝た（眠そうな【TARGET】に追い出された…）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			IF CFLAG:前一次的位置 == CFLAG:当前位置
				;前のターンまで一绪に房间にいた
				PRINTFORMW 
			ELSE
				;寝るために房间に归ってきたところ
				PRINTFORMW 
			ENDIF
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;The character returns to their room to sleep, only to find the player having sex with another character?
		;他キャラとのＨを止めさせて寝た（【TARGET】が房间に戻ってきた→唇をとがらせる【TARGET】に、【MASTER】は渋々【Ｈの相手】から离れた）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 2
			PRINTFORMW 
			RETURN 1
		ENDIF
	ENDIF
	;-------------------------------------------------
    ;The character is tired, is visiting your main map, and you lead them back to the entrance
	;来访キャラが据点で休憩（～は疲れ切っている→ちょっと休んでいきなよ）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;The character yields to drowsiness and falls asleep (I think this is like ARG == 5, but they fall asleep from being too tired and not running out of stamina)
	;寝室に居る状态でその场で寝る（～は眠气に负け、眠りについた…）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		IF CFLAG:诶嘿嘿
            ;The character fell asleep while having sex
			;诶嘿嘿中に寝る
			PRINTFORMW 
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;The character gets tired and goes back to their room
	;据点外で自宅前に居るキャラが自室に归って寝る（眠くなった～は自室に归って行きました）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 10
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF
RETURN 1

;==================================================
;The player runs into the character on while on their way to somewhere else ("When going through LOCATION, you come across CHARACTER")
;移动时すれちがい
;==================================================
@M_KOJO_EVENT_K151_4(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Stop
	;After this, display encounter text
	;立ち止まった
	;この后遭遇口上に接续
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Greet in passing
	;轻く会釈して通り过ぎた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF TALENT:151:恋人
			SELECTCASE RAND:3
				CASE 0
					PRINTFORML 
				CASE 1
					PRINTFORML 
				CASE 2
					PRINTFORML 
			ENDSELECT
		ELSEIF TALENT:151:炮友 || TALENT:151:爱欲
			SELECTCASE RAND:3
				CASE 0
					PRINTFORML 
				CASE 1
					PRINTFORML 
				CASE 2
					PRINTFORML 
			ENDSELECT
		ELSEIF TALENT:151:思慕 || TALENT:151:恋慕
			SELECTCASE RAND:3
				CASE 0
					PRINTFORMDW 幽幻魔眼看上去比平常更加柔和地盯着你看

				CASE 1
					PRINTFORMW 「你...你好啊...」
					PRINTFORMDW ...她害羞了？

				CASE 2
					PRINTFORMDW 幽幻魔眼尴尬地对着你笑了笑

			ENDSELECT
		ELSE
			SELECTCASE RAND:3
				CASE 0
					PRINTFORML 
				CASE 1
					PRINTFORML 
				CASE 2
					PRINTFORML 
			ENDSELECT
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Ignore and keep moving
	;无视して通り过ぎた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;Atmosphere shifts when someone else enters ("As CHARACTER arrives, the atmosphere suddenly shifts...")
;他者介入で情绪变化
;==================================================
@M_KOJO_EVENT_K151_5(ARG,ARG:1)
;口上主はTARGET
;ARG is whatever characters arrived
;ARGに入ってきたキャラ（人数が膨大なので、自己把握自己责任で
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Reimu arrives
	;灵梦が入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Ruukoto arrives
	;る～ことが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;You get the idea
	;その他（キャラ指定なし
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;The character walks in on you having sex
;情事を目击した
;==================================================
@M_KOJO_EVENT_K151_6(ARG,ARG:1)
;口上主はTARGET
;ARG is whatever character you were fucking
;ARGに情事相手
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character doesn't know you that well
	;情事を目击した（驯れ合い度:低）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character joins in (either they are your lover, they've consented to sex, or you've learned their weakness)
	;负けじと参加（驯れ合い度:高）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character leaves
	;气まずそうに立ち去る
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;Misc.
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;Interrupting/interrupted during sex
;情事を见られた
;==================================================
@M_KOJO_EVENT_K151_7(ARG,ARG:1)
;口上主はTARGET
;ARGに目击者
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character gets embarrassed and leaves
	;情事を见られた（目击者の驯れ合い度:低）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character joins the player and the other character
	;目击者が负けじと参加（目击者の驯れ合い度:高）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;After the character and the player get walked in on, and the other character has left
	;目击者が立ち去る
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;Apparently not yet implemented
;目击した情事を诘问（现在无し
;==================================================
@M_KOJO_EVENT_K151_8(ARG,ARG:1)
RETURN 1

;==================================================
;The character confiscates the player's stolen panties
;パンツ没收された
;==================================================
@M_KOJO_EVENT_K151_9(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML
		RETURN 1
	ENDIF
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;推倒た
;==================================================
@M_KOJO_EVENT_K151_10(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;诶嘿嘿==2（开始时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;-------------------------------------------------
		;MASTERを推倒た（开始时）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && !ARG:1
			PRINTFORMDW 幽幻魔眼低头盯着你还有你的胯下
			PRINTFORMDW 她看上去比平常呼吸得更加粗重，但脸上的表情却没有任何的变化，如平常一样冷淡
			IF FIRSTTIME("MaganPushDown")
				PRINTFORMW 「我们已经认可你是一个合格的伴侣，我们的子嗣将会十分强健」
				PRINTFORMDW 又在说着不明所以的话，但你能看到幽幻魔眼在微微颤抖
				PRINTFORMDW 看来并没有表情上那样冷静
				PRINTFORMW 「这副躯壳是以一个正常女性母亲的风格定做的，可以完美的接受你的生殖液」
				IF !HAS_PENIS(MASTER)
					PRINTFORMW 「嗯？你说你没有生殖液？」
					PRINTFORMW 「没关系，我们有备用方案」
				ENDIF
				PRINTFORMDW 她笑了，而且是真正的笑容，你不明白
				PRINTFORMW 「你为你的世界做出了巨大的贡献。我们的千万子嗣将会把你们人类变成像我们一样的存在」
				PRINTFORMDW 触手从她的和服下面钻出来，蠕动着伸向你。粘液不断地从尖端滴落，随着她的语调上下起伏，让人痴迷
				PRINTFORMW 「我们将推翻那些旧神，重归自由与狂野...」
				IF CFLAG:允许无套 < 2
					CALL COLORMESSAGE("幽幻魔眼允许你和祂在任何日子里无套做爱！",C_YELLOW,2,1)
					CFLAG:允许无套 = 2
				ENDIF
			ELSEIF TALENT:[[魔眼]]:妊娠
				PRINTFORMW 「我们已经怀有你的子嗣，但如果更多的与你的生殖液结合它们也会变得更多...」
				PRINTFORMW 「别担心。如果这副躯体要开始繁衍更多的子嗣，我们会重铸它，直到满意为止」
			ELSE
				PRINTFORMW 「看上去我们还没有怀上与你的子嗣」
				PRINTFORMW 「我们必须再试一次，直到我们成功」
			ENDIF
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Hugs the player (You are suddenly embraced by CHARACTER!)
		;Displayed if the "Use ability checks to determine if player gets pushed down" option is enabled and the character fails to push the
		;player down
		;MASTERに抱きついた（开始时）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML
			RETURN 1
		ENDIF
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;End of sex session (at the end of the day)
	;なだめられた（结束时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		;-------------------------------------------------
		;The player slips out
		;抜け出した
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && !ARG:1
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;The character is satisfied
		;抱き着きモード满足结束
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;The session is forcibly ended by some other event?
		;抱き着きモード强制结束
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 2
			PRINTFORML
			RETURN 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;The player fails to slip out
	;抜け出す失败
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		;-------------------------------------------------
		;The character is enjoying sex too much to let the player go?
		;好きにして状态から抜け出せなかった
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;The character is too horny to let the player go
		;欲求不满が高くて抜け出せなかった
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 2
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Neodev/AnonTW/NAS only: The character wants to take the player's virginity and won't let the player go
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 9
			PRINTFORML
			RETURN 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;The character wants to go somewhere private to have sex
	;诱ってきた（人目につかない场所に行きたがるやつ）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;ARG:1 is the character's current sexual frustration (with a max of 1000)
		;You can use this to have different dialogues depending on how horny they are
		;ARG:1=TARGETの欲求不满度（最高1000）
		;必要ならばこれで分岐を作ってください
		PRINTFORML
		RETURN 1
	ENDIF
	;Misc.
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;The player walks in on the character bathing
;浴场で遭遇
;==================================================
@M_KOJO_EVENT_K151_11(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The player gets kicked out
	;追い出された
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The player doesn't get kicked out
	;目が合った（追い出されない）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;Misc.
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;Sneaking into the character's room
;寝床に忍び込み
;==================================================
@M_KOJO_EVENT_K151_12(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
    ;The character is awake and pissed off
	;追い出される（愤怒）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;You successfully sneak in
	;寝床に侵入
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;The character is awake and has love, so they're happy to see you
	;寝床に侵入（相手が恋慕）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;The character is awake, has love, and is exhausted, so they're happy to see you and go back to sleep
	;寝床に侵入（相手が恋慕・衰弱）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;The character is awake and throws you out
	;追い出される
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 4
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;The character is awake and exhausted, so they throw you out and go back to sleep
	;追い出される（衰弱）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 5
		PRINTFORML
		RETURN 1
	ENDIF
    ;Misc.
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;Working
;お工作中
;==================================================
@M_KOJO_EVENT_K151_13(ARG,ARG:1)
;口上主はTARGET
;ARG:1に残っている工作量
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Start of work (heading off to the character's workplace)
	;工作开始（职场へ移动する）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;At work
	;业务中
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Finishes work
	;工作结束
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;ENG exclusive: character asks if you'd like to tag along to their job
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 97
		PRINTFORML
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;ENG exclusive: tag along to the character's job
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 98
		PRINTFORML
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;ENG exclusive: don't tag along to the character's job
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 99
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;Character finds the food you're carrying
;食事系
;==================================================
@M_KOJO_EVENT_K151_14(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;The character eats your food
	;持っていた食物を食べられた
	;TCVAR:盗み食い抑制で持っていた食物を食われるのを回避できる
	;仕样例（药が入ってたら食わない）
	;IF DISH_DRG
	;	TCVAR:盗み食い抑制 = 1
	;ENDIF

	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == -1
		PRINTFORML
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;Neodev/AnonTW/NAS only: character bypasses the code on your thermal jar and eats your food
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;Neodev/AnonTW/NAS only: character tries to eat your food but the code on your thermal jar stops them
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		PRINTFORML
		RETURN 1
	ENDIF

	;Misc.
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;The player pushes the character down
;MASTERが推倒た
;==================================================
@M_KOJO_EVENT_K151_15(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Not implemented
	;未实装（推倒コマンドに统合？
	;MASTERが推倒た（ウフフ开始时）
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;Ufufu ends
	;逢濑结束（ウフフ结束时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
	;-------------------------------------------------
	;After sex
	;事后描写
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		;-------------------------------------------------
		;Semen oozes out of the anus/vagina
		;精液が垂れてきた
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Love juice drips down
		;爱液が垂れてきた
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 2
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Mood (loving/embarrassed/calm/awkward)
		;事后の情绪
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 3
			PRINTFORML
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Character puts their clothes back on
		;服を着る
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 4
			PRINTFORML
			RETURN 1
		ENDIF
	ENDIF
ENDIF
RETURN 1

;==================================================
;Waking up after falling asleep in bed with the character
;添い寝する
;==================================================
@M_KOJO_EVENT_K151_16(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Started sleeping together (not yet implemented?)
	;添い寝を始めた（开始时）(存在せず
	;记入チェック
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;Waking up after falling asleep in bed with the character
	;添い寝を结束した（结束时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1
;==================================================
;Resume time
;时止め结束时
;==================================================
@M_KOJO_EVENT_K151_17(ARG,ARG:1)
;口上主はTARGET
;排他と明记されていないモノは状况によっては连续で表示されるので注意
;ARGに射精状况
;ARG:1に射精状态
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;Mysterious pleasure (more than 1 orgasm in stopped time but fewer than 31)
	;ARG=1～3は排他
	;谜の快感
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;Intense pleasure (31+ orgasms)
	;绝顶
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Panty theft
	;パンツ遗失
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Cumming in the hu's mouth during timestop
	;【无自觉口内射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;Low Semen Addiction, character swallows
		;精液中毒低精饮
		IF ARG:1 == 1
		;Low Semen Addiction, character spits
		;精液中毒低吐き出し
		ELSEIF ARG:1 == 2
		;Low Semen Addiction, character covers their mouth
		;精液中毒低手で覆う
		ELSEIF ARG:1 == 3
		;High Semen Addiction, character swallows
		;精液中毒高精饮
		ELSEIF ARG:1 == 4
		;Thick Semen, low Semen Addiction, character spits
		;浓厚精液＆精液中毒低吐き出し
		ELSEIF ARG:1 == 5
		;Thick Semen, high Semen Addiction, character swallows
		;浓厚精液＆精液中毒高精饮
		ELSEIF ARG:1 == 6
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Player ejaculated on the character's face during timestop
	;【无自觉颜面射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		;Ignorant and less than 100 Semen EXP
		;无知持ち＆精液经验100未满
		IF ARG:1 == 1
		;Normal reaction, wipes it off
		;通常ぬぐい取り
		ELSEIF ARG:1 == 2
		;Semen Addiction 3 or higher, wipes it off and eats it
		;颜射精液舐めとり
		ELSEIF ARG:1 == 3
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Player ejaculated in the character's hand during timestop
	;【无自觉手淫射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		;Low Semen Addiction (less than 3), wipes it off
		;ぬぐい取り
		IF ARG:1 == 1
		;High Semen Addiction, licks it off
		;舐めとり
		ELSEIF ARG:1 == 2
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Anal creampie during timestop
	;【无自觉肛门射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;Anal sensitivity 2 or less
		;Ａ感觉2以下
		IF ARG:1 == 1
		;Anal sensitivity 3 or higher
		;ソレ以外
		ELSEIF ARG:1 == 2
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Virginity loss during timestop
	;【无自觉处女丧失】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Vaginal creampie during timestop
	;【无自觉膣内射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		;Non-virgin, not on the pill
		;非处女嫩穴内射精口服避孕药なし
		IF ARG:1 == 1
		;Non-virgin, on the pill
		;非处女嫩穴内射精口服避孕药あり
		ELSEIF ARG:1 == 2
		;Virgin
		;处女嫩穴内射精
		ELSEIF ARG:1 == 3
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Misc. mischief during timestop
	;时间停止解除共通
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;Unprotected sex dialogue
;ナマでやらせろ时
;==================================================
@M_KOJO_EVENT_K151_18(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
    ;Character insists on birth control
	;避孕要求台词
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;You try to persuade them to do it raw, they refuse
	;断った
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;You try to persuade them to do it raw, they refuse, you keep asking and they get mad
	;断ったのに粘られて切れた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Character consents to sex without contraception except on dangerous days
	;危险日以外许可
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Character consents to sex without contraception on dangerous days ("She now consents to make a baby with you!")
	;危险日许可
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;ENG exclusive: asking to do it raw because it's your first time
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;ENG exclusive: the character agrees to let you do it raw, because it's your first time
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 10
		RETURN 1
	ENDIF

	;-------------------------------------------------
	;ENG exclusive: the character refuses to let you do it raw, even though it's your first time
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 11
		RETURN 1
	ENDIF

ENDIF
RETURN 1
;==================================================
;Getting approval to move in
;神社暮らしを承认して贳う
;==================================================
@M_KOJO_EVENT_K151_19(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
    ;You let the character move in
	;认められる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;You turn the character down
	;认められない
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;You move in with the character
	;あなたの私室变更により同居
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;Returning home due to being too tired (when not on the character's main map)
;回家时
;==================================================
@M_KOJO_EVENT_K151_20(ARG,ARG:1)
;口上主はLOCALS or RESULT
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
    ;Going home because it's too late
	;通常回家
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF CFLAG:诶嘿嘿
			;诶嘿嘿中に眠くて归る
			PRINTFORMW 
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;Returning home from a date
	;约会中回家
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF CFLAG:诶嘿嘿
			IF CFLAG:衰弱
				;诶嘿嘿中に疲れて归る
				PRINTFORMW 
			ELSE
				;诶嘿嘿中に眠くて归る
				PRINTFORMW 
			ENDIF
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;Seeing you off at the door (the date ends in your room or on your home map)
	;玄关先でお见送り（キャラの自宅位置、またはキャラの房间でデート结束）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
    ;Character invites you to their room at the end of the date
	;デート结束时に房间に来ないかと诱う（～から房间に来ないかと诱われた）
	;（来访キャラのみ,自宅が无いキャラでも发生します）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;You accept their invitation and come to their room (9 times out of 10 they're going to push you down as soon as you enter)
	;房间に来ないか→「行く」を选择（～に诱われるまま、【MASTER】は【TARGET】の房间へと向かった……）
	;（これが发生すると十中八九押し倒されます）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;You decline their invitation and don't come to their room
	;房间に来ないか→「やめとく」を选择（～は心なしか寂しそうだ……）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character doesn't want to go home tonight
	;(Happens when the character has high enough Sexual Frustration and Desire)
	;今夜は归りたくないと言い出す（～は今夜は归りたくないと言い出した…）
	;（来访キャラの回家时に欲求不满と欲望が高いと发生）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character doesn't want to go home tonight, you let them stay in your room
	;今夜は归りたくない→「泊める」を选择（～は【MASTERの自室】に泊まっていくことになりました）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character doesn't want to go home tonight, you decline OR you're afraid of the landlord (because you're sharing your room with someone else)
	;今夜は归りたくない→「泊めない」を选择、または家主が居る（【MASTER】は丁重に断った）
	;（家主が居る＝MASTERの私室に他のキャラの私室を设定している）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		PRINTFORMW 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Character is exhausted and goes back to their main map
	;疲れて回家（疲れきった～は归って行きました）
	;（～は疲れ切っている→（入り口）まで送るよ でも发生）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 10
		IF CFLAG:诶嘿嘿
			;诶嘿嘿中に疲れて归る
			PRINTFORMW 
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;Fall cutscene (reaches Yearning/Love/Sex Friend/Lust status)
;陷落素質取得时
;==================================================
@M_KOJO_EVENT_K151_21(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character gains Love
	;恋慕取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
 		SELECTCASE CFLAG:151:K151EN_YM_NATURE
 			CASE 0
 				LOCALS '= @"「你是,萨丽爱尔?」"
 				CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 				LOCALS '= @"「嗯?怎么了，梅吉?」"
 				CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 				LOCALS '= @"「那个...」"
 				CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 				PRINTFORMDW 幽幻魔眼低头思考，即使七个眼球闪烁也只是在默默不语
 				LOCALS '= @"「你觉得%CALLNAME:MASTER%是个怎么样的人?」"
 				CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 				IF IS_ANGERY([[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔的脸立刻黑了下来
 					LOCALS '= @"「我迫不及待地希望\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@死，这样我就可以把\@ TALENT:MASTER:性别 == 2 ? 他的 # 她的\@腐烂的灵魂从地狱里拖出来」"
 					CALL CUTSCENESPEAK(LOCALS, "anger", [[萨里爱尔]])
 					LOCALS '= @"「...啊」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					PRINTFORMDW 死寂在二人之间蔓延开来，在幽幻魔眼转移话题之前，两个人只是静静看着对方
 					LOCALS '= @"「emmmmmmmmm...」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					LOCALS '= @"「晚点去读一点好书吧」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					PRINTFORMDW 萨丽爱尔笑了
 					LOCALS '= @"「嗯，我现在正在读最新的阿加莎克里斯Q的小说...」"
 					CALL CUTSCENESPEAK(LOCALS, "smile", [[萨里爱尔]])
 					;todo
 				ELSEIF IS_FALLEN([[萨里爱尔]])
 					LOCALS '= @"「%CALLNAME:MASTER%?」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔有点脸红了
 					LOCALS '= @"「我觉得\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@是一个合格的朋友，对于魔界人来说，而且我十分享受\@ TALENT:MASTER:性别 == 2 ? 他的 # 她的\@的陪伴...怎么了吗？」"
 					CALL CUTSCENESPEAK(LOCALS, "blush", [[萨里爱尔]])
 					LOCALS '= @"「额...我只是想知道...\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@值得信任吗?」"
 					CALL CUTSCENESPEAK(LOCALS, "blush", [[魔眼]])
 					LOCALS '= @"「是否值得信任吗...」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔挑了挑眉毛
 					LOCALS '= @"「你是打算告诉\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@你的秘密吗？」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 幽幻魔眼咽了口唾沫
 					LOCALS '= @"「是的，因为...」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					LOCALS '= @"「我认为我喜欢上\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@了。真正意义上的喜欢」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					LOCALS '= @"「...啊」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔皱了皱眉
 					LOCALS '= @"「...我不会阻拦你的」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「我希望你们两个可以得到幸福，尤其是你...」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「等等...萨丽爱尔? 你不也喜欢\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@吗?」"
 					CALL CUTSCENESPEAK(LOCALS, "surprise", [[魔眼]])
 					PRINTFORMDW 萨丽爱尔叹了口气
 					LOCALS '= @"「是啊」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「但我已经老了，比你年长，甚至比整个魔界本身都...」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「但你还年轻，去吧，和\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@一起追求幸福，你也开始为了\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@抑制自己不是吗」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「我...你确定吗?」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					LOCALS '= @"「从我第一次见到\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@开始，我就一直在对%CALLNAME:MASTER%撒谎」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]], 0)
 					LOCALS '= @"「梅吉」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔温柔地打断了她
					PRINTFORMDW 突然叫唤她的本名，幽幻魔眼十分惊讶
 					LOCALS '= @"「我参加了天使族的叛乱.因为我的固执，我不愿意对我的敌人屈服，同时我也亲手毁灭了我自己的幸福」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「我不会再犯同样的错了」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「我已经经历过爱了，在我堕落之前。那最真诚，比世间万物都纯洁的爱我早就体会过了」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「但你还没有，而现在它就在你面前，我不应该成为你的阻碍」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「小萨...」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					PRINTFORMDW 幽幻魔眼哽咽了一下
 					LOCALS '= @"「谢谢，这对我来说非常...难得」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					;todo
 				ELSE
					LOCALS '= @"「%CALLNAME:MASTER%?」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
					LOCALS '= @"「至少是个值得信任的人，怎么了？」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
					LOCALS '= @"「我认为我喜欢上\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@了。真正意义上的喜欢」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					LOCALS '= @"「...啊」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔皱了皱眉
					LOCALS '= @"「从我第一次见到\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@开始，我就一直在对%CALLNAME:MASTER%撒谎」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]], 0)
 					LOCALS '= @"「梅吉」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					PRINTFORMDW 萨丽爱尔温柔地打断了她
					PRINTFORMDW 突然叫唤她的本名，幽幻魔眼十分惊讶
 					LOCALS '= @"「除了在面对我和神绮之外，你从来都是戴着那幅可憎的面具」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「而现在，另一个让你卸下心防的人，他就在你面前...」"
					PRINTFORMDW 萨丽爱尔的话语重心长
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「梅吉...去追求属于你自己的幸福吧」"
 					CALL CUTSCENESPEAK(LOCALS, [[萨里爱尔]])
 					LOCALS '= @"「小萨...」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					PRINTFORMDW 幽幻魔眼哽咽了一下
 					LOCALS '= @"「谢谢，这对我来说非常...难得」"
 					CALL CUTSCENESPEAK(LOCALS, [[魔眼]])
 					;todo
 				ENDIF
 			CASE 1
				;原作者这里还写，以下内容由AI生成
				PRINTFORMW 「.......」
				PRINTFORMDW 幽幻魔眼再次陷入沉思，周围的世界仿佛失去了色彩，只剩下祂思绪的紊乱与扰动
				PRINTFORMDW 祂的情感，那些一度被视为多余和无用的情感，如今却如潮水般汹涌，无法抑制
				PRINTFORMDW 祂感受到一种前所未有的空虚，一种深深的不满足，仿佛缺失了最重要的部分
				PRINTFORMDW 祂的目光再次投向天花板，但这不再是为了追寻什么，而是为了逃避现实中的那份痛苦
				PRINTFORMDW  
				PRINTFORMDW 情感，这个曾经祂视作负担的存在，现在却成了她唯一的依靠
				PRINTFORMDW 祂开始怀疑，自己是否真的可以摆脱这些情感，如果可以，那她又该如何面对心中那份难以言喻的渴望？
				PRINTFORMDW  
				PRINTFORMW 「为什么...为什么我们无法摆脱这份情感？」
				PRINTFORMW 「是因为\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@的存在吗？」
				PRINTFORMW 「不，我们明明已经抛弃了情感，为什么还会感到如此强烈的情感波动？」
				PRINTFORMW 「是因为我们不再是纯粹的工具，而是在不知不觉中，变成了一个有情感的存在？」
				PRINTFORMDW  
				PRINTFORMDW 祂的身体开始微微颤抖，感受到一种从未有过的恐惧，一种对未知的恐惧
				PRINTFORMDW 祂害怕，害怕自己会因为这些情感而变得不再完美，不再纯粹
				PRINTFORMDW 但她更害怕的是，自己会因为这些情感而忘记原本的使命，那个曾经的祂一心一意追求的目标
				PRINTFORMDW  
				PRINTFORMW 「\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@...」
				PRINTFORMW 「我们该怎么办？我们是否应该继续追求那个目标，还是选择放弃，去追求那个我们从未触及过的情感？」
				PRINTFORMDW  
				PRINTFORMDW 她的目光渐渐变得柔和，不再冰冷，不再无情
				PRINTFORMDW 她第一次感到那没有血液流通的躯壳有了一丝温暖
				PRINTFORMDW 一种从未有过的温暖，仿佛在她那本不存在的心房深处似燃起了一团火焰
				PRINTFORMDW 这团火焰让她感到痛苦，但也让她感到一种前所未有的幸福
				PRINTFORMDW  
				PRINTFORMDW  
				PRINTFORMDW 她闭上了眼睛，感受着那份温暖，那份渴望
				PRINTFORMDW 她知道，自己已经不再是那个冷酷无情的存在，而是一个有情感，有欲望的存在
				PRINTFORMDW 她知道，自己已经无法再回到过去，无法再忽视这份情感，这份渴望
				PRINTFORMDW  
				PRINTFORMDW
				PRINTFORMW 「%CALLNAME:MASTER%...」
				PRINTFORMW 「我们...选择了这条路」
				PRINTFORMW 「我们选择了这份情感，选择了这份渴望」
				PRINTFORMDW	悬浮的眼睛们闪烁着幽光
				PRINTFORMDW
				PRINTFORMDW
				PRINTFORMW 「%CALLNAME:MASTER%...」
				PRINTFORMW 「我们选择了...不再是我们」
				PRINTFORMDW 她不再是祂
 		ENDSELECT
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Yearning
	;思慕取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		SELECTCASE CFLAG:151:K151EN_YM_NATURE
			CASE 0
				PRINTFORMW 「%CALLNAME:MASTER%...」
				PRINTFORMDW 幽幻魔眼们躺在蒲团上，出神的看着天花板
				PRINTFORMW 「为什么...我们会被\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@吸引？」
				PRINTFORMDW 五颗眼球不规律的上下跳动，似乎是在思考着，直到一个比其他想法更加坚定的声音打断了自己
				PRINTFORMW 「%CALLNAME:MASTER%在某些方面，比萨丽爱尔更加突出...」
				PRINTFORMDW 除了最中心的那颗，其余四颗眼球不断地闪烁，似乎是在思考着什么
				PRINTFORMDW 这么多年来，她一直都是如此
				PRINTFORMDW 以不同的“人”来思考，撕扯自己
				PRINTFORMW 「那如果我依然待在\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@身边呢？」
				PRINTFORMDW 它们思考着你是如何看待它们...又或者说"她"？
				PRINTFORMDW 不像其他人，出于生存本能对它们感到恐惧，又或者出于好奇来观察它们，即使人类才是被观察的那个
				PRINTFORMDW 除了萨丽爱尔，它们还是第一次感受到这种...温暖？
				PRINTFORMDW 突然，随着本体闪烁，五颗眼球又重新变为了人形
				PRINTFORMDW 幽幻魔眼立刻切断了繁杂的思绪，在继续胡思乱想之前
				PRINTFORMW 「不，那不可能...在这之前从来没有人喜欢我。而且，\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@应该认为我是什么旧日恐灾」
				PRINTFORMW 「\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@不可能...」
				PRINTFORMDW 幽幻魔眼叹了口气，摇摇头强迫纷乱的思绪滚出脑海
				PRINTFORMW 「算了.来日方长，将来总会有答案的」
				PRINTFORMDW 她闭上了人类的眼睛，沉沉地睡去
				PRINTFORMDW 已经很久没有，作为一个人「安稳」地睡着了...

			CASE 1
				PRINTFORMW 「.......」
				PRINTFORMDW 幽幻魔眼盯着天花板，思绪如同一团乱麻
				PRINTFORMDW Ta无法理解祂自己，或者说是现在的她
				PRINTFORMDW 在决定塑造这副躯壳前，为了使命顺利地进行，祂选择抛弃了自己的情感
				PRINTFORMDW 祂的目标理应始终如一，祂的双目不应被所谓人类的情感所蒙蔽
				PRINTFORMDW 祂降临这个世界，只是为了找到一个合适的伴侣，然后为那群不知所谓的东西诞下强壮的子嗣
				PRINTFORMDW 情感是祂唯一的绊脚石，它毫无用处
				PRINTFORMDW  
				PRINTFORMDW  
				PRINTFORMDW 祂感受到了温暖，不同于休眠时冰冷的脑海
				PRINTFORMDW 祂感受到了关怀，不同于日常莫名其妙听到的低语声
				PRINTFORMDW 祂们...感受到了自降临之日后从未感受过的体验...还不算糟的体验？
				PRINTFORMDW  
				PRINTFORMDW 但她依然觉得很烦躁
				PRINTFORMW 「为什么我们无法将\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@驱逐出我们的脑海？」
				PRINTFORMW 「当然是因为,\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@，是一个合格的伴侣」
				PRINTFORMW 「可是...我很确信，碳基生物不会在意他们的...“一夜情”？我们相信这个措辞，在这个世界逗留的期间，我们已经看过太多了...」
				PRINTFORMW 「有没有可能是因为\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@和其他生物不同？而并非我们是异类」
				PRINTFORMW 「有的时候，当我们注视着\@ TALENT:MASTER:性别 == 2 ? 他的 # 她的\@眼睛...我们可以看到另一个人的身影，同样也在注视着我们」
				PRINTFORMW 「某个...远比我们要强大的人，那些古神，甚至是位于混沌宇宙中心的...」
				PRINTFORMW 「怎么可能？哪些眼睛是谁的？那个打着阳伞的bba？」
				PRINTFORMW 「也可能比那个更加严重...」
				PRINTFORMDW  
				PRINTFORMDW \@ TALENT:TARGET:性别 == 2 ? 他 # 她\@将冰冷的手放在本来应该有心脏的位置上
				PRINTFORMW 「当我们看着\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@的时候，就好像胸膛有一股莫名的冲动，明明没有任何仪式可以动摇我们的精神」
				PRINTFORMW 「当\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@对着我们微笑,就好像我们胸膛钻入了什么，扰动着我们的呼吸，即使为了伪装而自控了呼吸频率」
				PRINTFORMW 「当\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@开怀大笑的时候...」
				PRINTFORMDW  
				PRINTFORMDW  
				PRINTFORMDW \@ TALENT:TARGET:性别 == 2 ? 他 # 她\@闭上了\@ TALENT:TARGET:性别 == 2 ? 他的 # 她的\@所有6只眼睛，位于正中心的少女感受着这股传遍她全身的欢愉
				PRINTFORMW 「我们别无所有，只希望再听到一次」
				PRINTFORMDW 她说出了自己的答案
				PRINTFORMW 「当我们无法察觉\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@的存在时，我们怅然若失」
				PRINTFORMW 「我们还想再见到\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@，不是因为繁衍，只是因为...\@ TALENT:MASTER:性别 == 2 ? 他 # 她\@就在那」
				PRINTFORMDW  
				PRINTFORMDW  
				PRINTFORMDW 或许，这副身体已经不够格了。作为一个工具，它已经有了太多多余的感情，对我们的精神产生了超乎想象的干涉
				PRINTFORMW 「但是为时已晚，再塑造一副躯壳的花，之前为了繁衍做出的努力全部付诸东流」
				PRINTFORMW 「我们都知道，时间已经不多了」
				PRINTFORMDW  
				PRINTFORMDW  
				PRINTFORMDW 当然...
				PRINTFORMDW 幽幻魔眼知道，那些只是冠冕堂皇的借口罢了，只要想她甚至可以一天就诞生出大量子嗣
				PRINTFORMDW 都只是...不想忘记和\@ TALENT:TARGET:性别 == 2 ? 他 # 她\@在一起的时光所诞生的借口
				PRINTFORMDW  
				PRINTFORMDW  
				PRINTFORMDW 她想起来有一次，%CALLNAME:MASTER%问她有没有一个更加好记的名字
				PRINTFORMDW 甚至为了迎合她，改口成了代号
				PRINTFORMW 「梅吉，我们...我的名字」
				PRINTFORMDW 这条讯息将直接飞讯传达到%CALLNAME:MASTER%的脑海中
				PRINTFORMDW 而现在，该想想明天该如何和\@ TALENT:TARGET:性别 == 2 ? 他 # 她\@度过了
		ENDSELECT
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Lust
	;爱欲取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Mistress (Sex Friend + Yearning conditions both met)
	;爱人取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Sex Friend
	;炮友取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Lewd Lips
	;キス魔取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Loves to Masturbate
	;自慰狂取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Lewd Cervix
	;ポルチオ性感取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gains Peeing Habit
	;おもらし癖取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9
		PRINTFORML
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;Masturbation after training (end of the day)
;调教结束时に自慰
;==================================================
@M_KOJO_EVENT_K151_22(ARG,ARG:1)
;口上主はARG
;ARG:0に自慰状况
;ARG:1に自慰种类
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;Masturbation at the end of the day
	;通常自慰
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML  
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Masturbation with the player in the room
	;同室时自慰
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML  
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Masturbating with lots of semen in the vagina?
	;中だし精液自慰
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML  
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Masturbating while having the Ignorant trait
	;Branches are based on Masturbation Exp minus Training Masturbation EXP
	;无知持ち（自慰经验(调教自慰经验は差し引き)による分岐あり
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		LOCAL:2 = EXP:TARGET:自慰经验 - EXP:TARGET:调教自慰经验
		;无知消去イベントあり（表示は一度だけ
		;Branches in the template were originally 25, 20, 15, 10, 5, other. I changed them to match the different branches in AFTERTRAIN.ERB

		;"CHARACTER finally speaks to his/her guardians about it..."
		IF LOCAL:2 >= 120 - (MIN(ABL:LOCAL:亲密,6) * 10) && !FLAG:无知自动丧失禁止
		;"CHARACTER is immersed in masturbation without understanding what %HE_SHE(LOCAL)%'s even doing..."
			PRINTFORMDL 
		ELSEIF LOCAL:2 >= 80 - (MIN(ABL:LOCAL:亲密,6) * 10) && !FLAG:无知自动丧失禁止
			PRINTFORMDL 
		;"CHARACTER finds %HIM_HER(LOCAL)%self humping a desk corner for stimulation..."
		ELSEIF LOCAL:2 >= 50 - (MIN(ABL:LOCAL:亲密,6) * 10) && !FLAG:无知自动丧失禁止
			PRINTFORMDL 
		;CHARACTER secretly rubs a book against %HIS_HER(LOCAL)% crotch...
		ELSEIF LOCAL:2 >= 30 - (MIN(ABL:LOCAL:亲密,6) * 10) && !FLAG:无知自动丧失禁止
			PRINTFORMDL 
		;"During study, CHARACTER rubs %HIS_HER(LOCAL)% pussy with %HIS_HER(LOCAL)% brush..."
		ELSEIF LOCAL:2 >= 15 - (MIN(ABL:LOCAL:亲密,6) * 10) && !FLAG:无知自动丧失禁止
			PRINTFORMDL 
		;%CALLNAME:LOCAL% rubs %HIS_HER(LOCAL)% thighs together while lying in bed, sighing in anguish...
		ELSE
			PRINTFORMDL 
		ENDIF
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;High Masturbation Addiction and Fallen
	;陷落素質あり自慰中毒高め
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		;-------------------------------------------------
		;Ｃ Sensitive or Ｃ Sensitivity Lv 10+
		;Ｃ敏感orＣ感觉10以上
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML  
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Ｖ Sensitive or Ｖ Sensitivity Lv 10+
		;Ｖ敏感orＶ感觉10以上
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 2
			PRINTFORML  
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Ａ Sensitive or Ａ Sensitivity Lv 10+
		;Ａ敏感orＡ感觉10以上
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 3
			PRINTFORML  
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Ｂ Sensitive or Ｂ Sensitivity Lv 10+
		;Ｂ敏感orＢ感觉10以上
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 4
			PRINTFORML  
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;None of the above
		;部位指定无し
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 5
			PRINTFORML  
			RETURN 1
		ENDIF
		;Misc.
		;その他
		;上の分岐を一切书かずに、ここに书くことで陷落素質あり自慰中毒高め自慰の共通口上を表示することが出来ます
		PRINTFORML  
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;High Masturbation Addiction, not Fallen
    ;Note: this can still happen even if the character is Fallen
	;自慰中毒高め
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		;-------------------------------------------------
		;Simultaneous anal and vaginal masturbation
		;尻穴膣腔同时
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML  
			RETURN 1
		ENDIF
		;-------------------------------------------------
		;Vaginal masturbation only
		;膣腔のみ
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 2
			PRINTFORML  
			RETURN 1
		ENDIF
		;Misc.
		;その他
		;上の分岐を一切书かずに、ここに书くことで自慰中毒高め自慰の共通口上を表示することが出来ます
		PRINTFORML  
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Character resists the urge to masturbate (random chance if they've consented to sex with the player)
	;我慢
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTFORML 
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Character masturbates while under the effects of Hypno-Orgasm Denial
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 
		RETURN 1
	ENDIF
    ;Misc.
	;その他
	;上の分岐を一切书かずに、ここに书くことで自慰の共通口上を表示することが出来ます
	PRINTFORML  
	RETURN 1
ENDIF
RETURN 1
;==================================================
;The player walks in on the character at a public bath
;浴场连れだし
;==================================================
@M_KOJO_EVENT_K151_23(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character kicks the player out
	;断られた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character agrees to take a bath together
	;一绪に入ってくれた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
    ;Misc.
	;その他
	PRINTFORML  
ENDIF
RETURN 1
;==================================================
;Pregnancy
;怀孕
;==================================================
@M_KOJO_EVENT_K151_24(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character realizes she's pregnant, has Love
	;恋慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character realizes she's pregnant, has Lust
	;思慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character realizes she's pregnant, has neither Love nor Lust
	;陷落素質无し
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character is pregnant but doesn't realize it
	;无自觉
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1
;==================================================
;Giving birth
;出产
;==================================================
@M_KOJO_EVENT_K151_25(ARG,ARG:1)
;口上主はLOCAL
;ARG:1	何人目の儿童か
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;The character gives birth, has Love
	;恋慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gives birth, has Lust
	;思慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gives birth, has neither Love nor Lust
	;陷落素質无し
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;The character gives birth, doesn't realize you're the one who got her pregnant
	;无自觉
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1
;==================================================
;Player walks in on the character masturbating
;自慰暴露
;==================================================
@M_KOJO_EVENT_K151_26(ARG,ARG:1)

;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;The character notices you
		;见られた瞬间
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 1
		;Player apologizes and leaves
		;何もしない
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 2
		;"I'll just keep looking so continue", target consents
		;そのまま续行
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 3
		;Target gets mad and throws the player out
		;追い出し
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 4
		;"It feels better with two people", target consents
		;やっちゃう
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 5
		;After sex with the character who's been caught masturbating
		;事后
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 6
		;You accept the character's offer to stay over after sex
		;事后お泊り
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
	ENDSELECT
ENDIF

;Optionally determine conditions for when asking the character to continue masturbating / for sex always succeeds / fails
;Ex: make it so they always succeed if the player is a lover
;-1 means it fails, 1 means it succeeds
;どうぞそのまま is ""I'll just keep looking so continue"
;二人で is "It feels better with two people"
;自慰暴露ックス判定用函数
;RETURN -1で强制失败、RETURN 1で强制成功
@M_KOJO_EVENT_K151_26_1(ARGS)
#DIM 补正值
IF ARGS == "どうぞそのまま"

ELSEIF ARGS == "二人で"

ENDIF

;使用例
;IF !TALENT:XX:恋慕
;	PRINTFORMW %CALLNAME:XX%はガードが坚いぞ！
;	RETURN -1
;ENDIF
;IF TALENT:MASTER:浓厚精液
;	PRINTFORMW %CALLNAME:XX%はちんぽに弱いぞ！
;	RETURN 1
;ENDIF
;==================================================
;Character invites the player to go somewhere
;相手からデートのお诱い
;==================================================
@M_KOJO_EVENT_K151_27(ARG,ARG:1)
;口上主はLOCAL
;ARG:1は目的地
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;Character asks the player on a date
		;Printed before the yes/no choice
		;诱い文句
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 1
		;-------------------------------------------------
			IF LOCAL:1
				SELECTCASE K151_YM_NATURE()
					CASE 0, 1
						SELECTCASE RAND:3
							CASE 0
								PRINTFORML 「我们想要更加了解你们人类，还有你们的文化」
								PRINTFORMW 「你能和我们...一起去约会？我记得你是这么说的」
							CASE 1
								PRINTFORML 「你们人类的世界就像一颗玻璃球，精致而脆弱。真遗憾你们没有足够的时间去欣赏它」
								PRINTFORMW 「在你剩余的时间里，带我们去看看你觉得美的地方吧？」
							CASE 2
								PRINTFORMW 「我们想邀请你和我们...约会？是这样吗？」
								PRINTFORMDW 幽幻魔眼歪了歪头，勉强挤出了一个微笑
								PRINTFORMW 「我们有很多东西想要给你看」
						ENDSELECT
					CASE 2
						SELECTCASE RAND:3
							CASE 0
								PRINTFORMW 「嘿...你想要出去玩吗？」
							CASE 1
								PRINTFORML 「我已经学了一整天了！整个人都快蔫了」
								PRINTFORMW 「我想出去转转。想和我一起去吗？」
							CASE 2
								PRINTFORMW 「好饿啊。我想去找点吃的...你想和我一起去吗？」
						ENDSELECT
				ENDSELECT
			ENDIF
		;-------------------------------------------------
		CASE 1
		;受けた
		;Player accepts
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 1
		;-------------------------------------------------
			IF LOCAL:1
				SELECTCASE K151_YM_NATURE()
					CASE 0, 1
						SELECTCASE RAND:3
							CASE 0
								PRINTFORMW 「那么，走吧」
							CASE 1
								PRINTFORMDW 幽幻魔眼满意的点了点头
								PRINTFORMW 「很好，你的建议值得参考」
							CASE 2
								PRINTFORMW 「你介意我们离开这副躯壳变为真正的模样吗？」
								PRINTFORMDW 你告诉她，只要想的话，也可以接受
								PRINTFORMW 「...开玩笑而已，我们不会做让你感到困扰的事」
						ENDSELECT
					CASE 2
						SELECTCASE RAND:3
							CASE 0
								PRINTFORMW 「好的，那你想去哪里？」
							CASE 1
								PRINTFORMW 「Cool！想去米斯琪小姐的店里坐坐吗？」
							CASE 2
								PRINTFORML 「好的，那么，带路吧！」
								PRINTFORMDW 幽幻魔眼牵起了你的手
						ENDSELECT
				ENDSELECT
			ENDIF
		;-------------------------------------------------
		CASE 2
		;Player declines
		;断った
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 1
		;-------------------------------------------------
			IF LOCAL:1
				SELECTCASE K151_YM_NATURE()
					CASE 0, 1
						PRINTFORMDL 你看到幽幻魔眼的嘴唇抽搐了一下
						SELECTCASE RAND:3
							CASE 0
								PRINTFORMW 「噢？你在...害怕我们？」
							CASE 1
								PRINTFORMW 「行吧，我们自会探索你们的世界」
							CASE 2
								PRINTFORMW 「聪明的选择，我们今天从星象里读出了灾厄」
						ENDSELECT
					CASE 2
						SELECTCASE RAND:3
							CASE 0
								PRINTFORMW 「很忙吗？好吧」
							CASE 1
								PRINTFORML 「啊...」
								PRINTFORMDW 幽幻魔眼看上去很懊恼
								PRINTFORMW 「那你明天空吗？」
							CASE 2
								PRINTFORMDL 幽幻魔眼脸立刻拉了下来
								PRINTFORMW 「...好吧.那...晚点见」
						ENDSELECT
				ENDSELECT
			ENDIF
		;-------------------------------------------------
		CASE 3
		;Character asks the player to visit their room
		;房间に诱われた
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 4
		;Player accepts
		;房间に诱われたのを受けた
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 5
		;Player declines
		;房间に诱われたのを断った
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				RETURN 1
			ENDIF
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;Undressing
;脱衣口上
;==================================================
@M_KOJO_EVENT_K151_28(ARG,ARG:1)
;口上主はTARGET
;ARGに脱がし方选择
;ARG:1（ARG=3の场合のみあり）地の文の反应
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;Character gets naked
		;全裸にする
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
			;时间停止时
				IF FLAG:70
			;通常
				ELSE
				ENDIF
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 1
		;Character strips down to their underwear
		;下着姿にする
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
			;时间停止时
				IF FLAG:70
			;通常
				ELSE
				ENDIF
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 2
		;Character removes their bra and underwear
		;半脱ぎ
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
			;时间停止时
				IF FLAG:70
			;通常
				ELSE
				ENDIF
				RETURN 1
			ENDIF
		;-------------------------------------------------
		CASE 3
		;Player asks the character for their underwear
		;パンツちょうだい
		;记入チェック（=0, 非表示、1, 表示）
			LOCAL:1 = 0
		;-------------------------------------------------
			IF LOCAL:1
				SELECTCASE ARG:1
						;-------------------------------------------------
					CASE 0
						;Character and player swap underwear
						;交换です
						;记入チェック（=0, 非表示、1, 表示）
						LOCAL:1 = 0
						;-------------------------------------------------
						IF LOCAL:1
							RETURN 1
						ENDIF
						;-------------------------------------------------
					CASE 1
						;Character happily gives the player their underwear
						;OK（嬉々
						;记入チェック（=0, 非表示、1, 表示）
						LOCAL:1 = 0
						;-------------------------------------------------
						IF LOCAL:1
							RETURN 1
						ENDIF
						;-------------------------------------------------
					CASE 2
					    ;Character reluctantly gives the player their underwear
						;OK（渋々
						;记入チェック（=0, 非表示、1, 表示）
						LOCAL:1 = 0
						;-------------------------------------------------
						IF LOCAL:1
							RETURN 1
						ENDIF
						;-------------------------------------------------
					CASE 3
					    ;Character takes their underwear off but refuses to give it to the player
						;嫌です
						;记入チェック（=0, 非表示、1, 表示）
						LOCAL:1 = 0
						;-------------------------------------------------
						IF LOCAL:1
							RETURN 1
						ENDIF
						RETURN 1
				ENDSELECT
			ENDIF
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;Player runs out of strength during sex and has the character back off?
;愤怒口上
;==================================================
@M_KOJO_EVENT_K151_29(ARG,ARG:1)
;口上主はTARGET
;ARGはTARGETの度胸で分岐
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;Character is angry
	;小分岐
	;-------------------------------------------------
	;怒らせてしまった
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;Character cries [if they have the Timid trait]
	;泣かせてしまった　[臆病]持ち
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
ENDIF
RETURN 1

;==================================================
;Character is satisfied during sex (gives the "Slip out!/It's not over yet!/More please" choices)
;相手が推倒を解除
;==================================================
@M_KOJO_EVENT_K151_30(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------

IF LOCAL
	;-------------------------------------------------
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
    ;"%CALLNAME:TARGET% says \@ TALENT:TARGET:性别 == 2 ? 他 # 她\@ is too tired and lets you go."
	;疲れた
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
    ;Slip out
	;满足して解放
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
    ;It's not over yet!
	;满足したところを押し倒された
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
    ;More please
	;坏れるまでしてあげる
		PRINTFORML
		RETURN 1
	ENDIF
ENDIF
RETURN 1


;==================================================
;End of day stuff (before masturbating)
;Doesn't display if the player and the character have never met
;一日の结束时(AFTERTRAニーの前)、认识がなければ呼び出されない
;==================================================
@M_KOJO_EVENT_K151_31(ARG,ARG:1)
;口上主はTARGET
;ARGは会ってない日数
;何日以上会ってなかったら愚痴を言うとかできます
;CFLAG:自慰暴露で分岐入れてもよさそう
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;You didn't meet the character today
	;今日会っていない
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;You met the character today
	;今日会っている
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
		RETURN 1
	ENDIF

	CALL DAYEVENT("night", [[魔眼]])
	SIF RESULT
		RETURN 1
ENDIF
RETURN 1

;==================================================
;Free action (character starts exercising/fishing/cleaning/etc.)
;自由行动中
;ARG:1      0=行动中,1=完了时
;技能系の行动は技能レベルが1以上なら发生
;==================================================
@M_KOJO_EVENT_K151_32(ARG,ARG:1)
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	SELECTCASE ARG
		CASE 0
        ;Navelgazing ("...starts thinking about something deep.")
		;▼考え事,（～は考えに耽っている。）
			IF !ARG:1
            ;Continue ("...%TEXTR(@"contemplates something/rests %HIS_HER(CHARA)% chin in %HIS_HER(CHARA)% hands as %HE_SHE(CHARA)% thinks/is lost in thought/is deep in thought")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished thinking.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 1
        ;Playing ("...starts playing.")
        ;Only possible if the character has the [Childish] trait
		;▼游ぶ,（～は走り回っている。）
		;※[幼稚]持ちのみ
			IF !ARG:1
            ;Continue ("...%TEXTR(@"is running around/is having fun/is playing vigorously/tries to pull a prank on you")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have tired of playing.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 2
        ;Eating ("...starts preparing a meal.")
		;▼食事,（～は食事を摂っている。）
			IF !ARG:1
            ;Continue ("...is having a meal.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished %HIS_HER(CHARA)% meal.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 3
        ;Snacking ("...starts snacking in secrecy.")
        ;Only possible for Rumia, Koishi, Yuyuko, Shion, and characters with the [Fairy] trait
		;▼つまみ食い（～はこっそりつまみ食いをしている。）
		;※[妖精]持ちとルーミア、こいし、幽々子、紫苑のみ
			IF !ARG:1
            ;Continue ("...is snacking in secrecy.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished eating %HIS_HER(CHARA)% snacks.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 4
        ;Cleaning ("...seems bothered by the dirt and starts to clean.")
        ;Only possible if the character has the [Cleaner] trait or [Smell Resistance] <= -1
		;▼扫除,（～はテキパキと房间の扫除をしている。）
		;※[扫除系]持ちまたは污臭耐性-1以下のみ
			IF !ARG:1
            ;Continue ("...%TEXTR("is gathering some trash/is sorting things/is dusting some things/is cleaning the room thoroughly")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished cleaning.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 5
        ;Exercising ("...takes a breath and begins exercising.")
        ;Will not trigger for characters with [Musical Knowledge] (they will perform music instead)
		;▼运动,（～は张り切って运动している。）
		;※[音乐知识]持ちは除く（演奏になる）
			IF !ARG:1
            ;Continue ("...%TEXTR(@"is practicing Danmaku/is gasping for breath/is getting %HIS_HER(CHARA)% breathing under control/is exercising vigorously")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("... takes a breather, having finished %HIS_HER(CHARA)% workout.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 6
        ;Reading ("...starts reading a book.")
		;▼读书,（～は黙々と本を读んでいる。）
			IF !ARG:1
            ;Continue ("...is silently reading a book.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...puts the book away, seemingly finished.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 7
        ;Cooking ("Feeling hungry, %CALLNAME:CHARA% starts cooking.")
		;▼料理,
			IF !ARG:1
            ;Continue
			;行动中
				IF Activity_Duration:TARGET > 30
                ;("...is cooking up something light.")
				;料理中（～は轻快に料理をしている。）
					PRINTFORML
				ELSE
                ;("...is eating the food %HE_SHE(CHARA)% made.")
				;食事中（～は作った料理を食べている。）
					PRINTFORML
				ENDIF
			ELSE
            ;Finished ("...seems to have finished the meal.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 8
		;▼演奏
        ;Perform Music
        ;Only possible if the character has [Musical Knowledge]. The type of performance depends on the value of that trait.
		;If [Musical Knowledge] is 1, the character will play an instrument. If it's 2, they will sing, and if it's 3, they will dance.
		;※[音乐知识]持ちのみ（TALENT:TARGET:音乐知识で变化）
		;1,～は小气味よく演奏している。
		;2,～は气ままに歌っている。
		;3,～は华丽に踊っている。
			IF !ARG:1
            ;Continue ("...is doing a small musical performance. / ...is singing freely. / ...is dancing freely.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...catches %HIS_HER(CHARA)% breath after the performance. / ...catches %HIS_HER(CHARA)% breath after %HIS_HER(CHARA)% singing. / ...catches %HIS_HER(CHARA)% breath after %HIS_HER(CHARA)% dancing.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 9
        ;Foraging ("...looks around, and starts foraging.")
		;▼采集,（～使える素材を探している。）
			IF !ARG:1
            ;Continue ("...%TEXTR("is looking around/seems to have found something/is foraging enthusiastically/looks around for valuable materials")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished foraging.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 10
        ;Fishing ("...takes out a fishing rod.")
		;▼钓り,（～はのんびり钓りをしている。）
			IF !ARG:1
            ;Continue ("...is reeling in a fish. / ...is fishing and taking it easy.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished fishing.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 11
        ;Experimenting ("...starts preparing for an experiment.")
        ;The character must have Mixing Lv1 or higher and be in a place where mixing can be done (other than their room or your room)
		;▼实验,（～は怪しい实验をしている。）
			IF !ARG:1
            ;Continue ("...%TEXTR("is adjusting some scientific instruments/is lining up tools for an experiment/is writing things down/is performing suspicious experiments")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished the experiment.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 12
        ;Relaxing ("...starts relaxing, taking a breather.")
		;▼のんびり,（～はのんびりしている。）
			IF !ARG:1
            ;Continue ("... %TEXTR("is yawning/is relaxing/is doing nothing/is taking it very easy")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished %HIS_HER(CHARA)% rest.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 13
        ;Drinking ("...takes out some alcohol and begins unwinding after the day.")
        ;The character must not have Nondrinker or Weak Drinker
		;▼晩酌,（～はまったりとお酒を饮んでいる。）
		;※酒耐性0以上のみ
			IF !ARG:1
            ;Continue ("...%TEXTR("is drinking with a smile/is savoring some alcohol/is a bit tipsy/is relaxing and drinking")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...seems to have finished %HIS_HER(CHARA)% drink.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 14
        ;Shopping ("...retrieves %HIS_HER(CHARA)% shopping basket.")
		;▼买い物,（～は气ままに买い物している。）
			IF !ARG:1
            ;Continue ("...%TEXTR("is looking for a bargain/picks up and appraises something/looks unsure what to buy/is shopping")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...%CALLNAME:CHARA% seems to have finished shopping.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 15
        ;Being Lectured ("...gets %SPLIT_G("roped into:caught up in")% Eiki's lecturing.")
		;▼说教,（～はじっと闻いている…）
		;※神灵・蓬莱人は除く
			IF !ARG:1
            ;Continue (text depends on the character's personality)
			;行动中
				PRINTFORML
			ELSE
            ;Finished (several different variants for text)
			;完了时
				PRINTFORML
			ENDIF
		CASE 16
		; Prank / Fall in a Pit
		;Prank is only for the Three Fairies of Light, Cirno, and Clownpiece
		;Everyone else will end up falling in the pits
		;▼落とし穴,（～は落とし穴を增やしている）
		;※三月精・琪露诺・克劳恩皮丝のみ
		;それ以外は落ちる侧
			IF !ARG:1
            ;Continue (Character is digging the pit)
			;行动中
				PRINTFORML
			ELSE
            ;Finished
            ;If prankster: "...%SPLIT_G(@"quickly gets bored:decides %HE_SHE(CHARA)% had enough:no longer finds it amusing:seems to have tired of it")%."
            ;Else, if Combat Lv2-4: "%CALLNAME:CHARA% quickly jumps out of the pit and %TEXTR(@"starts looking for the culprit/starts scanning the surroundings")%..."
			;完了时,
			;（仕挂け人（失败时）,谁も引っかからないので～は饱きてしまったようだ…）
			;（落ちた侧（战斗能力2～4）,～はすぐに穴から飞び出して周りをキョロキョロ见回している…）
				PRINTFORML
			ENDIF
		CASE 17
		;Snow Sculpture ("...begins building %ARTICLE(RESULTS)%")
		;Only possible during winter
		;▼雪だるま作り（～は雪を集めている）
			IF !ARG:1
            ;Continue ("...%TEXTR(@"is %SPLIT_G("gathering:collecting")% snow/is patting down the snow, making it harder/is shaping up the snow")%.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...%SPLIT_G("appears happy to complete:seems satisfied to have completed")% the %RESULTS%.")
			;完了时
				PRINTFORML
			ENDIF
		CASE 18
        ;Relaxing under a kotatsu ("...begins to relax under a kotatsu.")
		;Only possible during winter
		;▼炬燵でのんびり（～は炬燵に入って温まっている）
			IF !ARG:1
            ;Continue ("...is %TEXTR(@"warming up/cozying up/nestling/getting all comfortable/letting out a big yawn/relaxing/getting sleepy")% under a kotatsu.")
			;行动中
				PRINTFORML
			ELSE
            ;Finished ("...%TEXTR(@"reluctantly crawls out of the kotatsu/feels like \@ TALENT:TARGET:性别 == 2 ? 他 # 她\@ got warm enough to get out of the kotatsu/gets out of the kotatsu because it was getting too hot for \@ TALENT:TARGET:性别 == 2 ? 他 # 她\@/gets out of the kotatsu with a %SPLIT_G("start:puff")%")%.")
			;完了时
				PRINTFORML
			ENDIF
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;Happy New Year
;Displayed when you're in the same room as the character
;when the new year rolls around
;ハッピーニューイヤー
;年越しの瞬间に同じ房间に居ると发生
;==================================================
@M_KOJO_EVENT_K151_33(ARG,ARG:1)
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	PRINTFORMW 
ENDIF
RETURN 1

;==================================================
;Skill level up
;技能レベルアップ
;各ABL值はレベルアップ后の值になってます
;==================================================
@M_KOJO_EVENT_K151_34(ARG,ARG:1)
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	SELECTCASE ARG
		CASE 1
        ;Combat Lv
		;战斗技能
			PRINTFORMW 
		CASE 2
        ;Speech Lv
		;话术技能
			PRINTFORMW 
		CASE 3
        ;Cleaning Lv
		;清扫技能
			PRINTFORMW 
		CASE 4
        ;Knowledge Lv
		;教养
			PRINTFORMW 
		CASE 5
        ;Cooking Lv
		;料理技能
			PRINTFORMW 
		CASE 6
        ;Foraging Lv
		;采集Lv
			PRINTFORMW 
		CASE 7
			IF ARG:1 == 0
            ;Music Lv
			;音乐技能
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Musicality]
			;【音乐知识】取得
				PRINTFORMW 
			ELSEIF ARG:1 == 2
            ;Acquires [Sense of Sound]
			;【相对音感】取得
				PRINTFORMW 
			ENDIF
		CASE 8
        ;Fishing Lv
		;钓りLv
			PRINTFORMW 
		CASE 9
			IF ARG:1 == 0
            ;Mixing Lv
			;调合Lv
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Mixing Knowledge]
			;【调合知识】取得
				PRINTFORMW 
			ENDIF
		CASE 10
        ;Logging Lv
		;采伐Lv
			PRINTFORMW 
		CASE 11
			IF ARG:1 == 0
            ;Finger Lv
			;指
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Nimble-Fingered]
			;【器用な指】取得
				PRINTFORMW 
			ENDIF
		CASE 12
			IF ARG:1 == 0
            ;Tongue Lv
			;舌
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Skilled Tongue]
			;【舌使い】取得
				PRINTFORMW 
			ENDIF
		CASE 13
			IF ARG:1 == 0
            ;Breast Lv
			;胸
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Lewd Breasts]
			;【淫乳】取得
				PRINTFORMW 
			ENDIF
		CASE 14
        ;Waist Lv
		;腰
			PRINTFORMW 
		CASE 15
			IF ARG:1 == 0
            ;Vagina Lv
			;膣
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Lewd Vagina]
			;【淫壶】取得
				PRINTFORMW 
			ENDIF
		CASE 16
			IF ARG:1 == 0
            ;Anus Lv
			;肛门
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Lewd Anus]
			;【尻穴狂】取得
				PRINTFORMW 
			ENDIF
		CASE 17
			IF ARG:1 == 0
            ;Urethral Lv (NAS only, not yet implemented)
			;肛门
				PRINTFORMW 
			ELSEIF ARG:1 == 1
            ;Acquires [Lewd Urethra] (NAS only, not yet implemented)
			;【尻穴狂】取得
				PRINTFORMW 
			ENDIF
		CASE 30
			IF ARG:1 == 1
                ;Creampie Addict Lv (Neodev/AnonTW/NAS only)
				PRINTFORMW 
			ELSEIF ARG:1 == 2
                ;A Creampie Addict Lv (Neodev/AnonTW/NAS only)
				PRINTFORMW 
			ELSE
                ;Semen Addiction Lv (Neodev/AnonTW/NAS only)
				PRINTFORMW 
			ENDIF
		CASE 31
            ;Acquires [Loves Taste of Semen] (Neodev/AnonTW/NAS only)
			PRINTFORMW 
		CASE 32
            ;Acquires [First Menstruation] (Neodev/AnonTW/NAS only)
			PRINTFORMW 
	ENDSELECT
	PRINTL 
ENDIF
RETURN 1

;==================================================
;Seeing a hypnotized character naked in public (ARG:1 is the character)
;==================================================
@M_KOJO_EVENT_K151_667(ARG,ARG:1)
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
ENDIF

;==================================================
;Daily Event 2: Character steals your underwear when you're washing it after a wet dream
;Occurs if the character has a penis, Thick Semen, and full Vigor (or just a penis in NAS)
;Narration:
;As you are washing your soiled underwear, %CALLNAME:ARG% comes flying by!
;%HE_SHE(ARG,1)% protests against your underwear getting washed with the other laundry and snatches it from your hands...
;%CALLNAME:ARG%　Desire Gems＋1000
;デイリーイベント2,梦精
;亲密5以上で发生（来访キャラのみ）
;▼地の文--------------------------------------------------
;【MASTER】が梦精で污した下着を洗っていると【TARGET】が飞んできた！
;【TARGET】はそんなもの他の洗濯物と一绪に洗わないでと抗议すると、【MASTER】の手に收まった下着をふんだくり戻っていった…
;【TARGET】　情欲の珠＋1000
;==================================================
@M_KOJO_DAILY_EVENT_K151_2(ARG, ARG:1, ARG:2, ARG:3, ARG:4, ARGS:1, ARGS:2)
;地の文を变えたければコメントアウト
;※コメントアウトすると情欲の珠＋1000（JUEL:11 += 1000）もカットされるので注意
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	PRINTFORMW 
ENDIF
RETURN 1

;==================================================
;Daily Event 4: Thinking About You
;Occurs at Intimacy 5 or higher, visiting characters only
;Narration:
;Lost in random thoughts, %CALLNAME:ARG% realizes that %HE_SHE(ARG)% had been thinking about you at some point.
;It seems %CALLNAME:ARG% has decided to come visit you tomorrow.
;デイリーイベント4,物思い
;亲密5以上で发生（来访キャラのみ）
;▼地の文--------------------------------------------------
;とりとめもない思考に耽っていた【TARGET】は、いつの间にか【MASTER】のことを考えていたことに气づいた
;【TARGET】は明日【MASTER】に会いに行くことにしたようだ
;==================================================
@M_KOJO_DAILY_EVENT_K151_4(ARG, ARG:1, ARG:2, ARG:3, ARG:4, ARGS:1, ARGS:2)
;地の文を变えたければコメントアウト
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	PRINTFORMW 
ENDIF
RETURN 1

;==================================================
;Daily Event 12: Special Training
;Occurs when the character has 100 Trust or more and is living on the player's main map
;デイリーイベント12,特训
;信赖100以上で发生（据点キャラのみ）
;==================================================
@M_KOJO_DAILY_EVENT_K151_12(ARG, ARG:1, ARG:2, ARG:3, ARG:4, ARGS:1, ARGS:2)
;地の文を变えたければコメントアウト
;コメントアウトできるのはARG:1=1,2のみです
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	SELECTCASE ARG:1
		CASE 1
		;The character asks for your help ("...asks for help in practicing a new technique.")
		;特训を赖まれる
		;～から新技の训练に付き合って欲しいと言われた
			PRINTFORML 
		CASE 2
		;You decline to help ("...looks disappointed...")
		;断る
		;～は残念そうだ
			PRINTFORML 
		CASE 3
		;Character attacks ("...attacks from...")
		;*Do not put a PRINTFORMW statement here!
		;～の攻击！
		;※ここはWAITしないでください
			PRINTFORML 
		CASE 4
			IF ARG:2
			;Player dodges the attack by stopping time
			;时间停止して回避
				PRINTFORML 
			ELSE
			;Player successfully dodges the attack
			;回避成功
				PRINTFORML 
			ENDIF
		CASE 5
		;Player did not dodge the attack
		;回避失败
			PRINTFORML 
	ENDSELECT
ENDIF
RETURN 1


[SKIPSTART]
;-------------------------------------------------
;This is for if you want to change the narration for "caught masturbating" events.
;If you do, remove the [SKIPSTART] and [SKIPEND] keywords above and below this comment.
;If you use CFLAGs, please make sure to specific the character ID.
;自慰暴露遭遇时の地の文をデフォルトのものから变更したい场合用。
;その场合は上下のSKIPSTART~SKIPENDを外してください。
;CFLAG等のキャラ变量を使う场合、キャラ番号の指定が必要になります。
;-------------------------------------------------
@M_KOJO_EVENT_K151_ONABARE_1(ARG)
;-------------------------------------------------
;If you want to add the character's dialogue color, uncomment this and replace the X with the character's ID.
:口上色を付けるならコメントアウトを外しXをキャラ番号に
;CALL M_KOJO_COLOR_K151

IF ARG
	PRINTFORML 玩弄A的场合
ELSE
	PRINTFORML 玩弄V的场合
ENDIF
;-------------------------------------------------
[SKIPEND]


[SKIPSTART]
;-------------------------------------------------
;This is for if you want to change the narration for the "I'll just keep watching so please continue" part of the "caught masturbating" events.
;If you do, remove the [SKIPSTART] and [SKIPEND] keywords above and below this comment.
;If you use CFLAGs, please make sure to specific the character ID.
;自慰暴露でそのまま续けてもらう场合の地の文をデフォルトのものから变更したい场合用。
;その场合は上下のSKIPSTART~SKIPENDを外してください。
;CFLAG等のキャラ变量を使う场合、キャラ番号の指定が必要になります。
;-------------------------------------------------
@M_KOJO_EVENT_K151_ONABARE_2(ARG)
;-------------------------------------------------
;If you want to add the character's dialogue color, uncomment this and replace the X with the character's ID.
:口上色を付けるならコメントアウトを外しXをキャラ番号に
;CALL M_KOJO_COLOR_K151

IF ARG
	PRINTFORML 玩弄A的场合
ELSE
	PRINTFORML 玩弄V的场合
ENDIF
;-------------------------------------------------
[SKIPEND]


[SKIPSTART]
;-------------------------------------------------
;This is for if you want to change the narration for the "It feels better with two people" part of the "caught masturbating" events.
;If you do, remove the [SKIPSTART] and [SKIPEND] keywords above and below this comment.
;If you use CFLAGs, please make sure to specific the character ID.
;自慰暴露なし崩しックスの地の文をデフォルトのものから变更したい场合用。
;その场合は上下のSKIPSTART~SKIPENDを外してください。
;CFLAG等のキャラ变量を使う场合、キャラ番号の指定が必要になります。
;-------------------------------------------------
@M_KOJO_EVENT_K151_ONABARE_3(前戏１,本番はどっちか,回数,注入量)
;-------------------------------------------------
#DIM 前戏１
;1=Clit/Cock 2=Breast 3=Mouth
#DIM 本番はどっちか
;0でＶ、1でＡ
#DIM 注入量
#DIM 回数

;If you want to add the character's dialogue color, uncomment this and replace the X with the character's ID.
:口上色を付けるならコメントアウトを外しXをキャラ番号に
;CALL M_KOJO_COLOR_K151

SELECTCASE 前戏１
	CASE 1
		PRINTFORML Clit/Cock stimulation
	CASE 2
		PRINTFORML Breast stimulation
	CASE 3
		PRINTFORML Mouth stimulation
ENDSELECT

IF 本番はどっちか
	PRINTFORML Anal sex
ELSE
	PRINTFORML Vaginal sex
ENDIF
;-------------------------------------------------
[SKIPEND]


;-------------------------------------------------
;Dialogue for just before vaginally penetrating a virgin or unaware non-virgin.
;RETURN 1 to prevent insertion
;RETURN 0 to allow it
;Note that this dialogue will not be displayed unless CFLAG:破瓜中止口上有 = 1.
;处女・无自觉非处女に插入する直前の口上
;RETURN 1するとコマンドを中止します
;RETURN 0なら通します
;CFLAG:破瓜中止口上有がオンになってないと读み込まれないので注意
;-------------------------------------------------
@M_KOJO_EVENT_K151_LOST_VIRGIN_STOP
;-------------------------------------------------
PRINTFORML 
RETURN 1

;-------------------------------------------------
;This does nothing unless CFLAG:口上内抱き寄せ判定_初回 = 1.
;When pushing the character down for the first time, RETURN -1 will make it always fail.
;RETURN 0 will do the normal Reasoning Barrier check, and RETURN 1 will make it always succeed.
;You can use this to ex. prevent a character from letting the player push them down unless you've kissed after a date.
;CFLAG:口上内抱き寄せ判定_初回がオンになっている场合のみ有效。
;初めて推倒た时、ここでRETURN -1すると推倒を强制的に中止します。
;RETURN 0なら通常の判定を行い、RETURN 1すると无条件に成功させます。
;特定のイベント（デート归りキスなど）を见るまで诶嘿嘿できないようにしたいときなどにどうぞ。
;-------------------------------------------------
@M_KOJO_EVENT_K151_PERMISSION_1
;-------------------------------------------------
PRINTFORML 
;RETURN -1
RETURN 0
;RETURN 1
;-------------------------------------------------


;-------------------------------------------------
;This does nothing unless CFLAG:口上内抱き寄せ判定_通常 = 1.
;When pushing the character down for the first time, RETURN -1 will make it always fail.
;RETURN 0 will do the normal Reasoning Barrier check, and RETURN 1 will make it always succeed.
;You can use this to ex. prevent a character from letting the player push them down even if they've given their consent
;if some other condition is true.
;CFLAG:口上内抱き寄せ判定_通常がオンになっている场合のみ有效。
;合意付きで推倒た时、ここでRETURN -1すると推倒を强制的に中止します。
;RETURN 0なら通常通り成功させます。
;合意があっても何らかの理由で诶嘿嘿できないようにしたいときなどにどうぞ。
;-------------------------------------------------
@M_KOJO_EVENT_K151_PERMISSION_2
;-------------------------------------------------
PRINTFORML 
RETURN 0
;RETURN -1
;-------------------------------------------------

;-------------------------------------------------
;This does nothing unless CFLAG:口上用童贞丧失判定 = 1.
;When trying to do a command that would take a character's penile virginity, RETURN -1 will make it always fail.
;RETURN 0 will do the normal check, and RETURN 1 will make it always succeed.
;You can use this to ex. prevent a character from letting the player devirginize them even if they've given their consent
;if some other condition is true.
;-------------------------------------------------
@M_KOJO_EVENT_K151_PERMISSION_3
;-------------------------------------------------
PRINTFORML 
RETURN 0
;-------------------------------------------------

;-------------------------------------------------
;This does nothing unless CFLAG:口上用肛门处女丧失判定 = 1.
;When trying to do a command that would take a character's anal virginity, RETURN -1 will make it always fail.
;RETURN 0 will do the normal check, and RETURN 1 will make it always succeed.
;You can use this to ex. prevent a character from letting the player take their anal virginity even if they've given their consent
;if some other condition is true.
;-------------------------------------------------
@M_KOJO_EVENT_K151_PERMISSION_4
;-------------------------------------------------
PRINTFORML 
RETURN 0
;-------------------------------------------------

;-------------------------------------------------
;Function for describing a room
;This displays when in the character's room (OMANEKIBEYA).
;Don't forget to uncomment this function if you write lines for it!
;房间描写用函数
;口上キャラのOMANEKIBEYAか据点の描写に使います
;记入する际はコメントアウトを外してください
;-------------------------------------------------
;@K151_ROOM_DESCRIPTION
;PRINTFORML 例）生活感のない杀风景な房间だ
;-------------------------------------------------


;==================================================
;Gift events
;赠り物イベント
;==================================================
@M_KOJO_EVENT_K151_GIFT(ARG, GIFT_ID, 评价点, GIFT_NAME, SENSE)
#DIM GIFT_ID
#DIM 评价点
#DIMS GIFT_NAME
#DIMS SENSE
;---------------------------------------------------------------------------------------------------
;评价点		  The gift's score (1-999).
;GIFT_NAME   The name of the gift.
;SENSE       The attributes of the gift. STRCOUNT(DISH_TASTE, "foobar/") can be used to determine them.
;GIFT_ID     The ID of the gift. You can pass this to GET_GIFTDATA() to get info about the gift. 
;　GET_GIFTDATA(GIFT_ID, "回数")    The number of times the player gave the gift to the character.
;　GET_GIFTDATA(GIFT_ID, "得点")    The gift's score (1-999).
;　GET_GIFTDATA(GIFT_ID, "日期")    The date that the player gave the gift to the character (1-9999).
;　GET_GIFTDATA(GIFT_ID, "场所")    The location that the gift was bought at.
;　GET_GIFTDATA(GIFT_ID, "形容词")  The associated adjectives (see 赠り物_形容词.erb)
;　GET_GIFTDATA(GIFT_ID, "本体")    The price of the gift (see 赠り物_本体.erb)
;评价点       赠り物の评价点（1～999）,口上主があげた场合でも口上主の评价点
;GIFT_NAME    赠り物の名称
;SENSE        赠り物に设定された属性。STRCOUNT(DISH_TASTE, "ほげほげ/")を使うと特定の属性を判定できます。
;GIFT_ID      これ单体では使いません。以下の式内函数を使うとデータを抽出できます（こだわりたい人用）
;　GET_GIFTDATA(GIFT_ID, "回数")    贳った（あげた）回数
;　GET_GIFTDATA(GIFT_ID, "得点")    得点（1～999）,口上テンプレ内では用意されてます。
;　GET_GIFTDATA(GIFT_ID, "日期")    贳った（あげた）日期（1～9999）
;　GET_GIFTDATA(GIFT_ID, "场所")    买った场所（デートの行き先）
;　GET_GIFTDATA(GIFT_ID, "形容词")  形容词番号（赠り物_形容词.erb参照）
;　GET_GIFTDATA(GIFT_ID, "本体")    本体番号（赠り物_本体.erb参照）
;--------------------------------------------------------------------------------------------------
;Dialogue for giving the player a gift on the way home from a date. This can happen at Intimacy 5 or higher, regardless of date score or any other factor.
;The gift will be something that the character would score from 701-999 if the player gave it to them.
;デート归りに口上主があなたに赠り物を渡す（陷落や好感度に关わらず亲密5以上から发生）
;评价点は701～999（渡すキャラ本人の评价）
;--------------------------------------------------------------------------------------------------
IF ARG == 1
	;PRINTFORMW 「I'll give you a %GIFT_NAME%. Take good care of it!」
	RETURN 1
;--------------------------------------------------------------------------------------------------
;End of day event: the character cherishes the gift they received from the player (occurs if the gift had a score of 700 or more)
;一日の终わりに今日获得的礼物を大事にする（700点以上）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 2
	;IF STRCOUNT(SENSE, "かわいい/")
	;	PRINTFORMW 「I got a cute gift!」
	;ELSEIF 评价点 >= 800
	;	PRINTFORMW 「I got a really nice gift!」
	;ELSE
	;	PRINTFORMW 「I got a nice gift!」
	;ENDIF
	RETURN 1
;--------------------------------------------------------------------------------------------------
;End of day event: the gift the character received from the player becomes their favorite (displayed after the "cherish" lines,
; occurs if the gift had a score of 700 or more and it has the highest score of any gift the character has received)
;一日の终わりに今日获得的礼物をお气に入りにする（↑の大事にするから续き）（700点以上かつ最高得点）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 3
	;IF STRCOUNT(SENSE, "身につける/")
	;	PRINTFORMW 「I'm going to put this on tomorrow.」
	;ELSE
	;	PRINTFORMW 「I'm going to take this with me tomorrow.」
	;ENDIF
	RETURN 1
;--------------------------------------------------------------------------------------------------
;End of day event: the character keeps the gift they received from the player (occurs if the gift had a score of 400-699)
;一日の终わりに今日获得的礼物をとりあえず保管する（400～699点）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 4
	;PRINTFORMW 「I'll just store this for now.」
	RETURN 1
;--------------------------------------------------------------------------------------------------
;End of day event: the character quietly pawns the gift they received from the player (occurs if the gift had a score less than 400)
;一日の终わりに今日获得的礼物をこっそり质に入れる（400点未满）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 5
	;PRINTFORMW 「I hate this～」
	RETURN 1
ENDIF
RETURN 1


;==================================================
;Bug Battle
;Bug Battle dialogue is a bit special, and you shouldn't use PRINT statements.
;Only one line of dialogue is required in the RESULTS field.
;%MUSHI_NAME% will display the name of the bug the character is using.
;The longest bug names are 30 characters (Alexandra Trivanel Swallowtail and Orthetrum Albistylum Speciosum are tied).
;Make sure the text doesn't overflow!
;ARG lists either the number of bugs remaining or their rank, depending on the subsection.
;ムシバトル
;ムシバトルの口上は少し特殊で、PRINTを使うのではなく、
;台词一行のみをRESULTSに入れてください
;ムシの名前は %MUSHI_NAME% で表示できます
;ムシの名前の最长はアレキサンドラトリバネアゲハの全角14文字です
;文字数制限があります。はみ出ないように气をつけてください
;ARGは残りムシ数か顺位です
;==================================================
@M_KOJO_MESSAGE_COM_K151_MUSHI_BATTLE(ARGS, ARG)
#DIM 残りムシ数
#DIM 顺位
SELECTCASE ARGS
	CASE "试合前"
		;-------------------------------------------------
		;The battle begins
		;ARG is not accessible
		;No more than 50 characters per line
		;キャラセレクト时,ARGは使えません
		;全角50文字くらいまで
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「I'm gonna blow you away!」
		ENDIF
	CASE "战场に出した"
		;-------------------------------------------------
		;Immediately after "CHARACTER sent out BUG!"
		;No more than 40 characters per line
		;"【（キャラ）】は《（ムシ）》を战场に出した！」"の直后
		;全角40文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		残りムシ数 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「%MUSHI_NAME%! I choose you!」
		ENDIF
	CASE "攻击时"
		;-------------------------------------------------
		;Immediately before "CHARACTER's BUG uses SKILL!"
		;No more than 40 characters per line
		;"【（キャラ）】《（ムシ）》の『（攻击名）』！」"の直前
		;全角40文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		残りムシ数 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「Send 'em flying, %MUSHI_NAME%!」
		ENDIF
	CASE "倒れた时"
		;-------------------------------------------------
		;Immediately after "CHARACTER's BUG faints!!"
		;No more than 40 characters per line
		;"【（キャラ）】《（ムシ）》は倒れた！！"の直后
		;全角40文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		残りムシ数 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「No! My %MUSHI_NAME%!」
		ENDIF
	CASE "败退时"
		;-------------------------------------------------
		;Immediately after "CHARACTER is eliminated!!"
		;No more than 40 characters per line
		;"【（キャラ）】败退！！"の直后
		;全角40文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		残りムシ数 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「My bugs got squashed...」
		ENDIF
	CASE "タイマン：胜ち"
		;-------------------------------------------------
		;One-on-one battle: the character came in first
		;No more than 20 characters per line
		;顺位は1位
		;全角20文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		顺位 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「Wow, %CALLNAME:MASTER%!」
		ENDIF
	CASE "タイマン：负け"
		;-------------------------------------------------
		;One-on-one battle: the character came in second
		;No more than 20 characters per line
		;顺位は2位
		;全角20文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		顺位 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「You're strong, %CALLNAME:MASTER%!」
		ENDIF
	CASE "バトルロイヤル：优胜"
		;-------------------------------------------------
		;Battle Royale: the character came in first
		;No more than 30 characters per line
		;顺位は1位
		;全角30文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		顺位 = ARG
		;-------------------------------------------------
		IF LOCAL:1
		;RESULTS = 「All right!」
		ENDIF
	CASE "バトルロイヤル：２位以下"
		;-------------------------------------------------
		;Battle Royale: the character came in 2nd, 3rd, or 4th
		;No more than 30 characters per line
		;顺位は2～4位
		;全角30文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		顺位 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「Aww man!」
		ENDIF
	CASE "チーム战：胜ち"
		;-------------------------------------------------
		;Team battle: the character's partner was eliminated, but their team still came in first
		;No more than 32 characters per line
		;顺位は1位（やられていても）
		;全角32文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		顺位 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「You owe me!」
		ENDIF
	CASE "チーム战：负け"
		;-------------------------------------------------
		;Team battle: the character's team came in second
		;No more than 32 characters per line
		;顺位は2位
		;全角32文字まで（カギカッコ含む）
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 0
		顺位 = ARG
		;-------------------------------------------------
		IF LOCAL:1
;		RESULTS = 「My partner's so weak!!」
		ENDIF
ENDSELECT
SIF RESULTS != ""
	RETURN 1

;==================================================
;Gravity operation
;TCVAR: If you put a location ID in the gravitation point, the character will be pulled to that point
;Only works on the same base map as the location ID (the character won't go to the Hakurei Shrine Outskirts if they aren't at the Hakurei Shrine).
;Note that if you don't set any conditions, they will be pulled to the location permanently.
;RAND is basically useless
;CFLAG:今日的运势にそ contains random numbers (0-999) for that day, so you can use this!
;引力操作
;TCVAR:引力点に场所IDを入れるとその地点に引っ张られていきます
;场所IDと同じ据点マップでしか效果はありません（博丽神社の境内なら据点が博丽神社のときだけ）
;条件を付けないと永久に引っ张られ续けるので注意
;RANDは基本的に使えません。CFLAG:今日的运势にその日のランダム数值（0～999）が入っているのでこれを使うと良いです
;==================================================
@M_KOJO_EVENT_K151_GRAVITY(ARG)

SIF 0
	TCVAR:引力点 = 0

;Some examples
;▼共通设定で使われているサンプル
[SKIPSTART]
    ;Randomly play during the daytime on weekdays
	;平日の昼间はランダムで游びに行く
	IF YOUBI_MATCH(DAY, "月火水木金") && INRANGE(TIME, 600, 960)
		SELECTCASE CFLAG:今日的运势 % 5
		CASE 1
			TCVAR:引力点 = P2境内
		CASE 2
			TCVAR:引力点 = P10缘侧
		CASE 3
			TCVAR:引力点 = P11庭
		CASE 4
			TCVAR:引力点 = P25镇守の森
		CASEELSE
			TCVAR:引力点 = 0
		ENDSELECT
	ENDIF
    ;50% chance to play on Wednesdays and Thursdays
	;水木曜日に2分の1の概率で游びに行く
	SIF YOUBI_MATCH(DAY, "水木") && INRANGE(TIME, 720, 1020) && CFLAG:今日的运势 % 2 == 0
		TCVAR:引力点 = P213铃奈庵
    ;Go to the Myouren Temple's Main Temple Building if Byakuren is there
	;特定の人物が特定の场所にいるとそこへ引っ张られる
		SIF CFLAG:[[白莲]]:当前位置 == P103本堂 && !CFLAG:[[白莲]]:诶嘿嘿 && SHIRAHU([[白莲]])
			TCVAR:引力点 = P103本堂
    ;10% chance to follow Satori around on Saturdays and Sundays
	;土日に10分の1の概率で特定の人物にくっついてまわる
	SIF YOUBI_MATCH(DAY, "土日") && CFLAG:今日的运势 % 10 == 0 && !CFLAG:[[さとり]]:诶嘿嘿 && SHIRAHU([[さとり]])
		TCVAR:引力点 = CFLAG:[[さとり]]:当前位置
[SKIPEND]

;==================================================
;Watermelon Splitting
;Watermelon Splitting dialogue works like Bug Battle dialogue. Don't use PRINT statements, and only assign one line to the RESULTS field.
;Brackets are automatically added.
;Only "collision" and "result" are automatically colored.
;Lines can be no more than 26 characters except for "collision" and "result". Please be careful not to overflow!
;If you have several patterns, you can use %TEXTR( / )% to get more atmosphere.
;スイカ割り
;スイカ割りの口上はムシバトル同样、PRINTを使うのではなく、
;台词一行のみをRESULTSに入れてください
;カギ括弧は自动で付きます
;"冲突","结果"のみ、口上色が自动で付きます
;"冲突","结果"以外は半角26文字（全角13文字）までの文字数制限があります。はみ出ないように气をつけてください
;数パターンあると雰囲气が出ます（%TEXTR( / )%を使うと良い）
;==================================================
@M_KOJO_MESSAGE_COM_K151_SUIKA(ARGS, ARG)
;-------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL:1 = 0
;-------------------------------------------------
IF LOCAL:1
	SELECTCASE ARGS
		CASE "冲突"
		;-------------------------------------------------
		;Lines for stumbling out of the field and bumping into a character
		;No character limit, and there's no generic dialogue for this.
		;场外に出てあなたがキャラと冲突した际の台词
		;文字数制限はありません,泛用台词もありません
		;-------------------------------------------------
			RESULTS = Ow! Hey, watch it!
		;There!
		CASE "そこだ！"
			RESULTS = %TEXTR("这边！/现在！")%
		;Near
		CASE "近い"
			RESULTS = %TEXTR("很近了！你很靠近了！/马上就到了！/就要到了！")%
		;Far
		CASE "远い"
			RESULTS = %TEXTR("还有点远/还需要点时间～")%
		;Very far
		CASE "かなり远い"
			RESULTS = %TEXTR("非常远呐/依然很远，接着走吧")%
		;In front
		CASE "前"
			RESULTS = %TEXTR("马上就到了/这边，这边！/那边，那边！")%
		;A little further ahead
		CASE "少し前"
			RESULTS = %TEXTR("好，就在你前面！/就一点点远/再走一步就到了！")%
		;Behind
		CASE "后ろ"
			RESULTS = %TEXTR("转过来！/另一边，另一边！/走错啦～！")%
		;A little further back
		CASE "少し后ろ"
			RESULTS = %TEXTR("就在你后面！/后面一点带你/往后一小步！")%
		;Right
		CASE "右"
			RESULTS = %TEXTR("在你右边/右转，右转！/右边一点！")%
		;A little further right
		CASE "少し右"
			RESULTS = %TEXTR("再右边一点/接着往右边")%
		;Left
		CASE "左"
			RESULTS = %TEXTR("在你左边/左边，左边！/左边一点！")%
		;A little further left
		CASE "少し左"
			RESULTS = %TEXTR("再左边一点/接着往左边")%
		CASE "结果"
		;-------------------------------------------------
		;After the game ends
		;You can only have one line per case, but they can be as long as you want(?)
		;TFLAG:193,
		;   -1=Failure
		;    0=Success
		;    1=Great Success
		;    2=Great Success with a wooden sword (bonus points)
		;ARG
		;    0=Honest person
		;    1=Liar
		;结束后の一言
		;文字数制限はありません,泛用台词もありません
		;TFLAG:193,
		;   -1=失败
		;    0=成功
		;    1=大成功
		;    2=木刀で大成功（BOUNS点）
		;ARG
		;    0=正直者
		;    1=ウソつき
		;-------------------------------------------------
			SELECTCASE TFLAG:193
				CASE -1
					RESULTS = 真可惜～
				CASE 0
					RESULTS = 还行!
				CASE 1
					RESULTS = 真棒!
				CASE 2
					RESULTS = 你做的真好!
			ENDSELECT
	ENDSELECT
ENDIF

;Special encounter events (if you want to have a custom event when a character encounters you while traveling between maps)
;外出先特殊遭遇イベント
@RUN_INTO_EVENT_K151(MAP_ID)
#DIM MAP_ID
;Replace "XX" with the character ID
;Always RETURN 1 at the end.
;RETURN -1 if you want to make the event not occur, for example, if you haven't met the character
;XXをキャラ番号に置换
;最后に必ずRETURN 1すること
;认识がない场合发生させないなど、あえて不发にさせたい场合RETURN -1すること
;	SIF !CFLAG:XX:认识
;		RETURN -1
;	PRINTFORML %CALLNAME:XX% is here.
;	PRINTFORML 「Hi.」
;	CFLAG:XX:好感度 += 5
;	RETURN 1

;For sex friend agreements.
;The value this function returns affects the reasoning barrier.
;If you want to make it easy to make a sex friend agreement, you should return a negative value.
;If you want to increase the difficulty or make it practically impossible, you should return a positive value.
;炮友契约用
;"补正"でRETURNした数值が理性判定に加算されるので、
;简单に炮友にしたいならマイナス、难易度を上げたかったり实质不可能にしたいならプラスすべし
@KOJO_SF_CONTRACT_K151(ARGS)
SELECTCASE ARGS
	;Start
	CASE "导入"
		;PRINTFORML 「Sex friends, huhー」
	;Before reason wall
	CASE "补正"
		;PRINTFORML (I wanna get laid right now)
		;RETURN -1000
	CASE "成功"
		;PRINTFORML 「Okayー」
	CASE "失败"
		;PRINTFORML 「No thanksー」
ENDSELECT

;framework from nue's file, refer to that
@K151_DAYEVENT_COND(ARG)
;RETURN -1 - means disallowed, 0 - fall back to original condition, 1 - allowed
SIF !TALENT:恋慕 && ARG != 11
	RETURN -1
SIF MARK:反抗刻印 || CFLAG:勃然大怒
	RETURN -1
SELECTCASE ARG
	CASE 1 ;bj
		SIF !HAS_PENIS(MASTER) ;bj only
			RETURN -1
		SIF !( ABL:欲望 >= 3 && ABL:技巧 >= 3 && EXP:侍奉快乐经验 >= 50 && EXP:口淫经验 >= 20 ) ;og cond
			RETURN -1
		RETURN 1
	CASE 3, 10 ;cow/youbai
		SIF !HAS_PENIS(MASTER) ;penis only
			RETURN -1

		SIF !(ABL:欲望 >= 5)
			RETURN -1

		SIF !(!TALENT:处女 && !IS_DOUTEI(MASTER)) ;must be experienced
			RETURN -1
		RETURN 1
	CASE 5
		SIF !TALENT:恋人
			RETURN -1
		RETURN 1
	CASE 11 ;afternight drink
		SIF !( ABL:侍奉精神 >= 3 && EXP:侍奉快乐经验 >= 50 )
			RETURN -1
		SIF (TALENT:妊娠 || TALENT:育儿中)
			RETURN -1
		SIF	CFLAG:2 >= 1500 ;allowed without love
			RETURN 1
		RETURN -1
	CASE 7, 8, 12 ;disabled, no dialogue
		RETURN -1
ENDSELECT
RETURN 0

;Modified from Marisa's dialogue
@M_KOJO_EVENT_K151_AFTERTRAIN_BEGIN(ARGS,ARG,ARG:1)
IF EX:[[魔眼]]:膣内精液 && 妊娠可否(151) && !(TALENT:[[魔眼]]:恋慕 || TALENT:[[魔眼]]:恋人 || TALENT:[[魔眼]]:爱欲) && !TALENT:[[魔眼]]:妊娠 ;lower semen count, but not completely remove it, so there's still chance
	EX:[[魔眼]]:膣内精液 = MULTIPLY(EX:[[魔眼]]:膣内精液, RAND(3, 11))
ENDIF