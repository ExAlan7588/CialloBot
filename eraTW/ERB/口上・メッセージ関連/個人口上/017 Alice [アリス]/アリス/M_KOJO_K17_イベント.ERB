;*************************************************************************************
;	爱丽丝・玛格特罗伊德　口上
;
;	「メモという名の私的落书き」
;	好き胜手やってるのでソースめっちゃ污い　そのうちきっちりするって私の中の探女さんが言ってた
;	テンプレートさんには【崩坏】がついてる
;	可读性さんなら放してやった
;	他人が见ても理解不能な部分多いと思うので、仕样・实装口上一览.txtを见ることをオススメします
;
;
;・わたしのかんがえたさいきょうありすちゃん！の设定？
;	关系が进むと坦率になっちゃう感じか
;	妄想エロ乙女（百合用语だったか
;	处女だけど耳年增
;	自主トレ(おなにー)の研究は欠かさない　つまり自分磨き！
;	外国人风なので海外との文化差など那个ばつけたい（イメージ的にイギ松鼠人的な
;	上海の扱いに困る（お助け角色として使ってみる）
;	绝对镜见る回数多いわー自分が一番可爱く映る角度知ってるわー……一般女子なら普通か
;	なんでもさせてくれる普通の子と、なにもさせてくれない美人どっｔ……なんでもさせてくれる爱丽丝←それな
;	母性は高め、甘やかしたがりのくせに　"寂したがり"
;	恋慕になると男を駄目にする典型こわい
;
;・シチュエーションプレイ、自主トレを7种类用意したい
;	自慰暴露イベント、くっそ头恶そうなこと言わせたい
;	爱丽丝の受け攻め妄想は7种 合计14种
;	自主トレメニュー
;	1姫受け　2わんこ受け　3袭い受　4强气受け　5健气受け　6小恶魔受け　7诱い受け
;	1年上攻め　2强气攻め　3鬼畜攻め　4わんこ攻め　5ヘタレ攻め　6女王样(俺样)攻め　7言叶攻め？
;	七色の妄想を使いこなす爱丽丝
;	调教指令(エロ系のやつ)をタイプ分けにして、あとでごっこ玩耍(口上だけ变える)に使えるようにしたい
;	恋人同士で强行えっちごっごとかいいじゃない！　とりあえず随机喘ぎで攻め4、攻め3パターン作りました
;	基本2パターンを文本分けで装饰を变えるだけなので劳力は少なくて済む设计になってるはず……
;
;	眠奸は寝たふりとかいいんじゃないかな（くっ……どこ触ってんのよ///）←起きるに起きられないみたいなの
;	眠奸まだ仕样よくわかってないので后で考える
;
;・贞操重视は普通で他の女に手出ししてても构わない
;	最后に戻ってくればいいと思ってる
;	实は1番じゃなきゃ不要っていう面倒くさい感じ
;	病まない程度に嫉妒させると可爱いんじゃないかな
;	マ斯塔に他に恋人がいるとヘタれる。侧室希望
;
;・诱い受けを装った小恶魔受け
;	こわいわー魔女こわい
;
;
;*************************************************************************************
;	□口上书く上での落书きメモ
;
;	素人考えのぷろぐらむ的なこと
;	なるべく后で手出ししやすいように
;	英语が不自由でも气にしない、そもそも日本语すら危うい
;	KISSの原则を忘れるな→忘れてないけど无理でした！
;	函数作るときは头にK17つける　指令系は末尾に追加
;	SELECTCASEとswitchは违う（戒め
;	文本主体位置はできるだけインデント左寄せ优先で处理を考える　でかいIFとか作るならRETURNで返しちゃう
;	函数内の变量はstatic？外部参照できないけど保持はされるらしいので初期化に气をつける
;	グローバルいじるときもなるべく17つけて、角色番号が变わっても对応できる设计に。念のため他所样に迷惑かけないこと
;	こっち侧でできるだけ自己修正机能持たせる
;	变量名の头に数值iか文字列cとかsをなるべくつける　参数も名前变更するかぁ……
;
;	口上的なこと
;	你(プレイヤー)の呼び方
;	台词中	%K17_CNAME()%	そのうち呼び方も入力で变えられるようにしようか迷う　现在的仕样は关系で稍微变わるくらい
;	地の文	%CALLNAME:MASTER% %CALLNAME:TARGET%
;	イベント、特に一度しか通らないところは随机要素控えめに　パラメーターの差异はあり
;	逆に何度も通るとこはRAND_SPLITで多いように见せかける
;	「おなにー」「えっち」ひらがなで言わせてみる
;	勃つ、插れる汉字使い分ける
;	长くなる场合なるべく3～4行のブロック分けする
;
;******************************************************************************
;		[更新履历]
;-2016-
;08/30	Ver0.00				夏休み最终日になんか思い立ってEmueraの勉强开始　一ヶ月后に莉莉ス目指す
;09/30	α版				初莉莉ス予定日 进捗だめです　ぐぬぬ、日曜日までバグ取り气になる部位デ背包
;10/03	α版 Ver0.01		初莉莉ス
;10/08	α版 Ver0.02		主に指令の修正　关系性最高值时のヒント表示でエラー落ちする不具合修正
;10/14	α版 Ver0.02修正	イベント.ERBのみ修正パッチ　スレでのエラー报告を修正
;10/28	α版 Ver0.03		主に指令追加
;11/15	α版 Ver0.03修正	パッチ对応
;11/25	β版 Ver0.10		主に诶嘿嘿系の指令を追加
;11/27	β版 Ver0.10修正	K17_ROUNDの0除算修正
;11/28	β版 Ver0.11		主に修正　少し追加
;12/15	β版 Ver0.12		胖次输送の新仕样に对応　指令少し追加
;12/25	β版 Ver0.13		ライセンスを整理　copyrightを削除
;
;**** FlagManagement **********************************************************
;本口上にて变更しているCFLAG・TCVAR等　メモ
;本口上内だけで使用しているCFLAG・TCVAR等 念のため17を入れておく
;タグ　M_KOJO_K17_追加ライブラリ.ERH　参照　单纯にその要素番号がなんのフラグか忘れちゃわないように名前つけてるだけ
;
;
;	[TALENT]	[タグ]						[说明]						[备考]
;TALENT:17:11	K17C_TALENT_态度			态度						刻印、イベントで变动
;TALENT:17:13	K17C_TALENT_自尊心		自尊心					刻印、イベントで变动
;
;	[TFLAG]
;TFLAG:120		吻痕					吻痕のフラグ			本体で使っているもの、口上内で追加あり
;
;	[TCVAR]		[タグ]						[说明]						[备考]
;TCVAR:17:183	中止接吻
;TCVAR:17:350	K17C_TC_约会イベ完走		约会イベント再入フラグ	一日一回
;TCVAR:17:351	K17C_TC_约会イベ判定		约会イベント再入フラグ	判定だけなら何度でも
;TCVAR:17:352	K17C_TC_お澡堂イベント		一日一回					追い出されたら判定もおしまい连打禁止
;TCVAR:17:353	K17C_TC_上海				一日一回
;TCVAR:17:354	K17C_TC_朝口交			一日一回					マ斯塔が先に起きている场合も飞ばしちゃう
;TCVAR:17:355	K17C_TC_身体接触		随机の设定				每回随机を一日一回设定して朝起きたら返回はず
;TCVAR:17:356	K17C_TC_诶嘿嘿主导权		诶嘿嘿开始时の主导权		爱丽丝からなら角色ID MASTERからなら-1 结束时0で初期化
;TCVAR:17:357	K17C_TC_积攒度		积攒度の一时保存		推倒时、爱丽丝の积攒度　被逆推らMASTERの精力
;TCVAR:17:358	K17C_TC_人偶剧フラグ		人偶剧を见たかのフラグ		全部见ると立つ
;TCVAR:17:359	K17C_TC_タイプ一时保存		喘ぎタイプの一时保存		喘ぎタイプを切り替えする时の一时保存　主に拘束系
;TCVAR:17:360	K17C_TC_中出しCOUNT		MASTERの射精カウント		1回の中出し回数のカウント
;
;	[CFLAG]		[タグ]						[说明]						[备考]
;CFLAG:17:11	被掌握把柄					口上内で追加点灯			自慰暴露手を出しても点灯 同居自慰でも同等のイベント发生させてみている
;CFLAG:17:11	掌握把柄					口上内で追加上下			身体接触でお仕置き吻痕と同动作あり
;CFLAG:17:13	约会后EVENTFLAG		DATE_EVENT再利用に伴う		UPDATEでバグ修正胜手にします（爱丽丝のみ
;CFLAG:17:324	情事目击					诘问用					爱丽丝が恋人　もしくはマ斯塔に恋人がいない场合の知り合いのみ

;CFLAG:17:1001	K17C_CF_素質变化フラグ		素質变化させるかのフラグ	0で未设定(变化あり) 1で变化あり　-1で变化无
;CFLAG:17:1002	K17C_CF_FKマ斯塔			接吻用フラグ				0でまだ　1でした　MASTER用　ついでにカウントしてく
;CFLAG:17:1003	K17C_CF_FK爱丽丝			接吻用フラグ				0でまだ　1でした　爱丽丝用　ついでにカウントしてく
;CFLAG:17:1004	K17C_CF_FK					初吻のフラグ		お互相用初きっす　どっちがしたか 1で爱丽丝　-1でMASTERでいいかな
;CFLAG:17:1005	K17C_CF_约会イベント		约会イベントフラグ		0でまだ　1でした
;CFLAG:17:1006	K17C_CF_告白イベント		告白イベントフラグ			0でまだ　1でした　ついでにカウント
;CFLAG:17:1007	K17C_CF_性癖取得			性癖取得フラグ				0でまだ　1でした
;																		性技废止　快乐刻印で对応　使ってないので平气
;CFLAG:17:1009	K17C_CF_上海イベント		上海イベント				发生设定フラグ　0で未发生-1で发生抑制　やる场合はついでにカウント
;CFLAG:17:1010	K17C_CF_上海好感度			上海好感度					稍微したおまけ　カウント方式
;CFLAG:17:1011	K17C_CF_人形台词表示设定	人形台词表示设定			口上中に人形の台词を表示させるかの设定　イベントとは无关系　0で未设定　1表示　-1非表示
;CFLAG:17:1012	K17C_CF_自慰暴露追加イベ	自慰暴露追加イベ完走フラグ	0bitが鉴赏　1bitが自慰暴露ックス
;CFLAG:17:1013	K17C_CF_自慰フラグ		夜自慰のフラグ			爱丽丝ちゃんゆうべはおたのしみでしたね　のフラグ　自慰から遭遇したら消灯
;CFLAG:17:1014	K17C_CF_お友达イベント		お友达のフラグ				新设した关系性のフラグ そのうちイベント作る　イベントに关わらず关系あげる　保存はイベント后orUPDATE
;CFLAG:17:1015	K17C_CF_喘ぎRT				喘ぎRELATION_TYPE			グローバル保存しておく喘ぎで使用RT
;CFLAG:17:1016	K17C_CF_喘ぎタイプ			喘ぎタイプ					グローバル保存しておく喘ぎタイプ　绝顶とかまたぐやつもこれでなんとか
;CFLAG:17:1017	K17C_CF_喘ぎ部位			喘ぎ部位					グローバル保存しておく喘ぎ部位　ABL基准
;CFLAG:17:1018	K17C_CF_疑い			胖次没收or时间停止の疑い值	胖次没收or时间停止解除时の疑い　カウント式で貯まると时间停止暴露になる 100まで
;CFLAG:17:1019	K17C_CF_胖次没收			爱丽丝の胖次没收			爱丽丝が自己的胖次を没收したことがあるかを保存する
;
;CFLAG:17:1100	K17C_CF_RTF					取得フラグ保存				RTF初回判定用保存用　UPDATEで再设定するときとか使用
;CFLAG:17:1101	K17C_CF_VER					バージョン番号				口上のバージョンを保存　更新するの忘れない……忘れそう
;CFLAG:17:1110	K17C_CF_受け既读			妄想の既读フラグ			受け妄想	既读フラグ读まれていないものから优先的に　妄想种类の必ず连番で使用こと
;CFLAG:17:1111	K17C_CF_攻め既读			妄想の既读フラグ			攻め妄想	全取得で完全随机
;CFLAG:17:1120	K17C_CF_喘ぎタイプ选择回数	経験タイプの保存			1120番代+タイプ番号　喘ぎタイプ选择回数を保存　10kまで
;
;
;	[CSTR] FIRSTTIMEで独自にぶっこんでる文字列　基本初回判定で读み飞ばしのためなんかに使用
;约会イベント
;告白イベント
;胖次没收
;自慰暴露
;自慰暴露鉴赏初回
;自慰暴露ックス初回
;修罗场					神绮样、梦子限定でプチ修罗场
;被逆推				爱丽丝がマ斯塔を推倒た初回
;推倒喘ぎタイプ选择
;脱衣
;上海イベント
;身体接触各番号0～8
;指令通常处理初回口上　SELECTCOM+口上（选择时ではなく通常口上に入ったかを见る　初回失败などで弹かれた场合を考虑するため）
;
;******************************************************************************
;### 口上存在判定 ###################################
@M_KOJO_K17(ARG)
;别人版を作成する际はこのテンプレではなく别人版用口上テンプレをご利用ください

;口上存在判定です、けしてコメントアウトしないでください
;他の处理は一切行わないように
RETURN 1

;### 口上基本フラグ设定 #############################
@M_KOJO_FLAGSETTING_K17
;基本フラグ设定はここで行ってください
;共通の口上フラグは必要な部位のコメントアウトを外してご利用ください
;口上専用フラグはご自由に
;Xには角色番号を入れてください

;眠奸口上有、时间停止口上有、扮演に1を入れると、それぞれ时间停止时、眠奸时、扮演时に指令口上が读み込まれるように
;入れないと时间停止时、眠奸时、扮演时は一切喋りません
CFLAG:K17C_ID:眠奸口上有 = 1
;CFLAG:X:时间停止口上有 = 0
;CFLAG:X:扮演口上有 = 0

;破瓜中止口上有に1を入れると、@M_KOJO_EVENT_KX_LOST_VIRGIN_STOPで中止の成否を操作できます
;CFLAG:X:破瓜中止口上有 = 0

;口上内抱き寄せ判定_初回と口上内抱き寄せ判定_通常に1を入れると、M_KOJO_EVENT_KX_PERMISSIONで推倒の成否を操作できます
;CFLAG:X:口上内抱き寄せ判定_初回 = 0
;CFLAG:X:口上内抱き寄せ判定_通常 = 0

;推倒禁止に1を入れると、主动推倒てこなくなります
;以下は恋慕か炮友がつくまで推倒てこなくなる使用例
;IF !TALENT:X:恋慕 && !TALENT:X:炮友
;	CFLAG:X:推倒禁止 = 1
;ELSE
;	CFLAG:X:推倒禁止 = 0
;ENDIF

;来访不能に1を入れると、来访してこなくなります
;以下は认识があるまで来访してこなくなる使用例
;IF !CFLAG:X:认识
;	CFLAG:X:来访不能 = 1
;ELSE
;	CFLAG:X:来访不能 = 0
;ENDIF

;### 口上色判定 ###################################
@M_KOJO_COLOR_K17
SETCOLOR K17C_爱丽丝COLOR
;ここでSETCOLORすることで口上に色を付けられます
;例：SETCOLOR 0xC07070
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"UPDATE判定"
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_UPDATE_K17
;口上独自のUPDATE用
;ENCOUNTER専用に独自分岐フラグを仕込んだ场合等にどうぞ
;UPDATE判定でCFLAGを使用场合、角色番号の指定が必要になります
#DIM DYNAMIC TEMP=0
CALL COLORMESSAGE("妄想エロ乙女爱丽丝　设定・UPDATE开始",K17C_爱丽丝COLOR,1)
;******************************************************
;素質变更设定
;******************************************************
IF CFLAG:K17C_ID:K17C_CF_素質变化フラグ == 0
	PRINTL
	CALL CHOICE ("本口上会让爱丽丝的素質发生变化吗？","会变化","不会变化")
	PRINTL
	SELECTCASE RESULT
		CASE 0
			CFLAG:K17C_ID:K17C_CF_素質变化フラグ = 1
			PRINTFORMDL 以后的行动可能会让素質发生变化
		CASE 1
			CFLAG:K17C_ID:K17C_CF_素質变化フラグ = -1
			PRINTFORMDL 以后、本口上不会让素質发生变化
	ENDSELECT
ENDIF

;******************************************************
;人形について　角色がいたら停止する
;******************************************************
TEMP = K17_GET_DOLL(0)
SIF !TEMP
	CFLAG:K17C_ID:K17C_CF_人形台词表示设定 = -1
SIF !(TEMP & K17C_上海)
	CFLAG:K17C_ID:K17C_CF_上海イベント = -1

IF CFLAG:K17C_ID:K17C_CF_人形台词表示设定 == 0
	PRINTL
	PRINTFORMDL 在这爱丽丝口上中、让人偶（\@K17_GET_DOLL(K17C_上海) ? 上海# \@　\@K17_GET_DOLL(K17C_蓬莱) ? 蓬莱#\@） 会说话么
	PRINTFORMD 像这种感觉→
	TRYCALL K17_人形台词(K17C_上海,0)
	TRYCALL K17_人形台词(K17C_蓬莱,1)
	RESETCOLOR
	PRINTFORMDL 现在的设定[保留中-会说话]
	PRINTL
	CALL CHOICE("显示人偶的台词吗","暂且不管","说话也行","不许说话")
	SELECTCASE RESULT
		CASE 0
			PRINTFORMDW 暂且保留了。UPDATE的话又会出现该选择项
			SIF !FLAG:口上色
				PRINTFORMW 另外、我觉得将口上色设定为OFF的话、会很难区分的
		CASE 1
			PRINTFORMDW 设定为会说话
			CFLAG:K17C_ID:K17C_CF_人形台词表示设定 = 1
			SIF !FLAG:口上色
				PRINTFORMW 另外、我觉得将口上色设定为OFF的话、会很难区分的
		CASE 2
			PRINTFORMDW 设定为不会说话
			CFLAG:K17C_ID:K17C_CF_人形台词表示设定 = -1
	ENDSELECT
ENDIF

;******************************************************
;この口上を使用ためのだけのバグを胜手に修正
;******************************************************
;eraTW4.43修正前のセーブデータ
;约会后EVENTFLAGバグ修正 报告修正済み
;澡堂の值が代入されていたため、指令选择する度に时间が入っていた模样
;フラグでは3までしかならないはずなので、とりあえず4以上なら修正
IF CFLAG:K17C_ID:约会后EVENTFLAG > 3
	PRINTFORM 「发现约会后事件flagbug...
	CFLAG:K17C_ID:约会后EVENTFLAG = 0
	PRINTFORM 初期化...
	
	IF CFLAG:K17C_ID:K17C_CF_约会イベント && (CFLAG:K17C_ID:既成事实 & 合意_接吻)
		SETBIT CFLAG:K17C_ID:约会后EVENTFLAG , 0
		PRINTFORM 1更新...
	ENDIF
	IF CFLAG:K17C_ID:K17C_CF_告白イベント && (CFLAG:K17C_ID:既成事实 & 合意_恋人)
		SETBIT CFLAG:K17C_ID:约会后EVENTFLAG , 1
		PRINTFORM 2更新...
	ENDIF
	
	PRINTFORMW 已修正」
ENDIF

;见つけちゃった稀なやつ
;年龄バグの修正
;IF TALENT:MASTER:年龄 == -2
;	PRINTFORM 「年龄数值バグを検知...
;	TALENT:MASTER:年龄 = 0
;	PRINTFORMW 已修正」
;ENDIF
;
;;体型バグの修正
;IF TALENT:MASTER:体型 == -3
;	PRINTFORM 「体型数值バグを検知...
;	TALENT:MASTER:体型 = 0
;	PRINTFORMW 已修正」
;ENDIF

;******************************************************
;口上入れてからのロード时の对応
;とりあえず关系性を增减した场合は对応できるように
;******************************************************
;保存フラグの更新
IF K17_RT_FG(K17C_ID) != CFLAG:K17C_ID:K17C_CF_RTF
	
	;イベントフラグ再设定なんか巧いやり方考える
	;セーブデータから接吻指令选择したか强行寻找
	IF !(FIRSTTIME(312,1,K17C_ID) || !FIRSTTIME(20,1,K17C_ID)) && !CFLAG:K17C_ID:K17C_CF_FKマ斯塔
		PRINTFORM 「检测到特定SELECTCOM FIRSTTIME...
		CFLAG:K17C_ID:K17C_CF_FKマ斯塔 = 1
		PRINTFORMW flag已更新」
	ENDIF
	
	PRINTFORM 「检测到保存flag的差异...
	CFLAG:K17C_ID:K17C_CF_RTF = K17_RT_FG(K17C_ID)
	PRINTFORMW flag已更新」
	PRINTFORML 下次会显示提示
	PRINTL
	TRYCALL K17_HINT()
	PRINTW
ENDIF
;******************************************************
;口上のバージョン管理
;INTなんで小数点第2を1桁目とするかな
;こんな脆弱なものでいいのか……？（怯え
;******************************************************
IF CFLAG:K17C_ID:K17C_CF_VER < K17C_VER
	
	PRINTFORM 检测到口上版本的差异,UPDATE,开始自我诊断...
	
	;------------
	;Ver 0.02
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 002
		;掀裙子で与えた既读を取り消し修正 动作テストおｋ
		;CSTRから指定文字列を検索して削除　/切り詰め
		TEMP = K17_AUTO_SPLIT_NUM(CSTR:K17C_ID:0,"/","330口上")
		
		;既读＆现条件式を见る
		IF CFLAG:K17C_ID:好感度 <= 5000 && TEMP != -1
			;既读を取り消し
			CSTR:K17C_ID:0 = %K17_CHANGE_SPLIT(CSTR:K17C_ID:0,"/",TEMP)%/
			;修正アナウンス
			CALL COLORMESSAGE("\n指令：掀起裙子。的已读状态已重新设定为未读状态...",K17C_蓬莱COLOR,1)
			CALL COLORMESSAGE("判定基准和之前的Ver有所变动、请再度选择挑战...",K17C_蓬莱COLOR,1)
		ENDIF
	ENDIF
	;------------
	;Ver 0.03
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 003
		;新フラグの初期设定　しなくてもいいけど一応
		IF !CFLAG:K17C_ID:K17C_CF_喘ぎRT
			PRINTFORM \n正在初始化新添加的标志...
			CALL K17_SET_AUTO_PVOICE(-1,-1,K17C_受け_おねだり系)
			PRINTFORMW 已设置
		ENDIF
	ENDIF
	;------------
	;Ver 0.10
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 010
		;新フラグの初期设定　喘ぎTYPEの保存
		PRINTFORML \n正在进行Ver0.10的更新...
		IF CFLAG:K17C_ID:既成事实 & 合意_诶嘿嘿
			PRINTFORM 检测到诶嘿嘿合意...
			PRINTFORM \n正在初始化新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_おねだり系)
			PRINTFORMW 已设置
		ENDIF
		;性骚扰
		IF !FIRSTTIME("(313|315|316)口上",1,K17C_ID)
			PRINTFORM 检测到性骚扰指令的经验...
			PRINTFORM \n正在初始化新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_合意袭い系)
			PRINTFORMW 已设置
		ENDIF
		;自慰暴露ックス経験してれば强行系保存
		IF !FIRSTTIME("自慰暴露ックス初回",1,K17C_ID)
			PRINTFORM 检测到自慰暴露的经验...
			PRINTFORM \n正在初始化新添加的标志..
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_强行系)
			PRINTFORMW 已设置
		ENDIF
		;被逆推たこと那个ば基本を保存
		IF !FIRSTTIME("被逆推",1,K17C_ID)
			PRINTFORM 检测到被逆推的经验...
			PRINTFORM \n正在初始化新添加的标志...
			CALL K17_SET_AUTO_PVOICE(,,K17C_攻め_お手传い系)
			PRINTFORMW 已设置
		ENDIF
		
	ENDIF
	;------------
	;Ver 0.13
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 013
		;MIN内でインクリメントしていたバグがあったため
		;経験していても、フラグ值が加算されていないデータ用
		IF CFLAG:K17C_ID:K17C_CF_上海イベント == 0 && FIRSTTIME("上海イベント",1,K17C_ID)
			PRINTFORM 检测到上海事件经验...
			CFLAG:K17C_ID:K17C_CF_上海イベント++
			PRINTFORM \n已加上标志值，未发现长期bug，非常抱歉\n
		ENDIF
		
		IF CFLAG:K17C_ID:K17C_CF_告白イベント == 0 && FIRSTTIME("告白イベント",1,K17C_ID)
			PRINTFORM 检测到告白事件经验...
			CFLAG:K17C_ID:K17C_CF_告白イベント++
			PRINTFORM \n已加上标志值，未发现长期bug，非常抱歉\n

			IF K17_RT_FG(K17C_ID) != CFLAG:K17C_ID:K17C_CF_RTF
				PRINTFORM 「检测到保存flag的差异...
				CFLAG:K17C_ID:K17C_CF_RTF = K17_RT_FG(K17C_ID)
				PRINTFORMW flag已更新」
				PRINTFORML 下次会显示提示
				PRINTL
				TRYCALL K17_HINT()
				PRINTW
			ENDIF
		ENDIF

	ENDIF
	;------------
	;口上バージョンの更新
	;------------
	CFLAG:K17C_ID:K17C_CF_VER = K17C_VER
	PRINTFORMW ...版本已更新
	
ELSEIF CFLAG:K17C_ID:K17C_CF_VER  == K17C_VER
	PRINTFORML 现在是最新版本
ELSE
	PRINTFORML 存档中的口上版本与当前口上的版本不一致
	PRINTFORML 存档　Ver. {CFLAG:K17C_ID:K17C_CF_VER/100}.{CFLAG:K17C_ID:K17C_CF_VER%100/10}{CFLAG:K17C_ID:K17C_CF_VER%10}
	PRINTFORML 现在的口上　　Ver. {K17C_VER/100}.{K17C_VER%100/10}{K17C_VER%10}
ENDIF

CALL COLORMESSAGE(@"妄想エロ乙女爱丽丝　设定・UPDATE结束",K17C_爱丽丝COLOR,1)
;なんだこの计算は（惊愕 あっれーなんかこういう命令なかったっけ
PRINTFORMW Ver. {K17C_VER/100}.{K17C_VER%100/10}{K17C_VER%10}
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"ENCOUNTER"系イベント（エクストラ构文）
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_ENCOUNTER_K17
#DIM DYNAMIC iDoll,2	;人形フラグ

;初对面、挨拶のタイミング
;TALENTの变更はここでどうぞ
;******************************************************
;人形について　角色がいたら停止する
;******************************************************
SIF !K17_GET_DOLL(K17C_上海)
	CFLAG:K17C_ID:K17C_CF_上海イベント = -1
SIF !K17_GET_DOLL(0)
	CFLAG:K17C_ID:K17C_CF_人形台词表示设定 = -1
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止

	PRINTL
	
	;知り合いの扮演　ドッペルギャンガー未对応
	IF FLAG:扮演 && K17_GET_FRIENDS(FLAG:扮演)
		PRINTFORML 「%K17_GT()%、%K17_CNAME()%」
		PRINTFORML 「……是%K17_CNAME()%、对吧？」
		PRINTFORMDL %CALLNAME:TARGET%不知道为什么歪着头
		RETURN 1
	ENDIF
	
	
	;地域セレクト　地域で特别な会话などここで书く
	;魔法之森～人偶的洋馆まで　据点できたら追记する
	;魔法之森非自宅时で魔法之森で会った时
	IF MAIN_MAP != 5 && CFLAG:当前位置 >= 森林的入口 && CFLAG:当前位置 <= 人偶的洋馆
	
		;人かどうかの判定
		IF !(TALENT:MASTER:狐 || TALENT:MASTER:妖狐 || TALENT:MASTER:吸血鬼 ||TALENT:MASTER:动物耳)
			PRINTFORML 「啊啦？　……竟然会有人类来这种地方、还真是少见呐」
		ELSE
			PRINTFORML 「啊啦？　………竟然会有人…妖怪?来这种地方、还真是少见呐」
		ENDIF
		PRINTFORMDL 出现的是在幻想乡少有的西洋风貌的女性
		PRINTFORMDL 她伸出一只手拨弄着自己绚丽的金发。
		PRINTFORMDL 清澈透明的白色肌肤、顺着脸颊摇曳的秀发\@ TIME:2 < 5 ?在阳光的照耀下#在月光下\@闪耀着
		PRINTFORML 「我是住在这个森林里的人……你难道是迷路了么」
		PRINTFORML 「一个人在这种地方转来转去可是很危险的哦」
		PRINTFORMDL 像是很担心似的这么说着、露出了温柔的微笑
		PRINTFORMDL 就算是在如此危险的森林中、但能遇到这样的美丽的少女的话、那感觉也不坏呢。
		PRINTFORML 「…………」
		PRINTW
		PRINTFORML 「……对初次见面的人而言、还真是轻薄呐」
		PRINTFORMDL 那样说着的她挪开了视线、看起来有点害羞、。
		PRINTFORML 「你就尽量不要被那些不安好心的魔法使给骗到吧」
		PRINTFORMDL 那样的魔法使存在吗？
		PRINTFORML 「呼呼、那可不好说呢」
		PRINTW
	
	;魔法之森が自宅の场合で据点で会った　とりあえず仮置き
	ELSEIF MAIN_MAP == 5 && INRANGE(CFLAG:MASTER:当前位置,500,599)
			
		PRINTFORML 「%K17_CNAME()%、难道你就是那个最近才来这一片的人么……」
		PRINTFORMDL 出现的是在幻想乡少有的西洋风貌的女性
		PRINTFORMDL 她伸出一只手拨弄着自己绚丽的金发。
		PRINTFORMDL 清澈透明的白色肌肤、顺着脸颊摇曳的秀发\@ TIME:2 < 5 ?在阳光的照耀下#在月光下\@闪耀着
		PRINTFORMDL 虽然很失礼、但乍一看简直如同人偶一般
		PRINTFORMDL 不过就算那样、做工也太精致了
		PRINTW
		PRINTFORML 「有什么感到为难的事吗？」
		PRINTFORML 「有什么事的话可要马上说出来哦。不好的事情就算你放在那里不管、也不会自己好转起来呢」
		PRINTFORMDL 像是很担心似的这么说着、露出了温柔的微笑
		;自室
		IF CFLAG:K17C_ID:当前位置 == CFLAG:K17C_ID:初始位置
			PRINTFORML 「话说回来、这个地方放着对外行人来说很危险的东西、没有许可请不要随便进来」
		ELSE
			PRINTFORML 「这附近特别危险、你要小心点」
		ENDIF
		PRINTFORMDL 就算多少有些危险的场所、但能遇到这样的美丽的少女的话、那感觉也不坏呢。
		PRINTFORML 「…………」
		PRINTW
		PRINTFORML 「……对初次见面的人而言、还真是轻薄呐」
		PRINTFORMDL 那样说着的她挪开了视线、看起来有点害羞、。
		PRINTFORML 「你就尽量不要被那些不安好心的魔法使给骗到吧」
		PRINTFORMDL 那样的魔法使存在吗？
		PRINTFORML 「呼呼、那可不好说呢」
	
	;人里广场
	ELSEIF CFLAG:MASTER:当前位置 == CFLAG:K17C_ID:职场 && CFLAG:K17C_ID:职业种类 == K17C_职业种类_人偶剧
		;人偶剧中
		IF !CHARA_HOLIDAY(K17C_ID) && BASE:17:工作量 && TCVAR:K17C_ID:工作开始 <= TIME && TCVAR:K17C_ID:工作结束 >= TIME
			PRINTFORMDL 往人群里看了一眼、似乎正在上演着人偶剧
			PRINTFORMDL 操纵者是一位西洋风貌的女性、操纵的人偶也像舶来品一样。
			PRINTFORMDL 白皙透明的肌肤纤细的手指复杂的运动着
			PRINTFORMDL 闪闪发光的细线不停闪烁着、小小的人偶也随之不停地舞动。
			PRINTFORMDL 过了一会儿、人偶摇摇晃晃地走到了眼前，
			PRINTFORMDL 向%CALLNAME:MASTER%伸出了手
			TRYCALL K17_人形台词(K17C_上海,0)
			TRYCALL K17_人形台词(K17C_蓬莱,1)
			CFLAG:K17C_ID:K17C_CF_上海好感度+=20
			PRINTFORMDL %CALLNAME:MASTER%用手指触碰了人偶的小手、做了自我介绍
			PRINTW
			PRINTFORMDL 真是个做功很好的人偶、看上去像是在很开心的笑着一样、夸张地挥舞着手臂。
			PRINTFORMDL 而且操纵人偶的女性、手法也相当出色
			PRINTFORMDL %CALLNAME:MASTER%观看了一会人偶剧
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMDL 看到人群开始慢慢散去、操纵人偶的少女微笑着
			PRINTFORMDL 轻轻地举起裙子的一端恭敬地鞠着躬
			PRINTFORMDL 面对如此惹人怜爱的身姿、%CALLNAME:MASTER%也不由的给予了掌声
			PRINTW
		ENDIF
		
	;大图书馆
	;自宅が红魔馆の时は场所が违うのでそれぞれ判定して
	ELSEIF (CFLAG:当前位置 == 大图书馆 && GET_MAPID(CFLAG:当前位置) == 3 && MAIN_MAP != 3) || (MAIN_MAP == 3 && CFLAG:当前位置 == 310)
		
		PRINTFORML 「到这种充满霉味的地方来、究竟是小偷呢、还是知识的探求者呢……？」
		PRINTFORML 「不管是哪一边、盗取知识也一样是偷呢」
		PRINTFORMDL 那个……？　总之不是小偷
		PRINTFORMDL 而且知识是学习吧
		PRINTFORML 「经常会有从不学习、直接来抢的呢」
		PRINTFORMDL 快点学会如何警备比较好吧
		PRINTFORML 「嘛、确实是这样。但只是睡眠学习、也不会启到什么作用吧」
		PRINTW
		;ぱっちぇさんかこあがいる场合
		IF CFLAG:MASTER:当前位置 == CFLAG:54:当前位置 || CFLAG:MASTER:当前位置 == CFLAG:59:当前位置
			PRINTFORMDL 传来了咳咳、咳咳的咳嗽声
			PRINTFORML 「对不起、本来没有打算吵到别人的……」
			PRINTFORML 「这里的管理者可相当麻烦」
		ENDIF
		PRINTFORML 「嘛、不提了……来、到这边来」
		PRINTFORMDL 她招手示意去不会给别人添麻烦的角落
		PRINTFORML 「因为这里有个不常见的面孔、不由得上前搭话了、没什么别的意思」
		PRINTW
	ENDIF
	
	;～泛用～
	;以下に繋がるように↑を书く　条件に合わない时ここだけ表示
	
	PRINTFORMDL 回过神来、人偶在眼前轻飘飘的飞舞着
	PRINTFORMDL %CALLNAME:MASTER%被眼前的光景吸引住了
	PRINTFORML 「啊啦、人偶又这么少见吗？」
	SIF MAIN_MAP!=5
		PRINTFORML 「……话说回来、听说最近又有新面孔了、所以过来看看……」
	PRINTFORMDL 不知为什么看起来像是被估价似的上下打量着
	PRINTFORMDL %CALLNAME:MASTER%紧张地做了简短的自我介绍
	PRINTW
	PRINTFORML 「介绍晚了呢。初次见面、我是%NAME:TARGET%」
	PRINTFORML 「都市派的魔法使哦」
	PRINTFORMDL 都市派……姑且不论、原来是魔法使啊
	PRINTFORM 「也是人偶使哦」
	
	;一応角色名チェックしとく　谜のこだわり
	TRYCALL K17_人形台词(K17C_上海,0)
	iDoll:0 = RESULT
	TRYCALL K17_人形台词(K17C_蓬莱,1)
	iDoll:1 = RESULT
	IF iDoll:0 && iDoll:1
		PRINTFORML 「这个孩子是上海、这边是蓬莱。请多关照呢」
	ELSEIF iDoll:0
		PRINTFORML 「这个孩子是上海。请多关照呢」
	ELSEIF iDoll:1
		PRINTFORML 「这个孩子是蓬莱。请多关照呢」
	ELSE
		PRINTFORMDL 这样说完、人偶就出现在了%CALLNAME:MASTER%面前
	ENDIF
	PRINTFORMDL 真是做得相当好的人偶、让人感觉像是活的一般
	PRINTFORML 「承蒙夸奖、不胜荣幸。那也是我自己做的」
	PRINTFORMDL 是从手指那延伸出的光线在暗中操纵着的吗？
	PRINTFORML 「嘛、作为魔法使而言、那可是秘密呐」
	PRINTFORMDL %CALLNAME:TARGET%一副自满的表情做着介绍
	PRINTFORMDL 由此可见、她对作为魔法使的能力、和亲手制作的人偶都相当自豪
	PRINTFORMDL 乍一看也能感觉到叛逆的态度
	PRINTL	
	PRINTFORMDL %CALLNAME:TARGET%对%CALLNAME:MASTER%来说
	PRINTL
	PRINTFORMDL [0]很期待以后会怎样
	PRINTFORMDL [1]想看看变得坦率的%CALLNAME:TARGET%
	PRINTFORMDL [2]希望%CALLNAME:TARGET%能保持原本的这份高傲
	PRINTFORMDL [3]说明一下这些选项
	$OPENING_INPUT_LOOP1
	INPUT
	PRINTL
	SELECTCASE RESULT
		CASE 0
			CFLAG:K17C_ID:K17C_CF_素質变化フラグ = 0
			PRINTFORMDL 很期待今后能好好相处
			PRINTW
		CASE 1
			CFLAG:K17C_ID:K17C_CF_素質变化フラグ = 1
			PRINTFORMDL 为了今后也能好好相处、很想看看变得坦率的%CALLNAME:TARGET%
			PRINTW
		CASE 2
			CFLAG:K17C_ID:K17C_CF_素質变化フラグ = -1
			PRINTFORMDL 就算以后关系变好了、%CALLNAME:TARGET%的自尊心也还是很高吧
			PRINTW
		CASE 3
			PRINTFORMDL [0]选项、将保持原有的素质,UPDATE时可以再进行更改
			PRINTFORMDL [1]选项、会根据以后的行动、素质会发生固定变化
			PRINTFORMDL [2]选项、素质不会发生固定变化
			PRINTFORMDL 不管选择哪一项口上的内容都不会发生变化
			PRINTFORMDL 只是改变进行攻略的难易度
			;PRINTFORMDL どっちにしろ恋慕がつけばデレる
			GOTO OPENING_INPUT_LOOP1
		CASEELSE
			GOTO OPENING_INPUT_LOOP1
	ENDSELECT
ENDIF
RETURN 1



;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"SP_EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;约会归りにファーストKISS（合意も付く）
;基本中止される、初吻を终えると
;二度と见られなくなりますが
;本口上では救済される……はず
;テスト成功　多分行けます
;告白イベントと连动开始
;1度中止接吻したら选择肢はパスする形に
;==================================================
@M_KOJO_SPEVENT_K17_1(ARG,ARG:1)
#DIM DYNAMIC 人气 = 0
#DIM DYNAMIC スキップカウント = 0
#DIM DYNAMIC MAX好感度 = 0
#DIM DYNAMIC 恋人ID = -1
#DIM DYNAMIC MAX好感度ID = -1
#DIM DYNAMIC 顺位 = 1
#DIM DYNAMIC iID_Count = 0

;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止

PRINTL
	IF FIRSTTIME("约会イベント")
		;初回限定
		PRINTFORMW 「呐、等下……」
		PRINTFORMDL 想着怎么了？回头一看
		PRINTFORMDL %CALLNAME:TARGET%一直低着头、脸上有点红
		PRINTFORML 「嗯嗯……嗯唔、稍微等下」
		PRINTFORML 「今天陪了%K17_CNAME()%一天吧」
		PRINTFORML 「所以也稍微陪我一下吧」
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW ………………
		PRINTFORML 「这就是那个吧、俗话说的约会吧」
		PRINTFORML 「和我做这种事开心吗」
		IF TCVAR:TARGET:中止接吻 == 1
			PRINTFORML 「%K17_CNAME()%到底是怎么想的、我想好好问一下」
			PRINTFORMDL 当然很开心
			RESULT =0
		ELSE
			{
			CALL K17_CHOICE("「"+K17_CNAME()+"是怎么想的、我想好好问一下呢」",
							"当然很开心","老实说、不是太……","比起那种事、把胖次交出来吧")
			}
		ENDIF
	ELSE
		IF TCVAR:TARGET:中止接吻 == 1
			PRINTFORMW 「呐、今天感觉怎样……？」
			PRINTFORMDL 当然很开心
			RESULT =0
		ELSE
			$DATE_INPUT_LOOP1
			CALL K17_CHOICE("「呐、今天感觉怎样……？」","当然很开心",,"老实说、不是太……","比起那种事、把胖次交出来吧")
		ENDIF
	ENDIF
	
	
	SELECTCASE RESULT
		CASE 0
			PRINTFORML 「是么、谢谢。我也很开心呢」
		CASE 1
			PRINTFORML 「是么、这样啊……」
			PRINTFORML 「……果然还是有些迷茫」
			PRINTFORMDL %CALLNAME:TARGET%小声的自言自语后又马上恢复了平时的样子
			PRINTFORML 「抱歉、什么事都没」
			PRINTW
			TCVAR:TARGET:中止接吻 = 1
			TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
			RETURN 1
		CASEELSE
			スキップカウント++
			IF スキップカウント >= 3
				PRINTFORML 「已经够了……」
				PRINTW
				TCVAR:TARGET:中止接吻 = 1
				TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
				RETURN 1
			ENDIF
			PRINTFORML 「%K17_RS("请认真地回答啊/好好听我说话啊")%」
			GOTO DATE_INPUT_LOOP1
	ENDSELECT
	
	PRINTFORMDL 那么我认为这次约会很成功
	PRINTW
	PRINTFORML 「我……从来没有和任何人约会过」
	PRINTFORML 「还以为会在那片森林里、就这样一个人和人偶们生活下去……」
	PRINTFORML 「但是呢、我也有想和一位出色的人谈一场恋爱、这样的愿望……」
	PRINTFORMDL %CALLNAME:TARGET%一直盯着这边看
	
	;人气チェック ついでに恋人が谁か寻找　爱丽丝ちゃんまじこわい
	MAX好感度 = CFLAG:K17C_ID:好感度
	MAX好感度ID = K17C_ID
	FOR iID_Count,1,CHARANUM
		;出禁　爱丽丝以外を见る
		SIF CFLAG:iID_Count:出禁 || iID_Count == K17C_ID
			CONTINUE
		IF MAX好感度 <= CFLAG:iID_Count:好感度
			MAX好感度 = CFLAG:iID_Count:好感度
			MAX好感度ID = iID_Count
		ENDIF
		SIF CFLAG:K17C_ID:好感度 <= CFLAG:iID_Count:好感度
			顺位++
		SIF TALENT:iID_Count:恋慕
			人气 += 3
		SIF TALENT:iID_Count:思慕
			人气 += 1
		IF TALENT:iID_Count:恋人
			恋人ID = iID_Count
			人气 += 10
		ENDIF
	NEXT
	
	;MASTERに恋人がいて爱丽丝ではないとき
	IF !(CFLAG:TARGET:既成事实 & 合意_恋人) && TALENT:MASTER:恋人
		;谁が恋人か见る
		IF K17_GET_FRIENDS(恋人ID)
			;ｈ参照
			PRINTFORML 「没想到偏偏居然是%K17_CNAME(恋人ID)%的恋人……」
			PRINTFORML 「这到底是怎么回事啊……」
		;其他の人
		ELSE
			PRINTFORML 「但是%K17_CNAME()%、还有其他别的恋人吧」
			PRINTFORML 「难道只是在和我玩玩吗？」
		ENDIF
		
	;それ以外
	ELSE
		;最大好感度か、すでに恋人ならここ
		IF MAX好感度ID == K17C_ID || TALENT:MASTER:恋人 == K17C_ID
			PRINTFORML 「但是、日后是否能在%K17_CNAME()%的心中排在第一位、感觉十分不安」
		ELSE
			;あわわわ……
			IF 顺位 <= 5
				PRINTFORML 「但是我、在%K17_CNAME()%心里只能排第{顺位}名吧……」
			ELSE
				PRINTFORML 「我、也是%K17_CNAME()%后宫的一员吧……」
			ENDIF
		ENDIF
		
		;人气を见る
		SELECTCASE 人气
			CASE IS >= 10
				PRINTFORML 「因为%K17_CNAME()%、好像很受欢迎的样子」
			CASE IS >= 4
				PRINTFORML 「因为%K17_CNAME()%、好像对各式各样的孩子都出手了」
			CASE IS >= 1
				PRINTFORML 「因为%K17_CNAME()%、还有其他喜欢的女孩子吧」
			CASE 0
				PRINTFORML 「%K17_CNAME()%、为什么那么对我那么执着呢」
		ENDSELECT
	ENDIF
	
	IF 人气 != 0
		PRINTFORMDL 确实、对于%CALLNAME:TARGET%来说可能是不够诚实
		;うそだ！
		PRINTFORML 「对不起、并不是打算责备你的」
		PRINTFORML 「我就是这么麻烦的人……」
		
		
		
		IF TCVAR:TARGET:中止接吻==0
			$DATE_INPUT_LOOP2
			CALL K17_CHOICE("「就算这样、你还会邀请我么？」","当然会邀请","这实在是、太麻烦了","比起那种事更想要胖次")
		ELSE
			PRINTFORML 「就算这样、你还会邀请我么？」
			PRINTFORMDL 当然会邀
			RESULT = 0
		ENDIF
		
		SELECTCASE RESULT
			CASE 0
				PRINTFORML 「嗯、谢谢。%K17_CNAME()%果然很温柔呢」
			CASE 1
				PRINTFORML 「……果然很麻烦呢」
				PRINTFORMDL %CALLNAME:TARGET%小声的自言自语后又马上恢复了平时的样子
				PRINTFORML 「非常抱歉、你不必再邀我了」
				PRINTW
				TCVAR:TARGET:中止接吻 = 1
				TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
				RETURN 1
				
			CASEELSE
				スキップカウント++
				IF スキップカウント >= 3
					PRINTFORML 「已经够了……」
					PRINTW
					TCVAR:TARGET:中止接吻 = 1
					TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
					RETURN 1
				ENDIF
				PRINTFORML 「本来就打算认真说的」
				GOTO DATE_INPUT_LOOP2
		ENDSELECT
		PRINTFORML 「那就直说吧……」
	ELSE
		PRINTFORMDL %CALLNAME:TARGET%是最重要的、这还用说么
		PRINTFORML 「唔……不、谢谢。%K17_CNAME()%、真是一心一意呢」
		PRINTFORML 「那么、回头见吧、那个、得好好回应%K17_CNAME()%的心意呢」
	ENDIF
	
	PRINTW
	
	;爱丽丝から接吻
	CALL K17_FIRSTKISS_ALICE(TARGET)
	IF RESULT == 0
		;もう爱丽丝からの初吻をしてもらっていた场合
		SELECTCASE K17_GRT(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「我爱你……」
			CASE IS >= K17C_思慕
				PRINTFORML 「喜欢你哦……」
		ENDSELECT
		PRINTFORML 「嗯唔……%K17_HEART()%」
		PRINTFORML 「这是我第{CFLAG:K17C_ID:K17C_CF_FK爱丽丝}次的kiss」
		PRINTW
	ENDIF
	
	IF TALENT:MASTER:无接吻经验 && TALENT:TARGET:无接吻经验
		PRINTFORML 「%K17_CNAME()%的初吻、我就收下了」
		PRINTFORML 「我的初吻也给%K17_CNAME()%了、真是太好了……」
		PRINTFORMDL 感觉彼此的心意相通了……
		PRINTW
	ELSEIF TALENT:TARGET:无接吻经验
		PRINTFORML 「我还是第一次」
		PRINTFORMDL %CALLNAME:TARGET%的接吻和外表截然相反、显得相当稚嫩
		PRINTW
	ELSEIF TALENT:MASTER:无接吻经验
		PRINTFORML 「夺走了%K17_CNAME()%的初吻了呢」
		PRINTFORMDL %CALLNAME:TARGET%的kiss非常温柔
		PRINTW
	ENDIF
	
	PRINTFORML 「我想将我的心意好好传达给你……传达到了吗？」
	PRINTFORMDL 这份心意从嘴唇充分传达给了%CALLNAME:MASTER%……
	PRINTW
	
	IF CFLAG:TARGET:被掌握把柄
		PRINTFORML 「这个也是、封口费哦」
		PRINTFORMDL 这么说起来、确实是被抓住了把柄
		PRINTW
	ELSE
		;つまり诱い
		SIF TALENT:TARGET:恋慕
			PRINTFORML 「我会一直等你的……随时都能来找我哦」
		SIF TALENT:TARGET:思慕
			PRINTFORML 「我随时都在等你……会来找我的吧」
	ENDIF
	
	IF 人气 == 0 && 恋人ID == -1
		PRINTFORML 「……嗯唔、是个很不错的开始呢」
	ELSEIF 人气 >= 1 && 恋人ID != -1
		PRINTFORML 「……不会输给任何人的」
	ELSEIF 人气 >= 1
		PRINTFORML 「……嗯唔、还算是个过得去的开始吧」
	ENDIF
	
	;恋人がすでにいる场合
	IF !(CFLAG:TARGET:既成事实 & 合意_恋人) && TALENT:MASTER:恋人
		IF K17_GET_FRIENDS(恋人ID)
			PRINTFORML 「……%K17_CNAME(恋人ID)%也是呢」
		;其他の人
		ELSEIF !(恋人ID == -1)
			PRINTFORML 「……是恋人了呢」
		ENDIF
	ENDIF
	PRINTFORMDL %CALLNAME:TARGET%在耳边喃喃细语
	
	;完走マジおつかれ　口上侧から呼ぶのも考えて结束处理
	TCVAR:TARGET:中止接吻 = 0
	CFLAG:K17C_ID:K17C_CF_约会イベント =1
	SETBIT CFLAG:TARGET:约会后EVENTFLAG,0
	TCVAR:K17C_ID:K17C_TC_约会イベ完走 = 1
	CALL K17_RELATION_EV(K17C_RTF_逢引)
	SIF !RESULT
		PRINTW
ENDIF
RETURN 1


;==================================================
;约会归りに告白（恋人が付く）
;==================================================
@M_KOJO_SPEVENT_K17_2(ARG,ARG:1)
;口上主はTARGET
#DIM EVck=0	;约会イベントに行ってたかチェック
#DIM iRT=0
#DIM iRTF=0

EVck = 0
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;告白内容
	;この告白内容表示后に接受かどうかの选择分が表示されます
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
	
		;-------------------------------------------------
		;约会イベント前に告白に入る场合もあるので先消化
		;-------------------------------------------------
		IF !CFLAG:K17C_ID:K17C_CF_约会イベント
			TCVAR:TARGET:中止接吻 = 1
			EVck=1
			CALL M_KOJO_SPEVENT_K17_1(TARGET)
			SETBIT CFLAG:ARG:约会后EVENTFLAG , 0
		ENDIF
				
		;各种初期化
		CFLAG:K17C_ID:K17C_CF_告白イベント = MIN(CFLAG:K17C_ID:K17C_CF_告白イベント + 1,10000)
		iRT = K17_GRT(TARGET)
		iRTF = K17_RT_FG(TARGET)
		;-------------------------------------------------
		;初回
		;-------------------------------------------------
		IF FIRSTTIME("告白イベント",1) && EVck==0
			;初回限定　约会イベント経由も飞ばし
			PRINTFORML 「……（加油）」
			PRINTFORMDL 怎么了、突然……
			PRINTFORMDL %CALLNAME:TARGET%两手握拳
			PRINTFORML 「……唔……唔唔～～～%K17_BLUSH()%」
			PRINTFORMDL 可是、一朝向这边就低着头、连耳朵都变得通红起来
			PRINTFORML 「～～～mo,momo」
			PRINTFORMDL 然后就这样噗咔噗咔的敲着%CALLNAME:MASTER%
			PRINTFORMDL 一点都不痛反而觉得有些可爱
			PRINTW
			CALLF FIRSTTIME("告白イベント")
		ENDIF
		
		;-------------------------------------------------
		;二回目以降ここから
		;-------------------------------------------------
		PRINTFORML 「嗯唔、稍微…让我这样呆一会儿……」
		PRINTFORMDL %CALLNAME:TARGET%突然停下脚步、拉着%CALLNAME:MASTER%的%K17_RS("手腕/手")%、%K17_RS("将脸埋入了胸口/紧紧的拥抱着")%
		PRINTFORMDL 就这样用脑袋蹭蹭撒娇
		PRINTW
		
		;MASTERに恋人がいて爱丽丝ではないとき　本家からはこない
		IF !(CFLAG:TARGET:1 & 4) && TALENT:MASTER:恋人
			SELECTCASE iRT
				CASE IS >= K17C_恋慕
					IF K17_GET_FRIENDS(TALENT:MASTER:恋人)
						PRINTFORML 「……我也知道这样对%K17_CNAME(TALENT:MASTER:恋人)%%K17_RS("很不好/很抱歉")%」
					ELSE
						PRINTFORML 「……我也知道这样对你的%K17_RS("恋人/本命")%%K17_RS("很不好/很抱歉")%」
					ENDIF
					PRINTFORML 「但是我也%K17_RS("喜欢着/爱着/很喜欢")%%K17_CNAME()%」
					PRINTFORML 「算是我只是%K17_RS("后宫的末席/后宫的一员/情人/小妾/侧室")%也没关系、但要好好记住哦……」
					PRINTFORML 「……我爱你」
				CASE IS >= K17C_思慕
					PRINTFORML 「果然……这样的事还是%K17_RS("很不好/很糟糕/不可以")%么……」
					PRINTFORML 「但是%K17_RS("已经无法放弃了/已经停不下来了")%……」
					PRINTFORML 「……喜欢你哦」
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%只能继续抚摸着埋在胸口的%CALLNAME:TARGET%
			
		ELSEIF TALENT:MASTER:恋人 == K17C_ID
			;恋人同士
			PRINTFORML 「呼唔……对不起。不、谢谢、呐」
			PRINTFORML 「头发要……啊……啊唔……」
			PRINTFORMDL 总觉得像这样普通的撒娇的%CALLNAME:TARGET%很少见、摸了摸她的头
			PRINTFORML 「虽然已经成为了恋人、还是会好好的和我约会呢」
			SELECTCASE iRT
				CASE IS >= K17C_性癖
					PRINTFORML 「呐%K17_CNAME(0,1)%　喜欢%K17_HEART()%　最喜欢了%K17_HEART()%　%K17_HEART()%我爱你%K17_HEART()%」
					PRINTFORML 「mo,momo。为什么我会如此爱着你呢」
					PRINTFORML 「真的一直以来很感谢你、我爱你%K17_CNAME(MASTER,1)%」
				CASE IS >= K17C_恋慕告白
					PRINTFORML 「%K17_RS()%一直%K17_RS("这么重视我/这么珍惜我/爱着我/疼爱我")%、谢谢」
					PRINTFORML 「我爱你哦」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_CNAME()%真的很喜欢我么……？」
					PRINTFORML 「唔嗯、我比你的喜欢、要更加喜欢你哦」
				CASE IS >= K17C_思慕
					PRINTFORML 「呼呼……%K17_RS("这下得分很高呢/很用心呢/你很了解我呢")%」
					PRINTFORML 「再次恋上你了」
			ENDSELECT
			PRINTFORMDL 只要%CALLNAME:TARGET%高兴、比什么都好
			PRINTFORMDL %CALLNAME:MASTER%和%K17_RS("最喜欢的/深爱的/最重视的恋人")%%CALLNAME:TARGET%度过了一段快乐的时光
			
			
		;-------------------------------------------------
		;お互いまだ谁とも付き合ってない时 本来の仕样
		;-------------------------------------------------
		ELSEIF !TALENT:MASTER:恋人
			
			;-------------------------------------------------
			;告白　初回
			;-------------------------------------------------
			IF CFLAG:K17C_ID:K17C_CF_告白イベント == 1
				PRINTFORML 「呐、我们这样算什么关系呢……？」
				SIF iRTF & K17C_RTF_接吻
					PRINTFORML 「也已经接过吻了……」
				SIF iRTF & K17C_RTF_诶嘿嘿
					PRINTFORML 「也有过……身体关系了……」
				SIF !FIRSTTIME("自慰暴露",1)
					PRINTFORML 「在家里……连、连那种地方也都看过了……」
				
				PRINTFORMDL 的确……到现在为止也还没有搞清楚相互之间的关系。
				PRINTFORML 「而且%K17_CNAME()%也还没和任何人交往吧」
				PRINTFORML 「…………」
				PRINTFORMDL 你就直截了当地说吧、还是说、还想继续等呢
				PRINTFORMDL %CALLNAME:TARGET%拽着%CALLNAME:MASTER%的衣角、沉默地低着头
				PRINTW
				SELECTCASE iRT
					CASE IS >= K17C_恋慕
						PRINTFORML 「那么、就跟我好好交往……吧……」
						PRINTFORMDL 抬起头来用真挚的眼神凝视着%CALLNAME:MASTER%
						PRINTFORMW 「我……爱着%K17_CNAME()%……」
						PRINTFORML 「已经无法想象没有%K17_CNAME()%的生活了……」
						
					CASE IS >= K17C_思慕
						PRINTFORML 「那就、请和我好好交往……吧……」
						PRINTFORMW 「……%K17_CNAME()%……喜……喜欢……喜欢你哦……%K17_BLUSH(3)%」
						PRINTFORMDL 连耳朵都变红了、用蚊子般的声音这样告白了
						PRINTFORML 「%K17_CNAME()%、会好好对我负起责任的吧、呐……」
				ENDSELECT
			;-------------------------------------------------
			;告白　二回目以降　爱丽丝练习してきた！
			;-------------------------------------------------
			ELSE
				PRINTFORML 「呼唔……啊啦、还不明白么？　接下来要说的话……」
				PRINTFORML 「在成为%K17_CNAME()%的恋人之前、无论多少次我都会尝试的」
				PRINTFORMDL %CALLNAME:TARGET%用真挚的眼神凝视着%CALLNAME:MASTER%
				SELECTCASE iRT
					CASE IS >= K17C_恋慕
						
						PRINTFORMW 「%K17_CNAME()%、我爱你%K17_HEART()%」
						
						;口说き文句　那个これ重くね？
						PRINTDATADL
							DATAFORM 「可以每天为了%K17_CNAME()%做饭」
							DATAFORM 「那个……H…的事情、每天做也没关系！」
							DATAFORM 「每天早上在%K17_CNAME()%的身边醒来……」
							DATAFORM 「希望你能永远在我身边、无论何时何地都在一起」
						ENDDATA
						PRINTFORML 「你也该改变心意了吧……mo……」
						
					CASE IS >= K17C_思慕
						
						PRINTFORMW 「%K17_CNAME()%、喜欢你哦」
						PRINTFORML 「请和我交往」
						PRINTFORML 「怎、怎样?我毫不掩饰地告诉了你」
				ENDSELECT
				
				;嘘だ！
				PRINTFORML 「嘛、也等了这么长时间了、不会让你立马就回答的」
				PRINTFORML 「但是……可要好好记住哦」
				
			ENDIF
		ENDIF
		
		;フラグチェック
		CALL K17_RELATION_EV(K17C_RTF_告白)
		TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;告白オッケー（恋人が付く）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「………………」
		PRINTFORML 「……那个……我真的可以么……？」
		PRINTFORMDL 当然。想和%CALLNAME:TARGET%成为恋人
		PRINTFORMDL 原本就打算这么回答
		PRINTW
		PRINTFORML 「我……我！一定要变得更加可爱更加迷人！」
		PRINTFORMDL 我想现在也足够了……
		PRINTFORML 「这样才能变成和%K17_CNAME()%相称的恋人」
		PRINTFORML 「谢谢、%K17_CNAME()%。我会加油的」
		PRINTW
		PRINTFORML 「%K17_CNAME()%、我爱你%K17_HEART()%」
		PRINTFORMDL 相当兴奋的%CALLNAME:MASTER%微笑着的抱住了%CALLNAME:TARGET%
		PRINTFORMDL 那是至今为止见过的最好的笑容。
		;フラグチェック
		CALL K17_RELATION_EV(K17C_RTF_恋人)
		TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;告白失败
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		
		;振られた回数によって分岐
		SELECTCASE CFLAG:K17C_ID:K17C_CF_告白イベント
			CASE IS >= 10
				PRINTFORML 「已经被甩了10次以上了呢……」
				PRINTFORML 「……笨蛋……」
				PRINTFORMDL 终于、从%CALLNAME:TARGET%的眼睛里流出了大颗的眼泪……
				PRINTFORML 「…………但是……最喜欢了……」
			CASE IS >= 5
				PRINTFORML 「呜…………」
				PRINTFORML 「我知道了…………我知道啦、所以什么也不要说了……」
				PRINTFORMDL %CALLNAME:TARGET%这样说着、将脸别开了。看起来很消沉的样子
			CASEELSE
				PRINTFORML 「呜……嗯、没事的」
				PRINTFORML 「不管受到多少次打击、我都会重新站起来的……」
				PRINTFORMDL 虽然%CALLNAME:TARGET%坚强的鼓舞着自己、眼里却隐约可见的含着泪水
		ENDSELECT
		PRINTFORMDL 面对那样的%CALLNAME:TARGET%，%CALLNAME:MASTER%一句话也说不出来……
		TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	

TCVAR:K17C_ID:K17C_TC_约会イベ完走=1
ENDIF
RETURN 1

;==================================================
;约会归り
;==================================================
@M_KOJO_SPEVENT_K17_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常回家
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL = 1
	;-------------------------------------------------
	IF LOCAL && ARG == 0
	
		;约会イベントを再判定　SP再突入は一日一回
		IF TCVAR:K17C_ID:K17C_TC_约会イベ完走==0 && TCVAR:K17C_ID:K17C_TC_约会イベ判定==0 && !FLAG:时间停止
			CALL K17_DATE_EVENT_RELIEF(TARGET)
			IF TCVAR:K17C_ID:K17C_TC_约会イベ完走
				RETURN 1
			ENDIF
		ENDIF
		
		SELECTCASE K17_GRT(TARGET)
			CASE IS>=K17C_思慕诶嘿嘿
				PRINTFORML 「已经到回去的时间了么……」
				PRINTFORML 「好可惜啊……和%K17_CNAME()%在一起、时间过得很快呢」
				PRINTFORMDL 依偎在%CALLNAME:MASTER%身旁的%CALLNAME:TARGET%依依不舍的%K17_RS("放开了手/放手了/放开了胳膊")%
			CASE IS>=K17C_思慕
				PRINTFORML 「嗯、今天谢谢了」
				PRINTFORML 「和%K17_CNAME()%玩得很开心呢」
				PRINTFORMDL 总是看起来很酷的%CALLNAME:TARGET%、今天%K17_RS(",脸上显得有点儿红/依然不肯放开紧握的手/的眼神似乎还沉浸在陶醉之中")%
			CASEELSE
				PRINTFORML 「嗯、辛苦了」
				PRINTFORMDL 悄无声息地离开了
		ENDSELECT
		
		;回来了ので判定のみ戻し
		;一度目判定失败（通常回家）してもイベント完走してなければ同じ日でもイベント见れるはず
		;ただし本家仕样は考虑されない仕方ないね
		;中止接吻した场合も完走としてみ无、翌日から
		TCVAR:K17C_ID:K17C_TC_约会イベ判定=0

	ENDIF
	;-------------------------------------------------
	;反抗刻印消去イベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「正如所说的那样改变了态度呢」
		PRINTFORML 「不要马上又开始得寸进尺了」
	ENDIF
	;-------------------------------------------------
	;反抗刻印2>1レベルダウンイベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「嘛、及格了」
		PRINTFORML 「还得好好努力赎罪哦」
	ENDIF
	;-------------------------------------------------
	;反抗刻印3>2レベルダウンイベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「今天、就姑且稍微肯定一下你的努力吧」
		PRINTFORML 「但只有这种程度的话、还没法完全原谅你」
	ENDIF
	
	
ENDIF
PRINTW
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;房间で遭遇
;改行したいのでRETURN统一
;仕事中は无で
;==================================================
@M_KOJO_EVENT_K17_1(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && CFLAG:K17C_ID:行动 != 5

	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERが入ってきた
	;一日一回处理
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTL
		IF !TCVAR:TARGET:今天有否见面
			
			;朝目を觉ました时时间が更新されないので挨拶おかしくなるので退避
			IF CFLAG:TARGET:初始位置 == CFLAG:MASTER:初始位置
				TCVAR:TARGET:今天有否见面 = 0
				CALL M_KOJO_EVENT_K17_2(1)
				CFLAG:K17C_ID:K17C_CF_自慰フラグ = 0
				RETURN 1
			ENDIF
			
			;自慰暴露后の遭遇
			IF CFLAG:TARGET:自慰暴露
				PRINTFORML 「啊……呀～～～～%K17_BLUSH()%」
				;鉴赏or自慰暴露ックス
				IF CFLAG:TARGET:自慰暴露 > 1
					SELECTCASE K17_GRT(TARGET)
						CASE IS >= K17C_思慕诶嘿嘿
							PRINTFORML 「……%K17_GT()%、变态桑%K17_HEART()%」
						CASEELSE
							PRINTFORML 「…………变态%K17_BLUSH()%」
					ENDSELECT
				ENDIF
				PRINTW
				RETURN 1
			ENDIF
			
			;夜自慰后遭遇　思慕↑
			IF CFLAG:K17C_ID:K17C_CF_自慰フラグ
				SELECTCASE K17_GRT(TARGET)
					CASE IS >= K17C_恋慕
						PRINTFORML 「……%K17_GT()%……%K17_BLUSH()%」
						PRINTFORML （又擅自妄想了……对不起）
					CASE IS >= K17C_思慕
						PRINTFORML 「……%K17_GT()%……%K17_BLUSH()%」
						PRINTFORML （唔～～～%K17_BLUSH()%　意、意识要飞走了……）
				ENDSELECT
				PRINTFORMDL 总觉得今天的%CALLNAME:TARGET%的脸特别红
				CFLAG:K17C_ID:K17C_CF_自慰フラグ = 0
				PRINTW
				RETURN 1
			ENDIF
			
			
			;通常处理
			SELECTCASE K17_GRT_EX(TARGET)
				CASE IS >= K17C_恋慕
					PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%　今天%K17_RS("想是来见我的么/想来找我的么")%%K17_HEART()%」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("今天又见面了呢/最近经常见面呢/我们又见面了呢")%」
				CASE IS >= K17C_思慕
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今天又见面了呢/最近经常见面呢/我们又见面了呢")%」
				CASEELSE
					PRINTFORML 「%K17_RS("啊/唔")%、%K17_GT()%」
			ENDSELECT
		
	;-------------------------------------------------
	;1日中会う度に出る
	;-------------------------------------------------
		ELSE
			;特殊な场所の处理
			IF BATHCHECK(CFLAG:MASTER:当前位置)
				PRINTFORMDL %CALLNAME:TARGET%用胳膊遮着裸露的身体
				RETURN 1
			ENDIF
			
			;通常处理
			PRINTFORMD %CALLNAME:TARGET%
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕
					PRINTFORMD 轻轻挥了挥手
					PRINTFORMD %K17_RS("眨了眨眼/满脸笑容的/一脸陶醉的表情")%
				CASE IS >= K17C_思慕
					PRINTFORMD 轻轻举起手
					PRINTFORMD %K17_RS("有些脸红的/好像有点害羞的/一对上眼时就移开了视线")%
			ENDSELECT
			PRINTFORMDL 向着%CALLNAME:MASTER%%K17_RS("靠过来了/打了招呼/渐渐靠近了")%
			
		;一日一回终端
		ENDIF
		PRINTW
	;MASTERが入ってきた终端
	ENDIF
	;-------------------------------------------------
	;TARGETが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTL
		IF !TCVAR:TARGET:今天有否见面 && CFLAG:17:行动 != 5
			;通常处理
			SELECTCASE K17_GRT_EX(TARGET)
				CASE IS >= K17C_恋慕
					PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("我来了/因为想见你就来了")%%K17_HEART()%」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("今天又见面了呢/最近经常见面呢/我们又见面了呢")%」
				CASE IS >= K17C_思慕
					PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今天又见面了呢/最近经常见面呢/我们又见面了呢")%」
				CASEELSE
					PRINTFORML 「%K17_RS("啊/唔")%、%K17_GT()%」
			ENDSELECT
			
		ELSE
			;特殊な场所の处理
			IF BATHCHECK(CFLAG:MASTER:当前位置)
				PRINTFORMDL %CALLNAME:TARGET%用胳膊遮着裸露的身体
				RETURN 1
			ENDIF
			
			PRINTFORMD %CALLNAME:TARGET%
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕
					PRINTFORMD 轻轻挥了挥手
					PRINTFORMD %K17_RS("眨了眨眼/满脸笑容的/一脸陶醉的表情")%
				CASE IS >= K17C_思慕
					PRINTFORMD 轻轻举起手
					PRINTFORMD %K17_RS("有些脸红的/好像有点害羞的/一对上眼时就移开了视线")%
			ENDSELECT
			PRINTFORMDL 向着%CALLNAME:MASTER%%K17_RS("靠过来了/打了招呼/渐渐靠近了")%
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;TARGETが澡堂に入ってきて一绪に入る
	;@澡堂逐出条件见る
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTL
		PRINTFORML 「呀啊啊！？」
		PRINTFORMDL 进来的是裸着身子的%CALLNAME:TARGET%
		PRINTFORML 「是%K17_CNAME()%啊、还以为是谁呢、吓了我一跳」
		PRINTFORMDL 裹起身子朝这里过来了
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お澡堂イベント
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些后、就满脸通红地泡在浴池里了
		ELSE
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%若隐若现的
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;TARGETが澡堂に入ってきて出て行った
	;@澡堂逐出条件 !恋慕 接吻前 态度2未满
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTL
		;仲良くなる前反应
		PRINTFORML 「哈哇哇！？！？　失、失礼了！」
		PRINTFORMDL 突然进来的是裸着身子的%CALLNAME:TARGET%
				
		
		;随机イベ　裸鉴赏　长くなったので函数化
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お澡堂イベント
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了那么多、就慌慌张张地出去了
		ELSE
			PRINTFORMDL 出去时看见了若隐若现的%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%
			TCVAR:K17C_ID:K17C_TC_お澡堂イベント = 1
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;TARGETが澡堂に入ってきて追い出された
	;@澡堂逐出条件==0 && 把柄 && HETEROSEX==1
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTL
		;仲良くなる前反应
		PRINTFORML 「哈哇哇！？！？　给、给我出去去去！！」
		PRINTFORMDL 在里面的是裸着身子的%CALLNAME:TARGET%
		PRINTFORMDL 一副慌乱的样子挥舞着木桶
		
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お澡堂イベント
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些就被撵走了
		ELSE
			PRINTFORMDL 被赶出去时、看见了若隐若现的%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%
			TCVAR:K17C_ID:K17C_TC_お澡堂イベント = 1
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;外出先で遭遇した
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTL
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("正想着能不能见到你、还真的见到了呢/正想见你、就正好见到了呢")%%K17_HEART()%」
			CASE IS >= K17C_思慕诶嘿嘿
				PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("今天又见面了呢/最近经常见面呢/我们又见面了呢")%」
			CASE IS >= K17C_思慕
				PRINTFORML 「%K17_RS("啊……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今天又见面了呢/最近经常见面呢/我们又见面了呢")%」
			CASEELSE
				PRINTFORML 「%K17_RS("啊/唔")%、%K17_GT()%」
		ENDSELECT
		PRINTW
	ENDIF
	;-------------------------------------------------
	;他角色と约会中に遭遇した
	;ARG:1に约会的对象
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTL
		;相手が恋人な场合
		IF TALENT:MASTER:恋人 == FLAG:约会的对象
			PRINTFORML 「啊……%K17_RS("你好/啊")%……」
			
			IF K17_RT_FG(TARGET) & K17C_RTF_逢引
				;约会する间柄のとき
				PRINTFORML 「对不起、%K17_RS("打扰到你了呢/你好像很忙呢")%」
				;知り合いか见る
				IF K17_GET_FRIENDS(FLAG:约会的对象)
					PRINTFORML （今天在和%K17_CNAME( FLAG:约会的对象 )%约会么……）
				ELSE
					PRINTFORML （那姑娘就是他的本命吧……）
				ENDIF
			ELSE
				PRINTFORML 「啊、对不起」
			ENDIF
			
		;それ以外
		ELSE
			PRINTFORML 「啊啦……%K17_RS("呼ー嗯/诶？/呼唔")%……」
			IF K17_RT_FG(TARGET) & K17C_RTF_逢引
				;约会する间柄のとき
				PRINTFORML 「对不起、%K17_RS("打扰到你了呢/你好像很忙呢")%」
				;知り合いか见る
				IF K17_GET_FRIENDS(FLAG:约会的对象)
					PRINTFORML （在和%K17_CNAME( FLAG:约会的对象 )%约会呢……）
				ELSE
					PRINTFORML （那姑娘就是他的本命吧……）
				ENDIF
			ELSE
				PRINTFORML 「喔、打扰到你了吧」
			ENDIF
		ENDIF
		
		IF K17_GET_FRIENDS(FLAG:约会的对象) && K17_RT_FG(TARGET) == 0
			;爱丽丝にフラグが立ってない时　约会的对象が爱丽丝の知り合い
			SELECTCASE FLAG:约会的对象
				CASE K17C_魔理沙ID,K17C_灵梦ID,K17C_咲夜ID
					PRINTFORML 「和%K17_CNAME(FLAG:约会的对象)%好好相处吧」
				CASE K17C_幽香ID,K17C_帕秋莉ID,K17C_梅蒂欣ID
					PRINTFORML 「%K17_CNAME(FLAG:约会的对象)%虽然是个不太好伺候的姑娘、但还是跟她好好相处」
				CASE K17C_神绮ID,K17C_梦子ID,K17C_露易兹ID,K17C_魅魔ID
					PRINTFORML （%K17_CNAME(FLAG:约会的对象)%原来也会去约会什么的啊……）
					PRINTFORML （果然也是会结婚什么的吧……）
				CASEELSE
					PRINTFORML （那个女孩看上去很幸福呐……）
			ENDSELECT
		ENDIF
		PRINTW
	;他角色と约会中に遭遇した终端
	ENDIF
	
ENDIF
RETURN 1

;==================================================
;朝起きたとき（おはよう口上）
;==================================================
@M_KOJO_EVENT_K17_2(ARG,ARG:1)
CALL MESSAGE_GOODMONING(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常起床（定时になって起きる等）
	;非神社在住角色で恋慕未满の场合は、胜手に房间に入り込んできてる状态
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
	PRINTL
		IF TALENT:TARGET:恋慕
				
			SELECTCASE K17_GRT(TARGET)
				CASE IS >= K17C_恋慕
					;当前位置で随机イベント振る　もしくは允许无套（危险日も）で追加イベ
					IF (K17_CHECK_RANDOM_EVENT() || K17_GRT(TARGET) >= K17C_恋慕允许无套) && TCVAR:K17C_ID:K17C_TC_朝口交==0 && CFLAG:K17C_ID:K17C_CF_自慰フラグ == 0
						TRYCALL K17_朝口交イベント(TARGET)
					ENDIF
					IF RESULT == 0
						IF !TCVAR:K17C_ID:K17C_TC_朝口交 && !TCVAR:TARGET:今天有否见面
							;定时起床
							IF TALENT:MASTER:性别 >= 2
								PRINTFORM 「早上好……等下、%K17_RS("都睡成这个样子了/衣服都跑出来了/脸上一塌糊涂的/前面那个、还真是精神呐")%……到这边来一下」
							ELSE
								PRINTFORM 「早上好……等下、%K17_RS("都睡成这个样子了/衣服都跑出来了/脸上一塌糊涂的")%……到这边来一下」
							ENDIF
							TRYCALL K17_人形台词(-1)
							PRINTFORMDL 在%CALLNAME:TARGET%温馨的照料下、新的一天开始了
							SIF CFLAG:MASTER:初始位置 != CFLAG:TARGET:初始位置
								PRINTFORMDL 如果住在一起的话、肯定每天都会被这么照料吧
							PRINTW
							PRINTFORML 「这样就行了……好了、结束了%K17_HEART()%」
						ELSE
							;倒れて起きた时など定时ではない场合
							PRINTFORML 「呼唔……早上好」
						ENDIF
					ENDIF
				CASEELSE
					IF !TCVAR:K17C_ID:K17C_TC_朝口交 && !TCVAR:TARGET:今天有否见面
						PRINTFORML 「早上好、真是不错的清晨呢……」
						PRINTFORML 「%K17_CNAME()%的睡脸、意外的可爱呐、呼呼」
					ELSE
						PRINTFORML 「呼唔……早上好」
					ENDIF
			ENDSELECT
		ELSE
			PRINTFORML 「啊……已经起来了么……」
			PRINTFORMDL 这个人到底是来干什么的……
			PRINTFORML 「只是稍微做一下人偶研究、呼呼」
		ENDIF
	ENDIF
	;-------------------------------------------------
	;添い寝起床
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 2
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;其他
	PRINTL
	TCVAR:K17C_ID:K17C_TC_朝口交 = 1
ENDIF
RETURN 1

;==================================================
;夜寝るとき（おやすみ口上）
;==================================================
@M_KOJO_EVENT_K17_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	
	
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;自室に返回（定时になって寝る）
	;自室がMASTERと同じでもでちゃうので条件追加
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1 && (CFLAG:TARGET:初始位置 != CFLAG:MASTER:初始位置)
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「虽然还有些恋恋不舍、%K17_RS("但不回去不行了/先告辞了/回头见吧")%……」
				
			CASE IS >= K17C_思慕
				PRINTFORML 「那么、也差不多了%K17_RS("该回去了/、先告辞了/、回头见吧")%」
			CASEELSE
				PRINTFORML 「那么、回头见」
		ENDSELECT
		
	ENDIF
	;-------------------------------------------------
	;眠そうにしている
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_思慕诶嘿嘿
				PRINTFORML 「……呼喵……呼……对……不起……还有点困」
				PRINTFORMDL %CALLNAME:TARGET%昏昏沉沉的靠在了%CALLNAME:MASTER%的身上
			CASEELSE
				PRINTFORML 「……呼哈……失礼了、差不多也该去睡觉了」
				PRINTFORMDL 只是打个哈欠感觉也有点可爱呢
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;睡眠中（起きていないので会话というよりは寝言？）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3 || LOCAL:1 && ARG == 4
		SELECTCASE K17_GRT(TARGET)
			CASE IS >= K17C_恋慕允许无套
				PRINTFORML 「……%K17_CNAME()%……、诶嘿嘿……%K17_RS("喜欢/再多一些/让我们更加相爱吧")%……」
			CASE IS >= K17C_思慕
				PRINTFORML 「……%K17_CNAME()%……、%K17_RS("喜欢/H/笨蛋")%……」
			CASEELSE
				PRINTFORML 「…………%K17_RS("呼喵/Zzzー/呼啊")%…………%K17_RS("魔理沙/上……海/母亲")%？　……」
		ENDSELECT
		PRINTFORMDL 比平时的样子要更加%K17_RS("孩子气/可爱/坦率")%、%CALLNAME:TARGET%很幸福地沉睡着
	ENDIF
	;-------------------------------------------------
	;恶作剧中
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 4
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;衰弱中
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 「非常抱歉、已经不行了……」
	ENDIF
	;-------------------------------------------------
	;MASTERがダウン（房间まで运ばれる）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML 「等下！？　没事吧……？」
	ENDIF
	;-------------------------------------------------
	;TARGETが自室まで回来了
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;-------------------------------------------------
		;そのまま更衣て寝た
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 0
			IF !CFLAG:MASTER:睡眠
				PRINTFORML 「早点睡吧……」
				PRINTFORMDL 说完之后便也匆匆忙忙地回去睡了
			ELSE
				;マ斯塔が寝てる场合
				PRINTFORML 「…………睡了么」
				PRINTFORML 「呼呼、感觉很可爱呢……」
			ENDIF
		ENDIF
		;-------------------------------------------------
		;房间から追い出された
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML 「撒、到好孩子睡觉的时间咯」
			PRINTFORML 「快去吧、快去吧」
		ENDIF
	ENDIF
	;-------------------------------------------------
	;非在住TARGETがMAIN_MAPで休憩
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 「唔ー嗯、让我稍微休息一会吧」
	ENDIF
	;其他
	PRINTW
ENDIF
RETURN 1

;==================================================
;移动时すれちがい
;==================================================
@M_KOJO_EVENT_K17_4(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;立ち止まった
	;この后遭遇口上に接续
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORMD %CALLNAME:TARGET%
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD 轻轻挥了挥手
				PRINTFORMD %K17_RS("眨了眨眼/满脸笑容的/一脸陶醉的表情")%
			CASE IS >= K17C_思慕
				PRINTFORMD 轻轻举起手
				PRINTFORMD %K17_RS("有些脸红的/好像有点害羞的/一对上眼时就移开了视线")%
		ENDSELECT
		PRINTFORMDL 向%CALLNAME:MASTER%靠了过来
	ENDIF
	;-------------------------------------------------
	;轻轻地会釈して街道过ぎた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORMD %CALLNAME:TARGET%向
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD %K17_RS("轻轻挥了挥手、/眨了眨眼、/满脸笑容的")%
			CASE IS >= K17C_思慕
				PRINTFORMD %K17_RS("轻轻举起手、/偷偷地/点了点头,")%
		ENDSELECT
		PRINTFORMDL 目送%CALLNAME:MASTER%离开
	ENDIF
	;-------------------------------------------------
	;无视して街道过ぎた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMD %CALLNAME:TARGET%向
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD %K17_RS("热切的注视着、/一直盯着、/好像要说什么似的,")%
			CASE IS >= K17C_思慕
				PRINTFORMD %K17_RS("使了个眼神/偷瞄着")%
		ENDSELECT
		PRINTFORMDL 目送%CALLNAME:MASTER%离开
	ENDIF
ENDIF
RETURN 1

;==================================================
;他者介入で情绪变化
;==================================================
@M_KOJO_EVENT_K17_5(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
;诶嘿嘿中はとりあえず飞ばして情事を见られたほうだけ表示
IF LOCAL && !CFLAG:诶嘿嘿
	
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;知り合いが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && K17_GET_FRIENDS(ARG)
		
		PRINTFORML 「啊……%K17_GT()%、%K17_CNAME(ARG)%」
		
		;爱丽丝が恋人な场合
		IF TALENT:MASTER:恋人 == TARGET
			PRINTFORML 「并没有做什么奇怪的事哦。%K17_CNAME(ARG)%、等下、不要%K17_RS("起哄了/捉弄我了")%」
		
		;相手がマ斯塔の恋人　はわわ……
		;とりあえず相手亲热强度０以下はないみたいだから呼ばれないはず　どっか别に作る
		;自分が入った时用のをつくればいいのか
		ELSEIF TALENT:MASTER:恋人 == ARG
			SELECTCASE ARG
				CASE K17C_神绮ID,K17C_梦子ID,K17C_露易兹ID,K17C_魅魔ID
					PRINTFORMDL %CALLNAME:TARGET%站起身来调整好了姿态
					PRINTFORML 「……只是在和%NAME:MASTER%桑聊天而已」
					PRINTFORMDL 简直被当作陌生人看待了
				CASEELSE
					PRINTFORML 「不要误会、%K17_CNAME(ARG)%、只是在普通的说说话……」
					PRINTFORMDL %CALLNAME:TARGET%一看到%CALLNAME:ARG%就瞬间动摇了
			ENDSELECT
		ENDIF
	;-------------------------------------------------
	;知らない人が入ってきた
	;-------------------------------------------------
	ELSE
		PRINTFORMDL %CALLNAME:TARGET%偷偷地瞄了%CALLNAME:ARG%一眼
	ENDIF
	;-------------------------------------------------
	;共通处理
	;-------------------------------------------------
	SELECTCASE K17_GRT()
		CASE IS >= K17C_恋慕
			PRINTFORML 「……后续的就在可以二人独处、%K17_RS("谁也不会来的地方/安静的地方/可以慢慢来的地方")%吧……%K17_HEART()%」
			PRINTFORMDL %CALLNAME:MASTER%依偎在%CALLNAME:TARGET%身边轻轻耳语、然后分开了
		CASE IS >= K17C_思慕
			PRINTFORML 「……%K17_RS("虽然很抱歉/真是抱歉/真可惜")%、就先到这里吧……」
			PRINTFORMDL %CALLNAME:MASTER%依偎在%CALLNAME:TARGET%身边轻轻耳语、然后分开了
		CASEELSE
			PRINTFORMDL %CALLNAME:TARGET%一言不发的离开了
	ENDSELECT
	PRINTW
ENDIF
RETURN 1

;==================================================
;情事を目击した
;==================================================
@M_KOJO_EVENT_K17_6(ARG,ARG:1)
;口上主はTARGET
;ARGに情事相手
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	PRINTL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;情事を目击した（亲热度:低）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML 「！？！？　%K17_RS("等/诶？/什")%……！」
		PRINTFORMDL %CALLNAME:TARGET%脸红发抖地站在那里
		PRINTW
		;知り合いか见る
		SIF K17_GET_FRIENDS(ARG)
			PRINTFORML （讨厌……%K17_CNAME(ARG)%……居然在做那种事……）
			
		IF K17_GRT() >= K17C_思慕
			PRINTFORML （%K17_CNAME()%、原来喜欢那样的啊……）
			PRINTFORML （看见了、都看见了、各式各样的……）
			PRINTFORML （糟糕……又妄想起来了……）
			PRINTW
		ENDIF
		PRINTFORML 「哦咳、在这种地方、那个……」
		PRINTFORML 「总之要注意点！」
		PRINTFORMDL 被脸红彤彤的%CALLNAME:TARGET%说教了
		
		;思慕以上でMASTERに恋人がいないor爱丽丝が恋人
		SIF K17_GRT() >= K17C_思慕 && (!(CFLAG:MASTER:既成事实 & 合意_恋人) || CFLAG:TARGET:既成事实 & 合意_恋人)
			CFLAG:TARGET:情事目击 = ARG
		
		;把柄がつくはずなので自尊心と态度もあげちゃう
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,1)
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,1)
	ENDIF
	;-------------------------------------------------
	;负けじと参加（亲热度:高）
	;恋人同士相手には乱入できないみたい
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;-----------
		;开始时の主导权
		;积攒度の一时保存
		;情事相手の诶嘿嘿状态をみる
		;-----------
		IF CFLAG:MASTER:诶嘿嘿 == 1
			;MASTER主导权
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_お手传い系
			TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = -1
			TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:TARGET:积攒度
			TCVAR:K17C_ID:K17C_TC_中出しCOUNT = 0
		ELSE
			;角色主导权
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
			TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = TARGET
			TCVAR:K17C_ID:K17C_TC_中出しCOUNT = 0
			IF TALENT:MASTER:性别 >= 2
				TCVAR:K17C_ID:K17C_TC_积攒度 = BASE:MASTER:精力
			ELSE
				TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:积攒度
			ENDIF
		ENDIF
		
		;知り合いか见る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「%K17_RS("喂～/啊～/mo～")%、%K17_CNAME(ARG)%、不可以独占哦、让我也加入吧」
				
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易兹ID
				PRINTFORML 「%K17_RS("moー/不行ー/啊ー")%、一个人想独占是不可以的、%K17_CNAME(ARG)%」
				PRINTFORML 「我也要掺和进来」
				
			;神绮样　梦子限定
			CASE K17C_神绮ID,K17C_梦子ID
				
				;爱丽丝が恋人な场合
				IF TALENT:TARGET:恋人
					IF FIRSTTIME(@"修罗场{ARG}")
						;初回
						PRINTFORML 「诶？……怎么会……%K17_CNAME(ARG)%！？」
						PRINTFORMDL %CALLNAME:TARGET%少见的动摇了、两腿颤抖地站着那里
						PRINTW
						PRINTFORML 「mo……对%K17_CNAME(ARG)%也出手了呢……从什么时候开始的……」
						PRINTFORMDL %CALLNAME:ARG%向『%CALLNAME:TARGET%\@ARG==K17C_神绮ID ? 不断辩解着#\@说着"不是这样的！"之类的话』……
						PRINTFORMDL 总觉得气氛不对劲了……
						PRINTFORMDL ……
						PRINTFORMDL …………
						PRINTFORMDW ………………
						;胜手に想像して　亲子盖饭とか浮气とかそんな感じの那个それ
						PRINTFORML 「嘛、算了……这、这就是所谓的……那个吧……」
						PRINTFORMDL %CALLNAME:MASTER%的大腿被狠狠的抓了一把
						PRINTFORML 「嘛……两个人偷偷摸摸的……也、没什么……不过我也要掺一脚哦」
						;PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:ARG%に对抗意识があるようだった
						PRINTFORML 「总之禁止一个人独占！」
						PRINTW
						
					ELSE
						;二回目以降
						PRINTFORML 「那个……又是……这样么……」
						PRINTFORMDL %CALLNAME:TARGET%略显惊讶地叹了一口气、介入了%CALLNAME:MASTER%和%CALLNAME:ARG%之间
						PRINTFORMDL %CALLNAME:ARG%向『%CALLNAME:TARGET%\@ARG==K17C_神绮ID ? 不断辩解着#\@说着"不是这样的！"之类的话』……
						PRINTW
					ENDIF
				ELSE
					PRINTFORML 「mo……还偏偏是和%K17_CNAME(ARG)%搞在一起……」
				ENDIF
			;知らない人
			CASEELSE
				PRINTFORML 「……也让我来掺和一下吧？」
		ENDSELECT
		TRYCALL K17_乱交开始(ARG)
	ENDIF
	;-------------------------------------------------
	;气まずそうに立ち去る
	;记入チェック（=0, 非表示、1, 表示）
	;してる方が恋人だった场合、そそくさと立ち去る（恋人が混じっている多人数プレイかつTARGETが恋人でない场合も立ち去る
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		
		PRINTFORML 「对不起、打扰了……」
		;知り合いか见る
		SIF K17_GET_FRIENDS(ARG)
			PRINTFORML （讨厌……%K17_CNAME(ARG)%……居然在做那种事……）
		;恋人か见る
		SIF TALENT:ARG:恋人
			PRINTFORML （嘛、因为都是恋人了、所以才做那种事的吧……）
		
		;思慕以上でMASTERに恋人がいないor爱丽丝が恋人
		SIF K17_GRT() >= K17C_思慕 && (!(CFLAG:MASTER:既成事实 & 合意_恋人) || CFLAG:TARGET:既成事实 & 合意_恋人)
			CFLAG:TARGET:情事目击 = ARG
		
		
	ENDIF
	;-------------------------------------------------
	;MASTERに诱われて参加
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG:1 == 4
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;其他
	PRINTW
ENDIF
RETURN 1

;==================================================
;情事を见られた
;==================================================
@M_KOJO_EVENT_K17_7(ARG,ARG:1)
;口上主はTARGET
;ARGに目击者
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;情事を见られた（目击者の亲热度:低）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		;知り合いか见る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「%K17_CNAME(ARG)%！？」
				PRINTFORML 「诶……?这个……那个、抱歉……」
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易兹ID,K17C_神绮ID,K17C_梦子ID
				PRINTFORML 「诶！？　%K17_CNAME(ARG)%！？」
				PRINTFORML 「这是……那个……诶??」
				PRINTFORML 「对、对不起、是我太莽撞了……」
			;其他
			CASEELSE
				PRINTFORML 「诶！？　……那个、打扰了」
		ENDSELECT
		;--------------
		;诶嘿嘿が结束された场合の处理
		;--------------
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		
		;フラグ保存
		SIF CFLAG:既成事实 & 合意_诶嘿嘿
			TRYCALL K17_RELATION_EV( K17C_RTF_诶嘿嘿 )
	ENDIF
	;-------------------------------------------------
	;目击者が负けじと参加（目击者の亲热度:高）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;知り合いか见る
		SELECTCASE ARG
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「……%K17_CNAME(ARG)%？」
				;相手が恋人か见る　あわわわ……
				IF !TALENT:ARG:恋人
					PRINTFORML 「喂……给我等下、不要插队……%K17_CNAME(ARG)%你去另一边」
				ENDIF
				
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易兹ID,K17C_神绮ID,K17C_梦子ID
				PRINTFORML 「诶！？　%K17_CNAME(ARG)%！？！？」
				PRINTFORML 「诶、%K17_CNAME(ARG)%也要……一起！？　好、好的、请吧……」
				
			CASEELSE
				PRINTFORML 「唔哇！？吓了我一跳……」
		ENDSELECT
		TRYCALL K17_乱交开始(ARG)
	ENDIF
	;-------------------------------------------------
	;目击者が立ち去る（恋人同士限定か
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		;知り合いか见る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
				PRINTFORML 「啊、%K17_CNAME(ARG)%……」
				PRINTFORML 「被顾虑了呢……」
				PRINTFORML 「%K17_CNAME()%、下次可要好好注意%K17_CNAME(ARG)%哦」
			;尊敬系
			CASE K17C_魅魔ID,K17C_露易兹ID,K17C_神绮ID,K17C_梦子ID
				PRINTFORML 「诶！？　%K17_CNAME(ARG)%！？」
				PRINTFORML 「……要是让%K17_CNAME(ARG)%操心的话可就不好了呢……」
			;其他
			CASEELSE
				PRINTFORML 「诶！？……被、被看到了……」
		ENDSELECT
		PRINTFORML （比起我、%K17_CNAME()%的裸体也被看到了……真是不舒服呢）
	ENDIF
	;-------------------------------------------------
	;MASTERに诱われて目击者も参加
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG:1 == 4
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;其他
	PRINTW
	
ENDIF
RETURN 1

;==================================================
;目击した情事を诘问
;==================================================
@M_KOJO_EVENT_K17_8(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERだけ诘问
	;CFLAG:TARGET:情事目击
	;思慕以上でMASTERに恋人がいないor爱丽丝が恋人
	;参加してない时だけだから非情にレアケースじゃないですかね
	;これ谁得なんだ！？　削除予定地
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		;恋慕以上＆知り合いのとき
		IF (K17_GRT() >= K17C_恋慕 || CFLAG:TARGET:既成事实 & 合意_恋人) && K17_GET_FRIENDS(CFLAG:TARGET:情事目击)
			PRINTFORML 「呐、已经%K17_RS("厌倦我了么/讨厌我了么/想要抛弃我了么")%？」
			PRINTFORMDL 震惊的露出了比平时更加紧张的神色
			PRINTFORMDL 绝不是那样的
			PRINTW
			;嘘だ！
			PRINTFORML 「啊、对不起。并没有打算责怪你的」
			PRINTFORML 「只是、那个、还以为已经不想再理我了……」
			PRINTFORMDL 就这样低着头埋入了%CALLNAME:MASTER%的怀中
			PRINTFORML 「对不起、我就是个这么麻烦的女人……」
			PRINTFORMDL %CALLNAME:MASTER%只能暂时抚摸着%CALLNAME:TARGET%的头安慰她……
			PRINTW
			PRINTFORML 「那个呢、不管用%K17_CNAME(CFLAG:TARGET:情事目击)%作为代替也好、对其他女孩子出手也好……」
			PRINTFORML 「但在心里可得好好铭记还有我的存在哦」
			PRINTFORMDL 最后笑着那么说、但总觉得有些在逞强
			PRINTFORMDL %CALLNAME:MASTER%想着应该再稍微珍惜一点%CALLNAME:TARGET%
		ELSE
			;诶嘿嘿前　研究材料に使いました
			PRINTFORML 「那个ー……呐、上次的事……」
			PRINTFORML 「我也有些生气了、对不起」
			PRINTFORMDL 虽然不大明白、但她面红耳赤、反而被先道歉了
			PRINTW
			PRINTFORMDL （对不起……做了关于%K17_CNAME()%的H妄想……）
		ENDIF
	ENDIF
	;-------------------------------------------------
	;二人とも说教
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		PRINTFORML 「喂!%K17_CNAME()%、啊啊、%K17_CNAME(CFLAG:TARGET:情事目击)%也没关系么」
		PRINTFORML 「啊啊、我并没有生气」
		PRINTFORML 「只是……在这种地方、呐,今后要注意点哦」
		PRINTFORML 「想说的只有这些而已啦、那么……」
		PRINTFORMDL %CALLNAME:TARGET%红着脸一边单方面的让%CALLNAME:MASTER%赶紧收场
		PRINTFORMDL %CALLNAME:MASTER%想着是不是该考虑一下场所了
	ENDIF
	;其他
	PRINTW
ENDIF
RETURN 1

;==================================================
;胖次没收された
;==================================================
@M_KOJO_EVENT_K17_9(ARG,ARG:1)
;口上主はTARGET
;ARG:1 == 1		同じ场所に居て胖次を回收された
;ARG:1 == 2		远距离移动中に胖次を回收された
;--------------------------------------------------
#DIM DYNAMIC iDoll		;人形フラグ
#DIM DYNAMIC iPants_Num	;输送中の爱丽丝の胖次枚数
VARSET iDoll
iPants_Num = 0
CFLAG:K17C_ID:K17C_CF_胖次没收 = MIN(CFLAG:K17C_ID:K17C_CF_胖次没收,9999)
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL

	;--------------------------------------------------
	;初回限定
	;--------------------------------------------------
	iPants_Num = K17_CHECK_输送胖次(TARGET)
	IF FIRSTTIME("胖次没收")
		PRINTL
		PRINTFORML 「那么ー你在隐藏什么呢……」
		PRINTW
		;手持に自分の胖次があるか见る　仕样变更に对応
		IF iPants_Num
			PRINTFORML 「讨厌……这是我的……内衣？」
			PRINTFORML 「到底怎么做的！　……真是讨厌呐」
			PRINTFORML 「诶……这难道是……」
			PRINTFORMDL %CALLNAME:TARGET%的眼神充满了对%CALLNAME:MASTER%的怀疑
			CFLAG:K17C_ID:K17C_CF_胖次没收++
		ELSE
			PRINTFORML 「啊啦……这是……女孩子的内衣！？」
			PRINTFORML 「诶？　诶！？　为什么拿着这样的东西？」
		ENDIF

		PRINTFORMDL 我还以为会被骂一顿、没想到是意外冷静的反应
		PRINTFORMDL 你对这种事不了解吗?
		PRINTW
		PRINTFORML 「……为什么要挑内衣下手呢？」
		PRINTFORMDL 那是因为、那个……呐？
		PRINTFORMDL %CALLNAME:MASTER%将为什么想要胖次的理由一一向%CALLNAME:TARGET%说明了
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW ………………
		PRINTFORML 「诶、诶……？还真是奇怪的爱好？」
		
		;爱丽丝胖次あり　海外の人は内衣ドロあんま理解できないらしいです
		IF iPants_Num
			PRINTFORML 「对不起呐、没法赞同你那有着性骚扰嫌疑的收藏爱好」
			PRINTFORML 「不、这不是我该道歉的事。……好像还是有点混乱」
		ENDIF
		PRINTFORML 「……又或者说很难理解吧、是文化差异的吧」
		PRINTFORML 「总而言之、偷别人东西的、可不是什么好人」
		PRINTFORML 「总之这样的恶作剧、别再做了」
		
	;--------------------------------------------------
	;二回目以降
	;--------------------------------------------------
	ELSE
		PRINTL
		PRINTFORML 「你又在藏着什么吧……拿出来！」
		PRINTW
		;手持に自分の胖次があって时间停止暴露してるとき
		IF iPants_Num && CFLAG:时间停止暴露 == 1
		
			;爱丽丝胖次2回目以降
			PRINTFORML 「这个……又是我的内衣吧？」
			
			;思慕前だとビンタ
			IF K17_GRT(TARGET) < K17C_思慕
				PRINTFORML 「不是说过别再做了么！」
				PRINTFORMDL 啪的一声挨了一巴掌
				RETURN 1
			ELSE
				PRINTFORML 「mo,%K17_RS("对其他女孩子也做/老是做/无论是谁都做/要做到什么时候,")%这种恶作剧？」
				PRINTFORMDW 巴拉巴拉……
				PRINTFORMDW …………巴拉巴拉
				PRINTFORMDW ………巴拉巴拉………巴拉巴拉
				PRINTFORMDW %CALLNAME:MASTER%稍微考虑了一下应对女孩子的方法……！
			ENDIF
			
		;爱丽丝の胖次だけあったとき
		ELSEIF iPants_Num
			PRINTFORML 「这是……我的……」
			PRINTFORML 「诶……这难道是……」
			PRINTFORMDL %CALLNAME:TARGET%的眼神充满了对%CALLNAME:MASTER%的怀疑
			CFLAG:K17C_ID:K17C_CF_胖次没收++
		;其他の胖次
		ELSE
			PRINTFORML 「果然又是女孩子的内衣呐」
		ENDIF
	ENDIF
	
	;--------------------------------------------------
	;时间停止暴露 もうちょい条件缓くするか考え中 とりあえず20％でいいか 咲夜さん即バレ仕方ないね
	;现行犯なので疑いなくてもバレる
	;--------------------------------------------------
	IF K17_CHECK_时间停止暴露(TARGET,20)
		PRINTFORML 「还有……这不是我的内衣么……」
		PRINTFORML 「不会错的。难道你以为不会暴露吗？」
		PRINTFORML 「那么、这个你到底是怎么偷的呢……？」
		PRINTFORMDL 看来这是要吃不了兜着走了
		PRINTL
		PRINTFORMDW %CALLNAME:TARGET%的时间停止能力暴露了！
		PRINTW
		CALL K17_时间停止暴露
	ENDIF
	
	PRINTW
	PRINTFORML 「总之这个就先没收了」
	PRINTFORML 「今后对%K17_CNAME()%的态度也不会改变的」
	;胖次没收で爱丽丝の自尊心と态度が复活するのだ
	CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,1)
	CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,1)
	;疑い那个ば追加无　バレてるなら恋慕未满で无
	IF CFLAG:K17C_ID:K17C_CF_疑い || (CFLAG:时间停止暴露 && K17_GRT(TARGET) < K17C_恋慕)
		SIF RESULT == 0
			PRINTW
		RETURN 1
	ENDIF
	;--------------------------------------------------
	;思慕以上那个ば追加イベ
	;--------------------------------------------------
	IF K17_GRT(TARGET) >= K17C_思慕
		PRINTFORML 「mo……你想要这样的东西、不管多少我都会给你的」
		PRINTFORMDL 你说……什么……！？
		PRINTW
		PRINTFORML 「平时也会做人偶的衣服、所以裁缝的话我还是很擅长的哦」
		SELECTCASE RAND:3
			CASE 0
				PRINTFORMDL 自制的么！那可还真了不起
				PRINTFORMDL 当然、%CALLNAME:TARGET%想要穿过的
				PRINTFORML 「哈啊啊啊啊！？毫无疑问肯定都是新品吧！」
				PRINTFORMDL 那就没意义了！
			CASE 1
				PRINTFORML 「我现在正拿着呢。……好了、请收下吧」
				PRINTFORMD 送过来的胖次、越看越觉得
				PRINTDATADL
					DATAFORM 做得很精巧
					DATAFORM 好像真的一样
					DATAFORM 做得很可爱
					DATAFORM 是蕴含着匠人精神的结晶吧
				ENDDATA
				PRINTFORMDL ……这不是人偶用的吗！
				iDoll = K17_GET_DOLL(0)
				IF iDoll && RAND:2
					iDoll = K17_GET_DOLL(-1)
					PRINTFORM 「啊啦、那是%K17C_人形名:iDoll%的」
					TRYCALL K17_人形台词(K17C_人形:iDoll,1,"好害羞ー")
				ELSE
					PRINTFORM 「啊啦、那是
					PRINTDATA
						DATAFORM 伦敦人形
						DATAFORM 仏兰西人形
						DATAFORM 京人形
						DATAFORM 和兰人形
						DATAFORM 露西亚人形
						DATAFORM 奥尔良人形
					ENDDATA
					PRINTFORML 的」
				ENDIF
				PRINTFORMDL 反而我会很困扰的！
			CASE 2
				PRINTFORML 「我现在正拿着呢。好了、请笑纳吧」
				PRINTFORMD 拿来的是绣着
				PRINTDATAD
					DATAFORM 上海人形
					DATAFORM 蓬莱人形
					DATAFORM 伦敦人形
					DATAFORM 仏兰西人形
					DATAFORM 京人形
					DATAFORM 和兰人形
					DATAFORM 露西亚人形
					DATAFORM 奥尔良人形
					DATAFORM 歌莉亚人形
				ENDDATA
				PRINTFORMDL 的手帕
				PRINTFORMDL ……虽然是很高兴
				PRINTFORML 「啊啦、都是女性带着东西不是很好么？而且那还是新的」
				PRINTFORMDL 才不是那样啊
		ENDSELECT
		PRINTW
	ENDIF
ENDIF
RETURN 1

;==================================================
;推倒た
;==================================================
@M_KOJO_EVENT_K17_10(ARG,ARG:1)
#DIM DYNAMIC iRT = 0
#DIM DYNAMIC iFriends = 0

;----------
;爱丽丝以外のTARGETを取得　友人优先
;----------
iFriends = K17_GET_TARGETS_ID()
iRT = K17_GRT_EX(TARGET)
;--------------------------------------------------
;口上主はTARGET
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	
	;-------------------------------------------------
	;MASTERを推倒た（开始时）
	;二人きり
	;被逆推た瞬间には既成事实入ってない　すぐ摆脱と合意を得ない
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;-------------------------
		;开始时の保存
		;喘ぎタイプ决定
		;开始时の主导权
		;积攒度の一时保存
		;-------------------------
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = TARGET
		TCVAR:K17C_ID:K17C_TC_中出しCOUNT = 0
		IF TALENT:MASTER:性别 >= 2
			TCVAR:K17C_ID:K17C_TC_积攒度 = BASE:MASTER:精力
		ELSE
			TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:积攒度
		ENDIF
		
		;-----------
		;抱住模式
		;-----------
		IF ARG:1 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_おねだり系
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_おねだり系)
			PRINTFORML 「呼呼……总有种想要撒娇的感觉……%K17_RS("喵呜/呼喵")%～」
			PRINTFORMDL %CALLNAME:TARGET%为了撒娇、贴着%CALLNAME:MASTER%抱了过来
			PRINTW
			RETURN 1
		ENDIF
		;-----------
		;掌握把柄のお仕置き
		;-----------
		IF CFLAG:掌握把柄 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_强行系
			PRINTFORMDL %CALLNAME:MASTER%被%CALLNAME:TARGET%用从外表来看、完全想不到的强大力量所压制住了
			PRINTFORML 「呼呼……到惩罚的时间了……已经做好觉悟了吧……？」
			PRINTFORMDL 那样在耳边妖艳低语的%CALLNAME:TARGET%、眼神与平时完全不同、让%CALLNAME:MASTER%感到略微的恐惧……
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_强行系)
			PRINTW
			RETURN 1
		ENDIF
		
		;-----------
		;通常Counter诶嘿嘿初回
		;-----------
		IF CFLAG:既成事实 & 合意_诶嘿嘿 && FIRSTTIME("被逆推",1)
			PRINTFORML 「呐、呐……今天……这个……那个……」
			PRINTFORMDL %CALLNAME:TARGET%不知为何磨蹭着大腿、紧紧紧地依靠着%CALLNAME:MASTER%
			PRINTFORML （什……什么嘛、明明平时老是随心所欲的就……现在却……唔……）
			PRINTW
			PRINTFORML 「你、你要是没有那个意思的话、我也有我的办法……」
			PRINTFORML 「别看我这样也好歹是个魔女呐……」
			PRINTFORMDL %CALLNAME:TARGET%这样说着一挥手、%CALLNAME:MASTER%就被魔法的丝线束缚住了
			PRINTFORMDL 看上去像是被紧紧地束缚着、但其实并没有那么疼痛、%CALLNAME:MASTER%反而感觉像是被温柔的包裹住了
			PRINTFORML 「呼呼……怎样呐？　……啊、不会痛吧？　没事吧？」
			PRINTW
			PRINTFORML 「你在笑什么啊,mo……」
			PRINTFORMDL 被这么可爱的魔女袭击也不坏呢……
			PRINTFORML 「太过掉以轻心可是会被吃掉的哦……嘎、嘎呜ー」
			PRINTFORMDL 满脸通红的%CALLNAME:TARGET%像是能让%CALLNAME:MASTER%温柔的躺下似的、慢慢将其推到了
			CALLF FIRSTTIME("被逆推")
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_お手传い系)
		;-----------
		;合意无しでCounter诶嘿嘿初回にきた场合　もったいないので积攒度半分超えててもこれで
		;-----------
		ELSEIF !(CFLAG:既成事实 & 合意_诶嘿嘿) || CFLAG:积攒度 >= 500 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_合意袭い系
			PRINTFORML 「呼ー……呼ー……」
			PRINTFORML 「即使这样……还打算忍着是么……%K17_CNAME()%？　我明白了？」
			PRINTFORMDL %CALLNAME:MASTER%还在不知所云的时候、就被一股可怕的力量压制住
			PRINTFORMDL 平时操纵人偶的光线缠绕在%CALLNAME:MASTER%身上、根本动弹不得
			PRINTW
			PRINTFORML 「对不起、别害怕……但是、感觉已经抑制不住了……」
			PRINTFORML 「%K17_CNAME()%……就由我来、侵犯你……」
			PRINTFORMDL 满脸通红、额头上微微渗出汗滴的%CALLNAME:TARGET%压在了%CALLNAME:MASTER%身上
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_合意袭い系)
		;-----------
		;二回目以降　通常处理
		;-----------
		ELSE
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_お手传い系)
			iRT = K17_LOWER_LIMIT_RAND(iRT,K17C_思慕,K17C_恋慕)
			SELECTCASE iRT
				CASE IS >= K17C_恋慕
					;台词
					PRINTDATAL
						DATAFORM 「听我说呐、这个……那个……%K17_RS("来抱我吧/来H吧/来做爱吧")%？%K17_RS("　呐？/")%%K17_HEART()%」
						DATAFORM 「都是%K17_CNAME()%把我的身体变成这么%K17_RS("贪得无厌/淫靡/H")%……要负责任呢……」
						DATAFORM 「来%K17_RS("做、做吧/袭、袭击我吧/侵、侵犯我吧")%………」
					ENDDATA
					;情景
					PRINTDATAD
						DATAFORM %CALLNAME:TARGET%紧紧搂着%CALLNAME:TARGET%并用自己的身体蹭着%CALLNAME:TARGET%
						DATAFORM %CALLNAME:TARGET%牵起了%CALLNAME:MASTER%的手、慢慢导向自己的%K17_RS("胸部/脸颊/大腿")%
						DATAFORM %CALLNAME:TARGET%坐在%CALLNAME:MASTER%的大腿上扭动着身体、用自己的%K17_RS("股间/胸部")%不断磨蹭着
					ENDDATA
					PRINTFORMDL %K17_RS("温柔的/慢慢地")%%K17_RS("抱着推倒了/抱住了/被逆推了")%
				CASE IS >= K17C_思慕
					;台词
					PRINTDATAL
						DATAFORM 「……来做吧？　呐？%K17_RS("　呐？/")%%K17_HEART()%」
						DATAFORM 「……不、不做么？那就%K17_RS("由这边/由我")%……」
						DATAFORM 「来、来做吧……%K17_RS("反正已经做过/欲望被挑起来")%了呢……」
					ENDDATA
					;情景
					PRINTDATAD
						DATAFORM %CALLNAME:TARGET%贴近了%CALLNAME:MASTER%的身体
						DATAFORM %CALLNAME:TARGET%牵起%CALLNAME:MASTER%的手、%K17_RS("温柔的/紧紧的/十指相交的")%握在了一起
						DATAFORM %CALLNAME:TARGET%%K17_RS(@"蹭着%CALLNAME:MASTER%的大腿/将偷贴在%CALLNAME:MASTER%的胸前/捅着%CALLNAME:MASTER%的脸颊")%
					ENDDATA
					PRINTFORMDL %K17_RS("温柔的/慢慢地")%%K17_RS("抱着推倒了/抱住了/被逆推了")%
				CASEELSE
					PRINTFORML 「呐……可以的吧？总感觉……已经迷失自我了……所以」
					PRINTFORMDL %CALLNAME:TARGET%%K17_RS("温柔的/慢慢地")%将%CALLNAME:MASTER%逆推了
			ENDSELECT
			PRINTFORML 「都是因为%K17_CNAME()%%K17_RS("不好/不对/身体才变成这样")%、所以才会被%K17_RS("邪恶的ー/不妙的/H的")%%K17_RS("魔法使/魔女")%袭击呐……%K17_RS("嘎喔ー/呼呼/呋呋呋～")%」
			
		ENDIF
		
		;----------------------------
		;乱交
		;----------------------------
		IF iFriends
			PRINTW
			SELECTCASE iFriends
				CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_帕秋莉ID,K17C_幽香ID,K17C_咲夜ID,K17C_梅蒂欣ID
					;爱丽丝が恋人な场合
					IF TALENT:TARGET:恋人
						PRINTFORML 「%K17_CNAME()%、也要好好的疼爱%K17_CNAME(iFriends)%哦」
					ENDIF
				CASE K17C_魅魔ID,K17C_露易兹ID,K17C_神绮ID,K17C_梦子ID
					IF TALENT:TARGET:恋人
						PRINTFORML 「虽然这次要一起做……但可不要拿我和%K17_CNAME(iFriends)%比哦？」
					ENDIF
				CASEELSE
					;爱丽丝が恋人な场合
					IF TALENT:TARGET:恋人
						PRINTFORML 「%K17_CNAME()%、也好好疼爱一下那个女孩子吧」
					ENDIF
			ENDSELECT
			TRYCALL K17_乱交开始(iFriends)
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_おねだり系)
		ENDIF
		PRINTW
		RETURN 1
	ENDIF
	
	
	;-------------------------------------------------
	;抱住模式满足
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && ARG:1 == 1
		PRINTFORML 「唔～满足了……呼呼」
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;抱住模式强制结束
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && ARG:1 == 2
		PRINTFORML 「什、什么嘛、也用不着那么讨厌嘛……」
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;なだめられた（诶嘿嘿结束时）
	;被逆推たけどすぐに抜け出した
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && !ARG:1 && !(CFLAG:既成事实 & 合意_诶嘿嘿)
		PRINTFORML 「……哈啊……对不起、一时迷失了自我……」
		PRINTFORMDL 被%CALLNAME:MASTER%拒绝了的%CALLNAME:TARGET%、眼含泪水的转过了身去
		PRINTFORMDL 好像受到了相当大的打击
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;なだめられた（通常结束时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		;把柄まだ残ってるか见る
		IF CFLAG:掌握把柄
			PRINTFORML 「总之这次就先原谅你吧……」
			PRINTW
			RETURN 1
		ENDIF
		
		;感想战
		TRYCALL K17_诶嘿嘿感想战( TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 , TCVAR:K17C_ID:K17C_TC_积攒度 )
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		PRINTW
		RETURN 1
	ENDIF
	
ENDIF
RETURN 1


;==================================================
;浴场で遭遇
;==================================================
@M_KOJO_EVENT_K17_11(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出された
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;仲良くなる前反应
		PRINTFORML 「哈哇哇！？！？　给、给我出去去去！！」
		PRINTFORMDL 在里面的是裸着身子的%CALLNAME:TARGET%
		PRINTFORMDL 一副慌乱的样子挥舞着木桶
				
		IF !TCVAR:K17C_ID:K17C_TC_お澡堂イベント && !CFLAG:MASTER:同行 && K17_CHECK_RANDOM_EVENT(TARGET)
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些就被撵走了
		ELSE
			PRINTFORMDL 出去时看见了若隐若现的%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%
			;逐出は连打禁止
			TCVAR:K17C_ID:K17C_TC_お澡堂イベント = 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;目が合った（追い出されない）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「呀啊啊！？」
		PRINTFORMDL 在里面的是裸着身子的%CALLNAME:TARGET%
		PRINTFORML 「是%K17_CNAME()%啊、还以为是谁呢、吓了我一跳」
		PRINTFORMDL 裹起身子朝这里过来了
		IF !TCVAR:K17C_ID:K17C_TC_お澡堂イベント && !CFLAG:MASTER:同行 && K17_CHECK_RANDOM_EVENT(TARGET)
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些后、就满脸通红地泡在浴池里了
		ELSE
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%若隐若现的
		ENDIF
	ENDIF

PRINTW
ENDIF
RETURN 1

;==================================================
;寝床に忍び込み
;==================================================
@M_KOJO_EVENT_K17_12(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL && !FLAG:时间停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出される（愤怒）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「给我等下、%K17_CNAME()%、我现在很生气……」
		PRINTFORML 「互相都稍微冷静一下、今天就请回吧」
	ENDIF
	;-------------------------------------------------
	;寝床に侵入　寝てる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		TRYCALL K17_上海イベント
		
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕允许无套
				PRINTFORML 「……%K17_CNAME()%……、诶嘿嘿……%K17_RS("喜欢/再多一些/让我们更加相爱吧")%……」
			CASE IS >= K17C_思慕
				PRINTFORML 「……%K17_CNAME()%……、%K17_RS("喜欢/H/笨蛋")%……」
			CASEELSE
				PRINTFORML 「…………%K17_RS("呼喵/Zzzー/呼啊")%…………%K17_RS("魔理沙/上……海/母亲")%？　……」
		ENDSELECT
		PRINTFORMDL 比平时的样子要更加%K17_RS("孩子气/可爱/坦率")%、%CALLNAME:TARGET%很幸福地沉睡着
	ENDIF
	;-------------------------------------------------
	;寝床に侵入（相手が恋慕）起きる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;TRYCALL K17_上海イベント
		PRINTFORML 「啊……吓了我一跳、还以为是小偷呢」
		PRINTFORML 「太好了、是%K17_CNAME()%呀……」
	ENDIF
	;-------------------------------------------------
	;寝床に侵入（相手が恋慕・衰弱）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		TRYCALL K17_上海イベント
		PRINTFORMDL 看来肯定相当累了吧、%CALLNAME:TARGET%没有起来
	ENDIF
	;-------------------------------------------------
	;追い出される
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 4
		TRYCALL K17_上海イベント
		PRINTFORMDL 困得揉眼睛、打着哈欠的%CALLNAME:TARGET%过来了
		PRINTFORML 「怎么了……这么吵？」
		PRINTFORML 「虽然很不好意思、但现在请回去吧」
	ENDIF
	;-------------------------------------------------
	;追い出される（衰弱）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 5
		TRYCALL K17_上海イベント
		PRINTFORMDL 困得揉眼睛、打着哈欠的%CALLNAME:TARGET%过来了
		PRINTFORML 「怎么了……这么吵？」
		PRINTFORML 「虽然很不好意思、但现在请回去吧」
	ENDIF
PRINTW
ENDIF
RETURN 1

;==================================================
;工作中
;==================================================
@M_KOJO_EVENT_K17_13(ARG,ARG:1)
;口上主はTARGET
;ARG:1に残っている工作量
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;工作开始（职场へ移动する）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF CFLAG:职业种类 == K17C_职业种类_人偶剧
			;人偶剧
			SELECTCASE K17_GRT_EX()
				CASE IS >= K17C_思慕
					PRINTFORML 「那么、因为我还有工作、先走了哦%K17_CNAME()%」
				CASEELSE
					PRINTFORML 「唔、差不多到该工作的时间了、该走了」
			ENDSELECT
			TRYCALL K17_人形台词(K17C_上海,0,"要加油咯ー")
			TRYCALL K17_人形台词(K17C_蓬莱,1,"噢ー")
		ELSE
			;家事
			SELECTCASE K17_GRT_EX()
				CASE IS >= K17C_思慕
					PRINTFORML 「那么、得去稍微处理一下家里的事了……回头见%K17_CNAME()%」
				CASEELSE
					PRINTFORML 「唔、差不多该去做家务了……该走了」
			ENDSELECT
			TRYCALL K17_人形台词(K17C_上海,0,"要干家务咯ー")
			TRYCALL K17_人形台词(K17C_蓬莱,1,"噢ー")
		ENDIF
	ENDIF
	;-------------------------------------------------
	;业务中
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF CFLAG:职业种类 == K17C_职业种类_人偶剧 && TIME <= 720
			;人偶剧　公演中
			;
			PRINTFORMDL 可以听到孩子们的欢呼声
			SIF !(TCVAR:K17C_TC_人偶剧 & 8)
				PRINTFORML 「那么、接下来是%K17_RS("会怎样呢～/会变成什么样呢～")%？」
		ELSE
			;家事＆片付け
			PRINTFORML 「%K17_RS("哼哼ー哼/呼呼～哼/哼～")%……♪」
			PRINTFORMDL 听到了%CALLNAME:TARGET%在哼歌
		ENDIF
		
	ENDIF
	;-------------------------------------------------
	;工作结束
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		IF CFLAG:职业种类 == K17C_职业种类_人偶剧
			;人偶剧片付け结束
			PRINTFORML 「好了、那么请期待下回吧～」
			PRINTFORML 「大家、都要当个乖孩子哦」
			PRINTFORMDL %CALLNAME:TARGET%向着稀稀拉拉散去小孩们挥手告别
		ELSE
			;家事＆片付け
			PRINTFORML 「%K17_RS("哼哼ー哼/呼呼～哼/哼～")%……♪」
			PRINTFORMDL 听到了%CALLNAME:TARGET%在哼歌
		ENDIF
		
	ENDIF
	
	PRINTW
ENDIF
RETURN 1

;==================================================
;吃饭系
;==================================================
@M_KOJO_EVENT_K17_14(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;持っていた食物を食べられた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == -1
		IF TASTE_REACTION("辣")
			;辣
			PRINTFORML 「太、太辣了、感觉%K17_RS("都要喷火了/舌头都要变奇怪了/嗓子都要着火了")%」
		ELSEIF TASTE_REACTION("甜")
			;甜
			PRINTFORML 「唔ー嗯、对我来说有点太甜了……」
		ELSEIF TASTE_REACTION("芥末")
			;芥末
			PRINTFORML 「眼……眼泪都快流出来了」
		ELSEIF TASTE_REACTION("酸")
			;柠檬
			PRINTFORML 「唔～～、好,好酸！」
		ELSE
			;普通
			PRINTFORML 「多谢款待、呼呼、很美味呢」
		ENDIF
		
		;感想
		IF TASTE_REACTION("辣") || TASTE_REACTION("甜") || TASTE_REACTION("芥末") || TASTE_REACTION("酸")
			;味付けあり　爱丽丝は味觉普通
			PRINTFORMDL 明明是自己擅自吃掉的……好过分
		ELSE
			PRINTFORMDL 被擅自吃掉了……
			PRINTFORML 「对不起、因为看起来很好吃、不由的就……」
			IF K17_GRT() >= K17C_思慕
				PRINTW
				PRINTFORML 「……来嘛、请用～」
				TRYCALL K17_甘やかし
			ENDIF
		ENDIF
	ENDIF
	PRINTW
ENDIF
RETURN 1

;==================================================
;MASTERが推倒た
;==================================================
@M_KOJO_EVENT_K17_15(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL && !FLAG:时间停止 && !CFLAG:睡眠
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;未实装（推倒指令に统合？
	;MASTERが推倒た（ウフフ开始时）
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;逢濑结束（ウフフ结束时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2

		;感想战
		TRYCALL K17_诶嘿嘿感想战( TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 , TCVAR:K17C_ID:K17C_TC_积攒度 )
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_おねだり系
	ENDIF
ENDIF
PRINTW
RETURN 1

;==================================================
;陪睡
;==================================================
@M_KOJO_EVENT_K17_16(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;添い寝を始めた（开始时）(存在せず
	;记入チェック
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;添い寝を结束した（结束时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_MESSAGE_COM_K17_睡眠
		SIF !RESULT
			PRINTFORML 「嗯唔……已经结束了么？」
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;添い寝or恋慕同居　マ斯塔が朝起きた　相手寝てるor起きてる
	;このままKOJO_MESSAGE_SEND("EVENT",2,TARGET,1,0)へ行く
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	;其他
	IF LOCAL:1 && ARG == 3
		IF CFLAG:TARGET:睡眠
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕允许无套
					PRINTFORML 「……%K17_CNAME()%……、诶嘿嘿……%K17_RS("喜欢/再多一些/让我们更加相爱吧")%……」
				CASE IS >= K17C_思慕
					PRINTFORML 「……%K17_CNAME()%……、%K17_RS("喜欢/H/笨蛋")%……」
				CASEELSE
					PRINTFORML 「…………%K17_RS("呼喵/Zzzー/呼啊")%…………%K17_RS("魔理沙/上……海/母亲")%？　……」
			ENDSELECT
			PRINTFORMDL 比平时的样子要更加%K17_RS("孩子气/可爱/坦率")%、%CALLNAME:TARGET%很幸福地沉睡着
			;寝てたら朝口交off
			TCVAR:K17C_ID:K17C_TC_朝口交 = 1
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;时止め结束时
;见づらい、复杂なんとかしろ
;==================================================
@M_KOJO_EVENT_K17_17(ARG,ARG:1)
#DIM iRT
;口上主はTARGET
;排他と明记されていないモノは状况によっては连续で表示されるので注意
;ARGに射精状况
;ARG:1に射精状态
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
;各种初期化
;-------------
iRT = K17_GRT(TARGET)

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;ARG=1～3は排他
	;谜の快感or绝顶　恶作剧された
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 1 || ARG == 2)
		IF ARG == 1
			PRINTFORML 「%K17_RS("什/噫/很酷/呀啊啊/")%……！？」
		ELSEIF ARG == 2
			PRINTFORML 「唔～～～～～！！！　%K17_BLUSH(2)%」
		ENDIF
		PRINTFORMDL %CALLNAME:TARGET%瞬间捂着嘴挡住了声音
		IF K17_AP_FINISH() != ""
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_お手传い系
			PRINTFORML （%K17_AP_FINISH()%）
		ENDIF
		;-------------------------------------------------
		;时间停止暴露
		;-------------------------------------------------
		IF CFLAG:时间停止暴露
			SELECTCASE iRT
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「……普通来做不行么……笨蛋」
				CASE IS >= K17C_思慕
					PRINTFORML 「为……为什么要做这种事……」
				CASEELSE
					PRINTFORML 「差……差劲……！！」
			ENDSELECT
		;-------------------------------------------------
		;疑い无
		;-------------------------------------------------
		ELSEIF !CFLAG:K17C_ID:K17C_CF_疑い
			;自分の胖次没收未经验
			SIF !FIRSTTIME("时间停止解除")
				PRINTFORML （……只要一见到%K17_CNAME()%、就老是会这样……）
			PRINTFORML （这个……难道说我的身体……是%K17_CNAME()%寻求的目标么……？）
		ENDIF
		;时间停止经验保存
		CALLF FIRSTTIME("时间停止解除")
	ENDIF
	
	;-------------------------------------------------
	;胖次遗失のみ
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「%K17_RS("什/诶/唉")%……！？」
		IF CFLAG:时间停止暴露
			;停止バレ
			IF iRT >= K17C_恋慕
				PRINTFORML 「mo……如果那么想要的话我会给你的啦」
			ELSE
				PRINTFORML 「竟然……又做这种事……」
				
			ENDIF
		ELSEIF CFLAG:K17C_CF_胖次没收
			;没收经验あり　认识的には胖次を盗む能力
			IF iRT >= K17C_恋慕
				PRINTFORML 「mo……如果那么想要的话我会给你的啦」
			ELSE
				PRINTFORML 「……又恶作剧了么……」
			ENDIF
			CFLAG:K17C_ID:K17C_CF_疑い++
		ELSE
			;まだ没收はされてない
			;初回
			IF FIRSTTIME("时间停止胖次遗失")
				PRINTFORML （%K17_RS("胖次/内衣/内裤")%不……不见了！？今天有好好穿上的吧……？）
			ELSE
				PRINTFORML （%K17_RS("胖次/内衣/内裤")%又……不见了！？　%K17_RS("今天有好好穿上的吧/掉在哪里了么")%……？）
			ENDIF
			IF !CFLAG:K17C_CF_疑い
				;疑い无
				PRINTFORML （讨厌……应该没被%K17_CNAME()%注意到……吧？）
				PRINTW
				RETURN 1
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉口内射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;精液中毒低精饮 ;精液中毒高精饮
		IF ARG:1 == 1 || ARG:1 == 4 || ARG:1 == 6
			PRINTFORML 「%K17_SPLIT_SHUFFLE(@"……/%K17_RS("库唔/嗯唔/嗯库")%/……")%」
		;精液中毒低吐き出し ;浓厚精液＆精液中毒低吐き出し
		ELSEIF ARG:1 == 2 || ARG == 5
			PRINTFORML 「%K17_SPLIT_SHUFFLE(@"……/%K17_RS("唔诶诶/呜/唔诶")%/……")%」
		;精液中毒低手で覆う
		ELSEIF ARG:1 == 3
			PRINTFORML 「咳咳……」
		ENDIF
		IF CFLAG:时间停止暴露
			;停止バレ
			IF iRT >= K17C_恋慕
				PRINTFORML 「mo……为什么要这样做……」
			ELSE
				PRINTFORML 「竟然……又做这种事……」
				
			ENDIF
		ELSE
			;まだバレてない
			PRINTFORML （……突然……这是……什么啊？）
			IF ABL:精液中毒 >= 3
				;饮んだ
				PRINTFORML （这难道是……精液！？%K17_RS(@"/……是%K17_CNAME()%的么？")%）
				CFLAG:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉颜面射精】
	;【无自觉手淫射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 5 || ARG == 6)
		IF ARG:1 == 1
			;幼稚持ち＆精液经验100未满 ;通常ぬぐい取り 
			PRINTFORML 「啊……什么啊……这个……」
			PRINTW
			RETURN 1
		ELSEIF ARG == 5 && ARG:1 == 2
			;自觉してぬぐう
			IF CFLAG:时间停止暴露
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「不要……突然%K17_RS("就做这种事啊/射在这种地方啊")%,mo……」
				ELSE
					PRINTFORML 「居然射在这种地方……」
				ENDIF
			ELSE
				;未バレ
				PRINTFORML （讨厌……这是精液……么%K17_RS(@"/……是%K17_CNAME()%的么？")%）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ELSE
			;精液舐めとり
			PRINTFORML 「…………唔」
			IF CFLAG:时间停止暴露
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「不要突然就做这种事啊……mo……%K17_RS("呸咯/哈姆")%」
					PRINTFORMDL %CALLNAME:TARGET%像是故意让%CALLNAME:MASTER%看见似的舔掉了
				ELSE
					PRINTFORML 「居然射在这种地方……嗯库」
					PRINTFORML 「%K17_RS("真是变态/笨蛋/色狼/H")%……」
				ENDIF
			ELSE
				;舐めた
				PRINTFORML （情不自禁的舔了一下……这是……精液……！？）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉手淫射精】
	;记入チェック（=0, 非表示、1, 表示）
;	LOCAL:1 = 1
	;-------------------------------------------------
;	IF LOCAL:1 && ARG == 6
;		;ぬぐい取り
;		IF ARG:1 == 1
;			PRINTFORML 「啊……什么啊……这个……」
;		;舐めとり
;		ELSEIF ARG:1 == 2
;			PRINTFORML 「…………唔」
;			IF CFLAG:时间停止暴露
;				;停止バレ
;				IF iRT >= K17C_恋慕
;					PRINTFORML 「不要突然做这种事情啊、mo……\@ARG:3?ぺろっ#\@」
;				ELSE
;					PRINTFORML 「为什么会射在这种地方……\@ARG:3?んくっ#\@」
;				ENDIF
;			ELSE
;				;停止未バレ
;				PRINTFORML （情不自禁的舔了一下……这是……精液……！？）
;				IF iMOB
;					PRINTFORML （到底、是……是谁的……）
;					PRINTFORMDL %CALLNAME:TARGET%一瞬间变得脸色铁青起来、不安地四处张望着
;					IF iRT >= K17C_恋慕
;						PRINTFORML （啊、我被……%K17_CNAME()%之外的人……%K17_RS("给玷污了/给弄脏了/给沾上精液了")%！？）
;					ENDIF
;					CFLAG:K17C_CF_疑心暗鬼 = 1
;				ELSE
;					;路人无
;					CFLAG:K17C_ID:K17C_CF_疑い++
;				ENDIF
;			ENDIF
;		ENDIF
;	ENDIF
	;-------------------------------------------------
	;【无自觉肛门射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;Ａ感觉0
		IF ARG:1 == 1
			PRINTFORML （什么时候……为什么……忽然……%K17_CALL_P(K17C_部位A)%）
			PRINTW
			RETURN 1
		;ソレ以外
		ELSEIF ARG:1 == 2
			
			IF CFLAG:时间停止暴露
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「不要突然做这种事啊,mo……」
				ELSE
					PRINTFORML 「居然做出这种事……咕……」
				ENDIF
			ELSE
				;未バレ
				PRINTFORML （这种感觉……要从%K17_CALL_P(K17C_部位A)%……出来了……？）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉处女丧失】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML （什么时候……为什么……忽然……）
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;【无自觉膣内射精】
	;1非处女嫩穴内射精口服避孕药无
	;2非处女嫩穴内射精口服避孕药あり
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9 && (ARG:1 == 1 || ARG:1 == 2)
		PRINTFORML 「什……么～～～～～%K17_BLUSH(2)%」
		PRINTFORML （在……里面……出来……了？）
		IF CFLAG:时间停止暴露 && iRT >= K17C_恋慕
			;バレありの恋慕以上
			IF CFLAG:允许无套 >= 2
				;允许无套してる
				PRINTFORML 「用不着这样……普通的来啊、笨蛋」
				PRINTFORMDL %CALLNAME:TARGET%似乎很在意周围、满脸通红
			ELSE
				;解禁してない
				PRINTFORML 「居然……擅自就这样……」
				PRINTFORMDL %CALLNAME:TARGET%的心情差到了极点
				CALL K17_MARK_反抗刻印(0)
			ENDIF
		ELSEIF CFLAG:时间停止暴露
			;バレありの恋慕未满
			PRINTFORML 「好……好过分……居然」
			PRINTFORMDL %CALLNAME:TARGET%用一脸不甘的表情瞪了%CALLNAME:MASTER%一眼
		ELSE
			;未バレ
			PRINTFORML （什……到底是什么时候！？）
			PRINTFORML （不知不觉就被%K17_CNAME()%……%K17_RS("射在里面了/膣内射精/播种了")%……？）
			CFLAG:K17C_ID:K17C_CF_疑い++
		ENDIF
		
		;-----------------
		;口服避孕药　危险日か见る
		;-----------------
		IF ARG:1 == 1
			IF ESTRUS_CYCLE(TARGET) >= 100
				PRINTFORML （噫……今天可能%K17_RS("会有小宝宝的/会怀孕的")%……）
			ELSE
				PRINTFORML （……今天不会%K17_RS("有小宝宝/怀孕")%吧……？）
			ENDIF
		ELSEIF ARG:1 == 2
			;口服避孕药あり
			PRINTFORML （已经喝了口服避孕药饮……%K17_RS("应该不会/不可能会")%……%K17_RS("有小宝宝/怀孕")%了吧？）
		ENDIF
	
	;无自觉
	ELSEIF ARG:1 == 3
		PRINTFORML （啊……咧……这是%K17_RS("生理/白带")%……？）
		IF !CFLAG:K17C_ID:K17C_CF_疑い
			PRINTFORML （不对……湿了……诶,诶？我的身体,擅自%K17_RS("起了情欲/发情了")%么…？）
			SIF EQUIP:下半身内衣１ || EQUIP:下半身内衣２
				PRINTFORML （讨厌……胖次……弄脏了……）
		ENDIF
		PRINTW
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;疑い　停止バレの后处理
	;-------------------------------------------------
	IF CFLAG:K17C_ID:K17C_CF_疑い && CFLAG:K17C_ID:K17C_CF_胖次没收 && !CFLAG:时间停止暴露
		;胖次没收经验済み
		SELECTCASE CFLAG:K17C_ID:K17C_CF_疑い
			CASE IS <= 10
				PRINTFORML （……这难道说、是%K17_CNAME()%的恶作剧么……？）
			CASE IS >= 10
				PRINTFORML （这个果然是……被%K17_CNAME()%恶作剧了吧……）
			CASE IS >= 40
				PRINTFORML （剩下的就是证据了……下次会设下陷阱的……）
		ENDSELECT
		CFLAG:K17C_ID:K17C_CF_疑い = MIN(CFLAG:K17C_ID:K17C_CF_疑い +5,100)
		SIF CFLAG:K17C_ID:K17C_CF_疑い >= 10
			PRINTFORMDL %CALLNAME:TARGET%对%CALLNAME:MASTER%的怀疑加深了
			
	ELSEIF CFLAG:K17C_ID:K17C_CF_疑い && !CFLAG:K17C_ID:K17C_CF_胖次没收 && !CFLAG:时间停止暴露
		;胖次没收未经验で疑いがついた
		PRINTFORML （诶……诶……%K17_RS("到底是怎么回事/到底怎么做的/到底怎么做到的")%……讨厌、%K17_RS("/好怕")%……）
		PRINTFORMDL %CALLNAME:TARGET%似乎感到相当不安……
		CFLAG:K17C_ID:K17C_CF_疑い = MIN(CFLAG:K17C_ID:K17C_CF_疑い +2,100)
		SIF CFLAG:K17C_ID:K17C_CF_疑い >= 40
			PRINTFORML （必须抓住犯人……下次会布置好陷阱的）
	ENDIF
	;恋慕以下でバレてれば反抗刻印 恶作剧の数だけつくはず
	SIF iRT < K17C_恋慕 && CFLAG:时间停止暴露
		CALL K17_MARK_反抗刻印(1)
	CALLF FIRSTTIME("时间停止恶作剧")
	PRINTW
ENDIF
RETURN 1
;==================================================
;ナマでやらせろ时
;==================================================
@M_KOJO_EVENT_K17_18(ARG,ARG:1)
#DIM DYNAMIC iRT
iRT = K17_GRT()
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;避孕要求台词
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		SELECTCASE iRT
			CASE IS >= K17C_恋慕
				PRINTFORML 「我……我觉得……现在还不能怀上小宝宝……」
				PRINTFORML 「而且呢……那个、那个……」
				PRINTFORMDL %CALLNAME:TARGET%变得通红、靠近%CALLNAME:MASTER%的脸旁低声私语
				PRINTFORML 「对H什么的也不是很讨厌呢、所以……暂时……不想怀上呐……」
				PRINTFORML 「所以%K17_RS("带上套子/做好避孕")%吧……」
			CASEELSE
				PRINTFORML 「至少%K17_RS("带上套子/做好避孕")%吧……」
		ENDSELECT
		
	ENDIF
	;-------------------------------------------------
	;断った
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「不行……会有小宝宝的……」
		
	ENDIF
	;-------------------------------------------------
	;断ったのに粘られて切れた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「%K17_RS("不要/不行/不可以")%、那么、我也再也不H了」
		
	ENDIF
	;-------------------------------------------------
	;危险日以外许可
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML 「知道了……那只在危险日以外、说好了哦……」
		PRINTFORML （这样真的没问题么……）
		
	ENDIF
	;-------------------------------------------------
	;危险日许可
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 「想、想要……小宝宝么？」
		PRINTFORML 「如果只是想无套H的话、那就喝口服避孕药吧……」
		PRINTFORMDL %CALLNAME:MASTER%清楚地传达了想造个小宝宝的想法……
		PRINTFORML 「……啊……我明白了、那好吧…………」
		PRINTFORML 「如果有了的话、真的会生下来哦……呐」
		TRYCALL K17_RELATION_EV(K17C_RTF_允许无套)

	ENDIF
ENDIF
PRINTL
RETURN 1
;==================================================
;神社暮らしを承认して贳う
;==================================================
@M_KOJO_EVENT_K17_19(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;认められる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「谢谢、%K17_CNAME()%
		PRINTFORML 「房租就是帮忙做家务吗……没关系、我可相当擅长呢」
		PRINTFORML 「为了%K17_CNAME()%我也会加油的、请多关照呢」
		PRINTFORMDL %CALLNAME:TARGET%对新生活的开始充满了期待、开心地对%CALLNAME:MASTER%露出了笑容
		PRINTL
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;认められない
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「是、是吗……真遗憾啊」
		PRINTFORMDL %CALLNAME:TARGET%的肩膀耸了下来、看起来很遗憾的样子
		PRINTL
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;回家时
;==================================================
@M_KOJO_EVENT_K17_20(ARG,ARG:1)
;口上主はLOCALS or RESULT
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常回家　おやすみ口上で统一
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;CALL M_KOJO_EVENT_K17_3(1)
		;PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;约会中回家
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_SPEVENT_K17_3(0)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;玄关先でお见送り
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		CALL M_KOJO_SPEVENT_K17_3(0)
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;陷落素質取得时
;==================================================
@M_KOJO_EVENT_K17_21(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	CFLAG:K17C_ID:K17C_CF_自慰フラグ = 1
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTL
		PRINTFORML （事到如今、已经只能认命了……）
		PRINTFORML （不管是作为魔法使还是什么、已经完败了……）
		PRINTFORML （%K17_CNAME()%……喜欢哦%K17_HEART()%　最喜欢了%K17_HEART()%　我爱你%K17_HEART(2)%）
		PRINTW
		
		;处女判定
		IF TALENT:处女
			;自主トレ设定:おねだりH
			PRINTFORMDL 在床上的%CALLNAME:TARGET%辗转反侧、翻来覆去、但过了一会……
			PRINTFORML 「唔……呼……库…………」
			PRINTFORMDL 哆哆嗦嗦地向蜜壶伸出了手
			PRINTFORML 「这个…………一想到关于%CALLNAME:MASTER%的事……就……呼喵啊啊」
			PRINTFORML 「又这样了………想……做了……侵犯我……」
			PRINTFORML 「想做了………已经准备好了……注入我吧……」
			PRINTFORMDW %CALLNAME:TARGET%以一副平时无法想象的不成体统的样子沉浸在自慰中
			PRINTFORML 「要去了……去了去了……去了～～～～！！！」
			PRINTW
		ELSE
			TRYCALL K17_H妄想_喘ぎ(K17C_攻め_おねだり系)
			PRINTFORML 「%K17_喘ぎ声(K17C_攻め_おねだり系,6,1)%%K17_快乐_喘ぎ声(K17C_攻め_おねだり系,8000,K17C_部位V)%%K17_喘ぎ声(K17C_攻め_おねだり系,6,1,1)%」
			PRINTFORML 「%K17_喘ぎ_绝顶(K17C_攻め_おねだり系,K17C_部位V)%」
			PRINTW
		ENDIF
		PRINTFORML （啊啊……太好了%K17_HEART()%　……但是……从来不知道……）
		PRINTFORML （…………真的喜欢上了之后、单靠自慰只会越来越难受呢……）
		;経験值+余计闷々としちゃう
		EXP:自慰经验 += 1
		EXP:Ｖ经验 += 1
		EXP:Ｂ经验 += 1
		EXP:Ｖ绝顶经验 += 1
		EXP:自慰经验 += 1
		CFLAG:积攒度 /= 4
		CFLAG:积攒度 += 200
		
		;态度を2段阶下げる
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,-2)
		SIF RESULT
			PRINTFORML （变得更坦率点也可以吧）
		;フラグ保存
		SIF (K17_RT_FG(TARGET) & K17C_RTF_恋慕) && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_恋慕)
			CALL K17_RELATION_EV(K17C_RTF_恋慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;思慕取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTL
		PRINTFORML 「……………………也许……已经喜欢上%CALLNAME:MASTER%了……」
		PRINTFORML （……一听到声音、胸口就碰碰的跳个不停）
		PRINTFORML （果然是这样么……？）
		PRINTW
		
		;处女判定
		IF TALENT:处女
			;自主トレ设定:犯されH
			PRINTFORMDL %CALLNAME:TARGET%趴在床上、将枕头夹在了两脚之间
			PRINTFORMDL 本只想确认心跳的手、却不知不觉将胸部下流地揉了起来
			PRINTFORML 「……哈啊哈啊……唔库…………」
			PRINTFORMDL 枕头摇摇晃晃掉了下来被压在了大腿下
			PRINTFORML 「这个……好厉害啊…………%CALLNAME:MASTER%！……咿呀啊啊」
			PRINTFORML 「不行啊……这么……强硬……如狼似虎的……不要……」
			PRINTFORML 「要……忍住…………还不行……快要……」
			PRINTFORMDW %CALLNAME:TARGET%以一副平时无法想象的不成体统的样子沉浸在自慰中
			PRINTFORML 「不行……不行不行了……去了～～！！！」
		ELSE
			TRYCALL K17_H妄想_喘ぎ(K17C_受け_合意袭い系)
			PRINTFORML 「%K17_喘ぎ声(K17C_受け_合意袭い系,6,1)%%K17_快乐_喘ぎ声(K17C_受け_合意袭い系,8000,K17C_部位C)%%K17_喘ぎ声(K17C_受け_合意袭い系,6,1,1)%」
			PRINTFORML 「%K17_喘ぎ_绝顶(K17C_受け_合意袭い系,K17C_部位C)%」
		ENDIF
		PRINTW
		PRINTFORML （好厉害啊%K17_HEART()%　…………但是………）
		PRINTFORML （…………好厌恶自己……居然把%CALLNAME:MASTER%的当做素材了……）
		;経験值+スッキリ
		EXP:自慰经验 += 1
		EXP:Ｃ经验 += 1
		EXP:Ｂ经验 += 1
		EXP:Ｃ绝顶经验 += 1
		EXP:自慰经验 += 1
		CFLAG:积攒度 /= 4
		;态度を1段阶下げる
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,-1)
		SIF RESULT
			PRINTFORML （稍微坦率一点也没关系的吧）
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;爱欲取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML （不行……已经……如果没有那个人的身体就活不下去了）
		TRYCALL K17_H妄想_喘ぎ(K17C_攻め_强行系)
		PRINTFORML 「%K17_喘ぎ声(K17C_攻め_强行系,6,1)%%K17_快乐_喘ぎ声(K17C_攻め_强行系,8000,K17C_部位V)%%K17_喘ぎ声(K17C_攻め_强行系,6,1,1)%」
		PRINTFORML 「%K17_喘ぎ_绝顶(K17C_攻め_强行系,K17C_部位V)%」
		PRINTW
		PRINTFORMDL 身体完全被俘虏了……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_恋慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_恋慕)
			CALL K17_RELATION_EV(K17C_RTF_恋慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;爱人取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML （明明知道是不可以的但已经完全沉溺进去了……）
		TRYCALL K17_H妄想_喘ぎ(K17C_攻め_おねだり系,0)
		PRINTFORML 「%K17_喘ぎ声(K17C_攻め_おねだり系,6,1)%%K17_快乐_喘ぎ声(K17C_攻め_おねだり系,8000,K17C_部位C)%%K17_喘ぎ声(K17C_攻め_おねだり系,6,1,1)%」
		PRINTFORMDL 今天的身体也与内心不同、依旧在渴求着%CALLNAME:MASTER%
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;炮友取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTL
		PRINTFORML （只是肉体上的关系么……这样……真的好么？）
		TRYCALL K17_H妄想_喘ぎ(K17C_受け_合意袭い系)
		PRINTFORMDL 虽然脑袋里想否认、但身体火辣辣的痛感却无法停息下来……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;调教结束时に自慰
;==================================================
;テンプレ无视ごめんなさい てかなんか稍微间违ってた
;自慰经验100の格の违いを见せないと！　かっ飞ばせ！かっ飞ばせ！爱丽丝！
;
;	[テンプレ]
;ARG:0に自慰状况　1通常自慰　2同居时自慰　3中だし精液自慰　4无知持ち　5陷落素質あり自慰中毒高め　6自慰中毒高め（陷落无）
;ARG:1に自慰种类　1Ｂ　2A　6C　7V　8部位指定无し　ARG==6の时　1尻穴膣腔同时　2膣腔のみ

;	[现在的实值]
;ARG:0に自慰状况　1通常自慰　2同居时自慰　3中だし精液自慰　4无知持ち　5陷落素質あり自慰中毒4以上　6自慰中毒4以上（陷落关系无）おもちゃ
;ARG:1に自慰种类	ARG==5 1B　2A　3C　4V　5无　各感度1or感觉10……部位番号はABLの要素番号とは违うみたい　感觉だけかと思ってた……
;					ARG==6　1尻穴膣腔同时　2膣腔のみ
;无知はまた今度
;--------------------------------------------------
@M_KOJO_EVENT_K17_22(ARG,ARG:1)
#DIM DYNAMIC iRand,2=0,0	;妄想种类と妄想
#DIM DYNAMIC iType = 0		;喘ぎTYPE
#DIM DYNAMIC ABLnum= -1		;部位番号　参数からABLの番号に变更 -1のままだとスキップ
VARSET LOCALS		;オプションの呼び名文字列
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL

	;-------------------------------------------------
	;无知
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		IF ABL:自慰中毒 >= 5
			;保护者联络
			PRINTFORML （……好想死……羞死了……）
			PRINTFORML （但是所谓的大人都是这样的吧…）
		ELSE
			PRINTFORML （什么……这个……这是什么……好舒服%K17_HEART()%）
			PRINTFORMDL %CALLNAME:TARGET%将自己交给了未知的极乐、几度沉浸在无限的快感之中……
		ENDIF
	RETURN 1
	ENDIF


	;-------------------------------------------------
	;无知自慰以外　ここから　同居は妄想スキップ
	;-------------------------------------------------
	IF ARG != 2 && ARG != 7
		PRINTFORML 「%K17_RS("唔ー嗯/那ー个/")%……今天……该怎么办好呢……好吧」
		PRINTFORMDL %CALLNAME:TARGET%躺在被窝里、闭上眼睛、沉浸在妄想中……
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW ………………
	ENDIF
	
	;-------------------------------------------------
	;无知自慰以外で陷落ないとき
	;思慕付き前だからここで诱わないと谁にも见てもらえないぞ、がんばれがんばれ
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG != 4 && K17_GRT(TARGET) < K17C_思慕
		PRINTFORML （想起来在图书馆找到的%K17_RS("同人本/小薄本/小黄书")%的场景……）
		PRINTDATAL
			DATAFORM （唔嗯……这样的事……啊……明明知道是不可以的……）
			DATAFORM （库唔……这样的欲望……消失掉就好了……）
			DATAFORM （啊……总是做这样的事……明知道不行的……）
			DATAFORM （嗯库……这样的地方……如果被看到的话……不行啊……）
		ENDDATA
		;でも感じちゃうビクンッビクンッ
		PRINTDATAL
			DATAFORM （但是我……还做的挺……舒服的……）
			DATAFORM （但是身体……擅自、就一塌糊涂了……）
			DATAFORM （但是身体……擅自……就想要……小宝宝了……？）
			DATAFORM （但是这样……好舒服啊……要去了……）
		ENDDATA
		PRINTFORML （差不多……%K17_RS("也该要去了/该绝顶了/也该结束了")%……）
		PRINTFORML 「……咿咿咿……%K17_RS("去了！/来了！/高潮了!")%…………」
		PRINTW
		PRINTFORMDL %CALLNAME:TARGET%的%K17_RS("双腿/身体")%吡咕吡咕的抽搐了一下
		PRINTFORML 「哈啊……%K17_HEART()%」
		PRINTFORMDL 一瞬间紧绷的身体软绵绵地放松了下来
		PRINTFORML （……这样……迄今为止到底做了多少次呢…………）
		PRINTFORML （但是……果然还是没法罢手呢……哈啊……）
		SIF TALENT:处女
			PRINTFORML （明明没有经验却老是做这种事……）
		PRINTFORMDL %CALLNAME:TARGET%有点厌恶自己
		RETURN 1
	ENDIF
	
	
	;-------------------------------------------------
	;无知自慰以外
	;こっちがメイン　爱丽丝の妄想ひとりえっち
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG != 4 && ARG != 7
		iRand:0=RAND:K17C_妄想种类数
		iRand:1=RAND:K17C_受け妄想数
		;同居以外は妄想先出し
		IF ARG != 2
			;妄想の取り出し　CONVERTしてそれっぽく→见送り
			SELECTCASE K17_GRT(TARGET)
				CASE IS >= K17C_恋慕
					;恋慕から攻め受け
					;妄想取り出しひでーなこれ……长文だとだめだなぁ
					;PRINTFORML （……%K17_SEXY_CONVERT(K17_H妄想(iRand:0,iRand:1),13,K17_HEART())%……）
					PRINTFORML （……%K17_H妄想(iRand:0,iRand:1)%……）
					PRINTW
				CASE IS >= K17C_思慕
					;思慕は受けのみ
					iRand:0=K17C_受け
					PRINTFORML （……%K17_H妄想(iRand:0,iRand:1)%……）
					;PRINTFORML （……%K17_SEXY_CONVERT( K17_H妄想(iRand:0,iRand:1),13,K17_HEART())%……）
					PRINTW
			ENDSELECT
			;既读で变わった场合があるので保存
			iRand:1 = RESULT
		ELSEIF ARG== 2
			
			;もし处女or自慰暴露初回なら小恶魔受け固定
			SIF TALENT:TARGET:处女 || CFLAG:TARGET:K17C_CF_自慰暴露追加イベ  == 0
				iRand:1 = K17C_小恶魔受け
		ENDIF
			
		;タイプ决定
		iType = K17_喘ぎタイプ_H妄想(iRand:0,iRand:1)
		
		;-------------------------------------------------
		;同居
		;自慰暴露を入れる
		;-------------------------------------------------
		IF ARG == 2
			;同居　恋慕以上なんでタイプ确定打ちしてもいいかな
			PRINTFORMDL 本人可能没有注意到、但她的声音渐渐变大了……
			TRYCALL K17_H妄想_喘ぎ(iType)
			
			;幸运补正+10%　关系性补正+3%　つく
			IF K17_LUCKY_SUKEBE(55)
				TRYCALL K17_ONABARE(K17C_ID)
				RETURN 1
			ENDIF
			
			;こっちでも鉴赏と大差ないやつ
			PRINTFORMDL 差不多该到极限了吧、%CALLNAME:TARGET%紧紧握住了%CALLNAME:MASTER%的手、不由得也紧紧握了回来
			PRINTFORML 「…………？　诶」
			PRINTFORMDL %CALLNAME:TARGET%因快感而颤抖着、当注意到这边时、整个脸都变红了
			PRINTW
			PRINTFORML 「诶、稍微、等下、%K17_喘ぎ_绝顶(iType,-1,"\n　一边被看着")%」
			PRINTFORMDL %CALLNAME:TARGET%虽然看起来很慌张、但却因为快感%K17_RS("停不下来的/忍不住的/无法忍受的")%吡咕吡咕抽搐着
			PRINTFORMDL 即使羞涩地蜷缩着身体绝顶、但关键的部位已经完全被%CALLNAME:MASTER%看见了
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			
			;性癖暴露处理
			;自慰暴露イベント入ったか见る
			IF FIRSTTIME("自慰暴露")
				PRINTFORML 「那个……这是……」
				PRINTFORMDL %CALLNAME:TARGET%从高潮中慢慢恢复了、语无伦次的开始说明
				PRINTFORML 「……不、不是那样的、这是」
				PRINTFORML 「这是……为了人偶研究？　没错！　所以就稍微……」
				PRINTFORMDL 我觉得那种辩解也太牵强了……
				PRINTW
				PRINTFORMDL 而且如果真有这种"研究"的话、那可一定得好好看看啊.
				PRINTFORML 「————！」
				PRINTFORML （暴、暴露了呢……）
				PRINTW
				PRINTFORMDL 胡说回来%CALLNAME:TARGET%还真是"热心研究"　呢
				PRINTFORML （即使是女孩子……也有性欲的呐……）
				PRINTFORML （也会悄悄地一个人做H的事啊……%K17_BLUSH()%）
				PRINTFORML （而且%K17_CNAME()%也有责任的……）
				PRINTW
				PRINTFORMDL 得把"研究发表"成果和其他更多人分享一下
				PRINTFORML 「哈啊～～～！？！？　这、这是能发表的东西吗……！」
				PRINTFORML 「秘、秘密！这是秘密的研究！」
				PRINTFORML 「话说回来、你明明知道还故意捉弄人家对吧！？」
				
			ELSE
				PRINTFORML 「啊……不……啊……唔ー」
				PRINTFORMDL 当高潮结束时、%CALLNAME:TARGET%用床单蒙住了头小声嘀咕着什么
				PRINTFORMDL %CALLNAME:TARGET%果然很"热心的研究"呢
				PRINTFORML 「才、才不是……」
			ENDIF
			
			PRINTFORMDW 那么、到底在做什么"研究",希望你能好好说呢……
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%在做%K17_RS("一个人H/自慰/自我发电ー/女人身体")%的研究%K17_BLUSH(2)%」
			PRINTFORML 「真、真是最糟糕的台词了」
			;鉴赏と同じ
			TRYCALL K17_自慰暴露追加イベント(2,iRand:1)
			
			PRINTFORMDL 总感觉受不了的%CALLNAME:TARGET%抱住了自己的脑袋、怎么也睡不着的样子……
			
			;CFLAG:K17C_ID:K17C_CF_自慰フラグ = 1
			RETURN 1
			
		;-------------------------------------------------
		;ARG==3,5,6のオプション选择
		;-------------------------------------------------
		ELSEIF ARG == 3
			;中出し精液
			LOCALS = %K17_CNAME()%的精液
			ABLnum = K17C_部位V
		ELSEIF ARG == 5
			;部位描写あり 
			SELECTCASE ARG:1
				[SKIPSTART]
				CASE 1
					ABLnum = K17C_部位B
				CASE 2
					ABLnum = K17C_部位A
				CASE 3
					ABLnum = K17C_部位C
				CASE 4
					ABLnum = K17C_部位V
				[SKIPEND]
				CASE 1
					ABLnum = K17C_部位C
				CASE 2
					ABLnum = K17C_部位V
				CASE 3
					ABLnum = K17C_部位A
				CASE 4
					ABLnum = K17C_部位B
			ENDSELECT
		ELSEIF ARG == 6
			;おもちゃあり
			LOCALS +="用道具"
			SELECTCASE ARG:1
				CASE 1
					LOCALS += K17_CALL_P(K17C_部位A)+"和"+K17_CALL_P(K17C_部位V)
				CASE 2
					ABLnum = K17C_部位V
			ENDSELECT
		ENDIF
		
		
		;-------------------------------------------------
		;喘ぎ
		;-------------------------------------------------
		TRYCALL K17_H妄想_喘ぎ(iType,ARG==6 ? 1#0)
		
		;-------------------------------------------------
		;绝顶处理
		;-------------------------------------------------
		;部位
		PRINTFORML 「%K17_喘ぎ声(iType,6,1)%%K17_快乐_喘ぎ声(iType,8000,ABLnum)%%K17_喘ぎ声(iType,6,1,1)%」
		PRINTFORML 「%K17_喘ぎ_绝顶(iType,ABLnum,LOCALS)%」
		PRINTW
		
		;感想战
		PRINTFORML 「哈啊……%K17_HEART()%」
		PRINTFORMDL 因为激烈地高潮%CALLNAME:TARGET%的身体软绵绵的耸拉了下来
		PRINTFORMDL 一手遮着额头、调整着自己的呼吸
		PRINTFORML （%K17_RS("是欲求不满了么/是积攒太多了么/是生理期将近了么")%……）
		SELECTCASE iType
			;受け
			CASE K17C_受け_おねだり系
				PRINTFORML （居然做了那种、%K17_RS("酥软的/被溺爱的/想要撒娇的")%%K17_RS("妄想/想像")%……）
			CASE K17C_受け_合意袭い系
				PRINTFORML （居然做了那种、自己主动去%K17_RS("被强上的/被搞得乱七八糟的/被侵犯的")%%K17_RS("妄想/想像")%……）
			CASE K17C_受け_强行系
				PRINTFORML （居然做了那种、%K17_RS("被强上的/被搞得乱七八糟的/被侵犯的")%%K17_RS("妄想/想像")%……）
			CASE K17C_受け_お手传い系
				PRINTFORML （居然做了那种、%K17_RS("被随心所欲玩弄的/被搞得乱七八糟的/被侵犯的")%%K17_RS("妄想/想像")%……）
			;攻め
			CASE K17C_攻め_おねだり系
				PRINTFORML （居然做了那种、自己%K17_RS("去提出要求的/去溺爱的")%%K17_RS("妄想/想像")%……）
			CASE K17C_攻め_合意袭い系,K17C_攻め_强行系 
				PRINTFORML （居然做了那种、自己%K17_RS("去强上的/搞得乱七八糟的/侵犯的")%%K17_RS("妄想/想像")%……）
			CASE K17C_攻め_お手传い系
				PRINTFORML （居然做了那种、自己%K17_RS("沉溺糜烂的/很享受的")%%K17_RS("妄想/想像")%……）
		ENDSELECT
		
		PRINTFORMDL %CALLNAME:TARGET%陷入了相当的自我厌恶
		SIF CFLAG:TARGET:初始位置 != CFLAG:MASTER:初始位置
			CFLAG:K17C_ID:K17C_CF_自慰フラグ = 1
	;无知以外自慰终端
	ENDIF
ENDIF
RETURN 1
;==================================================
;浴场连れだし
;==================================================
@M_KOJO_EVENT_K17_23(ARG,ARG:1)
#DIM DYNAMIC iMOB = 0
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;断られた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「给我等一下啊、我们现在还不是可以坦诚相见的关系吧？」
	ENDIF
	;-------------------------------------------------
	;一绪に入ってくれた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「这里的人很喜欢和别人一起进入浴室呢……」
		PRINTFORML 「叽咯叽咯的盯着这边可是禁止的哦」
		PRINTFORMDL %CALLNAME:MASTER%不顾还在害羞的%CALLNAME:TARGET%、快速脱下了自己衣服
		PRINTFORML 「那么、你先进去吧」
		PRINTW
		PRINTFORMDL 被那样说了之后%CALLNAME:MASTER%先进入了浴室、不过、怎么也等不到%CALLNAME:TARGET%进来
		PRINTFORMDL 再喊了好几次后、终于、相当害羞的%CALLNAME:TARGET%遮着身子进来了
		
		;爱丽丝の他に同行者がいるかチェック
		FOR i,1,CHARANUM
			SIF !TARGET:i
				BREAK
			
			IF (CFLAG:(TARGET:i):同行) && TARGET:i != K17C_ID
				iMOB = TARGET:i
				BREAK
			ENDIF
		NEXT
		
		;连れ出しは先MASTERだけ移动するのが现仕样なので、その位置で他TARGETが居ないか见とく
		;爱丽丝の位置では他TARGETを考虑しない
		;设定して气づいたけどお澡堂に他角色いると、そっちが先に读まれてここはこないっぽい
		IF K17_CHECK_RANDOM_EVENT(TARGET,-1,0) && K17_GET_CHARA_POSNUM(MASTER) == 0 && !iMOB
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL 只说了这些后、就满脸通红地泡在浴池里了
		ENDIF
		IF !RESULT
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%若隐若现的
		ENDIF
	ENDIF
	
	PRINTW
ENDIF
RETURN 1
;==================================================
;怀孕
;==================================================
@M_KOJO_EVENT_K17_24(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「那、那个、我好像\@EXP:分娩经验?又#\@怀上了%K17_CNAME()%的孩子了……」
		PRINTFORMDL %CALLNAME:TARGET%露出了开心的笑容看着%CALLNAME:MASTER%
	ENDIF
	;-------------------------------------------------
	;思慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「那个……这个……那个……呐、好像\@EXP:分娩经验?又#\@搞出来了」
		PRINTFORMDL %CALLNAME:TARGET%不安地看着%CALLNAME:MASTER%、不过、立刻就别开了视线
	ENDIF
	;-------------------------------------------------
	;陷落素質无し
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		;詰问はきつい
		PRINTFORML 「怎么办啊、都是因为%K17_CNAME()%的错、\@EXP:分娩经验?又#\@怀上了……怎么办啊」
		PRINTFORMDL %CALLNAME:TARGET%似乎对自己的妊娠感到不安
		PRINTFORMDL %CALLNAME:MASTER%只能抚摸安慰着快要哭出来了的%CALLNAME:TARGET%……
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;无自觉
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML （怎么回事……最近身体老是不舒服……真奇怪）
		PRINTW
		RETURN 1
	ENDIF
	
	;报告陷落あり　分娩经验を见る
	IF !EXP:分娩经验
		PRINTW
		PRINTFORMDL 看来不得不做好思想准备了
		PRINTFORML 「我要生孩子了……但是、因为是第一次、所以有些不安……」
		PRINTFORMDL %CALLNAME:TARGET%似乎早已做好觉悟、爱怜地抚摸着自己的肚子
		PRINTFORMDL 看到她那个样子突然、%CALLNAME:MASTER%抱住了%CALLNAME:TARGET%
		PRINTFORML 「呀啊啊……突然……怎么了……没问题的啦、一定能生下一个健康的孩子的」
	ELSE
		PRINTFORML 「我、又要生了……但是和%K17_CNAME()%的孩子的话不管生多少都可以呢」
		PRINTFORMDL 有过了生产经验、%CALLNAME:TARGET%看来已经知道成为母亲的%K17_RS("喜悦/幸福")%
	ENDIF
	
ENDIF
PRINTW
RETURN 1
;==================================================
;出产
;==================================================
@M_KOJO_EVENT_K17_25(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕 思慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 1 || ARG == 2)
		PRINTFORML 「没关系呢、生了个精力充沛的孩子」
		PRINTFORML 「看呐、这孩子。%K17_RS("眼睛/嘴角")%和%K17_CNAME()%一模一样呢」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;陷落素質无し
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「……虽然很不安、但是这孩子今后必须由我一人抚养了.……」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;无自觉
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		RETURN 1
	ENDIF
	;其他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;自慰暴露
;09/20	なんか作り杂だなー函数化予定地
;09/21	少しマシになったはず　フラグ取得はK17_自慰暴露追加イベント函数にて
;09/24	同居自慰追加 ARG:1にて见られた瞬间、逐出　あと一绪
;==================================================
@M_KOJO_EVENT_K17_26(ARG,ARG:1)
#DIM Virgin = 0		;まんまの意味　行ったり来たりするので保护しておく
#DIM iRand = 0		;受け妄想の一时受け渡し
#DIM iType = 0		;タイプの保存
#DIM iRes = 0		;初回かどうか见とく

;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;见られた瞬间 通常自慰暴露
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			IF FIRSTTIME("自慰暴露",1) && ARG:1==0
				SELECTCASE K17_GRT(TARGET)
				
				;诶嘿嘿经验无
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「！？！？……%K17_RS("嘿咿～～～/呀啊啊啊啊/嘿诶诶诶诶诶")%？」
					;诶嘿嘿+接吻经验あり
					CASEELSE
						PRINTFORML 「……%K17_RS("呀啊/呀啊啊/嘿诶诶诶/啊啊")%！？」
				ENDSELECT
				PRINTFORML 「啊……不是……诶……？」
				PRINTFORMDL  听到了在平时的样子难以想象的声音
				PRINTFORML 「那是……不不、不是这样的」
				PRINTFORML 「那是……人偶的研究？　没错！所以才没法放手」
				PRINTFORMDL 我觉得那种辩解也太牵强了……
			
			ELSEIF ARG:1==0
				SELECTCASE K17_GRT(TARGET)
				
					;诶嘿嘿经验无
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「！？！？……%K17_RS("嘿咿～～～/呀啊啊啊啊/嘿诶诶诶诶诶")%？」
					;诶嘿嘿+接吻经验あり
					CASEELSE
						PRINTFORML 「%K17_RS("呀啊/呀啊啊/嘿诶诶诶/啊啊")%！？」
				ENDSELECT
				PRINTFORML 「啊……不……诶……？诶……？又……是这样么？」
				PRINTFORMDL  听到了在平时的样子难以想象的声音
				PRINTFORMDL %CALLNAME:TARGET%果然很"热心的研究"呢
				PRINTFORML 「才、才不是……」
				
			ENDIF
			
			;-------------------------------------------------
			;追加イベ
			;同居自慰　见られた瞬间
			;-------------------------------------------------
			IF ARG:1==1
				;PRINTFORMDL 差不多该到极限了吧、%CALLNAME:TARGET%紧紧握住了%CALLNAME:MASTER%的手、不由得也紧紧握了回来
				PRINTFORML 「…………？　诶」
				PRINTFORMDL %CALLNAME:TARGET%因快感而颤抖着、当注意到这边时、整个脸都变红了
				PRINTW
				PRINTFORML 「哎、稍微、等等、%K17_喘ぎ_绝顶(K17C_受け_强行系,-1,"\n　被看到了")%」
				PRINTFORMDL %CALLNAME:TARGET%虽然看起来很慌张、但却因为快感%K17_RS("停不下来的/忍不住的/无法忍受的")%吡咕吡咕抽搐着
				PRINTFORMDL 即使羞涩地蜷缩着身体绝顶、但关键的部位已经完全被%CALLNAME:MASTER%看见了
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW ………………
			ENDIF
			IF FIRSTTIME("自慰暴露",1) && ARG:1==1
				PRINTFORML 「那个……这是……」
				PRINTFORMDL %CALLNAME:TARGET%从高潮中慢慢恢复了、语无伦次的开始说明
				PRINTFORML 「……不、不是那样的、这是」
				PRINTFORML 「这是……为了人偶研究？　没错！　所以就稍微……」
				PRINTFORMDL 我觉得那种辩解也太牵强了……
			ELSEIF ARG:1==1
				PRINTFORML 「啊……不……啊……唔ー」
				PRINTFORMDL 当高潮结束时、%CALLNAME:TARGET%用床单蒙住了头小声嘀咕着什么
				PRINTFORMDL %CALLNAME:TARGET%果然很"热心的研究"呢
				PRINTFORML 「才、才不是……」
			ENDIF
			
			
		RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 1
		;什么也不做
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1==0
			IF FIRSTTIME("自慰暴露",1)
				SELECTCASE K17_GRT(TARGET)
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「所以、那个……快点出去！」
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……mo%K17_BLUSH(2)%　羞耻的样子被看见了……」
						PRINTFORML 「说起来%K17_CNAME()%也有责任呢…」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？　骗人的吧……真的要回去了……么？」
				ENDSELECT
			ELSE
				;见たりしたりした以降
				PRINTFORML 「给、给我出去！…………啊啊……」
				SELECTCASE K17_GRT(TARGET)
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「果然是因为之前的事么……」
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「诶……骗人的吧……是我说得太过分了么……」
						PRINTFORML 「还是说是因为之前的事……？」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？　骗人的吧……真的要回去了……么？」
						PRINTFORML 「mo……已经厌倦了么……」
				ENDSELECT
			ENDIF
			PRINTFORML 「笨……笨蛋一！」
			;自主トレがばれて爱丽丝の自尊心が下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-1)
			RETURN 1
		ENDIF
		
		;-------------------------------------------------
		;什么也不做　同居自慰
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1==1
			IF FIRSTTIME("自慰暴露",1)
				SELECTCASE K17_GRT(TARGET)
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……mo%K17_BLUSH(2)%　羞耻的样子被看见了……」
						PRINTFORML 「说起来%K17_CNAME()%也有责任呢…」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？　骗人的吧……真的要睡了……么？」
				ENDSELECT
			ELSE
				;见たりしたりした以降
				PRINTFORML 「诶！？…………诶诶……」
				SELECTCASE K17_GRT(TARGET)
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「诶……骗人的吧……是我说得太过分了么……」
						PRINTFORML 「还是说是因为之前的事……？」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……诶？　骗人的吧……真的要睡了……么？」
						PRINTFORML 「mo……已经厌倦了么……」
				ENDSELECT
			ENDIF
			PRINTFORML 「笨……笨蛋一！」
			;自主トレがばれて爱丽丝の自尊心が下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-1)
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 2
		;そのまま续行
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;单薄的本展开だー！　爱丽丝の女の子の身体の仕组み研究会！鉴赏编
			;见ててあげるからどうぞそのまま
			
			IF FIRSTTIME("自慰暴露")
				PRINTFORML 「看……看见了……？」
				PRINTFORMDL 对那个"研究"很感兴趣、所以想看一下
				PRINTFORML 「————！」
				PRINTFORML （暴、暴露了呢……）
				PRINTW
				PRINTFORMDL 胡说回来%CALLNAME:TARGET%还真是"热心研究"　呢
				PRINTFORML （即使是女孩子……也有性欲的呐……）
				PRINTFORML （也会悄悄地一个人做H的事啊……%K17_BLUSH()%）
				SIF TALENT:K17C_ID:恋慕
					PRINTFORML （而且%K17_CNAME()%也有责任的……）
				PRINTW
				PRINTFORMDL 得把"研究发表"成果和其他更多人分享一下
				PRINTFORML 「哈啊～～～！？！？　这、这是能发表的东西吗……！」
				PRINTFORML 「秘、秘密！这是秘密的研究！」
				PRINTFORML 「话说回来、你明明知道还故意捉弄人家对吧！？」
				PRINTFORMDW 那么、这件事就保密吧……
				CALLF FIRSTTIME("自慰暴露鉴赏初回")
			ELSEIF FIRSTTIME("自慰暴露鉴赏初回")
				PRINTFORML 「真的……只是想看……么？」
				PRINTFORMDL 在那之前……
			ELSE
				PRINTFORML 「还……还、想看……？」
				PRINTFORMDL 在那之前……
			ENDIF
			
			
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMW 「请看%CALLNAME:TARGET%的%K17_RS("一个人H/自慰/自我发电ー/女人的身体")%研究发表%K17_BLUSH(2)%」
			PRINTFORML 「真、真是最糟的台词了」
			
			;思慕↑追加イベ
			TRYCALL K17_自慰暴露追加イベント(ARG,iRand)
			IF RESULT
				PRINTFORMDL 从后面抱住了已经忍不住的%CALLNAME:TARGET%
				PRINTFORMDL 原本就颤个不停的身体、颤得更加厉害了
				PRINTFORML 「呼……%K17_RS("真的摸到了/真的做的话/本番H")%是……不、不行的……呐？」
				PRINTFORMDL 将坐在床上的%CALLNAME:TARGET%抱在了大腿上
				PRINTFORML 「这、这里%K17_RS("想做/想要/想要了")%！？」
				PRINTFORMW （这个、不妙……太近、太近了）
				
				;とりあえず今のところ随机　そのうち喘ぎタイプによって变动させる
				SELECTCASE RAND:4
					CASE 0
						PRINTFORML （心脏扑通扑通的……要暴露了）
						PRINTFORMDL %CALLNAME:TARGET%心脏的跳动的传了过来
					CASE 1
						PRINTFORML （%K17_CNAME()%的味道……兴奋起来了）
						PRINTFORMDL %CALLNAME:TARGET%的香味传了过来
					CASE 2
						PRINTFORML （屁股上、%K17_CNAME()%的……硬硬的……碰到了）
						PRINTFORMDL %CALLNAME:TARGET%%HIP(TARGET)%的触感从大腿上传了过来
					CASE 3
						PRINTFORML （身体越来越热了……要被发现了）
						PRINTFORMDL %CALLNAME:TARGET%火热的体温传了过来
				ENDSELECT
				
			;思慕以上追加イベ终端
			ENDIF
			
			IF K17_RT_FG() & K17C_RTF_诶嘿嘿
				PRINTFORML （…………诶……真的、不做……么？）
			ELSE
				PRINTFORML 「诶？绝对、绝一对、%K17_RS("要守秘/要保密/不可以告诉别人")%哦……？」
			ENDIF
			;自主トレがばれて爱丽丝の自尊心が下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-1)
			PRINTL
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 3
		;逐出
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			PRINTFORML 「差……差劲！　变态！　给我出去去去！」		
			;逐出时自尊心は保たれる
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 4
		;やっちゃう
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;单薄的本展开だー！　爱丽丝の女の子の身体の仕组み研究会！实技编
			;一人より二人する方が气持ちいいよ
			;二人おなにーの见せ合いだと思ってました
			;なので爱丽丝に勘违いさせとく
			
			;自慰暴露ックス初回　鉴赏もまだ
			IF FIRSTTIME("自慰暴露")
				PRINTFORML 「两……两人……？诶？」
				PRINTFORMDL 对那个"研究"很感兴趣、所以想一起研究呢
				PRINTFORML 「————！」
				PRINTFORML （被、被发现了……要怎么办啊？）
				PRINTW
				PRINTFORMDL 胡说回来%CALLNAME:TARGET%还真是"热心研究"　呢
				PRINTFORML （即使是女孩子……也有性欲的呐……）
				PRINTFORML （也会悄悄地一个人做H的事啊……%K17_BLUSH()%）
				SIF TALENT:K17C_ID:恋慕
					PRINTFORML （而且%K17_CNAME()%也有责任的……）
				PRINTW
				PRINTFORMDL 得把"研究发表"成果和其他更多人分享一下
				PRINTFORML 「哈啊～～～！？！？　这、这是能发表的东西吗……！」
				PRINTFORML 「秘、秘密！这是秘密的研究！」
				PRINTFORML 「话说回来、你明明知道还故意捉弄人家对吧！？」
				PRINTFORMDW 那么、这件事就保密吧……
				CALLF FIRSTTIME("自慰暴露ックス初回")
			ELSEIF FIRSTTIME("自慰暴露ックス初回")
				;自慰暴露ックスが初、鉴赏済み
				PRINTFORML 「诶？　诶！？　诶诶诶！？」
				PRINTFORML 「要……一起……这个……那个、看么……？」
				PRINTFORMDL 在那之前……
				
			ELSE
				;自慰暴露ックス2回目以降
				PRINTFORML 「又……要做了么……？」
				PRINTFORMDL 在那之前……
			ENDIF
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMW 「请一来做%CALLNAME:TARGET%的%K17_RS("一个人H/自慰/自我发电ー/女人的身体")%研究吧%K17_HEART()%」
			PRINTFORML 「mo～～～～%K17_BLUSH()%」
			
			;自慰暴露ックス済か见る
			IF !(CFLAG:K17C_ID:K17C_CF_自慰暴露追加イベ & 2)
				iRand = K17C_小恶魔受け
				iRes = 0
			ELSE
				iRes = 1
			ENDIF
			;思慕↑追加イベ
			TRYCALL K17_自慰暴露追加イベント(ARG,iRand)
			;タイプ决定
			iType = K17_喘ぎタイプ_H妄想(K17C_受け,iRand)
			;初回限定　恋慕未满　强行固定
			SIF iRes == 0 ||  K17_GRT() < K17C_恋慕
				iType = K17C_受け_强行系
			
			PRINTFORMDL 从后面抱住了已经忍不住的%CALLNAME:TARGET%
			PRINTFORMDL 原本就颤个不停的身体、颤得更加厉害了
			
			
			
			;受け妄想をそのまま实现化
			SELECTCASE iType
				;--------------------
				;诱い受け　强气受け　初回のみ小恶魔受けでこうなる　仕方ないねっ
				;--------------------
				CASE K17C_受け_强行系
					VARSET Virgin
					PRINTFORML 「呼……%K17_RS("真的摸到了/真的做的话/本番H")%是……不、不行的……呐？」
					PRINTFORMDW ……
					PRINTFORML 「仅限……互相给对方看哟？」
					PRINTFORMDW …………！！
					PRINTFORMW 「不、不行、冷静点！ 　呐？」
					PRINTFORMW 「呀啊啊啊！？」
					PRINTFORMW 「知道了！我知道了！」
					PRINTFORMW 「%K17_RS("用手也可以/给你看裸体也可以/给你看那里也可以")%！　或者%K17_RS("用嘴巴/用屁股/素股/用胸部")%也可以！　我会给你做的啦！」
					PRINTFORMW 「%K17_RS("不要/呀啊")%啊啊啊啊啊啊、%K17_RS("不要啊/不行")%啊啊啊啊啊啊！」
					PRINTFORMDL 这难道也是妄想的延续吗……
					SIF K17_GRT(TARGET) < K17C_恋慕
						PRINTFORMW 「不是演技！不是演技啦！」
					IF TALENT:TARGET:处女
						PRINTFORML 「我、我还是处女！」
						;そうか大事なものなので取っておく
						Virgin = TALENT:TARGET:处女
					ENDIF
					
					;竿判定避孕要求
					SIF TALENT:MASTER:性别 >= 2 && (!CFLAG:TARGET:允许无套 && ESTRUS_CYCLE(TARGET) != 15) || (CFLAG:TARGET:允许无套 < 2 && ESTRUS_CYCLE(TARGET) == 150)
						PRINTFORML 「%K17_RS("做好避孕吧/带上套子吧")%、至少%K17_RS("做好避孕/带上套子")%啊啊啊啊啊！！」
					;女MASTERでも处女失うのでこれであってるのか
					PRINTFORML 「真的……不可以插进去啊啊啊啊啊啊」
					
					
				;--------------------
				;姫受け　わんこ受け
				;--------------------
				CASE K17C_受け_おねだり系
					;恋慕↑
					PRINTFORML 「诶……?还一直在想……会不会被突然袭击」
					PRINTFORML 「呐、呐……真的只是……一起……这样……看着么？」
					PRINTFORMDW %CALLNAME:TARGET%用湿润的眼神、像是在勾引一般展示着自己的性器并摇着腰
					PRINTFORMW 「……看呐……」
					PRINTFORMW 「来吧……快点、呐？　快来吧%K17_HEART()%　呐%K17_HEART()%」
					PRINTFORMDL 然后互相触碰彼此的股间、从%CALLNAME:TARGET%的小穴里发出了咕啾咕啾的下流声音
					PRINTFORMW 「既然会好好保密的话……可以、任你处置哦？」
					;竿判定
					IF TALENT:MASTER:性别 >= 2
						PRINTFORML 「呀啊……啊嗯%K17_HEART()%　被插入了%K17_HEART()%」
					ELSE
						PRINTFORML 「呀啊……啊嗯%K17_HEART()%　粘住了%K17_HEART()%」
					ENDIF
					
					
				;--------------------
				;小恶魔受け　袭い受け
				;--------------------
				CASE K17C_受け_合意袭い系
					;また犯す气でしょ！　エロ同人のように！
					PRINTFORML 「哼……你又想做那个了吧……」
					PRINTFORMDL 这么说着的同时%CALLNAME:TARGET%偷偷瞄着床的方向
					PRINTFORML 「呀！？　等、等一下……%K17_BLUSH()%」
					PRINTFORMDL %CALLNAME:MASTER%本打算只是轻轻地触碰一下、%CALLNAME:TARGET%便一屁股的弹到了床上
					PRINTFORMDL 意图还真是明显呐……
					PRINTW
					PRINTFORML 「先答应我不能%K17_RS("弄破衣服/射在里面/乱来")%哦……」
					PRINTFORML 「我绝对%K17_RS("不会屈服的/不会输的")%！」
					PRINTFORMDL 都演到这个地步了总觉得有点可爱
					PRINTFORMDL 我会照你说的办到底的
					
					
				;--------------------
				;健气受け
				;--------------------
				CASE K17C_受け_お手传い系
					;责任とりえっち
					PRINTFORML 「……那个、%K17_RS("兴奋起来/发情")%了么……？」
					PRINTFORML 「是、是我……我的原因么？　好吧……」
					PRINTDATADL
						DATAFORM %CALLNAME:TARGET%转过身去、\@TEQUIP:下半身着衣状况 & 1?将%K17_GET_SKIRT(TARGET)%解开#\@、一手扶着墙壁崛起了屁股
						DATAFORM %CALLNAME:TARGET%解开胸口的纽扣、将胸部挤在一起朝%CALLNAME:MASTER%跪了下来
						DATAFORM %CALLNAME:TARGET%躺在床上、\@TEQUIP:下半身着衣状况 & 1?将%K17_GET_SKIRT(TARGET)%解开#\@%K17_RS("张开了双腿/两腿成M字形打开/举起一只脚、打开了双腿")%
					ENDDATA
					PRINTFORML 「我会负责的……随你喜欢的来吧」
					PRINTFORMDL 但她的声音听起来好像很开心的样子……
					
			ENDSELECT
			
			PRINTL
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 5
		;事后
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;处女丧失、恋慕未满、初回はここ入る
			IF (TALENT:TARGET:处女 == 0 && Virgin == 1) || K17_GRT(TARGET) < K17C_恋慕 || iRes == 0
				IF TALENT:TARGET:处女 == 0 && Virgin == 1
					;おきのどくですが处女が逝去的场合
					PRINTFORML 「…………这样……太过分了……抽泣……」
					PRINTFORML 「真的……明明还是第一次……抽泣……」
				ENDIF
				PRINTFORML 「明明之前……已经说过了……」
				PRINTFORML 「最差劲了……呜呜……抽泣……」
				PRINTFORML （什么……太……舒服……太好了……这样的、太差劲了……）
				PRINTW
				PRINTFORMDL 果然做得太过头了吧
				IF K17_GRT(TARGET) >= K17C_思慕
					PRINTFORML 「……下……下次要好好做、可以吧？」
					;天使か
				ELSE
					PRINTFORML 「赶紧出去……」
				ENDIF
				Virgin = 0
				
			;そのうちここで感想をプレイヤーに讯いてタイプチョイスの仕方を变えるか
			ELSEIF K17_GRT(TARGET) >= K17C_恋慕
				SELECTCASE iType
					CASE K17C_受け_强行系
						PRINTFORML 「哈啊哈啊……太厉害了……%K17_HEART()%」
						PRINTFORML 「但是这个……如果上瘾了该怎么办呐……」
						PRINTFORMDL 看来互相都太兴奋了……
						
					CASE K17C_受け_おねだり系
						PRINTFORML 「哈啊哈啊……啊……」
						PRINTFORML 「被侵犯了%K17_HEART()%」
						PRINTFORMDL 究竟什么是侵犯呢……
						
					CASE K17C_受け_合意袭い系
						PRINTFORML 「哈啊哈啊……认输了%K17_HEART()%」
						PRINTFORML 「也太兴奋过头了吧……mo……」
						PRINTFORMDL 话虽如此、却显得很高兴的样子……
						
					CASE K17C_受け_お手传い系
						PRINTFORML 「已经满足了……？你还真是随心所欲呐……」
						PRINTFORML 「但是总觉得有点可爱呢」
						PRINTFORMDL %CALLNAME:MASTER%抬头望着%CALLNAME:TARGET%、感觉她既妖艳又可爱
				ENDSELECT
			ENDIF
			
			;一回セットしてフラグ保存
			CALL K17_SET_AUTO_PVOICE(,,iType)
			;自主トレがばれて爱丽丝の自尊心 态度が下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_自尊心,-2)
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,-2)
			RETURN 1
		ENDIF
	ENDSELECT
ENDIF
RETURN 0


;==================================================
;相手から约会のお诱い
;==================================================
@M_KOJO_EVENT_K17_27(ARG,ARG:1)
;口上主はLOCAL
;ARG:1は目的地
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;诱い文句
		CASE 0
			IF CFLAG:K17C_ID:K17C_CF_约会イベント && CFLAG:K17C_ID:K17C_CF_告白イベント
				PRINTFORML 「呐、再一起去约会吧？」
			ELSEIF CFLAG:K17C_ID:K17C_CF_约会イベント
				PRINTFORML 「呐、如果不嫌弃的话、我们去约会吧？」
			ELSE
				PRINTFORML 「呐、那ー个……不偶尔一起去外面玩玩么？」
			ENDIF
			PRINTL
		;受けた
		CASE 1
			PRINTFORML 「那咱们赶紧走吧」
			PRINTW
		;断った
		CASE 2
			PRINTFORML 「啊啦、是不是还有什么事要做呢？那、下次见吧……」
			PRINTW
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;脱衣口上
;==================================================
@M_KOJO_EVENT_K17_28(ARG,ARG:1)
#DIM DYNAMIC iRand = 0
;口上主はTARGET
;ARGに脱がし方选择
;ARG:1（ARG=3の场合のみあり）地の文の反应
;--------------------------------------------------
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;时间停止
;通常处理
LOCAL = 1
;-------------
IF LOCAL && FLAG:时间停止
	RETURN 1
ENDIF
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;烂醉时
;通常处理
LOCAL = 1
;-------------
IF LOCAL && TCVAR:TARGET:烂醉
	PRINTFORML 「……唔ー……好热啊……脱掉吧……啊哈哈」
	PRINTFORML （啊咧……没问题么……那个……嘛、不管了）
	PRINTW
	RETURN 1
ENDIF
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;睡眠时时
;通常处理
LOCAL = 1
;-------------
IF LOCAL && CFLAG:睡眠
	PRINTFORML 「%K17_SHUFFLE_寝言(K17_RS("呀啊/唔/嗯唔/嗯唔一"))%」
	PRINTW
	RETURN 1
ENDIF
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;时间停止　烂醉以外
;通常处理　合意系
LOCAL = 1
;-------------
IF LOCAL && !(CFLAG:K17C_CF_喘ぎタイプ & K17C_喘ぎF_袭い)

	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;全裸にする
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示开始
			;------------------
			PRINTFORML 「全部……脱下来了……」
			
			;初回　0反应固定
			IF FIRSTTIME("脱衣-全裸")
				;性别判定
				IF TALENT:MASTER:性别 == 2
					PRINTFORML （要被男人……全部看见了……呀啊啊、好羞耻……）
				ELSE
					PRINTFORML （反正都是女人……就算被看见……也没什么……吧……？）
				ENDIF
				iRand = 1
			ENDIF
			
		ENDIF
		;-------------------------------------------------
		CASE 1
		;变成只穿内衣的样子
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示开始
			;------------------
			PRINTFORML 「衣服……都脱下来了……」
			
			;初回　0反应固定
			IF FIRSTTIME("脱衣-内衣姿")
				;性别判定
				IF TALENT:MASTER:性别 == 2
					;既に全裸见てるか见る
					SIF FIRSTTIME("脱衣-全裸",1)
						PRINTFORML （要被男人……全部看见了……呀啊啊、好羞耻…）
				ELSE
					PRINTFORML （反正都是女人……就算只穿着内衣被看见……也没什么……吧……？）
				ENDIF
				iRand = 1
			ENDIF
		ENDIF
		;-------------------------------------------------
		CASE 2
		;半脱
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示开始
			;------------------
			PRINTFORML 「那个……脱得只剩内衣……？　总感觉怪怪的」
			;初回　0反应固定
			IF FIRSTTIME("脱衣-半脱")
				;性别判定
				IF TALENT:MASTER:性别 == 2
					PRINTFORML （居然在男人面前……穿成这个样子……好害羞……）
				ELSE
					PRINTFORML （反正都是女人……就算只穿着内衣被看见……也没什么……吧……？）
				ENDIF
				iRand = 1
			ENDIF
		ENDIF
		;-------------------------------------------------
		CASE 3
		;胖次ちょうだい
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			PRINTFORMDL 看着老实脱下胖次的%CALLNAME:TARGET%、%CALLNAME:MASTER%提出了想要那条胖次的请求
			
			;胖次没收时に说明を受けているか见る
			IF FIRSTTIME("胖次没收",1) && FIRSTTIME("脱衣-胖次获得")
				PRINTFORML 「那个……为什么想要胖次呢？？」
				PRINTFORMDL 那是……因为……那ー个……
				PRINTFORMDL %CALLNAME:MASTER%将为什么想要胖次的理由一一向%CALLNAME:TARGET%说明了
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW ………………
				PRINTFORML 「诶、诶……？还真是奇怪的爱好？」
				PRINTW
			ELSE
				PRINTFORML 「那个……果然……还是……想要么……」
				PRINTFORML （就……就这样……用我的胖次去做各种各样的%K17_RS("妄想/想像")%么）
				PRINTW
			ENDIF
			SELECTCASE ARG:1
				;-------------------------------------------------
				CASE 0
				;交换です
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTFORMDL 为什么%CALLNAME:TARGET%也想要胖次呢……
					PRINTFORML 「是为……为了制作人偶的研究」
					PRINTFORMDL 哦哦、原来如此。　是"研究材料"啊
					;自慰暴露をしっかり见られたことがあるか见る
					IF FIRSTTIME("自慰暴露",1)
						PRINTFORMDL 目的被看穿了、%CALLNAME:TARGET%蹭地变得通红低下了头
					ELSE
						PRINTFORMDL %CALLNAME:TARGET%拿着%CALLNAME:MASTER%的胖次、满脸通红的认真凝视着
					ENDIF
					PRINTFORML （非常抱歉、我撒谎了。这个是……%K17_RS("自慰时/一个人H时/妄想一个人H时")%%K17_RS("……为了更容易/……拿来用的/的材料")%……）
				ENDIF
				;-------------------------------------------------
				CASE 1
				;OK（嬉々
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「所以……你到底想干什么……%K17_RS("H/色狼/变态")%……%K17_BLUSH()%」
						DATAFORM 「倒也没什么关系……但是本尊不就在这里么……呐？%K17_HEART()%」
						DATAFORM 「呐、就不要管什么胖次了……%K17_RS("我也想要了呢/我也想被疼爱了呢")%、呐？%K17_HEART()%」
					ENDDATA
				ENDIF
				;-------------------------------------------------
				CASE 2
				;OK（渋々
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「不要用去做奇怪的事……%K17_RS("哦/知道了么/所以")%……」
						DATAFORM 「嘛、算了……啊～～！！　在闻什么味道呢!%K17_RS("快停下/不要啊/讨厌")%,mo」
						DATAFORM 「不要为了这种东西、这么%K17_RS("拼命呀/屏幕啊")%、太羞耻了……」
					ENDDATA
				ENDIF
				;-------------------------------------------------
				CASE 3
				;嫌です
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「%K17_RS("讨厌/mo/不行！")%……比起那个%K17_RS("不如来好好关爱一下我/好好疼爱一下我/不如来向我渴求")%……%K17_BLUSH()%」
						DATAFORM 「而且还要没洗过什么的……这实在是%K17_RS("做不到/不行/……")%」
					ENDDATA
				ENDIF
			ENDSELECT
			PRINTW
			RETURN 1
		ENDIF
	ENDSELECT
	
	;局部见せ描写
	IF ARG != 3 
		;露出判定　害羞は持っておこう
		;露出癖见る
		IF iRand == 0
			iRand = K17_LOWER_LIMIT_RAND(ABL:露出癖,1,5)
		ELSE
			;初回
			iRand = 0
		ENDIF
		SELECTCASE iRand
			CASE IS >= 5
				PRINTFORMDL 在看着%CALLNAME:TARGET%欧派上突出的%NIPPLE_DESCRIPTION(TARGET,1)%的同时、轻轻地将双腿打开欣赏春色
				PRINTFORML 「在这之后要做什么呢……呐%K17_HEART()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%将双腿打开、把自己展示在%CALLNAME:MASTER%面前
				PRINTFORML （被用那种%K17_RS("夸张的/H的/像野兽一样")%眼神盯着的话……%K17_RS("要兴奋起来了/要湿了/要发情了/要被诱惑了")%……）
				PRINTFORMDL 然后一脸出神的向%CALLNAME:MASTER%靠近、十分挑逗的样子
				PRINTFORMDL %CALLNAME:TARGET%是兴奋起来了么、呼吸很急促
				
			CASE IS >= 3
				PRINTFORMDL %CALLNAME:TARGET%的%NIPPLE_DESCRIPTION(TARGET,1)%虽然没有遮住、但脚却有些羞涩地合上了。
				PRINTFORML 「mo,%K17_RS("都想吃掉了一样/这么充满兽欲的盯着/眼睛都闪闪发光了")%、%K17_RS("H/色狼/变态")%%K17_HEART()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%微微地叹了一口气、慢慢地张开双脚在%CALLNAME:MASTER%面前展示了出来
				PRINTFORML （%K17_RS("在用H的眼神看着我么/兴奋起来了么/好像积攒了很久呢")%……感觉有点开心起来了……）
				PRINTFORMDL 就像是在故意煽动这边一般、做出了各种若隐若现的诱人的姿势
				PRINTFORMDL %CALLNAME:TARGET%是兴奋起来了么、呼吸很急促
				
			CASE IS >= 1
				;胸が见えているか见る
				IF ARG != 1
					PRINTFORMDL %CALLNAME:TARGET%害羞地闭上双腿、用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%、但%NIPPLE_DESCRIPTION(TARGET,1)%却隐约可见
				ELSE
					IF TALENT:胸围 >= 0
						PRINTFORMDL %CALLNAME:TARGET%害羞地闭上双腿、用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%、但%K17_GET_CLOTHNAME_TOP_UNDER(TARGET)%形成的山谷清晰地浮现了出来
					ELSE
						PRINTFORMDL %CALLNAME:TARGET%害羞地闭上双腿、用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%、但通过%K17_GET_CLOTHNAME_TOP_UNDER(TARGET)%的间隙、%NIPPLE_DESCRIPTION(TARGET,1)%隐约可见
					ENDIF
				ENDIF
				PRINTFORML 「%K17_RS("看、看得/窥、窥视得也/这么盯、盯着也")%太过头了……%K17_BLUSH()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%背过脸紧闭双眼、害羞地颤抖着打开了双腿
				PRINTFORML （啊……现在%K17_RS("被盯着了/被看到了")%……吧？……%K17_RS("心脏跳个不停/兴奋起来了/变得想要H了")%）
				PRINTFORMDL %CALLNAME:TARGET%是过于紧张了么、都喘不过气来了
			CASEELSE
				PRINTFORMDL %CALLNAME:TARGET%害羞地闭上双腿、用手遮住了%OPPAI_DESCRIPTION(TARGET,1)%
				PRINTFORML 「果然、那个、好害羞……%K17_BLUSH()%」
				PRINTW
				PRINTFORMDL %CALLNAME:MASTER%抓住了不知所措的%CALLNAME:TARGET%的双脚、就这样打开了
				PRINTFORML （我的%K17_CALL_P(K17C_部位V)%……被看见了……%K17_CNAME()%、%K17_RS("被用不得了的眼神/被用H的眼神/被用兴奋的眼神")%……盯着……）
				PRINTFORMDL %CALLNAME:TARGET%可能是太紧张了、身体抖得很厉害、呼吸也急促了起来
		ENDSELECT
	ENDIF
	PRINTW
	RETURN 1
ENDIF


;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;时间停止　烂醉以外
;通常处理　袭い系or强行フラグ
LOCAL = 1
;-------------
IF LOCAL && CFLAG:K17C_CF_喘ぎタイプ & K17C_喘ぎF_袭い
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0,1,2
		;全裸にする
		;变成只穿内衣的样子
		;半脱がし
		;-------------------------------------------------
		PRINTFORMDL %CALLNAME:MASTER%捉住了%K17_RS("一脸嫌恶的/挣扎的/想要逃跑的")%%CALLNAME:TARGET%、%K17_RS("强行/强硬的/粗鲁的")%将衣服%K17_RS("脱了下来/剥了下来/扯了下来")%
		PRINTFORML 「%K17_RS("……/库,")%强行将女孩子\@TEQUIP:拘束||TEQUIP:绳?束缚起来#绑起来\@脱掉……%K17_RS("真差劲/变态/色狼")%！%K17_AP_DEC(1)%」
		;-------------------------------------------------
		CASE 3
		;胖次ちょうだい
		;-------------------------------------------------
		SELECTCASE ARG:1
			;-------------------------------------------------
			CASE 0
			;交换
			;-------------------------------------------------
			PRINTFORML 「不、不要啊……%K17_RS("差劲/变态/色狼")%！%K17_AP_DEC(1)%」
			;-------------------------------------------------
			CASE 1,2
			;OK（嬉々
			;OK (渋々
			;-------------------------------------------------
			PRINTFORML 「%K17_RS("随你的便吧/随便你吧")%、%K17_RS("差劲/变态/色狼")%！%K17_AP_DEC(1)%」
			;-------------------------------------------------
			CASE 3
			;拒否
			;-------------------------------------------------
			PRINTFORML 「不行……%K17_RS("差劲/变态/色狼")%！%K17_AP_DEC(1)%」
		ENDSELECT
	ENDSELECT
	PRINTW
ENDIF
RETURN 1

;==================================================
;愤怒口上
;==================================================
@M_KOJO_EVENT_K17_29(ARG,ARG:1)
;口上主はTARGET
;ARGはTARGETの胆量で分岐
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止 && !CFLAG:TARGET:睡眠
	PRINTL
	
	;-------------------------------------------------
	;诶嘿嘿中
	;-------------------------------------------------
	;强行フラグ见る
	IF CFLAG:TARGET:诶嘿嘿
		CALL K17_强行中出し(TARGET)
		IF RESULT
			PRINTW
			RETURN 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;怒らせてしまった
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		SELECTCASE K17_GRT()
			CASE IS >= K17C_思慕
				PRINTFORML 「……唔嗯、%K17_RS("是不是稍微有些得意忘形了呢/是不是稍微有些做过头了呢")%、互相都冷静一阵子吧」
				PRINTFORM 「就算是我%K17_RS("也会很生气呢/也很生气呢")%」
				TRYCALL K17_人形台词(-1,1,K17_RS("才ー不是笨蛋/生气了哦ー/噗哼噗哼"))
			CASEELSE
				PRINTFORM 「……mo,你有些得意忘形了」
				TRYCALL K17_人形台词(-1,1,K17_RS("才ー不是笨蛋/生气了哦ー/噗哼噗哼"))
		ENDSELECT
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;泣かせてしまった
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「%K17_SPLIT_SHUFFLE(@"%K17_RS("呜呜/噫唔/诶唔/呜唔/抽泣","/",2)%/……/……/%RESULTS:1%")%」
		TRYCALL K17_人形台词(-1,1,K17_RS("爱丽丝/不要哭啦/眼泪　飞走/乖哦乖哦")+"……")
		PRINTW
		RETURN 1
	ENDIF
ENDIF
RETURN 1


