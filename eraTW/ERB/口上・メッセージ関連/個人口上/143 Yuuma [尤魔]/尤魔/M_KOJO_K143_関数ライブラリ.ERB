;
;### 函数 ###################################
;以下の函数は「映姫样口上」内の「M_KOJO_K30_函数・お说教ライブラリ」を拝借したものです
;尤魔口上作者が作成したものではないのでご注意ください
;同ライブラリの利用に关しては、映姫样口上の作者样のライセンスに准じます

;拝借ここから
;==================================================

;==================================================

;==================================================
;MASTERの恋人がその场に居るかどうか返す式中函数
;これは力技でなんとか实装できたっぽいので、使わなくても问题ない气がする（小町口上作者）
;でも绝对こっちのがスマート
;=-1 尤魔が恋人 =0 元から恋人无 =1 その场に居ない =2 恋人と同席
@K143_FIND_LOVER()
#FUNCTION
SIF TALENT:MASTER:恋人 == 0
	RETURNF 0
SIF TALENT:恋人
	RETURNF -1
LOCAL = TALENT:MASTER:恋人
SIF CFLAG:LOCAL:当前位置 == CFLAG:MASTER:当前位置
	RETURNF 2
RETURNF 1
;==================================================


;==================================================
;同房间の角色を拾う式中函数。寻找顺位は[恋人]持ち→知り合い→TARGET内随机
;爱丽丝口上の函数お借りして平文化した映姫口上の函数を拝借しました。つまり丸パクり
;丸コピする以外の技术がないので先人たちの知惠に感谢をし继续しかない
@K143_FIND_AROUND()
#FUNCTION
#DIM 知り合い, 5 = 50, 124, 130, 132, 133
#DIM 总人数
#DIM 抽选
#LOCALSIZE 200

VARSET LOCAL
抽选 = 0
总人数 = GET_TARGETNUM() 
;房间に一人なら当然0
SIF 总人数 == 1
	RETURNF 0
;[恋人]持ちがいたら优先してIDを返す
SIF K143_FIND_LOVER() == 2
	RETURNF TALENT:MASTER:恋人
;知り合い优先度顺に当前位置を调べMASTERと同じならIDを返す
FOR COUNT, 0, 5
	SIF CFLAG:(知り合い:COUNT):当前位置 == CFLAG:MASTER:当前位置
		RETURNF 知り合い:COUNT
NEXT
;知り合いがいなければ同室のTARGET_ID全部を拾う
FOR COUNT,1, 总人数 + 1
	;地狱の断头台withジェロニモ状态を防ぐため口上主はスキップ
	SIF TARGET:COUNT == TARGET:0
		CONTINUE
	;MASTERと尤魔の当前位置にいなければスキップ
	SIF (CFLAG:(TARGET:COUNT):当前位置 != CFLAG:MASTER:当前位置) || (CFLAG:(TARGET:COUNT):当前位置 != CFLAG:42:当前位置)
		CONTINUE
	;配列のカウントは别で取りながら代入
	LOCAL:抽选 = TARGET:COUNT
	抽选 ++
NEXT

SIF 抽选 < 1
	RETURNF 0
;抽选してIDを决定
RETURNF LOCAL:(RAND(抽选))


;==================================================
;料理に对する反应（吃饭、振舞う）
;==================================================
@K143_COOKING_REACTION
	;OBJ/CLASS/キャラデータに料理嗜好
	;料理そのものに对する反应
	
	;轻食
	SELECTCASE DISHNAME
	CASE "饭团"
		PRINTW 
	CASE "寿司卷"
		PRINTW 
	CASE "河童卷"
		PRINTW 
	CASE "法式吐司"
		PRINTW 
	CASE "司康饼"
		PRINTW 
	CASE "三明治"
		PRINTW 
	CASE "汉堡"
		PRINTW 
	CASE "热狗"
		PRINTW 
	CASE "煎蛋吐司"
		PRINTW 
	CASE "玉米片"
		PRINTW 
	CASE "卡路里棒"
		PRINTW 
	CASE "爆米花"
		PRINTW 
	CASE "沙拉"
		PRINTW 
	CASE "野菜沙拉"
		PRINTW 
	CASE "凉拌菜"
		PRINTW 
	CASE "酱菜"
		PRINTW 
	CASE "米粉"
		PRINTW 
	CASE "墨西哥卷饼"
		PRINTW 
	CASE "奶酪番茄沙拉"
		PRINTW 
	CASE "煎蛋卷"
		PRINTW 
	CASE "煮鸡蛋"
		PRINTW 
	CASE "土豆炖肉"
		PRINTW 
	CASE "茶碗蒸"
		PRINTW 
	CASE "菜肉卷"
		PRINTW 
	CASE "肉菜汤"
		PRINTW 
	CASE "泡菜"
		PRINTW 
	CASE "酱烧蝗虫"
		PRINTW 
	CASE "蜂蛹"
		PRINTW 
	CASE "鱼干"
		PRINTW 
	CASE "煮毛豆"
		PRINTW 
	CASE "唐扬鸡"
		PRINTW 
	CASE "炸鸡"
		PRINTW 
	CASE "法兰克福香肠"
		PRINTW 
	CASE "竜田扬"
		PRINTW 
	CASE "炸青蛙"
		PRINTW 
	CASE "章鱼烧"
		PRINTW 
	CASE "可乐饼"
		PRINTW 
	CASE "肉包"
		PRINTW 
	CASE "饺子"
		PRINTW 
	CASE "烧麦"
		PRINTW 
	;鱼料理
	CASE "炸鱼"
		PRINTW 
	CASE "盐烤鱼"
		PRINTW 
	CASE "照烧鱼"
		PRINTW 
	CASE "煮鱼"
		PRINTW 
	CASE "蒲烧鱼"
		PRINTW 
	CASE "法式煎鱼柳"
		PRINTW 
	CASE "醋渍鱼"
		PRINTW 
	CASE "天妇罗"
		PRINTW 
	CASE "盐烤青蛙"
		PRINTW 
	CASE "炒青蛙"
		PRINTW 
	;芋料理
	CASE "烤红薯"
		PRINTW 
	CASE "炸薯条"
		PRINTW 
	CASE "黄油土豆"
		PRINTW 
	CASE "炸鱼＆薯条"
		PRINTW 
	CASE "味噌汤"
		PRINTW 
	CASE "汁粉"
		PRINTW 
	CASE "猪肉蔬菜味噌汤"
		PRINTW 
	CASE "玉米汤"
		PRINTW 
	CASE "杯面"
		PRINTW 
	CASE "竹轮"
		PRINTW 
	CASE "纳豆"
		PRINTW 
	CASE "豆腐"
		PRINTW 
	CASE "梅干"
		PRINTW 
	CASE "凉粉"
		PRINTW 
	CASE "煎饼"
		PRINTW 
	;主食
	CASE "盛的满满的饭"
		PRINTW 
	CASE "鸡蛋拌饭"
		PRINTW 
	CASE "茶泡饭"
		PRINTW 
	CASE "竹笋饭"
		PRINTW 	
	CASE "渍け物に大碗饭"
		PRINTW 	
	CASE "红豆饭"
		PRINTW 	
	CASE "杂烩粥"
		PRINTW 
	CASE "猪排饭"
		PRINTW 
	CASE "牛肉饭"
		PRINTW 
	CASE "亲子盖饭"
		PRINTW 
	CASE "天妇罗饭"
		PRINTW 
	CASE "海鲜饭"
		PRINTW 
	CASE "寿司"
		PRINTW 
	CASE "鳗鱼饭"
		PRINTW 
	CASE "蛋包饭"
		PRINTW 
	CASE "炒饭"
		PRINTW 
	CASE "咖喱饭"
		PRINTW 
	CASE "芝士焗饭"
		PRINTW 
	CASE "咖喱鱼"
		PRINTW 
	CASE "青蛙咖喱"
		PRINTW 	
	CASE "鱼糜寿司"
		PRINTW 
	CASE "荞麦面"
		PRINTW
	CASE "乌冬面"
		PRINTW 
	CASE "素面"
		PRINTW 
	CASE "拉面"
		PRINTW 
	CASE "担担面"
		PRINTW 
	CASE "意大利面"
		PRINTW 
	CASE "炒面"
		PRINTW 
	CASE "中华冷面"
		PRINTW 
	CASE "鸡肉汆锅"
		PRINTW
	CASE "寿喜烧"
		PRINTW 
	CASE "关东煮"
		PRINTW 
	CASE "泡菜锅"
		PRINTW 
	CASE "涮涮锅"

	CASE "芝士火锅"
		PRINTW 
	CASE "炖菜"
		PRINTW 
	CASE "罗宋汤"
		PRINTW 
	CASE "面包碗炖菜"
		PRINTW 
	CASE "芝士焗菜"
		PRINTW 
	CASE "披萨"
		PRINTW 
	CASE "御好烧"
		PRINTW 
	CASE "麻婆茄子"
		PRINTW 
	CASE "油淋鸡"
		PRINTW 
	CASE "中华溜菜"
		PRINTW 
	CASE "炒蔬菜"
		PRINTW 
	CASE "姜汁烧肉"

	CASE "牛扒"
		PRINTW 
	CASE "汉堡肉"
		PRINTW 
	CASE "儿童午餐"
		PRINTW 
	CASE "刺身"
		PRINTW 
	CASE "法式咸派"
		PRINTW 
	CASE "仰望星空派"
		PRINTW 
	CASE "鸸鹋肉";鸡が入ってるのでトータルで减少补正。尤魔ちゃんは虫肉はイケるのだ
		PRINTW 
	CASE "兴奋剂高汤"
		PRINTW 
	CASE "银吉兽料理"
		PRINTW 
	
	;料理：喜欢的味道　
	;料理：讨厌的味道　
	;料理：助手效果　
	;大好き…
	;普通に好き…
	;大嫌い…
	
	;季节の料理
	CASE "年节菜"
		PRINTW 
	CASE "七草汤"
		PRINTW 
	CASE "江户卷"
		PRINTW 
	CASE "跨年荞麦面"
		PRINTW 
	CASE "烤鸡"
	;甜点
	CASE "草莓蛋糕"
		PRINTW 
	CASE "巧克力蛋糕"
		PRINTW 
	CASE "薄烤饼"
		PRINTW 
	CASE "派"
		PRINTW 
	CASE "水果挞"
		PRINTW 
	CASE "马卡龙"
		PRINTW 
	CASE "可丽饼"
		PRINTW 
	CASE "奶油泡芙"
		PRINTW 
	CASE "芭菲"
		PRINTW 
	CASE "布丁"
		PRINTW 
	CASE "果冻"
		PRINTW 
	CASE "青蛙布丁"
		PRINTW 
	CASE "酸奶"
		PRINTW 
	CASE "冰淇淋"
		PRINTW 
	CASE "曲奇"
		PRINTW 
	CASE "甜甜圈"
		PRINTW 
	CASE "苹果糖"
		PRINTW 
	CASE "馅蜜"
		PRINTW 
	CASE "蜂蜜蛋糕"
		PRINTW 
	CASE "团子"
		PRINTW 
	CASE "羊羹"
		PRINTW 
	CASE "大福"
		PRINTW 
	CASE "红豆面包"
		PRINTW 
	CASE "栗金团"
		PRINTW 
	CASE "杏仁豆腐"
		PRINTW 
	CASE "水果拼盘"
		PRINTW 
	CASE "珍珠奶茶"
		PRINTW 
	CASE "草莓豆腐"
		PRINTW 
	;季节の甜点
	CASE "赏月团子"
		PRINTW 
	CASE "万圣节蛋糕"
		PRINTW 
	CASE "圣诞蛋糕"
		PRINTW 
	;禁断の料理
	CASE "油炸跳蛋"
		PRINTW 
	CASE "高汤飞机杯用跳蛋"
		PRINTW 
	CASE "夹子用跳蛋握寿司"
		PRINTW 
	CASE "炖煮飞机杯用跳蛋"
		PRINTW 
	CASE "振动棒跳蛋冰淇淋"
		PRINTW 
	;ここから固有料理
	;果
	CASE "公主甜点"
		PRINTW 
	;灵梦
	CASE "红白馒头"
		PRINTW 
	;桑尼米尔克
	CASE "单面煎蛋"
		PRINTW 
	;露娜切露德
	CASE "宁静海之汤"
		PRINTW 
	;斯塔萨菲雅
	CASE "京丸牡丹锅"
		PRINTW 
	;千百合
	CASE "水兵咖喱"
		PRINTW 
	;梦美
	CASE "特制草莓蛋糕"
		PRINTW 
	;萃香
	CASE "ウイスキー入り巧克力"
		PRINTW 
	;魔理沙
	CASE "魔法炒蘑菇"
		PRINTW 
	;露米亚
	CASE "暗之甜甜圈"
		PRINTW 
	;琪露诺
	CASE "刨冰"
		PRINTW 
	;咲夜
	CASE "红魔馆午餐"
		PRINTW 
	;蕾米莉亚
	CASE "鲜红的血汤"
		PRINTW 
	;爱丽丝
	CASE "姜饼人"
		PRINTW 
	;莉莉白
	CASE "春天的赏花便当"
		PRINTW 
	;莉莉黑
	CASE "春天的镇魂料理"
		PRINTW 
	;妖梦
	CASE "蜜豆白玉"
		PRINTW 
	;橙
	CASE "猫饭"
		PRINTW 
	;蓝
	CASE "稻荷寿司"
		PRINTW 
	;紫
	CASE "海龟汤"
		PRINTW 
	;莉格露
	CASE "蜂王浆"
		PRINTW 
	;米斯蒂亚
	CASE "蒲烧八目鳗"
		PRINTW 
	;文
	CASE "ミックスナッツ"
		PRINTW 
	;映姫
	CASE "地狱拉面（极辣）"
		PRINTW 
	;早苗
	CASE "释迦年糕"
		PRINTW 
	;神奈子
	CASE "御柱棒"
		PRINTW 
	;诹访子
	CASE "馒饼"
		PRINTW 
	;天子
	CASE "天界水果芭菲"
		PRINTW 
	;衣玖
	CASE "わたパチ"
		PRINTW 
	;阿燐
	CASE "僵尸烧"
		PRINTW 
	;阿空
	CASE "核热烤牛排"
		PRINTW 
	;恋
	CASE "りんごの薔薇果冻"
		PRINTW 
	;纳兹琳
	CASE "芝士蛋糕"
		PRINTW 
	;鵺
	CASE "未确认飞行料理"
		PRINTW 
	;里香
	CASE "灵魂蛋糕"
		PRINTW 
	;觉
	CASE "从心底萌发的幻想"
		PRINTW 
	;芙兰朵露
	CASE "蔓越莓陷阱"
		PRINTW 
	;荷取
	CASE "小黄瓜"
		PRINTW 
	;帝
	CASE "红白なます"
		PRINTW 
	;铃仙
	CASE "狂气之赤红煎鸡蛋"
		PRINTW 
	;帕秋莉
	CASE "魔卡杯蛋糕"
		PRINTW 
	;白莲
	CASE "素斋"
		PRINTW 
	;心
	CASE "蜜意人形烧"
		PRINTW 
	;美铃
	CASE "彩色小笼包"
		PRINTW 
	;小恶魔
	CASE "恶魔饭团"
		PRINTW 
	;帕露西
	CASE "烤年糕"
		PRINTW 
	;妹红
	CASE "日式鸡肉串"
		PRINTW 
	;辉夜
	CASE "蓬莱冰棒玉枝"
		PRINTW 
	;影狼
	CASE "野味菜"
		PRINTW 
	;椛
	CASE "枫叶馒头"
		PRINTW 
	;幽幽子
	CASE "樱饼"
		PRINTW 
	;慧音
	CASE "满月乌冬面"
		PRINTW 
	;幽香
	CASE "向日葵华夫饼"
		PRINTW 
	;永琳
	CASE "超营养饮料"
		PRINTW 
	;蛮奇
	CASE "飞头馒头"
		PRINTW 
	;蕾蒂
	CASE "雪人冰淇淋"
		PRINTW 
	;梅蒂欣
	CASE "铃兰团子"
		PRINTW 
	;小町
	CASE "人魂棉花糖"
		PRINTW 
	;静叶
	CASE "红叶天妇罗"
		PRINTW 
	;穣子
	CASE "日式焗红薯"
		PRINTW 
	;雏
	CASE "雏霰"
		PRINTW 
	;阿求
	CASE "求闻杂烩粥"
		PRINTW 
	;莲子
	CASE "营养效率辅助食品"
		PRINTW 
	;一轮
	CASE "入道棉花糖"
		PRINTW 
	;村纱
	CASE "深海料理"
		PRINTW 
	;星
	CASE "饿虎牛排"
		PRINTW 
	;若鹭姫
	CASE "人鱼芭菲"
		PRINTW 
	;弁弁
	CASE "枇杷果冻"
		PRINTW 
	;八桥
	CASE "京八桥"
		PRINTW 
	;正邪
	CASE "逆汉堡"
		PRINTW 
	;雪
	CASE "火锅・Esoteria"
		PRINTW 
	;​舞​
	CASE "维纳・咖啡"
		PRINTW 
	;清兰
	CASE "草莓团子"
		PRINTW 
	;铃瑚
	CASE "铃瑚印的团子"
		PRINTW 
	;哆来咪
	CASE "谜之梦魂果子"
		PRINTW 
	;克劳恩皮丝
	CASE "阿比斯汉堡"
		PRINTW 
	;纯狐
	CASE "月饼"
		PRINTW 
	;赫卡提亚
	CASE "三色地狱肉松盖饭"
		PRINTW 
	;爱塔妮缇拉尔瓦
	CASE "花蜜果冻"
		PRINTW 
	;合欢乃
	CASE "山之乡土料理"
		PRINTW 
	;阿吽
	CASE "犬饭"
		PRINTW 
	;成美
	CASE "地藏烧"
		PRINTW 
	;舞
	CASE "七夕奶油汤面"
		PRINTW 
	;里乃
	CASE "醋腌忘情茗荷"
		PRINTW 
	;隐岐奈
	CASE "秘神火腿"
		PRINTW 
	;女苑
	CASE "日式意餐"
		PRINTW 
	;紫苑
	CASE "炒豆芽"
		PRINTW 
	;璎花
	CASE "巴别塔薄饼"
		PRINTW 
	;润美
	CASE "活造刺身"
		PRINTW 
	;久侘歌
	CASE "雏鸟馒头"
		PRINTW 
	;八千慧
	CASE "鱼翅汤"
		PRINTW 
	;磨弓
	CASE "哈尼肉包子"
		PRINTW 
	;袿姫
	CASE "偶像制作的工艺点心"
		PRINTW 
	;早鬼
	CASE "鬼形圆松饼"
		PRINTW 
	;美宵
	CASE "鲵吞亭秘传炖菜"
		PRINTW 
	;高岭
	CASE "绿色沙拉"
		PRINTW 
	;魅须丸
	CASE "勾玉曲奇"
		PRINTW 
	;典
	CASE "狐狸米饭"
		PRINTW 
	;千亦
	CASE "彩虹小馅饼"
		PRINTW 
	;百百世
	CASE "龙脊牛排"
		PRINTW 
	;尤魔
	CASE "刚欲兽神的晚餐"
		PRINTW 
	ENDSELECT
	
	;味付けに对する反应
	SELECTCASE TCVAR:MASTER:308
	;浓い
	CASE 0

	;薄味
	CASE 1
		PRINTW 
	;超辣
	CASE 3
		PRINTW 
	;超甜
	CASE 4
		PRINTW 
	;芥末
	CASE 5
		PRINTW 
	;激酸っぱ
	CASE 6
		PRINTW 
	ENDSELECT
	
	;最终的な味の评价
	PRINTL 
	PRINTFORML 那么、尤魔的评估是…
	PRINTL 
	SELECTCASE TCVAR:[[尤魔]]:料理评价值
	;高评价
	CASE IS >= 700
	CASE IS >= 400
	CASEELSE
	ENDSELECT
RETURN 1

