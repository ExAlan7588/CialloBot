;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;工作中
;==================================================
@M_KOJO_NK_EVENT_K38_13(ARG,ARG:1)
;口上主はTARGET
;ARG:1に残っている工作量
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
[SKIPSTART]
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;仕事开始（职场へ移动する）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;业务中
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;仕事结束
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
[SKIPEND]
RETURN 1
;==================================================
;食事系
;==================================================
@M_KOJO_NK_EVENT_K38_14(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;持っていた食物を食べられた
	;TCVAR:盗み食い抑制で持っていた食物を食われるのを回避できる
	;仕样例（药が入ってたら食わない）
	;IF DISH_DRG
	;	TCVAR:盗み食い抑制 = 1
	;ENDIF

	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1

		RETURN 1
	ENDIF
	;その他
	IF 关系_514()>0
		PRINTFORML 「有料理的香味！」
		PRINTFORML 「%CALLNAME:MASTER%～不会介意分人家一些吧？」
		PRINTFORMDW   看着恋扯着衣角撒娇的样子，无可奈何地交出了%DISHNAME%。
		PRINTFORML 「哇咿——是%DISHNAME%！好开心——」
		PRINTFORML 「我开动了！」
		PRINTFORMDW   看着少女享用料理的笑颜，这样或许也不坏嘛…
	ENDIF
ENDIF
RETURN 1
;==================================================
;愤怒口上
;==================================================
@M_KOJO_NK_EVENT_K38_29(ARG,ARG:1)
;口上主はTARGET
;ARGはTARGETの度胸で分岐
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;怒らせてしまった
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「呜——%CALLNAME:MASTER%是大坏蛋！」
		PRINTFORMDL   看来做得有些太过分了。
		PRINTFORMDW   恋气鼓鼓地瞪着%CALLNAME:MASTER%。
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;泣かせてしまった　[臆病]持ち
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;赠り物イベント
;==================================================
@M_KOJO_NK_EVENT_K38_GIFT(ARG, GIFT_ID, 评价点, GIFT_NAME, SENSE)
#DIM GIFT_ID
#DIM 评价点
#DIMS GIFT_NAME
#DIMS NAME_MAIN
#DIMS SENSE
;---------------------------------------------------------------------------------------------------
;评价点       赠り物の评价点（1～999）,口上主があげた场合でも口上主の评价点
;GIFT_NAME    赠り物の名称
;SENSE        赠り物に设定された属性。STRCOUNT(DISH_TASTE, "ほげほげ/")を使うと特定の属性を判定できます。
;GIFT_ID      これ单体では使いません。以下の式内函数を使うとデータを抽出できます（こだわりたい人用）
;　GET_GIFTDATA(GIFT_ID, "回数")    贳った（あげた）回数
;　GET_GIFTDATA(GIFT_ID, "得点")    得点（1～999）,口上テンプレ内では用意されてます。
;　GET_GIFTDATA(GIFT_ID, "日期")    贳った（あげた）日期（1～9999）
;　GET_GIFTDATA(GIFT_ID, "场所")    买った场所（デートの行き先）
;　GET_GIFTDATA(GIFT_ID, "形容词")  形容词番号（赠り物_形容词.erb参照）
;　GET_GIFTDATA(GIFT_ID, "本体")    本体番号（赠り物_本体.erb参照）
;--------------------------------------------------------------------------------------------------
;デート归りに口上主があなたに赠り物を渡す（陷落や好感度に关わらず亲密5以上から发生）
;评价点は701～999（渡すキャラ本人の评价）
;--------------------------------------------------------------------------------------------------
IF ARG == 1
	PRINTFORMW 「来，这个%GIFT_NAME%可是人家为%CALLNAME:MASTER%精心挑选的呢！」
	PRINTFORMW 「可要好好保管哦」
	RETURN 1
;--------------------------------------------------------------------------------------------------
;一日の终わりに今日获得的礼物を大事にする（700点以上）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 2
	;IF STRCOUNT(NAME_MAIN, "小刀/")
	;	PRINTFORMW 「收藏的小刀数量增加了！」
	;ELSE
	IF 评价点 >= 800
		PRINTFORMW 「%GIFT_NAME%…%CALLNAME:MASTER%果然知道人家喜欢什么呢」
	ELSE
		PRINTFORMW 「呼呣呼呣，存放在哪里好呢…」
	ENDIF
	RETURN 1
;--------------------------------------------------------------------------------------------------
;一日の终わりに今日获得的礼物をお气に入りにする（↑の大事にするから续き）（700点以上かつ最高得点）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 3
	;IF STRCOUNT(SENSE, "身につける/")
	;	PRINTFORML 「明日からこれを付けて行こうっと」
	;ELSE
	;	PRINTFORML 「明日からこれを持って行こうっと」
	;ENDIF
	RETURN 1
;--------------------------------------------------------------------------------------------------
;一日の终わりに今日获得的礼物をとりあえず保管する（400～699点）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 4
	;PRINTFORML 「とりあえず饰っておこう」
	RETURN 1
;--------------------------------------------------------------------------------------------------
;一日の终わりに今日获得的礼物をこっそり质に入れる（400点未满）
;--------------------------------------------------------------------------------------------------
ELSEIF ARG == 5
	PRINTFORMW 「哎呀这个嘛，还是处理掉好了」
	RETURN 1
ENDIF
RETURN 1
;==================================================
;ムシバトル
;ムシバトルの口上は少し特殊で、PRINTを使うのではなく、
;台词一行のみをRESULTSに入れてください
;ムシの名前は %MUSHI_NAME% で表示できます
;ムシの名前の最长はアレキサンドラトリバネアゲハの全角14文字です
;文字数制限があります。はみ出ないように气をつけてください
;ARGは残りムシ数か顺位です
;==================================================
@M_KOJO_NK_MESSAGE_COM_K38_MUSHI_BATTLE(ARGS, ARG)
#DIM 残りムシ数
#DIM 顺位
SELECTCASE ARGS
CASE "试合前"
	;-------------------------------------------------
	;キャラセレクト时,ARGは使えません
	;全角50文字くらいまで
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「ぶっとばしてさしあげますわ！」
	ENDIF
CASE "战场に出した"
	;-------------------------------------------------
	;"【（キャラ）】は《（ムシ）》を战场に出した！」"の直后
	;全角40文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	残りムシ数 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「%MUSHI_NAME%！キミにきめた！」
	ENDIF
CASE "攻击时"
	;-------------------------------------------------
	;"【（キャラ）】《（ムシ）》の『（攻击名）』！」"の直前
	;全角40文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	残りムシ数 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「ぶっとばせ！%MUSHI_NAME%！」
	ENDIF
CASE "倒れた时"
	;-------------------------------------------------
	;"【（キャラ）】《（ムシ）》は倒れた！！"の直后
	;全角40文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	残りムシ数 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「ああっ！私の%MUSHI_NAME%がっ！」
	ENDIF
CASE "败退时"
	;-------------------------------------------------
	;"【（キャラ）】败退！！"の直后
	;全角40文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	残りムシ数 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「私のムシが全灭めつめつ……」
	ENDIF
CASE "タイマン：胜ち"
	;-------------------------------------------------
	;顺位は1位
	;全角20文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	顺位 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「%CALLNAME:MASTER%よわーい！」
	ENDIF
CASE "タイマン：负け"
	;-------------------------------------------------
	;顺位は2位
	;全角20文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	顺位 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「%CALLNAME:MASTER%つよーい！」
	ENDIF
CASE "バトルロイヤル：优胜"
	;-------------------------------------------------
	;顺位は1位
	;全角30文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	顺位 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「やったー！」
	ENDIF
CASE "バトルロイヤル：２位以下"
	;-------------------------------------------------
	;顺位は2～4位
	;全角30文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	顺位 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「くやし～！」
	ENDIF
CASE "チーム战：胜ち"
	;-------------------------------------------------
	;顺位は1位（やられていても）
	;全角32文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	顺位 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「私のおかげね！」
	ENDIF
CASE "チーム战：负け"
	;-------------------------------------------------
	;顺位は2位
	;全角32文字まで（カギカッコ含む）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	顺位 = ARG
	;-------------------------------------------------
	IF LOCAL:1
;		RESULTS = 「味方が弱い！！」
	ENDIF
ENDSELECT
SIF RESULTS != ""
	RETURN 1

;==================================================
;引力操作
;TCVAR:引力点に场所IDを入れるとその地点に引っ张られていきます
;场所IDと同じ据点マップでしか效果はありません（博丽神社の境内なら据点が博丽神社のときだけ）
;条件を付けないと永久に引っ张られ续けるので注意
;RANDは基本的に使えません。CFLAG:今日的运势にその日のランダム数值（0～999）が入っているのでこれを使うと良いです
;==================================================
@M_KOJO_NK_VENT_K38_GRAVITY(ARG)

SIF 0
	TCVAR:引力点 = 0

;▼共通设定で使われているサンプル
[SKIPSTART]
	;平日の昼间はランダムで游びに行く
	IF YOUBI_MATCH(DAY, "月火水木金") && INRANGE(TIME, 600, 960)
		SELECTCASE CFLAG:今日的运势 % 5
		CASE 1
			TCVAR:引力点 = P2境内
		CASE 2
			TCVAR:引力点 = P10缘侧
		CASE 3
			TCVAR:引力点 = P11庭
		CASE 4
			TCVAR:引力点 = P25镇守の森
		CASEELSE
			TCVAR:引力点 = 0
		ENDSELECT
	ENDIF
	;水木曜日に2分の1の概率で游びに行く
	SIF YOUBI_MATCH(DAY, "水木") && INRANGE(TIME, 720, 1020) && CFLAG:今日的运势 % 2 == 0
		TCVAR:引力点 = P213铃奈庵
	;特定の人物が特定の场所にいるとそこへ引っ张られる
		SIF CFLAG:[[白莲]]:当前位置 == P103本堂 && !CFLAG:[[白莲]]:诶嘿嘿 && SHIRAHU([[白莲]])
			TCVAR:引力点 = P103本堂
	;土日に10分の1の概率で特定の人物にくっついてまわる
	SIF YOUBI_MATCH(DAY, "土日") && CFLAG:今日的运势 % 10 == 0 && !CFLAG:[[さとり]]:诶嘿嘿 && SHIRAHU([[さとり]])
		TCVAR:引力点 = CFLAG:[[さとり]]:当前位置
[SKIPEND]

;==================================================
;スイカ割り
;スイカ割りの口上はムシバトル同样、PRINTを使うのではなく、
;台词一行のみをRESULTSに入れてください
;カギ括弧は自动で付きます
;"冲突"时のみ、口上色が自动で付きます
;"冲突"时以外は半角26文字（全角13文字）までの文字数制限があります。はみ出ないように气をつけてください
;数パターンあると雰囲气が出ます（%TEXTR( / )%を使うと良い）
;==================================================
@M_KOJO_MESSAGE_NK_COM_K38_SUIKA(ARGS)
;-------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL:1 = 1
;-------------------------------------------------
IF LOCAL:1
	SELECTCASE ARGS
	CASE "冲突"
		;-------------------------------------------------
		;场外に出てあなたがキャラと冲突した际の台词
		;文字数制限はありません,泛用台词もありません
		;-------------------------------------------------
		RESULTS = いたっ！ ちょっと、危ないじゃないのよ！
	CASE "そこだ！"
		RESULTS = %TEXTR("そこ！/今！")%
	CASE "近い"
		RESULTS = %TEXTR("近い！近いよ！/近づいてるよ！/あとちょっと！")%
	CASE "远い"
		RESULTS = %TEXTR("まだ远いよ/まだまだ～")%
	CASE "かなり远い"
		RESULTS = %TEXTR("全然远いよー/まだまだずっと远いー")%
	CASE "前"
		RESULTS = %TEXTR("前にあるよ/そのまま、そのまま/そっちそっち")%
	CASE "少し前"
		RESULTS = %TEXTR("ちょっとだけ前！/すこーし前/あと一歩！")%
	CASE "后ろ"
		RESULTS = %TEXTR("后ろ向いてる！/逆、逆！/そっちじゃないよー")%
	CASE "少し后ろ"
		RESULTS = %TEXTR("すぐ后ろだよ！/すこーし后ろ/一歩后ろ！")%
	CASE "右"
		RESULTS = %TEXTR("右だよ/右、右/もっと右")%
	CASE "少し右"
		RESULTS = %TEXTR("ちょっとだけ右/まだ右かな")%
	CASE "左"
		RESULTS = %TEXTR("左だよ/左、左/もっと左")%
	CASE "少し左"
		RESULTS = %TEXTR("ちょっとだけ左/まだ左かな")%
	ENDSELECT
ENDIF