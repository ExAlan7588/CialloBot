@SOURCE_ABLUP(ARG)
#DIM NEED_EXP, 2
IF ABL:ARG:战斗能力 < 6
	NEED_EXP = CALC_ABL_DEMAND(42, EXPLV:(ABL:ARG:战斗能力 + 3))
	IF EXP:ARG:战斗经验 > NEED_EXP || (EXP:ARG:战斗经验 > 5 && ABL:ARG:战斗能力 == 0)
		;CALL ChangeABL(ARG, "战斗能力", 1)
		ABL:ARG:战斗能力 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的战斗能力变成了LV{ABL:ARG:战斗能力}
		;技能レベルUP口上,1,战斗能力
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 1)
	ENDIF
ENDIF
IF ABL:ARG:话术技能 < 6
	NEED_EXP = CALC_ABL_DEMAND(41, EXPLV:(ABL:ARG:话术技能 + 3))
	IF EXP:ARG:会话经验 > NEED_EXP
		ABL:ARG:话术技能 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的话术技能变成了LV{ABL:ARG:话术技能}
		;技能レベルUP口上,2,话术技能
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 2)
	ENDIF
ENDIF

IF ABL:ARG:清扫技能 < 6
	NEED_EXP = CALC_ABL_DEMAND(40, EXPLV:(ABL:ARG:清扫技能 + 3))
	IF EXP:ARG:清扫经验 > NEED_EXP
		ABL:ARG:清扫技能 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的清扫技能变成了LV{ABL:ARG:清扫技能}
		;技能レベルUP口上,3,清扫技能
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 3)
	ENDIF
ENDIF
IF ABL:ARG:教养 < 6
	NEED_EXP = CALC_ABL_DEMAND(43, EXPLV:(ABL:ARG:教养 + 3))
	IF EXP:ARG:学习经验 > NEED_EXP || (EXP:ARG:学习经验 > 5 && ABL:ARG:教养 == 0)
		ABL:ARG:教养 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的教养变成了LV{ABL:ARG:教养}
		;技能レベルUP口上,4,教养
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 4)
		SIF ABL:ARG:教养 == 1 && !ARG
			PRINTW 可以使用媚药了
	ENDIF
ENDIF
IF ABL:ARG:料理技能 < 6
	NEED_EXP = CALC_ABL_DEMAND(44, EXPLV:(ABL:ARG:料理技能 + 3))
	IF EXP:ARG:料理经验 > NEED_EXP || (EXP:ARG:料理经验 > 5 && ABL:ARG:料理技能 == 0)
		ABL:ARG:料理技能 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的料理技能变成了LV{ABL:ARG:料理技能}
		;技能レベルUP口上,5,料理技能
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 5)
		IF ARG == MASTER && ABL:ARG:料理技能 >= 3 && !TALENT:MASTER:大胃王
			PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%获得了【大胃王】
			TALENT:MASTER:大胃王 = 1
		ENDIF
	ENDIF
ENDIF
IF TALENT:ARG:采集Lv < 6
	NEED_EXP = CALC_ABL_DEMAND(46, EXPLV:(TALENT:ARG:采集Lv + 3))
	IF EXP:ARG:采集经验 > NEED_EXP || (EXP:ARG:采集经验 > 5 && TALENT:ARG:采集Lv == 0)
		TALENT:ARG:采集Lv ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的采集Lv变成了LV{TALENT:ARG:采集Lv}
		;技能レベルUP口上,6,采集Lv
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 6)
	ENDIF
ENDIF
IF ABL:ARG:音乐技能 < 6
	NEED_EXP = CALC_ABL_DEMAND(45, (EXPLV:(ABL:ARG:音乐技能 + 3) * 2))
	IF (MAX(EXP:ARG:演奏经验, EXP:ARG:歌唱经验, EXP:ARG:舞蹈经验) > NEED_EXP) || (MAX(EXP:ARG:演奏经验, EXP:ARG:歌唱经验, EXP:ARG:舞蹈经验) > 20 && ABL:ARG:音乐技能 == 0)
		ABL:ARG:音乐技能 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的音乐技能变成了LV{ABL:ARG:音乐技能}
		SIF ARG == MASTER && ABL:ARG:音乐技能 == 2
			PRINTW 可以使用小提琴了
		;技能レベルUP口上,7-0,音乐技能（7-1～はEVENTTURNENDで）
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 7, 0)

		[SKIPSTART]
		IF ABL:ARG:音乐技能 != 2
		ELSEIF ARG == MASTER
			PRINTW 可以使用小提琴了
		ELSEIF TALENT:ARG:音乐知识
		ELSE
			;おそらく、现状で経験を积む手段がない
			SELECTCASE MAX(EXP:ARG:演奏经验, EXP:ARG:歌唱经验, EXP:ARG:舞蹈经验)
			CASE EXP:ARG:演奏经验
				PRINTFORMW 在经验的积累下%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%可以在他人面前演奏乐器了
				TALENT:ARG:音乐知识 = 1
			CASE EXP:ARG:歌唱经验
				PRINTFORMW 在经验的积累下%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%可以在他人面前展示歌喉了
				TALENT:ARG:音乐知识 = 2
			CASE EXP:ARG:舞蹈经验
				PRINTFORMW 在经验的积累下%NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%可以在他人面前表演舞蹈了
				TALENT:ARG:音乐知识 = 3
			CASEELSE
		ENDIF
		[SKIPEND]
	ENDIF
ENDIF
IF ARG == MASTER && EXP:ARG:演奏经验 >= 1000 && ABL:ARG:技巧 >= 3 && !TALENT:ARG:音乐知识 == 1
	PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%乐器演奏的造诣变深了
	PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%获得了[乐器知识]
	TALENT:ARG:音乐知识 = 1
ENDIF
IF ARG == MASTER && EXP:ARG:演奏经验 >= 5000 && !TALENT:ARG:音感 == 1
	PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的音感得到了相当的锻炼
	PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%获得了[相对音感]
	TALENT:ARG:音感 = 1
ENDIF

IF TALENT:ARG:钓鱼Lv < 6
	NEED_EXP = CALC_ABL_DEMAND(47, EXPLV:(TALENT:ARG:钓鱼Lv + 3))
	IF EXP:ARG:钓鱼经验 > NEED_EXP || (EXP:ARG:钓鱼经验 > 5 && TALENT:ARG:钓鱼Lv == 0)
		TALENT:ARG:钓鱼Lv ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的钓鱼技能变成了LV{TALENT:ARG:钓鱼Lv}
		;技能レベルUP口上,8,钓鱼Lv
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 8)
	ENDIF
ENDIF

IF TALENT:ARG:调合Lv < 6
	NEED_EXP = CALC_ABL_DEMAND(48, EXPLV:(TALENT:ARG:调合Lv + 3))
	IF EXP:ARG:调合经验 > NEED_EXP || (EXP:ARG:调合经验 > 5 && TALENT:ARG:调合Lv == 0)
		TALENT:ARG:调合Lv ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的调合技能变成了LV{TALENT:ARG:调合Lv}
		;技能レベルUP口上,9-0,调合Lv
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 9, 0)
	ENDIF
ENDIF

IF TALENT:ARG:采伐Lv < 6
	NEED_EXP = CALC_ABL_DEMAND(49, EXPLV:(TALENT:ARG:采伐Lv + 3))
	IF EXP:ARG:采伐经验 > NEED_EXP || (EXP:ARG:采伐经验 > 5 && TALENT:ARG:采伐Lv == 0)
		TALENT:ARG:采伐Lv ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的采伐技能变成了LV{TALENT:ARG:采伐Lv}
		;技能レベルUP口上,10,采伐Lv
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 10)
	ENDIF
ENDIF

IF ABL:ARG:指 < 6
	NEED_EXP = CALC_ABL_DEMAND(50, EXPLV:(ABL:ARG:指 + 3))
	LOCAL = EXP:ARG:手淫经验
	LOCAL:1 = 10 + ABL:ARG:技巧 / 2 + TALENT:ARG:灵活手指 * 2 + TALENT:ARG:习得速度
	IF LOCAL * LOCAL:1 / 10 > NEED_EXP / 2; && EXP_UP(24,ARG)
		ABL:ARG:指 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的手指变得灵活了
		;技能レベルUP口上,11-0,指
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 11, 0)
		IF ABL:ARG:指 >= 5 && !TALENT:ARG:灵活手指
			PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%获得了[灵活手指]
			TALENT:ARG:灵活手指 = 1
			;技能レベルUP口上,11-1,灵活手指
			CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 11, 1)
		ENDIF
	ENDIF
ENDIF
IF ABL:ARG:舌 < 6
	NEED_EXP = CALC_ABL_DEMAND(51, EXPLV:(ABL:ARG:舌 + 3))
	LOCAL = EXP:ARG:口淫经验
	LOCAL:1 = 10 + ABL:ARG:技巧 / 2 + TALENT:ARG:舌头灵活 * 2 + TALENT:ARG:习得速度
	IF  LOCAL * LOCAL:1 / 10 > NEED_EXP; && EXP_UP(25,ARG)
		ABL:ARG:舌 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的舌头变得灵活了
		;技能レベルUP口上,12-0,舌
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 12, 0)
		IF ABL:ARG:舌 >= 5 && !TALENT:ARG:舌头灵活
			PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%获得了[舌头灵活]
			TALENT:ARG:舌头灵活 = 1
			;技能レベルUP口上,12-1,舌头灵活
			CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 12, 1)
		ENDIF
	ENDIF
ENDIF
IF ABL:ARG:胸 < 6
	NEED_EXP = CALC_ABL_DEMAND(52, EXPLV:(ABL:ARG:胸 + 3))
	NEED_EXP:1 = CALC_ABL_DEMAND(52, EXPLV:(ABL:ARG:胸 + 1))
	LOCAL = EXP:ARG:乳交经验 * 2 +  EXP:ARG:Ｂ经验 / 5 + EXP:ARG:喷乳经验  / 4
	LOCAL:1 = 10 + ABL:ARG:技巧 / 2 + TALENT:ARG:胸围 + TALENT:ARG:习得速度
	SIF FLAG:抱负 == 5
		LOCAL:1 ++
	SIF GETBIT (CFLAG:ARG:继承, 5)
		LOCAL:1 *= 4
	IF LOCAL * LOCAL:1 / 10 > NEED_EXP && EXP:ARG:乳交经验 + EXP:ARG:喷乳经验  / 5 > NEED_EXP:1; && EXP_UP(26,ARG)
		ABL:ARG:胸 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%在使用胸部的性技上的技术提高了
		;技能レベルUP口上,13-0,胸
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 13, 0)
		IF ABL:ARG:胸 >= 5 && TALENT:ARG:2 != 2 && !TALENT:ARG:淫乳
			PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%获得了[淫乳]
			TALENT:ARG:淫乳 = 1
			;技能レベルUP口上,13-1,淫乳
			CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 13, 1)
		ENDIF
	ENDIF
ENDIF
IF ABL:ARG:腰 < 6
	NEED_EXP = CALC_ABL_DEMAND(53, EXPLV:(ABL:ARG:腰 + 3))
	LOCAL = EXP:ARG:Ｖ性交经验 + EXP:ARG:Ａ性交经验 + EXP:ARG:插入经验
	LOCAL:1 = 10 + ABL:ARG:技巧 / 2 + TALENT:ARG:习得速度
	SIF GETBIT (CFLAG:ARG:继承, 3) || GETBIT (CFLAG:ARG:继承, 4)
		LOCAL:1 *= 4
	IF LOCAL * LOCAL:1 / 10 > NEED_EXP
		ABL:ARG:腰 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的腰技变得更高明了
		;技能レベルUP口上,14,腰
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 14)
	ENDIF
ENDIF
IF ABL:ARG:膣 < 6
	NEED_EXP = CALC_ABL_DEMAND(54, EXPLV:(ABL:ARG:膣 + 3))
	NEED_EXP:1 = CALC_ABL_DEMAND(54, EXPLV:(ABL:ARG:膣 + 1))
	;广げすぎるとガバガバになっちゃいますよ
	LOCAL = EXP:ARG:Ｖ性交经验  * 2 +  EXP:ARG:Ｖ经验 / 5 + (EXP:ARG:Ｖ扩张经验 <= 10 ? EXP:ARG:Ｖ扩张经验 * 5 # 100 - EXP:ARG:Ｖ扩张经验 * 5)
	LOCAL:1 = 10 + ABL:ARG:技巧 / 2 + TALENT:ARG:习得速度
	SIF FLAG:抱负 == 3
		LOCAL:1 ++
	SIF GETBIT (CFLAG:ARG:继承, 3)
		LOCAL:1 *= 4
	IF LOCAL * LOCAL:1 / 10 > NEED_EXP && EXP:ARG:Ｖ性交经验 >  NEED_EXP:1; && EXP_UP(20,ARG)
		ABL:ARG:膣 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%的性交技术提高了
		;技能レベルUP口上,15-0,膣
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 15, 0)
		IF ABL:ARG:膣 >= 5 && TALENT:ARG:2 != 2 && !TALENT:ARG:淫壶
			PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%获得了[淫壶]
			TALENT:ARG:淫壶 = 1
			;技能レベルUP口上,15-1,淫壶
			CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 15, 1)
		ENDIF
	ENDIF
ENDIF
IF ABL:ARG:肛门 < 6
	NEED_EXP = CALC_ABL_DEMAND(55, EXPLV:(ABL:ARG:肛门 + 3))
	NEED_EXP:1 = CALC_ABL_DEMAND(55, EXPLV:(ABL:ARG:肛门 + 1))
	LOCAL = EXP:ARG:Ａ性交经验  * 2 +  EXP:ARG:Ａ经验 / 5 + (EXP:ARG:Ａ扩张经验 <= 25 ? EXP:ARG:Ａ扩张经验 * 2 # 100 - 2 * EXP:ARG:Ａ扩张经验)
	LOCAL:1 = 10 + ABL:ARG:技巧 / 2 + TALENT:ARG:习得速度
	SIF FLAG:抱负 == 4
		LOCAL:1 ++
	SIF GETBIT (CFLAG:ARG:继承, 4)
		LOCAL:1 *= 4
	IF LOCAL * LOCAL:1 / 10 > NEED_EXP && EXP:ARG:Ａ性交经验 > NEED_EXP:1; && EXP_UP(21,ARG)
		ABL:ARG:肛门 ++
		PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%用肛门性交的技术提高了
		;技能レベルUP口上,16,肛门
		CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 16, 0)
		IF ABL:ARG:肛门 >= 5 && !TALENT:ARG:尻穴狂
			PRINTFORMW %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%获得了[尻穴狂]
			TALENT:ARG:尻穴狂 = 1
			;技能レベルUP口上,16,尻穴狂
			CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 16, 1)
		ENDIF
	ENDIF
ENDIF

IF !TALENT:ARG:调合知识 && TALENT:ARG:调合Lv >= 3 && ABL:ARG:教养 >= 3
	PRINTFORML %NAME_OUTPUT_TRANSLATION("CALLNAME", ARG)%得到了【调合知识】
	TALENT:ARG:调合知识 = 1
	;技能レベルUP口上,9-1,调合知识
	CALL KOJO_MESSAGE_SEND("EVENT", 34, ARG, 9, 1)
ENDIF