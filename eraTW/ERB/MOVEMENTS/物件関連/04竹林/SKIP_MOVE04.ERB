;-----------------------------------------------------------
;远距离移动の设定
;ARG     目的地
;ARG:1   现在地
;RETURN  次の目的地
;-----------------------------------------------------------
@SKIP_MOVE_4(ARG, ARG:1)
#DIM 现在的位置
;当前位置取得
IF ARG:1
	现在的位置 = ARG:1
ELSE
	现在的位置 = CFLAG:MASTER:当前位置
ENDIF

;目的地に直接移动できる场合そこに移动
SIF CAN_MOVE(现在的位置, ARG) & 1
	RETURN ARG

;袋小路から行ける场所は固定なので、そこを目指す
SELECTCASE 现在的位置
CASE P406来客用厕所
	RETURN P403等候室
CASE P418厕, P430地下室
	RETURN P407走廊
CASE P420澡堂
	RETURN P419更衣间
CASE P424库房
	RETURN P409走廊
CASE P427仓库, P428二层空的房间
	RETURN P426二层走廊
CASE P431兔的洞穴, P432影狼的家
	RETURN P433斜角的竹林
CASE P437梅蒂欣的家
	RETURN P436无名之丘
CASE P439拉尔瓦的家
	RETURN P438太阳花田
CASE P441温泉
	RETURN P434迷失的小道
CASE P451胡桃私室, P452艾丽私室
	RETURN P450玄关
CASE P453餐厅, P454浴室, P455厕所, P456仓库, P460空的房间
	RETURN P465大堂
CASE P457梦月私室, P459幻月私室
	RETURN P458走廊
CASE P464露台
	RETURN P463幽香私室
ENDSELECT

;直接移动できない场合、1つ近い位置を暂定目的地に设定し直してループ
;基本的に最短で行けるコースを设定する
;现在地によってコースが变わることも考虑して对応する
SELECTCASE ARG
	CASE P401永远亭入口
		SELECTCASE 现在的位置
		CASE P415大厅 TO P417厨房, P421庭, P422后院
			RETURN P405配药室
		CASE P404诊察室 TO P430地下室
			RETURN P403等候室
		CASE P431兔的洞穴, P432影狼的家, P442空的小屋, P443米斯蒂亚的家, P444夜雀的小摊
			RETURN P433斜角的竹林
		CASEELSE
			RETURN P435水井
		ENDSELECT
	CASE P403等候室
		SELECTCASE 现在的位置
		CASE P405配药室, P417厨房, P422后院
			RETURN P404诊察室
		CASE P408中走廊 TO P430地下室
			RETURN P407走廊
		CASEELSE
			RETURN P401永远亭入口
		ENDSELECT
	CASE P404诊察室
		SELECTCASE 现在的位置
		CASE P417厨房, P422后院, P416起居室, P415大厅, P421庭
			RETURN P405配药室
		CASEELSE
			RETURN P403等候室
		ENDSELECT
	CASE P405配药室
		SELECTCASE 现在的位置
		CASE P421庭
			RETURN P422后院
		CASE P408中走廊 TO P416起居室, P424库房
			RETURN P417厨房
		CASE P403等候室, P406来客用厕所, P407走廊, P418厕 TO P420澡堂, P426二层走廊 TO P430地下室
			RETURN P404诊察室
		CASEELSE
			RETURN P401永远亭入口
		ENDSELECT
	CASE P406来客用厕所
		RETURN P403等候室
	CASE P407走廊
		SELECTCASE 现在的位置
		CASE P420澡堂
			RETURN P419更衣间
		CASE P427仓库, P428二层空的房间
			RETURN P426二层走廊
		CASE P421庭, P422后院, P424库房
			RETURN P409走廊
		CASE P410帝私室 TO P417厨房
			RETURN P408中走廊
		CASEELSE
			RETURN P403等候室
		ENDSELECT
	CASE P408中走廊
		SELECTCASE 现在的位置
		CASE P417厨房, P422后院, P405配药室, P424库房
			RETURN P416起居室
		CASEELSE
			RETURN P407走廊
		ENDSELECT
	CASE P409走廊
		SELECTCASE 现在的位置
		CASE P417厨房, P415大厅, P405配药室
			RETURN P416起居室
		CASE P422后院
			RETURN P421庭
		CASEELSE
			RETURN P407走廊
		ENDSELECT
	CASE P410帝私室, P411铃仙私室
		RETURN P408中走廊
	CASE P412空的房间, P413永琳私室, P414辉夜私室
		SELECTCASE 现在的位置
		CASE P421庭, P422后院, P427仓库
			RETURN P409走廊
		CASEELSE
			RETURN P408中走廊
		ENDSELECT
	CASE P415大厅
		SELECTCASE 现在的位置
		CASE P409走廊, P424库房, P421庭
			RETURN P416起居室
		CASE P403等候室, P407走廊, P410帝私室 TO P414辉夜私室, P418厕 TO P420澡堂, P426二层走廊 TO P430地下室
			RETURN P408中走廊
		CASEELSE
			RETURN P417厨房
		ENDSELECT
	CASE P416起居室
		SELECTCASE 现在的位置
		CASE P424库房, P421庭
			RETURN P409走廊
		CASE P403等候室, P407走廊, P410帝私室 TO P414辉夜私室, P418厕 TO P420澡堂, P426二层走廊 TO P430地下室
			RETURN P408中走廊
		CASEELSE
			RETURN P417厨房
		ENDSELECT
	CASE P417厨房
		SELECTCASE 现在的位置
		CASE P421庭
			RETURN P422后院
		CASE P407走廊 TO P420澡堂, P424库房 TO P430地下室
			RETURN P416起居室
		CASEELSE
			RETURN P405配药室
		ENDSELECT
	CASE P418厕, P419更衣间
		RETURN P407走廊
	CASE P420澡堂
		RETURN P419更衣间
	CASE P421庭
		SELECTCASE 现在的位置
		CASE P403等候室, P404诊察室, P406来客用厕所 TO P416起居室, P418厕 TO P420澡堂, P424库房 TO P430地下室
			RETURN P409走廊
		CASEELSE
			RETURN P422后院
		ENDSELECT
	CASE P422后院
		SELECTCASE 现在的位置
		CASE P408中走廊, P410帝私室 TO P416起居室
			RETURN P417厨房
		CASE P407走廊, P409走廊, P418厕 TO P420澡堂, P424库房 TO P430地下室
			RETURN P421庭
		CASEELSE
			RETURN P405配药室
		ENDSELECT
	CASE P424库房
		RETURN P409走廊
	CASE P426二层走廊, P430地下室
		RETURN P407走廊
	CASE P427仓库, P428二层空的房间
		RETURN P426二层走廊

	CASE P431兔的洞穴, P432影狼的家
		RETURN P433斜角的竹林
	CASE P433斜角的竹林
		SELECTCASE 现在的位置
		CASE P440废屋, P441温泉, P445妹红的家 TO P447竹林入口
			RETURN P434迷失的小道
		CASEELSE
			RETURN P401永远亭入口
		ENDSELECT
	CASE P434迷失的小道
		SELECTCASE 现在的位置
		CASE P431兔的洞穴, P432影狼的家, P442空的小屋 TO P444夜雀的小摊
			RETURN P433斜角的竹林
		CASEELSE
			RETURN P435水井
		ENDSELECT
	CASE P435水井
		SELECTCASE 现在的位置
		CASE P403等候室 TO P430地下室
			RETURN P401永远亭入口
		CASE P437梅蒂欣的家, P438太阳花田, P439拉尔瓦的家, P450玄关 TO P466庭
			RETURN P436无名之丘
		CASE P431兔的洞穴, P432影狼的家, P442空的小屋 TO P444夜雀的小摊
			RETURN P433斜角的竹林
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT
	CASE P436无名之丘
		SELECTCASE 现在的位置
		CASE P439拉尔瓦的家, P450玄关 TO P466庭
			RETURN P438太阳花田
		CASEELSE
			RETURN P435水井
		ENDSELECT
	CASE P437梅蒂欣的家
		RETURN P436无名之丘
	CASE P438太阳花田
		SELECTCASE 现在的位置
		CASE P451胡桃私室 TO P461客厅, P463幽香私室 TO P465大堂
			RETURN P450玄关
		CASE P462阳台
			RETURN P466庭
		CASEELSE
			RETURN P436无名之丘
		ENDSELECT
	CASE P439拉尔瓦的家
		RETURN P438太阳花田
	CASE P440废屋, P441温泉
		RETURN P434迷失的小道
	CASE P442空的小屋, P443米斯蒂亚的家
		SELECTCASE 现在的位置
		CASE P446祠, P447竹林入口
			RETURN P444夜雀的小摊
		CASEELSE
			RETURN P433斜角的竹林
		ENDSELECT
	CASE P444夜雀的小摊
		SELECTCASE 现在的位置
		CASE P440废屋, P445妹红的家
			RETURN P447竹林入口
		CASEELSE
			RETURN P433斜角的竹林
		ENDSELECT
	CASE P445妹红的家
		SELECTCASE 现在的位置
		CASE P444夜雀的小摊, P440废屋, P446祠, P443米斯蒂亚的家
			RETURN P447竹林入口
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT
	CASE P446祠
		SELECTCASE 现在的位置
		CASE P443米斯蒂亚的家, P442空的小屋
			RETURN P444夜雀的小摊
		CASE P440废屋, P445妹红的家
			RETURN P447竹林入口
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT
	CASE P447竹林入口
		SELECTCASE 现在的位置
		CASE P443米斯蒂亚的家, P442空的小屋
			RETURN P444夜雀的小摊
		CASEELSE
			RETURN P434迷失的小道
		ENDSELECT

	CASE P450玄关
		SELECTCASE 现在的位置
		CASE P453餐厅 TO P464露台
			RETURN P465大堂
		CASEELSE
			RETURN P438太阳花田
		ENDSELECT
	CASE P451胡桃私室, P452艾丽私室
		RETURN P450玄关
	CASE P453餐厅, P454浴室, P455厕所, P456仓库, P460空的房间
		RETURN P465大堂
	CASE P457梦月私室, P459幻月私室
		RETURN P458走廊
	CASE P458走廊
		SELECTCASE 现在的位置
		CASE P464露台
			RETURN P463幽香私室
		CASE P462阳台, P466庭
			RETURN P461客厅
		CASEELSE
			RETURN P465大堂
		ENDSELECT
	CASE P461客厅
		SELECTCASE 现在的位置
		CASE P457梦月私室, P459幻月私室, P463幽香私室, P464露台
			RETURN P458走廊
		CASE P466庭
			RETURN P462阳台
		CASEELSE
			RETURN P465大堂
		ENDSELECT
	CASE P462阳台
		SELECTCASE 现在的位置
		CASE P453餐厅 TO P460空的房间, P463幽香私室 TO P465大堂
			RETURN P461客厅
		CASEELSE
			RETURN P466庭
		ENDSELECT
	CASE P463幽香私室
		RETURN P458走廊
	CASE P464露台
		RETURN P463幽香私室
	CASE P465大堂
		SELECTCASE 现在的位置
		CASE P462阳台
			RETURN P461客厅
		CASE P457梦月私室, P459幻月私室, P463幽香私室, P464露台
			RETURN P458走廊
		CASEELSE
			RETURN P450玄关
		ENDSELECT
	CASE P466庭
		SELECTCASE 现在的位置
		CASE P451胡桃私室 TO P456仓库, P460空的房间
			RETURN P450玄关
		CASE P457梦月私室 TO P459幻月私室, P461客厅 TO P464露台
			RETURN P462阳台
		CASEELSE
			RETURN P438太阳花田
		ENDSELECT
ENDSELECT