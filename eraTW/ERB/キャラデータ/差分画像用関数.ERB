@NUDITYCHECK(CHARA)
#FUNCTION
#DIM CHARA
#DIM NUDITY

SIF CHARA == -1
	CHARA = TARGET
NUDITY = 0

;全身内衣
IF EQUIP:(CHARA):9 > 0
	NUDITY += 3
ELSEIF EQUIP:(CHARA):10 > 0
	NUDITY += 3
ELSE
	;下半身内衣
	IF EQUIP:(CHARA):5 > 0
		NUDITY += 1
	ELSEIF EQUIP:(CHARA):6 > 0
		NUDITY += 1
	ENDIF
	;上半身内衣
	IF EQUIP:(CHARA):7 > 0
		NUDITY += 2
	ELSEIF EQUIP:(CHARA):8 > 0
		NUDITY += 2
	ENDIF
ENDIF

;外衣
SIF EQUIP:(CHARA):18 > 0
	NUDITY += 20

;全身外套
IF EQUIP:(CHARA):13 > 0
	NUDITY += 9
ELSEIF EQUIP:(CHARA):14 > 0
	NUDITY += 9
ELSE
	;上身衣服
	IF EQUIP:(CHARA):16 > 0
		NUDITY += 5
	ELSEIF EQUIP:(CHARA):17 > 0
		NUDITY += 5
	ENDIF
	;下身衣服
	IF EQUIP:(CHARA):11 > 0
		NUDITY += 4
	ELSEIF EQUIP:(CHARA):12 > 0
		NUDITY += 4
	;裙子
	ELSEIF EQUIP:(CHARA):13 > 0
		NUDITY += 4
	ELSEIF EQUIP:(CHARA):14 > 0
		NUDITY += 4
	ENDIF
ENDIF

RETURNF NUDITY

@绝顶判定(CHARA)
#FUNCTION
#DIM CHARA

RETURNF (NOWEX:CHARA:Ａ绝顶 + NOWEX:CHARA:Ｂ绝顶 + NOWEX:CHARA:Ｃ绝顶 + NOWEX:CHARA:Ｖ绝顶 + NOWEX:CHARA:Ｍ绝顶)

@绝顶判定2(CHARA)
#FUNCTION
#DIM CHARA

SIF EX:CHARA:无自觉Ｃ绝顶 + EX:CHARA:无自觉Ｖ绝顶 + EX:CHARA:无自觉Ａ绝顶 + EX:CHARA:无自觉Ｂ绝顶 + EX:CHARA:无自觉Ｍ绝顶 >= 20
	RETURNF 1
RETURNF 0