;-------------------------------------------------
;更衣
;日常系指令、レベル1
;-------------------------------------------------
@COM430
#DIM 对象
#DIM 种类

;困ったことに固有は角色で名称判定しているので你が履くと名前が变わる

PRINTW 要换掉随身的内裤吗？
DRAWLINE
CALL DISPLAY_ALL_COLLECTION(1,1)
DRAWLINE
PRINTFORML [0] 不换
$INPUT_LOOP
INPUT
IF RESULT == 0
	RETURN 0
ELSE
	对象 = RESULT / 100
	种类 = RESULT % 100
	CALL SPEND_HAVE_COLLECTION(RESULT)
	IF RESULT != 0
		CFLAG:MASTER:206 = 种类
		CFLAG:MASTER:246 = 种类
		CFLAG:MASTER:今日的胖次 = 种类
		CFLAG:MASTER:睡衣胖次 = 种类
		PRINTFORM %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%
		IF EQUIP:MASTER:下半身内衣２ == 0
			PRINTFORML 得到了%NAME_OUTPUT_TRANSLATION("CALLNAME", (对象))%的%PANTSNAME(种类, 对象)%
		ELSE
			PRINTFORM 把%PANTSNAME(EQUIP:MASTER:下半身内衣２)%
			PRINTFORML 换成了%NAME_OUTPUT_TRANSLATION("CALLNAME", (对象))%的%PANTSNAME(种类, 对象)%
		ENDIF
		EQUIP:MASTER:下半身内衣２ = 种类
	ELSE
		GOTO INPUT_LOOP
	ENDIF
ENDIF
IF !FLAG:时间停止
	TIME += 3
ELSE
	BASE:MASTER:TSP -= 5
ENDIF
RETURN 1

;更衣
@COM_ABLE430
;移动实行判定
SIF !TFLAG:100
	RETURN 0
;批量管理
SIF GLOBAL_COMABLE(430)
	RETURN RESULT
;私室设定
SIF (CFLAG:MASTER:当前位置 != CFLAG:MASTER:311) && (CFLAG:当前位置 != CFLAG:311)
	RETURN 0
;SIF CSTR:MASTER:12 == ""
SIF !FLAG:胖次输送
	RETURN 0
SIF !FLAG:时间停止 && (!GETBIT(CFLAG:TARGET:既成事实, 1) && TARGET)
	RETURN 0
SIF CFLAG:诶嘿嘿
	RETURN 0
RETURN 1