@DAILY_CONDITION_EV22
#DIM YOME
#DIM CHILDNUM
SIF CMATCH(TALENT:育儿中, 0) == CHARANUM
	RETURN -1
SIF RAND:5 > 0
	RETURN -1
YOME = 0
CALL FISHER_YATES_SHAFFLE(CHARANUM - 1)
FOR LOCAL:10, 0, CHARANUM - 1
	LOCAL = SHAFFLE_ARRAY:(LOCAL:10) + 1
	IF CHK_HAVE_CHILD(LOCAL,CHILD_就学,CHILD_自立) > 0
		YOME = LOCAL
		CHILDNUM = CHK_HAVE_CHILD(LOCAL,CHILD_就学,CHILD_自立)
		BREAK
	ENDIF
NEXT
IF YOME
	CALL DAILY_EV22(YOME,CHILDNUM)
	RETURN 1
ELSE
	RETURN -1
ENDIF


@DAILY_EV22(YOME,CHILDNUM)
#DIM YOME
#DIM CHILDNUM
#DIM 慰谢料

PRINTFORM 从%NAME_OUTPUT_TRANSLATION("CALLNAME", YOME)%、传来了%CHILDNAME:YOME:CHILDNUM%

IF !RAND:4
	PRINTFORMW 弄伤了其他小孩的消息……
	PRINTFORML 就算是没有恶意、%CHILDNAME:YOME:CHILDNUM%的力量对普通人来说也很容易造成伤害
	PRINTFORML 向家长谢罪之后让%CHILDNAME:YOME:CHILDNUM%必须好好听话……
	PRINTFORML %NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%心情有些沉重
	PRINTFORML 
	CALL KOJO_MESSAGE_SEND("EVENT", 0, YOME, CHILDNUM, 0, "CHILD_DAILY_寺子屋", "怪我させた")
	慰谢料 = MIN(10000,MONEY)
	MONEY -= 慰谢料
	CALL COLORMESSAGE(@"向对方支付了{慰谢料}治疗费",C_YELLOW,1,1)
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的气力暂时减少了",C_YELLOW,1,1)
	CALL BUFF_BASE(MASTER,BASE_气力,-1000)
ELSE
	PRINTFORMW 传来了孩子被表扬的消息……
	PRINTFORML 不愧是我家的孩子！
	PRINTFORML 
	CALL KOJO_MESSAGE_SEND("EVENT", 0, YOME, CHILDNUM, 0, "CHILD_DAILY_寺子屋", "褒められた")
	CALL COLORMESSAGE(@"%NAME_OUTPUT_TRANSLATION("CALLNAME", MASTER)%的气力暂时增加了",C_YELLOW,1,1)
	CALL BUFF_BASE(MASTER,BASE_气力,1000)
ENDIF
PRINTW 
