@PRINTLEVELBAR, ARG, ARG:1, ARG:2, ARG:3
;PRINTFORM %@"Level {ABL:(ARG:0):レベル, 2}", ARG:1, LEFT%　  
;CALLFORM COLORSENTENCE_BAR("EXP", ARG:0, JUEL:(ARG:0):経験值, 100, 20)
ARG:4 = 109
ARG:5 = 225
ARG:6 = 255
PRINTFORM Lv{ARG:2}
CALL COLOR_BAR(ARG,ARG:1,20,ARG:4,ARG:5,ARG:6,-160,10,18,6,2,UNICODE(0x25AE),UNICODE(0x25AE))
PRINTFORM Lv{ARG:3}

@Qol_SkillProgressBar(nChara, nExp)
#DIM nChara
#DIM nExp
SELECTCASE nExp
	CASE GETNUM(EXP, "学习经验")
		CALL Qol_PrintBar(nExp, ABL:nChara:教养, EXP:nChara:学习经验, nChara)
	CASE GETNUM(EXP, "会话经验")
		CALL Qol_PrintBar(nExp, ABL:nChara:话术技能, EXP:nChara:会话经验, nChara)
	CASE GETNUM(EXP, "战斗经验")
		CALL Qol_PrintBar(nExp, ABL:nChara:战斗能力, EXP:nChara:战斗经验, nChara)
	CASE GETNUM(EXP, "清扫经验")
		CALL Qol_PrintBar(nExp, ABL:nChara:清扫技能, EXP:nChara:清扫经验, nChara)
	CASE GETNUM(EXP, "料理经验")
		CALL Qol_PrintBar(nExp, ABL:nChara:料理技能, EXP:nChara:料理经验, nChara)
	CASE GETNUM(EXP, "演奏经验"), GETNUM(EXP, "歌唱经验"), GETNUM(EXP, "舞蹈经验")
		LOCAL = MAX(EXP:nChara:演奏经验, EXP:nChara:歌唱经验, EXP:nChara:舞蹈经验)
		CALL Qol_PrintBar(nExp, ABL:nChara:音乐技能, LOCAL, nChara)
	CASE GETNUM(EXP, "采伐经验")
		CALL Qol_PrintBar(nExp, TALENT:nChara:采伐Lv, EXP:nChara:采伐经验, nChara)
	CASE GETNUM(EXP, "钓鱼经验")
		CALL Qol_PrintBar(nExp, TALENT:nChara:钓鱼Lv, EXP:nChara:钓鱼经验, nChara)
	CASE GETNUM(EXP, "采集经验")
		CALL Qol_PrintBar(nExp, TALENT:nChara:采集Lv, EXP:nChara:采集经验, nChara)
	CASE GETNUM(EXP, "调合经验")
		CALL Qol_PrintBar(nExp, TALENT:nChara:调合Lv, EXP:nChara:调合经验, nChara)		
ENDSELECT

@Qol_PrintBar(nSkill, nSkillLv, nXp, nChara)
#DIM CONST MaxNonHLevel = 24
#DIM nSkill
#DIM nSkillLv
#DIM nXp
#DIM nChara
IF nSkillLv < MaxNonHLevel
	PRINTFORML
	CALLF Qol_XpProgressToNextLevel(nSkill, nSkillLv, nXp, nChara)
	CALL PRINTLEVELBAR(RESULT:0, RESULT:1, nSkillLv, nSkillLv+1)
ENDIF

@Qol_XpProgressToNextLevel(nSkill, nSkillLv, nXp, nChara)
#FUNCTION
#DIM nSkill
#DIM nSkillLv
#DIM nXp
#DIM nEffective
#DIM nChara
nEffective = MAX(nSkillLv + 3 - TALENT:nChara:50,0)

SELECTCASE nSkill
	CASE GETNUM(EXP, "学习经验"), GETNUM(EXP, "战斗经验"), GETNUM(EXP, "料理经验"), GETNUM(EXP, "采伐经验"), GETNUM(EXP, "钓鱼经验"), GETNUM(EXP, "采集经验"), GETNUM(EXP, "调合经验"), 97, 98
		IF nSkillLv == 0
			RESULT = nXp, 6, 6
		ELSEIF nSkillLv == 1
			RESULT = nXp - 6, EXPLV:(nEffective) - 6, EXPLV:(nEffective)
		ELSE
			RESULT = nXp - EXPLV:(nEffective - 1), EXPLV:(nEffective) - EXPLV:(nEffective - 1), EXPLV:(nEffective)
		ENDIF
	CASE GETNUM(EXP, "会话经验"), GETNUM(EXP, "清扫经验")
		IF nSkillLv == 0
			RESULT = nXp, EXPLV:(nEffective), EXPLV:(nEffective)
		ELSE
			RESULT = nXp - EXPLV:(nEffective - 1), EXPLV:(nEffective) - EXPLV:(nEffective - 1), EXPLV:(nEffective)
		ENDIF
	CASE GETNUM(EXP, "演奏经验"), GETNUM(EXP, "歌唱经验"), GETNUM(EXP, "舞蹈经验")
		IF nSkillLv == 0
			RESULT = nXp, 21, 21
		ELSEIF nSkillLv == 1
			RESULT = nXp - 21, (EXPLV:(nEffective) * 2) - 21, (EXPLV:(nEffective) * 2)
		ELSE
			RESULT = nXp - (EXPLV:(nEffective - 1) * 2), (EXPLV:(nEffective) * 2) - (EXPLV:(nEffective - 1) * 2), (EXPLV:(nEffective) * 2)
		ENDIF
	CASEELSE
		THROW @Qol_XpProgressToNextLevel: No case defined for {nSkill}
ENDSELECT

;--------------------------------------------------
;カラー付きバー@COLOR_BAR
;ARG:1	现在值
;ARG:2	最大值
;ARG:3  ゲージの长さ
;ARG:4  色・R		0xFFFFFF方式で色を指定することができないので注意。
;ARG:5  色・G
;ARG:6  色・B
;ARG:7  背景色の色相差（ARGS:1 と ARGS:2の色の差）数值が大きいほど背景の色が薄くなる
;ARG:8  グラデーション变化・R 加算值
;ARG:9  グラデーション变化・G 加算值
;ARG:10 グラデーション变化・B 加算值
;ARG:11 グラデーション变化の频度　数值が大きいほど变化が缓やかになる
;ARGS:1 ゲージに使用する文字
;ARGS:2 ゲージの背景文字
@COLOR_BAR(ARG:1,ARG:2,ARG:3=20,ARG:4=160,ARG:5=160,ARG:6=160,ARG:7=-80,ARG:8,ARG:9,ARG:10,ARG:11=1,ARGS:1=UNICODE(0x2582),ARGS:2=UNICODE(0x2581))
VARSET LOCAL
LOCAL:1 = ARG:1 * ARG:3 / ARG:2
LOCAL:2 = ARG:3 - LOCAL:1
LOCAL:4 = ARG:4 + ARG:7
LOCAL:5 = ARG:5 + ARG:7
LOCAL:6 = ARG:6 + ARG:7
SIF LOCAL:4 < 0
	LOCAL:4 = 0
SIF LOCAL:4 > 255
	LOCAL:4 = 255
SIF LOCAL:5 < 0
	LOCAL:5 = 0
SIF LOCAL:5 > 255
	LOCAL:5 = 255
SIF LOCAL:6 < 0
	LOCAL:6 = 0
SIF LOCAL:6 > 255
	LOCAL:6 = 255
FOR LOCAL,0,ARG:3
	IF LOCAL:1 > LOCAL
		IF LOCAL:100 < ARG:11
			SETCOLOR ARG:4,ARG:5,ARG:6
			LOCAL:100 += 1
		ELSE
			ARG:4 += ARG:8
			ARG:5 += ARG:9
			ARG:6 += ARG:10
			SIF ARG:4 < 0
				ARG:4 = 0
			SIF ARG:4 > 255
				ARG:4 = 255
			SIF ARG:5 < 0
				ARG:5 = 0
			SIF ARG:5 > 255
				ARG:5 = 255
			SIF ARG:6 < 0
				ARG:6 = 0
			SIF ARG:6 > 255
				ARG:6 = 255
			SETCOLOR ARG:4,ARG:5,ARG:6
			LOCAL:100 = 0
		ENDIF
		PRINTFORM %ARGS:1%
	ELSE
		IF !LOCAL:101
			SETCOLOR LOCAL:4,LOCAL:5,LOCAL:6
			LOCAL:101 = 1
		ENDIF
		PRINTFORM %ARGS:2%
	ENDIF
NEXT
RESETCOLOR
RETURN 1

@EXP_TR(ARG:0, ARGS:0)
#FUNCTIONS
SELECTCASE ARG:0
CASE 0 ;Ｃ经验
	RETURNF "Ｃ经验"
CASE 1 ;Ｖ经验
	RETURNF "Ｖ经验"
CASE 2 ;Ａ经验
	RETURNF "Ａ经验"
CASE 3 ;Ｂ经验
	RETURNF "Ｂ经验"
CASE 4 ;Ｍ经验
	RETURNF "Ｍ经验"
CASE 5 ;Ｃ绝顶经验
	RETURNF "Ｃ绝顶经验"
CASE 6 ;Ｖ绝顶经验
	RETURNF "Ｖ绝顶经验"
CASE 7 ;Ａ绝顶经验
	RETURNF "Ａ绝顶经验"
CASE 8 ;Ｂ绝顶经验
	RETURNF "Ｂ绝顶经验"
CASE 9 ;Ｍ绝顶经验
	RETURNF "Ｍ绝顶经验"
CASE 10 ;绝顶经验
	RETURNF "绝顶经验"
CASE 11 ;射精经验
	RETURNF "射精经验"
CASE 12 ;喷乳经验
	RETURNF "喷乳经验"
CASE 13 ;放尿经验
	RETURNF "放尿经验"
CASE 14 ;精液经验
	RETURNF "精液经验"
CASE 15 ;精饮经验
	RETURNF "精饮经验"
CASE 16 ;膣射经验
	RETURNF "膣射经验"
CASE 17 ;肛射经验
	RETURNF "肛射经验"
CASE 20 ;Ｖ性交经验
	RETURNF "Ｖ性交经验"
CASE 21 ;Ａ性交经验
	RETURNF "Ａ性交经验"
CASE 22 ;自慰经验
	RETURNF "自慰经验"
CASE 23 ;调教自慰经验
	RETURNF "调教自慰经验"
CASE 24 ;手淫经验
	RETURNF "手淫经验"
CASE 25 ;口淫经验
	RETURNF "口淫经验"
CASE 26 ;乳交经验
	RETURNF "乳交经验"
CASE 27 ;接吻经验
	RETURNF "接吻经验"
CASE 28 ;道具使用经验
	RETURNF "道具使用经验"
CASE 29 ;插入经验
	RETURNF "插入经验"	

CASE 40 ;侍奉快乐经验
	RETURNF "侍奉快乐经验"
CASE 41 ;爱情经验
	RETURNF "爱情经验"
CASE 42 ;苦痛快乐经验
	RETURNF "苦痛快乐经验"
CASE 43 ;嗜虐快乐经验
	RETURNF "嗜虐快乐经验"
CASE 44 ;露出快乐经验
	RETURNF "露出快乐经验"
CASE 45 ;放尿快乐经验
	RETURNF "放尿快乐经验"


CASE 50 ;调教经验
	RETURNF "调教经验"
CASE 51 ;百合经验
	RETURNF "百合经验"
CASE 52 ;断袖经验
	RETURNF "断袖经验"
CASE 53 ;异常经验
	RETURNF "异常经验"
CASE 54 ;Ｖ扩张经验
	RETURNF "Ｖ扩张经验"
CASE 55 ;Ａ扩张经验
	RETURNF "Ａ扩张经验"
CASE 56 ;紧缚经验
	RETURNF "紧缚经验"
CASE 57 ;子宫口开发经验
	RETURNF "子宫口开发经验"
CASE 58 ;时奸经验
	RETURNF "时奸经验"
CASE 59 ;睡眠奸经验
	RETURNF "睡眠奸经验"
CASE 60 ;无自觉Ｃ经验
	RETURNF "无自觉Ｃ经验"
CASE 61 ;无自觉Ｖ经验
	RETURNF "无自觉Ｖ经验"
CASE 62 ;无自觉Ａ经验
	RETURNF "无自觉Ａ经验"
CASE 63 ;无自觉Ｂ经验
	RETURNF "无自觉Ｂ经验"
CASE 64 ;无自觉Ｍ经验
	RETURNF "无自觉Ｍ经验"
CASE 65 ;无自觉绝顶经验
	RETURNF "无自觉绝顶经验"
	
CASE 70 ;清扫经验
	RETURNF "清扫经验"
CASE 71 ;会话经验
	RETURNF "会话经验"
CASE 72 ;摄影经验
	RETURNF "摄影经验"
CASE 73 ;被拍照经验
	RETURNF "被拍照经验"
CASE 74 ;战斗经验
	RETURNF "战斗经验"
CASE 75 ;学习经验
	RETURNF "学习经验"
CASE 76 ;料理经验
	RETURNF "料理经验"
CASE 77 ;约会经验
	RETURNF "约会经验"
CASE 78 ;异常清扫经验
	RETURNF "异常清扫经验"
CASE 79 ;演奏经验
	RETURNF "演奏经验"
CASE 80 ;歌唱经验
	RETURNF "歌唱经验"
CASE 81 ;分娩经验
	RETURNF "分娩经验"
CASE 82 ;钓鱼经验
	RETURNF "钓鱼经验"
CASE 83 ;舞蹈经验
	RETURNF "舞蹈经验"
CASE 84 ;采集经验
	RETURNF "采集经验"
CASE 85 ;调合经验
	RETURNF "调合经验"
CASE 86 ;采伐经验
	RETURNF "采伐经验"
	
CASE 101 ;正常位Ｖ绝顶经验
	RETURNF "正常位Ｖ绝顶经验"
CASE 102 ;后背位Ｖ绝顶经验
	RETURNF "后背位Ｖ绝顶经验"
CASE 103 ;骑乘位Ｖ绝顶经验
	RETURNF "骑乘位Ｖ绝顶经验"
CASE 104 ;对面座位Ｖ绝顶经验
	RETURNF "对面座位Ｖ绝顶经验"
CASE 105 ;背面座位Ｖ绝顶经验
	RETURNF "背面座位Ｖ绝顶经验"
CASE 106 ;正常位Ａ绝顶经验
	RETURNF "正常位Ａ绝顶经验"
CASE 107 ;后背位Ａ绝顶经验
	RETURNF "后背位Ａ绝顶经验"
CASE 108 ;骑乘位Ａ绝顶经验
	RETURNF "骑乘位Ａ绝顶经验"
CASE 109 ;对面座位Ａ绝顶经验
	RETURNF "对面座位Ａ绝顶经验"
CASE 110 ;背面座位Ａ绝顶经验
	RETURNF "背面座位Ａ绝顶经验"
CASEELSE
	RETURNF EXPNAME:ARG
ENDSELECT