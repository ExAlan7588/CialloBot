;*************************************************************************************
;	アリス・マーガトロイド　口上
;
;	「メモという名の私的落书き」
;	好き勝手やってるのでソースめっちゃ污い　そのうちきっちりするって私の中のサグメさんが言ってた
;	テンプレートさんには【崩坏】がついてる
;	可読性さんなら放してやった
;	他人が見ても理解不能な部分多いと思うので、仕様・实装口上一览.txtを見ることをオススメします
;
;
;・わたしのかんがえたさいきょうありすちゃん！の设定？
;	关系が進むと素直になっちゃう感じか
;	妄想エロ乙女（百合用語だったか
;	处女だけど耳年増
;	自主トレ(おなにー)の研究は欠かさない　つまり自分磨き！
;	外国人风なので海外との文化差などあればつけたい（イメージ的にイギリス人的な
;	上海の扱いに困る（お助けキャラとして使ってみる）
;	絶対镜見る回数多いわー自分が一番可爱く映る角度知ってるわー……一般女子なら普通か
;	なんでもさせてくれる普通の子と、なにもさせてくれない美人どっｔ……なんでもさせてくれるアリス←それな
;	母性は高め、甘やかしたがりのくせに　"寂したがり"
;	恋慕になると男を駄目にする典型こわい
;
;・シチュエーションプレイ、自主トレを7种类用意したい
;	自慰暴露イベント、くっそ头悪そうなこと言わせたい
;	アリスの受け攻め妄想は7种 合計14种
;	自主トレメニュー
;	1姫受け　2わんこ受け　3襲い受　4强气受け　5健气受け　6小悪魔受け　7诱い受け
;	1年上攻め　2强气攻め　3鬼畜攻め　4わんこ攻め　5ヘタレ攻め　6女王様(俺様)攻め　7言叶攻め？
;	七色の妄想を使いこなすアリス
;	调教コマンド(エロ系のやつ)をタイプ分けにして、あとでごっこ遊び(口上だけ変える)に使えるようにしたい
;	恋人同士で无理矢理えっちごっごとかいいじゃない！　とりあえずランダム喘ぎで攻め4、攻め3パターン作りました
;	基本2パターンをテキスト分けで装饰を変えるだけなので労力は少なくて済む設計になってるはず……
;
;	眠奸は寝たふりとかいいんじゃないかな（くっ……どこ触ってんのよ///）←起きるに起きられないみたいなの
;	眠奸まだ仕様よくわかってないので后で考える
;
;・贞操観念は普通で他の女に手出ししてても構わない
;	最后に戻ってくればいいと思ってる
;	実は1番じゃなきゃヤダっていう面倒くさい感じ
;	病まない程度に嫉妬させると可爱いんじゃないかな
;	マスターに他に恋人がいるとヘタれる。側室希望
;
;・诱い受けを装った小悪魔受け
;	こわいわー魔女こわい
;
;
;*************************************************************************************
;	□口上书く上での落书きメモ
;
;	素人考えのぷろぐらむ的なこと
;	なるべく后で手出ししやすいように
;	英語が不自由でも气にしない、そもそも日本語すら危うい
;	KISSの原則を忘れるな→忘れてないけど无理でした！
;	関数作るときは头にK17つける　コマンド系は末尾に追加
;	SELECTCASEとswitchは違う（戒め
;	テキスト主体位置はできるだけインデント左寄せ优先で处理を考える　でかいIFとか作るならRETURNで返しちゃう
;	関数内の変数はstatic？外部参照できないけど保持はされるらしいので初期化に气をつける
;	グローバルいじるときもなるべく17つけて、キャラ番号が変わっても対応できる設計に。念のため他所様に迷惑かけないこと
;	こっち側でできるだけ自己修正机能持たせる
;	変数名の头に数值iか文字列cとかsをなるべくつける　引数も名前変更するかぁ……
;
;	口上的なこと
;	あなた(プレイヤー)の呼び方
;	台詞中	%K17_CNAME()%	そのうち呼び方も入力で変えられるようにしようか迷う　現在の仕様は关系でちょっと変わるくらい
;	地の文	%CALLNAME:MASTER% %CALLNAME:TARGET%
;	イベント、特に一度しか通らないところはランダム要素控えめに　パラメーターの差异はあり
;	逆に何度も通るとこはRAND_SPLITで多いように見せかける
;	「おなにー」「えっち」ひらがなで言わせてみる
;	勃つ、插れる漢字使い分ける
;	长くなる场合なるべく3～4行のブロック分けする
;
;******************************************************************************
;		[更新履历]
;-2016-
;08/30	Ver0.00				夏休み最終日になんか思い立ってEmueraの勉强开始　一ヶ月后にリリース目指す
;09/30	α版				初リリース予定日 進捗だめです　ぐぬぬ、日曜日までバグ取り气になる箇所デバッグ
;10/03	α版 Ver0.01		初リリース
;10/08	α版 Ver0.02		主にコマンドの修正　关系性最高值时のヒント表示でエラー落ちする不具合修正
;10/14	α版 Ver0.02修正	イベント.ERBのみ修正パッチ　スレでのエラー報告を修正
;10/28	α版 Ver0.03		主にコマンド追加
;11/15	α版 Ver0.03修正	パッチ対応
;11/25	β版 Ver0.10		主に诶嘿嘿系のコマンドを追加
;11/27	β版 Ver0.10修正	K17_ROUNDの0除算修正
;11/28	β版 Ver0.11		主に修正　少し追加
;12/15	β版 Ver0.12		胖次输送の新仕様に対応　コマンド少し追加
;12/25	β版 Ver0.13		ライセンスを整理　copyrightを削除
;
;**** FlagManagement **********************************************************
;本口上にて変更しているCFLAG・TCVAR等　メモ
;本口上内だけで使用しているCFLAG・TCVAR等 念のため17を入れておく
;タグ　M_KOJO_K17_追加ライブラリ.ERH　参照　単純にその要素番号がなんのフラグか忘れちゃわないように名前つけてるだけ
;
;
;	[TALENT]	[タグ]						[説明]						[備考]
;TALENT:17:11	K17C_TALENT_态度			态度						刻印、イベントで变动
;TALENT:17:13	K17C_TALENT_プライド		プライド					刻印、イベントで变动
;
;	[TFLAG]
;TFLAG:120		キスマーク					キスマークのフラグ			本体で使っているもの、口上内で追加あり
;
;	[TCVAR]		[タグ]						[説明]						[備考]
;TCVAR:17:183	キスキャンセル
;TCVAR:17:350	K17C_TC_デートイベ完走		デートイベント再入フラグ	一日一回
;TCVAR:17:351	K17C_TC_デートイベ判定		デートイベント再入フラグ	判定だけなら何度でも
;TCVAR:17:352	K17C_TC_お澡堂イベント		一日一回					追い出されたら判定もおしまい连打禁止
;TCVAR:17:353	K17C_TC_上海				一日一回
;TCVAR:17:354	K17C_TC_朝フェラ			一日一回					マスターが先に起きている场合も飛ばしちゃう
;TCVAR:17:355	K17C_TC_スキンシップ		ランダムの设定				毎回ランダムを一日一回设定して朝起きたら戻るはず
;TCVAR:17:356	K17C_TC_诶嘿嘿主导权		诶嘿嘿开始时の主导权		アリスからならキャラID MASTERからなら-1 終了时0で初期化
;TCVAR:17:357	K17C_TC_积攒度		积攒度の一时保存		推倒时、アリスの积攒度　押し倒されらMASTERの精力
;TCVAR:17:358	K17C_TC_人形劇フラグ		人形劇を見たかのフラグ		全部見ると立つ
;TCVAR:17:359	K17C_TC_タイプ一时保存		喘ぎタイプの一时保存		喘ぎタイプを切り替えする时の一时保存　主に拘束系
;TCVAR:17:360	K17C_TC_中出しカウント		MASTERの射精カウント		1回の中出し回数のカウント
;
;	[CFLAG]		[タグ]						[説明]						[備考]
;CFLAG:17:11	被掌握把柄					口上内で追加点灯			自慰暴露手を出しても点灯 同居自慰でも同等のイベント发生させてみている
;CFLAG:17:11	掌握把柄					口上内で追加上下			スキンシップでお仕置きキスマークと同动作あり
;CFLAG:17:13	约会后EVENTFLAG		DATE_EVENT再利用に伴う		UPDATEでバグ修正勝手にします（アリスのみ
;CFLAG:17:324	情事目击					問い詰め用					アリスが恋人　もしくはマスターに恋人がいない场合の知り合いのみ

;CFLAG:17:1001	K17C_CF_素質変化フラグ		素質変化させるかのフラグ	0で未设定(変化あり) 1で変化あり　-1で変化なし
;CFLAG:17:1002	K17C_CF_FKマスター			キス用フラグ				0でまだ　1でした　MASTER用　ついでにカウントしてく
;CFLAG:17:1003	K17C_CF_FKアリス			キス用フラグ				0でまだ　1でした　アリス用　ついでにカウントしてく
;CFLAG:17:1004	K17C_CF_FK					初吻のフラグ		お互いの初きっす　どっちがしたか 1でアリス　-1でMASTERでいいかな
;CFLAG:17:1005	K17C_CF_デートイベント		デートイベントフラグ		0でまだ　1でした
;CFLAG:17:1006	K17C_CF_告白イベント		告白イベントフラグ			0でまだ　1でした　ついでにカウント
;CFLAG:17:1007	K17C_CF_性癖取得			性癖取得フラグ				0でまだ　1でした
;																		性技废止　快乐刻印で対応　使ってないので平气
;CFLAG:17:1009	K17C_CF_上海イベント		上海イベント				发生设定フラグ　0で未发生-1で发生抑制　やる场合はついでにカウント
;CFLAG:17:1010	K17C_CF_上海好感度			上海好感度					ちょっとしたおまけ　カウント方式
;CFLAG:17:1011	K17C_CF_人形台詞表示设定	人形台詞表示设定			口上中に人形の台詞を表示させるかの设定　イベントとは无关系　0で未设定　1表示　-1非表示
;CFLAG:17:1012	K17C_CF_自慰暴露追加イベ	自慰暴露追加イベ完走フラグ	0bitが鑑賞　1bitが自慰暴露ックス
;CFLAG:17:1013	K17C_CF_オナニーフラグ		夜オナニーのフラグ			アリスちゃんゆうべはおたのしみでしたね　のフラグ　オナニーから遭遇したら消灯
;CFLAG:17:1014	K17C_CF_お友達イベント		お友達のフラグ				新設した关系性のフラグ そのうちイベント作る　イベントに関わらず关系あげる　保存はイベント后orUPDATE
;CFLAG:17:1015	K17C_CF_喘ぎRT				喘ぎRELATION_TYPE			グローバル保存しておく喘ぎで使うRT
;CFLAG:17:1016	K17C_CF_喘ぎタイプ			喘ぎタイプ					グローバル保存しておく喘ぎタイプ　绝顶とかまたぐやつもこれでなんとか
;CFLAG:17:1017	K17C_CF_喘ぎ部位			喘ぎ部位					グローバル保存しておく喘ぎ部位　ABL基準
;CFLAG:17:1018	K17C_CF_疑い			パンツ没収or时间停止の疑い值	パンツ没収or时间停止解除时の疑い　カウント式で貯まると时间停止暴露になる 100まで
;CFLAG:17:1019	K17C_CF_パンツ没収			アリスのパンツ没収			アリスが自身のパンツを没収したことがあるかを保存する
;
;CFLAG:17:1100	K17C_CF_RTF					取得フラグ保存				RTF初回判定用保存用　UPDATEで再设定するときとか使う
;CFLAG:17:1101	K17C_CF_VER					バージョン番号				口上のバージョンを保存　更新するの忘れない……忘れそう
;CFLAG:17:1110	K17C_CF_受け既読			妄想の既読フラグ			受け妄想	既読フラグ読まれていないものから优先的に　妄想种类の必ず连番で使うこと
;CFLAG:17:1111	K17C_CF_攻め既読			妄想の既読フラグ			攻め妄想	全取得で完全ランダム
;CFLAG:17:1120	K17C_CF_喘ぎタイプ选择回数	経験タイプの保存			1120番代+タイプ番号　喘ぎタイプ选择回数を保存　10kまで
;
;
;	[CSTR] FIRSTTIMEで独自にぶっこんでる文字列　基本初回判定で読み飛ばしのためなんかに使う
;デートイベント
;告白イベント
;パンツ没収
;自慰暴露
;自慰暴露鑑賞初回
;自慰暴露ックス初回
;修羅场					神綺様、梦子限定でプチ修羅场
;押し倒され				アリスがマスターを推倒た初回
;推倒喘ぎタイプ选择
;脱衣
;上海イベント
;スキンシップ各番号0～8
;コマンド通常处理初回口上　SELECTCOM+口上（选择时ではなく通常口上に入ったかを見る　初回失敗などで弾かれた场合を考慮するため）
;
;******************************************************************************
;### 口上存在判定 ###################################
@M_KOJO_K17(ARG)
;ここでRESULTSを设定すると他の同キャラ口上を突っ込まれても正常动作する
;RESULTS = _TEST_
;と设定すると、"EVENT"系イベントだと
;M_KOJO_TEST_EVENT_K17_1() とかで呼ばれる……はず。（未テスト机能）
;ここでCFLAGやTALENTを利用する场合、キャラ番号が必須です
;眠奸口上有に1を入れると、眠奸时にコマンド口上が読み込まれるように

CFLAG:K17C_ID:眠奸口上有 = 1
RETURN 1
;### 口上色判定 ###################################
@M_KOJO_COLOR_K17
SETCOLOR K17C_アリスCOLOR
;ここでSETCOLORすることで口上に色を付けられます
;例：SETCOLOR 0xC07070
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"UPDATE判定"
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_UPDATE_K17
;口上独自のUPDATE用
;ENCOUNTER専用に独自分岐フラグを仕込んだ场合等にどうぞ
;UPDATE判定でCFLAGを使う场合、キャラ番号の指定が必要になります
#DIM DYNAMIC TEMP=0
CALL COLORMESSAGE("妄想エロ乙女アリス　设定・UPDATE开始",K17C_アリスCOLOR,1)
;******************************************************
;素質変更设定
;******************************************************
IF CFLAG:K17C_ID:K17C_CF_素質変化フラグ == 0
	PRINTL
	CALL CHOICE ("本口上によるアリスの素質変化をさせますか？","変化させる","変化させない")
	PRINTL
	SELECTCASE RESULT
		CASE 0
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = 1
			PRINTFORMDL 以降の行动によって素質が変わることがあります
		CASE 1
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = -1
			PRINTFORMDL 以降、本口上による素質の変化は行われません
	ENDSELECT
ENDIF

;******************************************************
;人形について　キャラがいたら停止する
;******************************************************
TEMP = K17_GET_DOLL(0)
SIF !TEMP
	CFLAG:K17C_ID:K17C_CF_人形台詞表示设定 = -1
SIF !(TEMP & K17C_上海)
	CFLAG:K17C_ID:K17C_CF_上海イベント = -1

IF CFLAG:K17C_ID:K17C_CF_人形台詞表示设定 == 0
	PRINTL
	PRINTFORMDL このアリス口上内では稀に人形（\@K17_GET_DOLL(K17C_上海) ? 上海# \@　\@K17_GET_DOLL(K17C_蓬莱) ? 蓬莱#\@）が喋ったりします
	PRINTFORMD こんな感じ→
	TRYCALL K17_人形台詞(K17C_上海,0)
	TRYCALL K17_人形台詞(K17C_蓬莱,1)
	RESETCOLOR
	PRINTFORMDL 現在の设定[保留中-喋ります]
	PRINTL
	CALL CHOICE("人形の台詞を表示しますか？","とりあえず保留","喋っていてもいいよ","黙らせる")
	SELECTCASE RESULT
		CASE 0
			PRINTFORMDW 保留しました。UPDATEするとまた选择肢がでます
			SIF !FLAG:口上色
				PRINTFORMW なお口上色の设定がOFFだと見分けがつかないと思います
		CASE 1
			PRINTFORMDW 喋るように设定しました
			CFLAG:K17C_ID:K17C_CF_人形台詞表示设定 = 1
			SIF !FLAG:口上色
				PRINTFORMW なお口上色の设定がOFFだと見分けがつかないと思います
		CASE 2
			PRINTFORMDW 黙るように设定しました
			CFLAG:K17C_ID:K17C_CF_人形台詞表示设定 = -1
	ENDSELECT
ENDIF

;******************************************************
;この口上を使うためのだけのバグを勝手に修正
;******************************************************
;eraTW4.43修正前のセーブデータ
;约会后EVENTFLAGバグ修正 報告修正済み
;澡堂の值が代入されていたため、コマンド选择する度に时间が入っていた模様
;フラグでは3までしかならないはずなので、とりあえず4以上なら修正
IF CFLAG:K17C_ID:约会后EVENTFLAG > 3
	PRINTFORM 「约会后EVENTFLAGバグを検知...
	CFLAG:K17C_ID:约会后EVENTFLAG = 0
	PRINTFORM 初期化...
	
	IF CFLAG:K17C_ID:K17C_CF_デートイベント && (CFLAG:K17C_ID:既成事实 & 合意_キス)
		SETBIT CFLAG:K17C_ID:约会后EVENTFLAG , 0
		PRINTFORM 1更新...
	ENDIF
	IF CFLAG:K17C_ID:K17C_CF_告白イベント && (CFLAG:K17C_ID:既成事实 & 合意_恋人)
		SETBIT CFLAG:K17C_ID:约会后EVENTFLAG , 1
		PRINTFORM 2更新...
	ENDIF
	
	PRINTFORMW 修正しました」
ENDIF

;見つけちゃった稀なやつ
;年齢バグの修正
;IF TALENT:MASTER:年齢 == -2
;	PRINTFORM 「年齢数值バグを検知...
;	TALENT:MASTER:年齢 = 0
;	PRINTFORMW 修正しました」
;ENDIF
;
;;体型バグの修正
;IF TALENT:MASTER:体型 == -3
;	PRINTFORM 「体型数值バグを検知...
;	TALENT:MASTER:体型 = 0
;	PRINTFORMW 修正しました」
;ENDIF

;******************************************************
;口上入れてからのロード时の対応
;とりあえず关系性を増減した场合は対応できるように
;******************************************************
;保存フラグの更新
IF K17_RT_FG(K17C_ID) != CFLAG:K17C_ID:K17C_CF_RTF
	
	;イベントフラグ再设定なんか巧いやり方考える
	;セーブデータからキスコマンド选择したか无理矢理探す
	IF !(FIRSTTIME(312,1,K17C_ID) || !FIRSTTIME(20,1,K17C_ID)) && !CFLAG:K17C_ID:K17C_CF_FKマスター
		PRINTFORM 「特定SELECTCOM FIRSTTIMEを検知...
		CFLAG:K17C_ID:K17C_CF_FKマスター = 1
		PRINTFORMW フラグを更新しました」
	ENDIF
	
	PRINTFORM 「保存フラグの差异を検知...
	CFLAG:K17C_ID:K17C_CF_RTF = K17_RT_FG(K17C_ID)
	PRINTFORMW フラグを更新しました」
	PRINTFORML 次回ヒントを表示します
	PRINTL
	TRYCALL K17_HINT()
	PRINTW
ENDIF
;******************************************************
;口上のバージョン管理
;INTなんで小数点第2を1桁目とするかな
;こんな脆弱なものでいいのか……？（怯え
;******************************************************
IF CFLAG:K17C_ID:K17C_CF_VER < K17C_VER
	
	PRINTFORM 口上のバージョン差异を検知、UPDATE、自己診断を开始...
	
	;------------
	;Ver 0.02
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 002
		;裙子めくりで与えた既読を取り消し修正 动作テストおｋ
		;CSTRから指定文字列を検索して削除　/切り詰め
		TEMP = K17_AUTO_SPLIT_NUM(CSTR:K17C_ID:0,"/","330口上")
		
		;既読＆現条件式を見る
		IF CFLAG:K17C_ID:好感度 <= 5000 && TEMP != -1
			;既読を取り消し
			CSTR:K17C_ID:0 = %K17_CHANGE_SPLIT(CSTR:K17C_ID:0,"/",TEMP)%/
			;修正アナウンス
			CALL COLORMESSAGE("\nコマンド：裙子をめくる。の既読を未読に再设定しました...",K17C_蓬莱COLOR,1)
			CALL COLORMESSAGE("判定基準が前Verから変わりました、再度选择挑戦してみてください...",K17C_蓬莱COLOR,1)
		ENDIF
	ENDIF
	;------------
	;Ver 0.03
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 003
		;新フラグの初期设定　しなくてもいいけど一応
		IF !CFLAG:K17C_ID:K17C_CF_喘ぎRT
			PRINTFORM \n新しく追加されたフラグの初期设定をします...
			CALL K17_SET_AUTO_PVOICE(-1,-1,K17C_受け_おねだり系)
			PRINTFORMW 设定しました
		ENDIF
	ENDIF
	;------------
	;Ver 0.10
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 010
		;新フラグの初期设定　喘ぎタイプの保存
		PRINTFORML \nVer0.10の更新を行います...
		IF CFLAG:K17C_ID:既成事实 & 合意_诶嘿嘿
			PRINTFORM 诶嘿嘿合意を検知...
			PRINTFORM \n新しく追加されたフラグの初期设定をします...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_おねだり系)
			PRINTFORMW 设定しました
		ENDIF
		;性骚扰
		IF !FIRSTTIME("(313|315|316)口上",1,K17C_ID)
			PRINTFORM 性骚扰コマンドの経験を検知...
			PRINTFORM \n新しく追加されたフラグの初期设定をします...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_合意襲い系)
			PRINTFORMW 设定しました
		ENDIF
		;自慰暴露ックス経験してれば无理矢理系保存
		IF !FIRSTTIME("自慰暴露ックス初回",1,K17C_ID)
			PRINTFORM 自慰暴露ックスの経験を検知...
			PRINTFORM \n新しく追加されたフラグの初期设定をします...
			CALL K17_SET_AUTO_PVOICE(,,K17C_受け_无理矢理系)
			PRINTFORMW 设定しました
		ENDIF
		;押し倒されたことあれば基本を保存
		IF !FIRSTTIME("押し倒され",1,K17C_ID)
			PRINTFORM 押し倒され経験を検知...
			PRINTFORM \n新しく追加されたフラグの初期设定をします...
			CALL K17_SET_AUTO_PVOICE(,,K17C_攻め_お手伝い系)
			PRINTFORMW 设定しました
		ENDIF
		
	ENDIF
	;------------
	;Ver 0.13
	;------------
	IF CFLAG:K17C_ID:K17C_CF_VER < 013
		;MIN内でインクリメントしていたバグがあったため
		;経験していても、フラグ值が加算されていないデータ用
		IF CFLAG:K17C_ID:K17C_CF_上海イベント == 0 && FIRSTTIME("上海イベント",1,K17C_ID)
			PRINTFORM 上海イベント経験を検知...
			CFLAG:K17C_ID:K17C_CF_上海イベント++
			PRINTFORM \nフラグ值を加算しました、长い间バグ发見出来ず申し訳ありませんでした\n
		ENDIF
		
		IF CFLAG:K17C_ID:K17C_CF_告白イベント == 0 && FIRSTTIME("告白イベント",1,K17C_ID)
			PRINTFORM 告白イベント経験を検知...
			CFLAG:K17C_ID:K17C_CF_告白イベント++
			PRINTFORM \nフラグ值を加算しました、长い间バグ发見出来ず申し訳ありませんでした\n

			IF K17_RT_FG(K17C_ID) != CFLAG:K17C_ID:K17C_CF_RTF
				PRINTFORM 「保存フラグの差异を検知...
				CFLAG:K17C_ID:K17C_CF_RTF = K17_RT_FG(K17C_ID)
				PRINTFORMW フラグを更新しました」
				PRINTFORML 次回ヒントを表示します
				PRINTL
				TRYCALL K17_HINT()
				PRINTW
			ENDIF
		ENDIF

	ENDIF
	;------------
	;口上バージョンの更新
	;------------
	CFLAG:K17C_ID:K17C_CF_VER = K17C_VER
	PRINTFORMW ...バージョンを更新しました
	
ELSEIF CFLAG:K17C_ID:K17C_CF_VER  == K17C_VER
	PRINTFORML 現在最新バージョンです
ELSE
	PRINTFORML セーブデータと口上のバージョンが一致しませんでした
	PRINTFORML セーブデータ　Ver. {CFLAG:K17C_ID:K17C_CF_VER/100}.{CFLAG:K17C_ID:K17C_CF_VER%100/10}{CFLAG:K17C_ID:K17C_CF_VER%10}
	PRINTFORML 現在の口上　　Ver. {K17C_VER/100}.{K17C_VER%100/10}{K17C_VER%10}
ENDIF

CALL COLORMESSAGE(@"妄想エロ乙女アリス　设定・UPDATE終了",K17C_アリスCOLOR,1)
;なんだこの計算は（驚愕 あっれーなんかこういう命令なかったっけ
PRINTFORMW Ver. {K17C_VER/100}.{K17C_VER%100/10}{K17C_VER%10}
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"ENCOUNTER"系イベント（エクストラ構文）
;※※※※※※※※※※※※※※※※※※※※※※※※※※
@M_KOJO_ENCOUNTER_K17
#DIM DYNAMIC iDoll,2	;人形フラグ

;初対面、挨拶のタイミング
;TALENTの変更はここでどうぞ
;******************************************************
;人形について　キャラがいたら停止する
;******************************************************
SIF !K17_GET_DOLL(K17C_上海)
	CFLAG:K17C_ID:K17C_CF_上海イベント = -1
SIF !K17_GET_DOLL(0)
	CFLAG:K17C_ID:K17C_CF_人形台詞表示设定 = -1
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止

	PRINTL
	
	;知り合いの扮演　ドッペルギャンガー未対応
	IF FLAG:扮演 && K17_GET_FRIENDS(FLAG:扮演)
		PRINTFORML 「%K17_GT()%、%K17_CNAME()%」
		PRINTFORML 「……%K17_CNAME()%、よね？」
		PRINTFORMDL %CALLNAME:TARGET%はなぜか首をかしげていた
		RETURN 1
	ENDIF
	
	
	;地域セレクト　地域で特别な会话などここで书く
	;魔法の森～人形の洋館まで　据点できたら追记する
	;魔法の森非自宅时で魔法の森で会った时
	IF MAIN_MAP != 5 && CFLAG:当前位置 >= 森の入り口 && CFLAG:当前位置 <= 人形の洋館
	
		;人かどうかの判定
		IF !(TALENT:MASTER:狐 || TALENT:MASTER:妖狐 || TALENT:MASTER:吸血鬼 ||TALENT:MASTER:动物耳)
			PRINTFORML 「あら？　……こんな场所まで来る人间なんて珍しいわね」
		ELSE
			PRINTFORML 「あら？　……こんな场所まで来る人……妖怪かしら？　珍しいわね」
		ENDIF
		PRINTFORMDL 現れたのは、幻想郷では珍しい西洋风の颜つきの女性だった
		PRINTFORMDL 透き通るような白い肌に、スラリと伸びた手が金髪に触れる
		PRINTFORMDL 頬を流れるように髪が\@ TIME:2 < 5 ? 陽の光に照らされて # 月明かりの中でも \@煌めいて見えた
		PRINTFORML 「私はこの森に住んでいるのだけれど……もしかして迷子かしら」
		PRINTFORML 「こんなところ一人でふらふらと歩いていては危険よ」
		PRINTFORMDL 心配するようにそう言って、柔らかく微笑んだ
		PRINTFORMDL 多少危険な森の中でも、こんな美人な少女と出会えるならそれも悪く无いと思える
		PRINTFORML 「…………」
		PRINTW
		PRINTFORML 「……初対面の相手に対して随分と軽薄ね」
		PRINTFORMDL そう言って视线を逸らす彼女だが少し照れているようにも見えた
		PRINTFORML 「せいぜい悪い魔法使いに騙されないことね」
		PRINTFORMDL そんな魔法使いがいるのだろうか？
		PRINTFORML 「ふふっ、さてどうかしらね」
		PRINTW
	
	;魔法の森が自宅の场合で据点で会った　とりあえず仮置き
	ELSEIF MAIN_MAP == 5 && INRANGE(CFLAG:MASTER:当前位置,500,599)
			
		PRINTFORML 「%K17_CNAME()%、もしかして最近この辺りに来た人かしら……」
		PRINTFORMDL 現れたのは、幻想郷では珍しい西洋风の颜つきの女性だった
		PRINTFORMDL 透き通るような白い肌に、スラリと伸びた手が金髪に触れる
		PRINTFORMDL 頬を流れるように髪が\@ TIME:2 < 5 ? 陽の光に照らされて # 月明かりの中でも \@煌めいて見えた
		PRINTFORMDL まるでよくできた人形のようだと思ったら失礼なのだろうか
		PRINTFORMDL それにしてもよくできすぎていた
		PRINTW
		PRINTFORML 「なにか困ったことでもあったかしら？」
		PRINTFORML 「なにかあったらすぐに言うのよ。悪い状况は放っておいても好转しないわ」
		PRINTFORMDL 心配するようにそう言って、柔らかく微笑んだ
		;自室
		IF CFLAG:K17C_ID:当前位置 == CFLAG:K17C_ID:初始位置
			PRINTFORML 「それとここは素人には危険なものも置いてあるから、許可无く立ち入るのはやめなさい」
		ELSE
			PRINTFORML 「特にこの辺りは危険な场所だから气をつけなさい」
		ENDIF
		PRINTFORMDL 多少危険な场所でも、こんな美人な少女と会えるならそれも悪く无いと思える
		PRINTFORML 「…………」
		PRINTW
		PRINTFORML 「……初対面の相手に対して随分と軽薄ね」
		PRINTFORMDL そう言って视线を逸らす彼女だが少し照れているようにも見えた
		PRINTFORML 「せいぜい悪い魔法使いに騙されないことね」
		PRINTFORMDL そんな魔法使いがいるのだろうか？
		PRINTFORML 「ふふっ、さてどうかしらね」
	
	;人里広场
	ELSEIF CFLAG:MASTER:当前位置 == CFLAG:K17C_ID:职场 && CFLAG:K17C_ID:职业种类 == K17C_职业种类_人形劇
		;人形劇中
		IF !CHARA_HOLIDAY(K17C_ID) && BASE:17:工作量 && TCVAR:K17C_ID:仕事开始 <= TIME && TCVAR:K17C_ID:仕事終了 >= TIME
			PRINTFORMDL 人集りに目をやると小さな人形劇が行われていた
			PRINTFORMDL 操者は西洋风の颜つきの女性で、操っている人形も舶来品のようだった
			PRINTFORMDL 白く透き通るような肌のか细い指が複雑に动いては、
			PRINTFORMDL キラキラと光の糸が煌めいて、小さな人形がくるくると巧みに踊っていた
			PRINTFORMDL しばらくして、人形がトコトコと目の前まで来ると、
			PRINTFORMDL %CALLNAME:MASTER%に向かって手を伸ばしてくる
			TRYCALL K17_人形台詞(K17C_上海,0)
			TRYCALL K17_人形台詞(K17C_蓬莱,1)
			CFLAG:K17C_ID:K17C_CF_上海好感度+=20
			PRINTFORMDL %CALLNAME:MASTER%は人形の手に指で触れながら自己紹介をした
			PRINTW
			PRINTFORMDL よく出来た人形だ、ぶんぶんと大仰に腕を振って笑ったように見えた
			PRINTFORMDL それに人形を操作してる女性の腕がとても素晴らしい
			PRINTFORMDL %CALLNAME:MASTER%はしばらく人形劇を見物していた
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMDL 人集りが一时的に途切れるのみて、人形を操っていた少女ふと笑いかける
			PRINTFORMDL そして裙子の端を軽く持ち上げ恭しくお辞儀をした
			PRINTFORMDL そんな可憐な姿に%CALLNAME:MASTER%は拍手を贈った
			PRINTW
		ENDIF
		
	;大图书館
	;自宅が红魔館の时は场所が違うのでそれぞれ判定して
	ELSEIF (CFLAG:当前位置 == 大图书館 && GET_MAPID(CFLAG:当前位置) == 3 && MAIN_MAP != 3) || (MAIN_MAP == 3 && CFLAG:当前位置 == 310)
		
		PRINTFORML 「こんなカビ臭い场所に来る者は、はたして泥棒か知的探求者か……？」
		PRINTFORML 「どちらにしても知识を盗むのは一绪ね」
		PRINTFORMDL えっと……？　とりあえず泥棒ではない
		PRINTFORMDL それに知识は学习するものだろう
		PRINTFORML 「その学习がないのが、よく强盗に来るらしいわよ」
		PRINTFORMDL 警備も学习した方が早そうだな
		PRINTFORML 「まあそうなんだけど。睡眠学习じゃあ、役に立たないのよね」
		PRINTW
		;ぱっちぇさんかこあがいる场合
		IF CFLAG:MASTER:当前位置 == CFLAG:54:当前位置 || CFLAG:MASTER:当前位置 == CFLAG:59:当前位置
			PRINTFORMDL こほん、こほん、と、わざとらしい咳が響いた
			PRINTFORML 「ごめんなさい、五月蝿くするつもりはなかったのだけれど……」
			PRINTFORML 「ここの管理者は色々と厄介なのよ」
		ENDIF
		PRINTFORML 「まあいいわ……ちょっと、こっちへ」
		PRINTFORMDL 彼女が手招きして迷惑にならなそうな场所まで退避した
		PRINTFORML 「ここであまり見かけない颜がいたので、つい声掛けてしまったけど他意はないわ」
		PRINTW
	ENDIF
	
	;～汎用～
	;以下に繋がるように↑を书く　条件に合わない时ここだけ表示
	
	PRINTFORMDL 气づくと目の前を人形がふよふよと飛んでいた
	PRINTFORMDL %CALLNAME:MASTER%はその光景にしばらく目を奪われてしまう
	PRINTFORML 「あら、人形がそんなに珍しいのかしら」
	SIF MAIN_MAP!=5
		PRINTFORML 「……それにしても最近新颜がまた増えたって噂で聞いたけど……」
	PRINTFORMDL なぜか值踏みされるようにしげしげと見られる
	PRINTFORMDL %CALLNAME:MASTER%は紧张しつつ軽く自己紹介をした
	PRINTW
	PRINTFORML 「紹介が遅れたわね。初めまして私は%NAME:TARGET%」
	PRINTFORML 「都会派魔法使いよ」
	PRINTFORMDL 都会派……はともかく、魔法使いだったのか
	PRINTFORM 「私は人形遣いでもあるのよ」
	
	;一応キャラ名チェックしとく　謎のこだわり
	TRYCALL K17_人形台詞(K17C_上海,0)
	iDoll:0 = RESULT
	TRYCALL K17_人形台詞(K17C_蓬莱,1)
	iDoll:1 = RESULT
	IF iDoll:0 && iDoll:1
		PRINTFORML 「この子は上海、こっちは蓬莱。よろしくね」
	ELSEIF iDoll:0
		PRINTFORML 「この子は上海。よろしくね」
	ELSEIF iDoll:1
		PRINTFORML 「この子は蓬莱。よろしくね」
	ELSE
		PRINTFORMDL そう言うと人形が%CALLNAME:MASTER%の目の前にやってくる
	ENDIF
	PRINTFORMDL よくできてた人形だ、生きているようにも感じる
	PRINTFORML 「お褒めに預かり光栄。それも自家制よ」
	PRINTFORMDL あの指から伸びた光の糸？　で操っているのだろうか？
	PRINTFORML 「まあ魔法使いとしてそれは秘密ね」
	PRINTFORMDL そう凛とした表情で紹介する%CALLNAME:TARGET%は、
	PRINTFORMDL 魔法使いとしての能力や、手掛ける人形に誇りを持っているように伺えた
	PRINTFORMDL 一見すると反抗的なような态度にも感じる
	PRINTL	
	PRINTFORMDL そんな%CALLNAME:TARGET%に対し%CALLNAME:MASTER%は
	PRINTL
	PRINTFORMDL [0]これからどうなるか乐しみになった
	PRINTFORMDL [1]素直になる%CALLNAME:TARGET%を見てみたいと思った
	PRINTFORMDL [2]そのままの誇り高い%CALLNAME:TARGET%でいてほしいと思った
	PRINTFORMDL [3]この选择肢の説明しろと思った
	$OPENING_INPUT_LOOP1
	INPUT
	PRINTL
	SELECTCASE RESULT
		CASE 0
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = 0
			PRINTFORMDL これから仲良くなるのが乐しみになった
			PRINTW
		CASE 1
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = 1
			PRINTFORMDL これから仲良くなって、素直になる%CALLNAME:TARGET%を見てみたいと思った
			PRINTW
		CASE 2
			CFLAG:K17C_ID:K17C_CF_素質変化フラグ = -1
			PRINTFORMDL これから仲良くなったとしても、%CALLNAME:TARGET%はきっと誇り高いままなんだろう
			PRINTW
		CASE 3
			PRINTFORMDL [0]を选ぶと素質変化ありのまま保留されます UPDATEで一度だけ変更できます
			PRINTFORMDL [1]を选ぶと以降の行动によって素質が変化する、で固定されます
			PRINTFORMDL [2]を选ぶと素質は変化なし、で固定されます
			PRINTFORMDL 口上上の見た目はどちらを选んでも変わりません
			PRINTFORMDL 进行难易度が変わるかと思われます
			;PRINTFORMDL どっちにしろ恋慕がつけばデレる
			GOTO OPENING_INPUT_LOOP1
		CASEELSE
			GOTO OPENING_INPUT_LOOP1
	ENDSELECT
ENDIF
RETURN 1



;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"SP_EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;デート帰りにファーストKISS（合意も付く）
;基本キャンセルされる、初吻を終えると
;二度と見られなくなりますが
;本口上では救済される……はず
;テスト成功　多分行けます
;告白イベントと连动开始
;1度キスキャンセルしたら选择肢はパスする形に
;==================================================
@M_KOJO_SPEVENT_K17_1(ARG,ARG:1)
#DIM DYNAMIC 人气 = 0
#DIM DYNAMIC スキップカウント = 0
#DIM DYNAMIC MAX好感度 = 0
#DIM DYNAMIC 恋人ID = -1
#DIM DYNAMIC MAX好感度ID = -1
#DIM DYNAMIC 顺位 = 1
#DIM DYNAMIC iID_Count = 0

;口上主はTARGET
;CALL SPEVENT_MESSAGE_1(ARG,ARG:1)
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止

PRINTL
	IF FIRSTTIME("デートイベント")
		;初回限定
		PRINTFORMW 「ねえ、ちょっと……」
		PRINTFORMDL なんだろう？　と、振り返ってみると
		PRINTFORMDL %CALLNAME:TARGET%は少し颜を赤らめ、俯いたまま続けた
		PRINTFORML 「ええ……うん、まあちょっとね」
		PRINTFORML 「今日は一日%K17_CNAME()%に付き合ったでしょう」
		PRINTFORML 「だからちょっと私にも付き合いなさいよ」
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW ………………
		PRINTFORML 「これってあれよね、俗に言うデートってやつよね」
		PRINTFORML 「私とこんなことして乐しいのかしら」
		IF TCVAR:TARGET:キスキャンセル == 1
			PRINTFORML 「%K17_CNAME()%はどうだったか、ちゃんと訊いておきたかったのよ」
			PRINTFORMDL もちろん、乐しかった
			RESULT =0
		ELSE
			{
			CALL K17_CHOICE("「"+K17_CNAME()+"はどうだったか、ちゃんと訊いておきたかったのよ」",
							"もちろん、乐しかった","正直あんまり……","そんなことよりパンツください")
			}
		ENDIF
	ELSE
		IF TCVAR:TARGET:キスキャンセル == 1
			PRINTFORMW 「ねえ、今日はどうだった……？」
			PRINTFORMDL もちろん、乐しかった
			RESULT =0
		ELSE
			$DATE_INPUT_LOOP1
			CALL K17_CHOICE("「ねえ、今日はどうだった……？」","もちろん、乐しかった","正直あんまり……","そんなことよりパンツください")
		ENDIF
	ENDIF
	
	
	SELECTCASE RESULT
		CASE 0
			PRINTFORML 「そう、ありがとう。私も乐しかったわ」
		CASE 1
			PRINTFORML 「そう、じゃいいわ……」
			PRINTFORML 「……やっぱり气の迷いか」
			PRINTFORMDL %CALLNAME:TARGET%は小さく独り言ちてすぐさま凛とした颜に戻っていた
			PRINTFORML 「ごめんなさい、なんでもないわ」
			PRINTW
			TCVAR:TARGET:キスキャンセル = 1
			TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
			RETURN 1
		CASEELSE
			スキップカウント++
			IF スキップカウント >= 3
				PRINTFORML 「もういいわ……」
				PRINTW
				TCVAR:TARGET:キスキャンセル = 1
				TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
				RETURN 1
			ENDIF
			PRINTFORML 「%K17_RS("真面目に答えなさいって/ちゃんと話聞きなさいよ")%」
			GOTO DATE_INPUT_LOOP1
	ENDSELECT
	
	PRINTFORMDL ならこのデートは成功だったと思う
	PRINTW
	PRINTFORML 「私は……誰とでもデートするわけじゃないわ」
	PRINTFORML 「あの森で独り、人形と一绪にずっと過ごしているんだと思ってた……」
	PRINTFORML 「でもね、いつか素敵な人と恋をしてみたい、っていう願望もあったのよ……」
	PRINTFORMDL %CALLNAME:TARGET%がじっ、っとこちらを見つめてくる
	
	;人气チェック ついでに恋人が誰か探す　アリスちゃんまじこわい
	MAX好感度 = CFLAG:K17C_ID:好感度
	MAX好感度ID = K17C_ID
	FOR iID_Count,1,CHARANUM
		;出禁　アリス以外を見る
		SIF CFLAG:iID_Count:出禁 || iID_Count == K17C_ID
			CONTINUE
		IF MAX好感度 <= CFLAG:iID_Count:好感度
			MAX好感度 = CFLAG:iID_Count:好感度
			MAX好感度ID = iID_Count
		ENDIF
		SIF CFLAG:K17C_ID:好感度 <= CFLAG:iID_Count:好感度
			顺位++
		SIF TALENT:iID_Count:恋慕
			人气 += 3
		SIF TALENT:iID_Count:思慕
			人气 += 1
		IF TALENT:iID_Count:恋人
			恋人ID = iID_Count
			人气 += 10
		ENDIF
	NEXT
	
	;MASTERに恋人がいてアリスではないとき
	IF !(CFLAG:TARGET:既成事实 & 合意_恋人) && TALENT:MASTER:恋人
		;誰が恋人か見る
		IF K17_GET_FRIENDS(恋人ID)
			;ｈ参照
			PRINTFORML 「それがよりにもよって%K17_CNAME(恋人ID)%の恋人だなんて……」
			PRINTFORML 「これってどういうことなのかしら……」
		;その他の人
		ELSE
			PRINTFORML 「なのに%K17_CNAME()%には、他に恋人がちゃんといるでしょ」
			PRINTFORML 「もしかして私、遊ばれているのかしら？」
		ENDIF
		
	;それ以外
	ELSE
		;最大好感度か、すでに恋人ならここ
		IF MAX好感度ID == K17C_ID || TALENT:MASTER:恋人 == K17C_ID
			PRINTFORML 「だけどこの先も%K17_CNAME()%の一番でいられるか不安なの」
		ELSE
			;あわわわ……
			IF 顺位 <= 5
				PRINTFORML 「なのに私は、%K17_CNAME()%の{顺位}番手ってところでしょ……」
			ELSE
				PRINTFORML 「私は、%K17_CNAME()%のハーレムの一员ってところでしょ……」
			ENDIF
		ENDIF
		
		;人气を見る
		SELECTCASE 人气
			CASE IS >= 10
				PRINTFORML 「だって%K17_CNAME()%、随分とモテるみたいじゃない」
			CASE IS >= 4
				PRINTFORML 「だって%K17_CNAME()%、色んな子に手を出してるみたいじゃない」
			CASE IS >= 1
				PRINTFORML 「だって%K17_CNAME()%、他にも气になる娘がいるんでしょ」
			CASE 0
				PRINTFORML 「%K17_CNAME()%は、何故そんなに私だけに拘るのかしら」
		ENDSELECT
	ENDIF
	
	IF 人气 != 0
		PRINTFORMDL 確かに、%CALLNAME:TARGET%に対して不誠実だったのかもしれない
		;うそだ！
		PRINTFORML 「ごめんなさい、責めてるつもりはないのよ」
		PRINTFORML 「私こういう面倒くさい奴なのよ……」
		
		
		
		IF TCVAR:TARGET:キスキャンセル==0
			$DATE_INPUT_LOOP2
			CALL K17_CHOICE("「それでもまた、诱ってくれるかしら？」","もちろん诱う","さすがに、めんどくさい","そんなことよりパンツほしい")
		ELSE
			PRINTFORML 「それでもまた、诱ってくれるかしら？」
			PRINTFORMDL もちろん诱う
			RESULT = 0
		ENDIF
		
		SELECTCASE RESULT
			CASE 0
				PRINTFORML 「ん、ありがとう。%K17_CNAME()%のやさしさに甘えてるわね」
			CASE 1
				PRINTFORML 「……やっぱり面倒よね」
				PRINTFORMDL %CALLNAME:TARGET%は小さく独り言ちてすぐさま凛とした颜に戻っていた
				PRINTFORML 「ごめんなさい、もう诱ってくれなくていいわ」
				PRINTW
				TCVAR:TARGET:キスキャンセル = 1
				TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
				RETURN 1
				
			CASEELSE
				スキップカウント++
				IF スキップカウント >= 3
					PRINTFORML 「もういいわ……」
					PRINTW
					TCVAR:TARGET:キスキャンセル = 1
					TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
					RETURN 1
				ENDIF
				PRINTFORML 「真剣に話してるつもりなんだけど」
				GOTO DATE_INPUT_LOOP2
		ENDSELECT
		PRINTFORML 「じゃあちゃんと言うわね……」
	ELSE
		PRINTFORMDL %CALLNAME:TARGET%が一番大切だから、それが当たり前のことだと思う
		PRINTFORML 「っ……いえ、ありがとう。%K17_CNAME()%、一途なのね」
		PRINTFORML 「じゃ、じゃあね、そのね、%K17_CNAME()%の气持ちに応えるわね」
	ENDIF
	
	PRINTW
	
	;アリスからキス
	CALL K17_FIRSTKISS_ALICE(TARGET)
	IF RESULT == 0
		;もうアリスからの初吻をしてもらっていた场合
		SELECTCASE K17_GRT(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「爱してるわ……」
			CASE IS >= K17C_思慕
				PRINTFORML 「好きよ……」
		ENDSELECT
		PRINTFORML 「んっ……%K17_HEART()%」
		PRINTFORML 「私から{CFLAG:K17C_ID:K17C_CF_FKアリス}回目のキスね」
		PRINTW
	ENDIF
	
	IF TALENT:MASTER:キス未经验 && TALENT:TARGET:キス未经验
		PRINTFORML 「%K17_CNAME()%の初めて、私が貰っちゃったわね」
		PRINTFORML 「私も初めてが%K17_CNAME()%でよかった……」
		PRINTFORMDL お互いの气持ちが通じたような气がした……
		PRINTW
	ELSEIF TALENT:TARGET:キス未经验
		PRINTFORML 「私の初めてよ」
		PRINTFORMDL %CALLNAME:TARGET%のキスは見た目とは裏腹に初々しかった
		PRINTW
	ELSEIF TALENT:MASTER:キス未经验
		PRINTFORML 「%K17_CNAME()%の初めて奪っちゃったわね」
		PRINTFORMDL %CALLNAME:TARGET%のキスはとても优しかった
		PRINTW
	ENDIF
	
	PRINTFORML 「私からちゃんと气持ち伝えておきたかったのよ……伝わったかしら？」
	PRINTFORMDL その想いは唇から%CALLNAME:MASTER%に十分伝わった……
	PRINTW
	
	IF CFLAG:TARGET:被掌握把柄
		PRINTFORML 「これもあれよ、あれの口止め料よ」
		PRINTFORMDL そういえば弱みを握っていた气がする
		PRINTW
	ELSE
		;つまり诱い
		SIF TALENT:TARGET:恋慕
			PRINTFORML 「いつでも待ってるから……会いに来てね」
		SIF TALENT:TARGET:思慕
			PRINTFORML 「いつでも待ってるから……会いに来なさいよね」
	ENDIF
	
	IF 人气 == 0 && 恋人ID == -1
		PRINTFORML 「……うん、出だしは好調ね」
	ELSEIF 人气 >= 1 && 恋人ID != -1
		PRINTFORML 「……誰にも負けないわ」
	ELSEIF 人气 >= 1
		PRINTFORML 「……うん、出だしはまずまずね」
	ENDIF
	
	;恋人がすでにいる场合
	IF !(CFLAG:TARGET:既成事实 & 合意_恋人) && TALENT:MASTER:恋人
		IF K17_GET_FRIENDS(恋人ID)
			PRINTFORML 「……%K17_CNAME(恋人ID)%にもね」
		;その他の人
		ELSEIF !(恋人ID == -1)
			PRINTFORML 「……恋人にだってね」
		ENDIF
	ENDIF
	PRINTFORMDL %CALLNAME:TARGET%は囁くように耳元で呟いた
	
	;完走マジおつかれ　口上側から呼ぶのも考えて終了处理
	TCVAR:TARGET:キスキャンセル = 0
	CFLAG:K17C_ID:K17C_CF_デートイベント =1
	SETBIT CFLAG:TARGET:约会后EVENTFLAG,0
	TCVAR:K17C_ID:K17C_TC_デートイベ完走 = 1
	CALL K17_RELATION_EV(K17C_RTF_逢引)
	SIF !RESULT
		PRINTW
ENDIF
RETURN 1


;==================================================
;デート帰りに告白（恋人が付く）
;==================================================
@M_KOJO_SPEVENT_K17_2(ARG,ARG:1)
;口上主はTARGET
#DIM EVck=0	;デートイベントに行ってたかチェック
#DIM iRT=0
#DIM iRTF=0

EVck = 0
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;告白内容
	;この告白内容表示后に受けるかどうかの选择分が表示されます
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 0
	
		;-------------------------------------------------
		;デートイベント前に告白に入る场合もあるので先消化
		;-------------------------------------------------
		IF !CFLAG:K17C_ID:K17C_CF_デートイベント
			TCVAR:TARGET:キスキャンセル = 1
			EVck=1
			CALL M_KOJO_SPEVENT_K17_1(TARGET)
			SETBIT CFLAG:ARG:约会后EVENTFLAG , 0
		ENDIF
				
		;各种初期化
		CFLAG:K17C_ID:K17C_CF_告白イベント = MIN(CFLAG:K17C_ID:K17C_CF_告白イベント + 1,10000)
		iRT = K17_GRT(TARGET)
		iRTF = K17_RT_FG(TARGET)
		;-------------------------------------------------
		;初回
		;-------------------------------------------------
		IF FIRSTTIME("告白イベント",1) && EVck==0
			;初回限定　デートイベント経由も飛ばし
			PRINTFORML 「……（よしっ）」
			PRINTFORMDL なんだろう、急に……
			PRINTFORMDL %CALLNAME:TARGET%が两手拳を作って構えている
			PRINTFORML 「……っ……っっ～～～%K17_BLUSH()%」
			PRINTFORMDL が、こちらに向き直ると耳まで真っ赤になって俯いてしまう
			PRINTFORML 「～～～もう、もうもう」
			PRINTFORMDL そしてそのままぽかぽかと叩いてくる
			PRINTFORMDL 痛くはないし、なんだか可爱らしい
			PRINTW
			CALLF FIRSTTIME("告白イベント")
		ENDIF
		
		;-------------------------------------------------
		;二回目以降ここから
		;-------------------------------------------------
		PRINTFORML 「ん、ちょっと……こうさせて……」
		PRINTFORMDL ふいに歩みを止め%CALLNAME:TARGET%が絡めた%CALLNAME:MASTER%の%K17_RS("腕/手")%を引き寄せ、%K17_RS("胸に颜を埋めた/抱きついてきた")%
		PRINTFORMDL そのまま头をこすりつけながら甘えていた
		PRINTW
		
		;MASTERに恋人がいてアリスではないとき　本家からはこない
		IF !(CFLAG:TARGET:1 & 4) && TALENT:MASTER:恋人
			SELECTCASE iRT
				CASE IS >= K17C_恋慕
					IF K17_GET_FRIENDS(TALENT:MASTER:恋人)
						PRINTFORML 「……こんなこと%K17_CNAME(TALENT:MASTER:恋人)%に%K17_RS("悪い/申し訳ない")%ってわかってるの」
					ELSE
						PRINTFORML 「……こんなこと%K17_RS("恋人/本命")%に%K17_RS("悪い/申し訳ない")%ってわかってるの」
					ENDIF
					PRINTFORML 「でも%K17_CNAME()%のこと%K17_RS("好きな/爱してる/大好きな")%のよ」
					PRINTFORML 「私は%K17_RS("ハーレムの末席/ハーレムの一员/爱人/妾/側室")%でいいから、ちゃんと觉えておいてね……」
					PRINTFORML 「……爱してるわ」
				CASE IS >= K17C_思慕
					PRINTFORML 「やっぱりその……こんなこと%K17_RS("よくない/悪い/いけない")%のかしら……」
					PRINTFORML 「でも%K17_RS("やめられないの/止められないの")%……」
					PRINTFORML 「……好きよ」
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%は胸に埋める%CALLNAME:TARGET%の头を抚で続けることしか出来なかった
			
		ELSEIF TALENT:MASTER:恋人 == K17C_ID
			;恋人同士
			PRINTFORML 「ふう……ごめんなさい。いえ、ありがとう、ね」
			PRINTFORML 「髪が……あっ……ぁぅ……」
			PRINTFORMDL なんだかこうして普通に甘える%CALLNAME:TARGET%が珍しくて头を抚で付ける
			PRINTFORML 「こうして恋人同士になったのに、またちゃんとデートしてくれるのね」
			SELECTCASE iRT
				CASE IS >= K17C_性癖
					PRINTFORML 「ねえ%K17_CNAME(0,1)%　好き%K17_HEART()%　大好き%K17_HEART()%　%K17_HEART()%爱してる%K17_HEART()%」
					PRINTFORML 「もうっ、もうもう。なんでこんなに私を爱してくれるのよ」
					PRINTFORML 「本当にいつもありがとう、爱してるわ%K17_CNAME(MASTER,1)%」
				CASE IS >= K17C_恋慕告白
					PRINTFORML 「%K17_RS()%いつも%K17_RS("大事にして/大切にして/爱して/可爱がって")%くれて、ありがとう」
					PRINTFORML 「爱してるわよ」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_CNAME()%って、本当に私の事好きよね……？」
					PRINTFORML 「ううん、私のほうがもっと好きよ」
				CASE IS >= K17C_思慕
					PRINTFORML 「ふふっ……%K17_RS("得点高いわよ/いい心がけよ/私の事よくわかってるのね")%」
					PRINTFORML 「惚れなおしたってこと」
			ENDSELECT
			PRINTFORMDL %CALLNAME:TARGET%が喜んでくれて何よりだった
			PRINTFORMDL %CALLNAME:MASTER%は%K17_RS("大好きな/爱おしい/大切な恋人")%%CALLNAME:TARGET%と乐しいひと时を過ごした
			
			
		;-------------------------------------------------
		;お互いまだ誰とも付き合ってない时 本来の仕様
		;-------------------------------------------------
		ELSEIF !TALENT:MASTER:恋人
			
			;-------------------------------------------------
			;告白　初回
			;-------------------------------------------------
			IF CFLAG:K17C_ID:K17C_CF_告白イベント == 1
				PRINTFORML 「ねえ、私たちって、なんなのかしら……？」
				SIF iRTF & K17C_RTF_キス
					PRINTFORML 「キスはしたし……」
				SIF iRTF & K17C_RTF_诶嘿嘿
					PRINTFORML 「身体の关系も……あるし……」
				SIF !FIRSTTIME("自慰暴露",1)
					PRINTFORML 「家で……あっ、あんなとこも見られちゃったし……」
				
				PRINTFORMDL たしかに……今までお互いの关系をはっきりさせていないかもしれない
				PRINTFORML 「%K17_CNAME()%だってまだ誰とも付き合ってないんでしょ」
				PRINTFORML 「…………」
				PRINTFORMDL それきり言って次の言叶を探しているのか、それとも待っているのか
				PRINTFORMDL %CALLNAME:TARGET%は无言のまま俯き%CALLNAME:MASTER%の服の裾を引っ张っている
				PRINTW
				SELECTCASE iRT
					CASE IS >= K17C_恋慕
						PRINTFORML 「だったら、私とちゃんと付き合って……よ……」
						PRINTFORMDL 颜を上げると真っ直ぐな目で%CALLNAME:MASTER%を見つめ告げてくる
						PRINTFORMW 「私……%K17_CNAME()%を爱してる……の」
						PRINTFORML 「もう%K17_CNAME()%なしの生活なんて考えられないわ……」
						
					CASE IS >= K17C_思慕
						PRINTFORML 「だったら、私とちゃんと付き合って……下さぃ……」
						PRINTFORMW 「……%K17_CNAME()%……すっ……好き……なのょ……%K17_BLUSH(3)%」
						PRINTFORMDL 耳まで真っ赤に染めて蚊の鳴くような声でそう告げた
						PRINTFORML 「%K17_CNAME()%、私のことちゃんと責任取りなさい、よね……」
				ENDSELECT
			;-------------------------------------------------
			;告白　二回目以降　アリス練习してきた！
			;-------------------------------------------------
			ELSE
				PRINTFORML 「ふう……あら、わからない？　これから言うこと……」
				PRINTFORML 「%K17_CNAME()%が恋人作るまで何度だって言うわよ」
				PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%の方へ向き直ると、真っ直ぐな瞳で見つめ告げてくる
				SELECTCASE iRT
					CASE IS >= K17C_恋慕
						
						PRINTFORMW 「%K17_CNAME()%、爱してる%K17_HEART()%」
						
						;口説き文句　あれこれ重くね？
						PRINTDATADL
							DATAFORM 「%K17_CNAME()%のために毎日ご饭作ってもいいわ」
							DATAFORM 「その……えっちなことだって、毎日しても構わないわ」
							DATAFORM 「毎朝%K17_CNAME()%の横で目を觉ましたい……」
							DATAFORM 「ずっと傍に置いて、いつでもどこでも一绪に居て欲しいの」
						ENDDATA
						PRINTFORML 「もう観念しちゃいなさいよ……ホント……」
						
					CASE IS >= K17C_思慕
						
						PRINTFORMW 「%K17_CNAME()%、好きよっ」
						PRINTFORML 「私と付き合って下さい」
						PRINTFORML 「ど、どう？　照れずに言ってやったわよ」
				ENDSELECT
				
				;嘘だ！
				PRINTFORML 「まあこれだけ待たされてるんだから、すぐに答えろって言ってるわけじゃないのよ」
				PRINTFORML 「でも……ちゃんと觉えておいてね」
				
			ENDIF
		ENDIF
		
		;フラグチェック
		CALL K17_RELATION_EV(K17C_RTF_告白)
		TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;告白オッケー（恋人が付く）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「………………」
		PRINTFORML 「……えっと……ホントに私でいいの……？」
		PRINTFORMDL もちろん。%CALLNAME:TARGET%と恋人同士になる
		PRINTFORMDL そう答えたつもりだ
		PRINTW
		PRINTFORML 「わたっ……私っ！　もっと可爱くて、綺丽な娘になる！」
		PRINTFORMDL 今でも十分だと思うが……
		PRINTFORML 「%K17_CNAME()%に相応しい恋人になりたいのっ」
		PRINTFORML 「ありがとう、%K17_CNAME()%。私、頑张るからっ」
		PRINTW
		PRINTFORML 「%K17_CNAME()%、爱してるわっ%K17_HEART()%」
		PRINTFORMDL 随分と興奮した様子で%CALLNAME:MASTER%に笑颜で抱きついてくる%CALLNAME:TARGET%
		PRINTFORMDL それはこれまでに見た最高の笑颜だった
		;フラグチェック
		CALL K17_RELATION_EV(K17C_RTF_恋人)
		TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;告白失敗
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		
		;振られた回数によって分岐
		SELECTCASE CFLAG:K17C_ID:K17C_CF_告白イベント
			CASE IS >= 10
				PRINTFORML 「もう10回以上振られちゃってるのね……」
				PRINTFORML 「……ばかぁ……」
				PRINTFORMDL ついに%CALLNAME:TARGET%の目から大粒の涙が零れてしまった……
				PRINTFORML 「…………でも……大好き……」
			CASE IS >= 5
				PRINTFORML 「ふぅ…………」
				PRINTFORML 「わかってる…………わかってるから、なにも言わないで……」
				PRINTFORMDL %CALLNAME:TARGET%はそう言って颜を逸らしてしまう。だいぶ落ち込んでいるように見えた
			CASEELSE
				PRINTFORML 「ふぅ……うん、大丈夫」
				PRINTFORML 「何度でもアタックして、絶対振り向かせてやるんだから……」
				PRINTFORMDL そう言って气丈に振る舞う%CALLNAME:TARGET%だが、薄っすらと目に涙が浮かんでいるように見えた
		ENDSELECT
		PRINTFORMDL そんな%CALLNAME:TARGET%の姿に%CALLNAME:MASTER%はかける言叶がなかった……
		TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
		PRINTW
		RETURN 1
	ENDIF
	

TCVAR:K17C_ID:K17C_TC_デートイベ完走=1
ENDIF
RETURN 1

;==================================================
;デート帰り
;==================================================
@M_KOJO_SPEVENT_K17_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常帰宅
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL = 1
	;-------------------------------------------------
	IF LOCAL && ARG == 0
	
		;デートイベントを再判定　SP再突入は一日一回
		IF TCVAR:K17C_ID:K17C_TC_デートイベ完走==0 && TCVAR:K17C_ID:K17C_TC_デートイベ判定==0 && !FLAG:时间停止
			CALL K17_DATE_EVENT_RELIEF(TARGET)
			IF TCVAR:K17C_ID:K17C_TC_デートイベ完走
				RETURN 1
			ENDIF
		ENDIF
		
		SELECTCASE K17_GRT(TARGET)
			CASE IS>=K17C_思慕诶嘿嘿
				PRINTFORML 「もう帰る时间か……」
				PRINTFORML 「名残惜しいわ……%K17_CNAME()%と居ると、时间経つのが早いわね」
				PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%に寄り添って、なかなか%K17_RS("手/身体/腕")%を離さず名残惜しんでいた
			CASE IS>=K17C_思慕
				PRINTFORML 「ん、今日はどうもありがとう」
				PRINTFORML 「%K17_CNAME()%といて色々と乐しかったわよ」
				PRINTFORMDL いつもクールに見えた%CALLNAME:TARGET%だったが、今日は%K17_RS("颜が少し赤いように見えた/繋いだ手をまだ離さないでいた/眼差しがうっとりしている气がした")%
			CASEELSE
				PRINTFORML 「ん、お疲れ様」
				PRINTFORMDL にべもなく颯爽と去っていった
		ENDSELECT
		
		;戻ってきたので判定のみ戻し
		;一度目判定失敗（通常帰宅）してもイベント完走してなければ同じ日でもイベント見れるはず
		;ただし本家仕様は考慮されない仕方ないね
		;キスキャンセルした场合も完走としてみなし、翌日から
		TCVAR:K17C_ID:K17C_TC_デートイベ判定=0

	ENDIF
	;-------------------------------------------------
	;反抗刻印消去イベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「言った通り态度を改めたってわけね」
		PRINTFORML 「またすぐ調子乗らないのよ」
	ENDIF
	;-------------------------------------------------
	;反抗刻印2>1レベルダウンイベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「まあ、及第点ね」
		PRINTFORML 「また頑张って罪を償うのよ」
	ENDIF
	;-------------------------------------------------
	;反抗刻印3>2レベルダウンイベント
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「今日のところは评价してあるげる」
		PRINTFORML 「でもこの程度で全て許されたと思わないことね」
	ENDIF
	
	
ENDIF
PRINTW
RETURN 1

;※※※※※※※※※※※※※※※※※※※※※※※※※※
;"EVENT"系イベント
;※※※※※※※※※※※※※※※※※※※※※※※※※※
;==================================================
;房间で遭遇
;改行したいのでRETURN統一
;仕事中はなしで
;==================================================
@M_KOJO_EVENT_K17_1(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && CFLAG:K17C_ID:行动 != 5

	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERが入ってきた
	;一日一回处理
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTL
		IF !TCVAR:TARGET:今日会ったか
			
			;朝目を觉ました时时间が更新されないので挨拶おかしくなるので退避
			IF CFLAG:TARGET:初始位置 == CFLAG:MASTER:初始位置
				TCVAR:TARGET:今日会ったか = 0
				CALL M_KOJO_EVENT_K17_2(1)
				CFLAG:K17C_ID:K17C_CF_オナニーフラグ = 0
				RETURN 1
			ENDIF
			
			;自慰暴露后の遭遇
			IF CFLAG:TARGET:自慰暴露
				PRINTFORML 「あっ……っ～～～～%K17_BLUSH()%」
				;鑑賞or自慰暴露ックス
				IF CFLAG:TARGET:自慰暴露 > 1
					SELECTCASE K17_GRT(TARGET)
						CASE IS >= K17C_思慕诶嘿嘿
							PRINTFORML 「……%K17_GT()%、変态さん%K17_HEART()%」
						CASEELSE
							PRINTFORML 「…………変态っ%K17_BLUSH()%」
					ENDSELECT
				ENDIF
				PRINTW
				RETURN 1
			ENDIF
			
			;夜オナニー后遭遇　思慕↑
			IF CFLAG:K17C_ID:K17C_CF_オナニーフラグ
				SELECTCASE K17_GRT(TARGET)
					CASE IS >= K17C_恋慕
						PRINTFORML 「……%K17_GT()%……%K17_BLUSH()%」
						PRINTFORML （また勝手な妄想しちゃいました……ごめんなさいっ）
					CASE IS >= K17C_思慕
						PRINTFORML 「……%K17_GT()%……%K17_BLUSH()%」
						PRINTFORML （っ～～～%K17_BLUSH()%　いっ、意识しちゃう……）
				ENDSELECT
				PRINTFORMDL なんだか今日の%CALLNAME:TARGET%は、颜がやけに赤かった
				CFLAG:K17C_ID:K17C_CF_オナニーフラグ = 0
				PRINTW
				RETURN 1
			ENDIF
			
			
			;通常处理
			SELECTCASE K17_GRT_EX(TARGET)
				CASE IS >= K17C_恋慕
					PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%　今日も%K17_RS("逢いに来てくれた/逢いたくなった")%のかしら%K17_HEART()%」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_RS("あっ……/")%%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("今日も会えたわね/最近よく会うわね/また会えたわね")%」
				CASE IS >= K17C_思慕
					PRINTFORML 「%K17_RS("あっ……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今日も会えたわね/最近よく会うわね/また会えたわね")%」
				CASEELSE
					PRINTFORML 「%K17_RS("あら/ん")%、%K17_GT()%」
			ENDSELECT
		
	;-------------------------------------------------
	;1日中会う度に出る
	;-------------------------------------------------
		ELSE
			;特殊な场所の处理
			IF BATHCHECK(CFLAG:MASTER:当前位置)
				PRINTFORMDL %CALLNAME:TARGET%は裸体を腕で隠している
				RETURN 1
			ENDIF
			
			;通常处理
			PRINTFORMD %CALLNAME:TARGET%が
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕
					PRINTFORMD 軽く手を振り
					PRINTFORMD %K17_RS("ウィンクして/笑颜を向けて/うっとりした表情で")%
				CASE IS >= K17C_思慕
					PRINTFORMD 軽く手を挙げ
					PRINTFORMD %K17_RS("少し赤面して/少し照れたように/目が合うと视线を逸らし")%
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%に%K17_RS("寄ってきた/挨拶した/近づいてきた")%
			
		;一日一回終端
		ENDIF
		PRINTW
	;MASTERが入ってきた終端
	ENDIF
	;-------------------------------------------------
	;TARGETが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTL
		IF !TCVAR:TARGET:今日会ったか && CFLAG:17:行动 != 5
			;通常处理
			SELECTCASE K17_GRT_EX(TARGET)
				CASE IS >= K17C_恋慕
					PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("来ちゃった/逢いたくなって来ちゃった")%%K17_HEART()%」
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「%K17_RS("あっ……/")%%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("今日も会えたわね/最近よく会うわね/また会えたわね")%」
				CASE IS >= K17C_思慕
					PRINTFORML 「%K17_RS("あっ……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今日も会えたわね/最近よく会うわね/また会えたわね")%」
				CASEELSE
					PRINTFORML 「%K17_RS("あら/ん")%、%K17_GT()%」
			ENDSELECT
			
		ELSE
			;特殊な场所の处理
			IF BATHCHECK(CFLAG:MASTER:当前位置)
				PRINTFORMDL %CALLNAME:TARGET%は裸体を腕で隠している
				RETURN 1
			ENDIF
			
			PRINTFORMD %CALLNAME:TARGET%が
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕
					PRINTFORMD 軽く手を振り
					PRINTFORMD %K17_RS("ウィンクして/笑颜を向けて/うっとりした表情で")%
				CASE IS >= K17C_思慕
					PRINTFORMD 軽く手を挙げ
					PRINTFORMD %K17_RS("少し赤面して/少し照れたように/目が合うと视线を逸らし")%
			ENDSELECT
			PRINTFORMDL %CALLNAME:MASTER%に%K17_RS("寄ってきた/挨拶した/近づいてきた")%
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;TARGETが澡堂に入ってきて一绪に入る
	;@澡堂追い出し条件見る
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTL
		PRINTFORML 「きゃっ！？」
		PRINTFORMDL 入ってきたのは裸姿の%CALLNAME:TARGET%だった
		PRINTFORML 「って%K17_CNAME()%か、誰かと思ってびっくりしたわ」
		PRINTFORMDL 身体を弾ませてこちらに寄ってくる
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お澡堂イベント
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL それだけ告げると、真っ赤になって湯船に浸かってしまった
		ELSE
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%がチラリと見えた
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;TARGETが澡堂に入ってきて出て行った
	;@澡堂追い出し条件 !恋慕 キス前 态度2未満
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTL
		;仲良くなる前反応
		PRINTFORML 「ッッ！？！？　し、失礼ッ！」
		PRINTFORMDL 突然入ってきたのは裸姿の%CALLNAME:TARGET%だった
				
		
		;ランダムイベ　裸鑑賞　长くなったので関数化
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お澡堂イベント
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL それだけ告げると、そそくさと出て行った
		ELSE
			PRINTFORMDL 出て行く際に%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%がチラリと見えた
			TCVAR:K17C_ID:K17C_TC_お澡堂イベント = 1
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;TARGETが澡堂に入ってきて追い出された
	;@澡堂追い出し条件==0 && 弱み && HETEROSEX==1
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTL
		;仲良くなる前反応
		PRINTFORML 「ッッ！？！？　で、でてけええ！」
		PRINTFORMDL 中に居たのは裸姿の%CALLNAME:TARGET%だった
		PRINTFORMDL 慌てた様子で桶を振りかぶっていた
		
		IF K17_CHECK_RANDOM_EVENT(TARGET) && !TCVAR:K17C_ID:K17C_TC_お澡堂イベント
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL それだけ告げると、追い出された
		ELSE
			PRINTFORMDL 追い出される際に%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%がチラリと見えた
			TCVAR:K17C_ID:K17C_TC_お澡堂イベント = 1
		ENDIF
		PRINTW
	ENDIF
	;-------------------------------------------------
	;外出先で遭遇した
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTL
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("逢いたいって思ってたら逢えちゃったわ/逢いたいなって思ってたところよ")%%K17_HEART()%」
			CASE IS >= K17C_思慕诶嘿嘿
				PRINTFORML 「%K17_RS("あっ……/")%%K17_GT()%、%K17_CNAME(MASTER,1)%　%K17_RS("今日も会えたわね/最近よく会うわね/また会えたわね")%」
			CASE IS >= K17C_思慕
				PRINTFORML 「%K17_RS("あっ……/")%%K17_GT()%、%K17_CNAME()%、%K17_RS("今日も会えたわね/最近よく会うわね/また会えたわね")%」
			CASEELSE
				PRINTFORML 「%K17_RS("あら/ん")%、%K17_GT()%」
		ENDSELECT
		PRINTW
	ENDIF
	;-------------------------------------------------
	;他キャラと约会中に遭遇した
	;ARG:1に约会的对象
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		PRINTL
		;相手が恋人な场合
		IF TALENT:MASTER:恋人 == FLAG:约会的对象
			PRINTFORML 「あら……%K17_RS("こんっ/あっ")%……」
			
			IF K17_RT_FG(TARGET) & K17C_RTF_逢引
				;デートする间柄のとき
				PRINTFORML 「ごめんなさい、%K17_RS("お邪魔だったわね/お忙しいみたいね")%」
				;知り合いか見る
				IF K17_GET_FRIENDS(FLAG:约会的对象)
					PRINTFORML （今日は%K17_CNAME( FLAG:约会的对象 )%とデートだったのね……）
				ELSE
					PRINTFORML （あの娘が本命の娘だったのね……）
				ENDIF
			ELSE
				PRINTFORML 「っと、ごめんなさい」
			ENDIF
			
		;それ以外
		ELSE
			PRINTFORML 「あら……%K17_RS("ふーん/へぇ/ふむ")%……」
			IF K17_RT_FG(TARGET) & K17C_RTF_逢引
				;デートする间柄のとき
				PRINTFORML 「ごめんなさい、%K17_RS("お邪魔だったわね/お忙しいみたいね")%」
				;知り合いか見る
				IF K17_GET_FRIENDS(FLAG:约会的对象)
					PRINTFORML （%K17_CNAME( FLAG:约会的对象 )%ともデートするのね……）
				ELSE
					PRINTFORML （あの娘が本命の娘なのかしら……）
				ENDIF
			ELSE
				PRINTFORML 「っと、お邪魔だったわね」
			ENDIF
		ENDIF
		
		IF K17_GET_FRIENDS(FLAG:约会的对象) && K17_RT_FG(TARGET) == 0
			;アリスにフラグが立ってない时　约会的对象がアリスの知り合い
			SELECTCASE FLAG:约会的对象
				CASE K17C_魔理沙ID,K17C_灵梦ID,K17C_咲夜ID
					PRINTFORML 「%K17_CNAME(FLAG:约会的对象)%と仲良くしてあげてね」
				CASE K17C_幽香ID,K17C_パチュリーID,K17C_メディスンID
					PRINTFORML 「气難しい娘だけど%K17_CNAME(FLAG:约会的对象)%と仲良くしてあげてね」
				CASE K17C_神綺ID,K17C_梦子ID,K17C_ルイズID,K17C_魅魔ID
					PRINTFORML （%K17_CNAME(FLAG:约会的对象)%もデートなんてするのね……）
					PRINTFORML （やっぱり結婚とかするのかしら……）
				CASEELSE
					PRINTFORML （あの娘、幸せそうだったわね……）
			ENDSELECT
		ENDIF
		PRINTW
	;他キャラと约会中に遭遇した終端
	ENDIF
	
ENDIF
RETURN 1

;==================================================
;朝起きたとき（おはよう口上）
;==================================================
@M_KOJO_EVENT_K17_2(ARG,ARG:1)
CALL MESSAGE_GOODMONING(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常起床（定时になって起きる等）
	;非神社在住キャラで恋慕未満の场合は、勝手に房间に入り込んできてる状态
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
	PRINTL
		IF TALENT:TARGET:恋慕
				
			SELECTCASE K17_GRT(TARGET)
				CASE IS >= K17C_恋慕
					;当前位置でランダムイベント振る　もしくは允许无套（危険日も）で追加イベ
					IF (K17_CHECK_RANDOM_EVENT() || K17_GRT(TARGET) >= K17C_恋慕允许无套) && TCVAR:K17C_ID:K17C_TC_朝フェラ==0 && CFLAG:K17C_ID:K17C_CF_オナニーフラグ == 0
						TRYCALL K17_朝フェライベント(TARGET)
					ENDIF
					IF RESULT == 0
						IF !TCVAR:K17C_ID:K17C_TC_朝フェラ && !TCVAR:TARGET:今日会ったか
							;定时起床
							IF TALENT:MASTER:性别 >= 2
								PRINTFORM 「おはよう……ってちょっと、%K17_RS("寝癖すごいわよ/服、出てるわよ/颜、ひどい有様よ/前、元气いっぱいよ")%……こっち来なさい」
							ELSE
								PRINTFORM 「おはよう……ってちょっと、%K17_RS("寝癖すごいわよ/服、出てるわよ/颜、ひどい有様よ")%……こっち来なさい」
							ENDIF
							TRYCALL K17_人形台詞(-1)
							PRINTFORMDL %CALLNAME:TARGET%に优しくお世話されながら一日が始まった
							SIF CFLAG:MASTER:初始位置 != CFLAG:TARGET:初始位置
								PRINTFORMDL きっと一绪に住むことになったとしても、毎日こうしてお世話してくれるのだろう
							PRINTW
							PRINTFORML 「これでよしっと……はい終わり、ちゅっ%K17_HEART()%」
						ELSE
							;倒れて起きた时など定时ではない场合
							PRINTFORML 「ふぁっ……おはよう」
						ENDIF
					ENDIF
				CASEELSE
					IF !TCVAR:K17C_ID:K17C_TC_朝フェラ && !TCVAR:TARGET:今日会ったか
						PRINTFORML 「おはよう、いい朝ね……」
						PRINTFORML 「%K17_CNAME()%の寝颜って、意外と可爱いのね、ふふっ」
					ELSE
						PRINTFORML 「ふぁっ……おはよう」
					ENDIF
			ENDSELECT
		ELSE
			PRINTFORML 「あっ……起きちゃったか……」
			PRINTFORMDL いったい何をしているんだ、この人は……
			PRINTFORML 「ちょっとした人形の研究よ、ふふっ」
		ENDIF
	ENDIF
	;-------------------------------------------------
	;添い寝起床
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 2
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;その他
	PRINTL
	TCVAR:K17C_ID:K17C_TC_朝フェラ = 1
ENDIF
RETURN 1

;==================================================
;夜寝るとき（おやすみ口上）
;==================================================
@M_KOJO_EVENT_K17_3(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	
	
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;自室に帰る（定时になって寝る）
	;自室がMASTERと同じでもでちゃうので条件追加
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1 && (CFLAG:TARGET:初始位置 != CFLAG:MASTER:初始位置)
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_恋慕
				PRINTFORML 「名残惜しいけれど、%K17_RS("帰らなきゃ/御暇するわね/帰るわね")%……」
				
			CASE IS >= K17C_思慕
				PRINTFORML 「さてと、そろそろ%K17_RS("帰らなきゃ/御暇するわね/帰るわね")%」
			CASEELSE
				PRINTFORML 「ん、じゃあまた」
		ENDSELECT
		
	ENDIF
	;-------------------------------------------------
	;眠そうにしている
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		SELECTCASE K17_GRT_EX(TARGET)
			CASE IS >= K17C_思慕诶嘿嘿
				PRINTFORML 「……ふにゃ……ふぁ……ごめん……なさい……ちょっと眠いわ」
				PRINTFORMDL %CALLNAME:TARGET%はうつらうつら、と舟を漕ぎならが%CALLNAME:MASTER%の身体にしなだれかかってきた
			CASEELSE
				PRINTFORML 「……ふぁ……っと失礼、そろそろ睡眠が必要みたいね」
				PRINTFORMDL あくびを噛み杀す仕草がなんだかちょっと可爱かった
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;睡眠中（起きていないので会话というよりは寝言？）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3 || LOCAL:1 && ARG == 4
		SELECTCASE K17_GRT(TARGET)
			CASE IS >= K17C_恋慕允许无套
				PRINTFORML 「……%K17_CNAME()%……、えへへ……%K17_RS("好き/もっと、しよ/もっと、爱して")%……」
			CASE IS >= K17C_思慕
				PRINTFORML 「……%K17_CNAME()%……、%K17_RS("好き/えっち/ばかぁ")%……」
			CASEELSE
				PRINTFORML 「…………%K17_RS("ふにゃ/すぅー/ふぁ")%…………%K17_RS("魔理沙ぁ/シャン……ハイ/お母さん")%？　……」
		ENDSELECT
		PRINTFORMDL 普段の様子よりずっと%K17_RS("儿童っぽい/可爱らしい/素直そうな")%%CALLNAME:TARGET%が幸せそうに眠っていた
	ENDIF
	;-------------------------------------------------
	;恶作剧中
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 4
		;PRINTFORMW 
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;衰弱中
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 「ごめんなさい、もう无理……」
	ENDIF
	;-------------------------------------------------
	;MASTERがダウン（房间まで運ばれる）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 6
		PRINTFORML 「ちょっと！？　平气なの……？」
	ENDIF
	;-------------------------------------------------
	;TARGETが自室まで戻ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;-------------------------------------------------
		;そのまま着替えて寝た
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 0
			IF !CFLAG:MASTER:睡眠
				PRINTFORML 「早く寝るのよ……」
				PRINTFORMDL それだけ言ってさっさと寝床に行ってしまった
			ELSE
				;マスターが寝てる场合
				PRINTFORML 「…………寝てるか」
				PRINTFORML 「ふふっ、なんか可爱いわね……」
			ENDIF
		ENDIF
		;-------------------------------------------------
		;房间から追い出された
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1 == 1
			PRINTFORML 「さぁ、いい子はもう寝る时间よ
			PRINTFORML 「出てった、出てった」
		ENDIF
	ENDIF
	;-------------------------------------------------
	;非在住TARGETがMAIN_MAPで休憩
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML 「うーん、少しだけ休ませてもらうわね」
	ENDIF
	;その他
	PRINTW
ENDIF
RETURN 1

;==================================================
;移动时すれちがい
;==================================================
@M_KOJO_EVENT_K17_4(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;立ち止まった
	;この后遭遇口上に接続
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORMD %CALLNAME:TARGET%が
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD 軽く手を振り
				PRINTFORMD %K17_RS("ウィンクして/笑颜を向けて/うっとりした表情で")%
			CASE IS >= K17C_思慕
				PRINTFORMD 軽く手を挙げ
				PRINTFORMD %K17_RS("少し赤面して/少し照れたように/目が合うと视线を逸らし")%
		ENDSELECT
		PRINTFORMDL %CALLNAME:MASTER%に寄ってきた
	ENDIF
	;-------------------------------------------------
	;軽く会釈して通り過ぎた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORMD %CALLNAME:TARGET%は
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD %K17_RS("軽く手を振って/ウィンクして/笑颜を向けて")%
			CASE IS >= K17C_思慕
				PRINTFORMD %K17_RS("軽く手を挙げて/ちらちと見て/会釈を返し")%
		ENDSELECT
		PRINTFORMDL %CALLNAME:MASTER%を見送った
	ENDIF
	;-------------------------------------------------
	;无视して通り過ぎた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORMD %CALLNAME:TARGET%は
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕
				PRINTFORMD %K17_RS("熱い视线を送り/じっと视线を送り/何か言いたげに")%
			CASE IS >= K17C_思慕
				PRINTFORMD %K17_RS("目配せして/ちらちと見て")%
		ENDSELECT
		PRINTFORMDL %CALLNAME:MASTER%を見送った
	ENDIF
ENDIF
RETURN 1

;==================================================
;他者介入で情绪変化
;==================================================
@M_KOJO_EVENT_K17_5(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
;诶嘿嘿中はとりあえず飛ばして情事を見られたほうだけ表示
IF LOCAL && !CFLAG:诶嘿嘿
	
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;知り合いが入ってきた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && K17_GET_FRIENDS(ARG)
		
		PRINTFORML 「っ……%K17_GT()%、%K17_CNAME(ARG)%」
		
		;アリスが恋人な场合
		IF TALENT:MASTER:恋人 == TARGET
			PRINTFORML 「别に変なことはしてないわよ。%K17_CNAME(ARG)%、ちょっと%K17_RS("冷やかさないで/からかわないで")%」
		
		;相手がマスターの恋人　はわわ……
		;とりあえず相手馴れ合い强度０以下はないみたいだから呼ばれないはず　どっか别に作る
		;自分が入った时用のをつくればいいのか
		ELSEIF TALENT:MASTER:恋人 == ARG
			SELECTCASE ARG
				CASE K17C_神綺ID,K17C_梦子ID,K17C_ルイズID,K17C_魅魔ID
					PRINTFORMDL %CALLNAME:TARGET%は勢い良く立ち上がると姿勢を正した
					PRINTFORML 「……少し%NAME:MASTER%さんとお話していました」
					PRINTFORMDL まるで他人のような扱いをされた
				CASEELSE
					PRINTFORML 「勘違いしないで%K17_CNAME(ARG)%、别に普通にお話していただけよ……」
					PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:ARG%を見ると一瞬动揺したように見えた
			ENDSELECT
		ENDIF
	;-------------------------------------------------
	;知らない人が入ってきた
	;-------------------------------------------------
	ELSE
		PRINTFORMDL 一瞬%CALLNAME:TARGET%が%CALLNAME:ARG%をちらりと見やる
	ENDIF
	;-------------------------------------------------
	;共通处理
	;-------------------------------------------------
	SELECTCASE K17_GRT()
		CASE IS >= K17C_恋慕
			PRINTFORML 「……続きは二人きりで%K17_RS("誰も来ない所/静かな场所/ゆっくりできるところ")%でね……%K17_HEART()%」
			PRINTFORMDL そう小さく%CALLNAME:MASTER%に耳打ちして、寄り添っていた%CALLNAME:TARGET%は離れてしまった
		CASE IS >= K17C_思慕
			PRINTFORML 「……%K17_RS("悪い/申し訳ない/名残惜しい")%けど、ここまでね……」
			PRINTFORMDL そう小さく%CALLNAME:MASTER%に耳打ちして、寄り添っていた%CALLNAME:TARGET%は離れてしまった
		CASEELSE
			PRINTFORMDL %CALLNAME:TARGET%はにべもなくすっ、と離れた
	ENDSELECT
	PRINTW
ENDIF
RETURN 1

;==================================================
;情事を目撃した
;==================================================
@M_KOJO_EVENT_K17_6(ARG,ARG:1)
;口上主はTARGET
;ARGに情事相手
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	PRINTL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;情事を目撃した（馴れ合い度:低）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		PRINTFORML 「！？！？　%K17_RS("ちょ/えっ/なんっ")%……！」
		PRINTFORMDL %CALLNAME:TARGET%が赤面してわなわなと震えながら立っていた
		PRINTW
		;知り合いか見る
		SIF K17_GET_FRIENDS(ARG)
			PRINTFORML （やだ……%K17_CNAME(ARG)%ったら……あんなことするの……）
			
		IF K17_GRT() >= K17C_思慕
			PRINTFORML （%K17_CNAME()%って、ああいうのが好みなのね……）
			PRINTFORML （見えてる、見えちゃってるわよ、色々と……）
			PRINTFORML （やばい……これ、しばらく妄想が捗りそう……）
			PRINTW
		ENDIF
		PRINTFORML 「オホン、こんな场所で、その、あんな……」
		PRINTFORML 「とにかく气をつけなさいっ！」
		PRINTFORMDL 真っ赤な颜をした%CALLNAME:TARGET%に怒られてしまった
		
		;思慕以上でMASTERに恋人がいないorアリスが恋人
		SIF K17_GRT() >= K17C_思慕 && (!(CFLAG:MASTER:既成事实 & 合意_恋人) || CFLAG:TARGET:既成事实 & 合意_恋人)
			CFLAG:TARGET:情事目击 = ARG
		
		;弱みがつくはずなのでプライドと态度もあげちゃう
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_プライド,1)
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,1)
	ENDIF
	;-------------------------------------------------
	;負けじと参加（馴れ合い度:高）
	;恋人同士相手には乱入できないみたい
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;-----------
		;开始时の主导权
		;积攒度の一时保存
		;情事相手の诶嘿嘿状态をみる
		;-----------
		IF CFLAG:MASTER:诶嘿嘿 == 1
			;MASTER主导权
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_お手伝い系
			TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = -1
			TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:TARGET:积攒度
			TCVAR:K17C_ID:K17C_TC_中出しカウント = 0
		ELSE
			;キャラ主导权
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
			TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = TARGET
			TCVAR:K17C_ID:K17C_TC_中出しカウント = 0
			IF TALENT:MASTER:性别 >= 2
				TCVAR:K17C_ID:K17C_TC_积攒度 = BASE:MASTER:精力
			ELSE
				TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:积攒度
			ENDIF
		ENDIF
		
		;知り合いか見る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_パチュリーID,K17C_幽香ID,K17C_咲夜ID,K17C_メディスンID
				PRINTFORML 「%K17_RS("こ～ら/あ～/も～ぅ")%、%K17_CNAME(ARG)%、独り占めはだめよ？　私も混ざるわ」
				
			;尊敬系
			CASE K17C_魅魔ID,K17C_ルイズID
				PRINTFORML 「%K17_RS("もうっ/だめー/あー")%、独り占めしちゃだめですよ、%K17_CNAME(ARG)%」
				PRINTFORML 「私も混ぜてもらいます」
				
			;神綺様　梦子限定
			CASE K17C_神綺ID,K17C_梦子ID
				
				;アリスが恋人な场合
				IF TALENT:TARGET:恋人
					IF FIRSTTIME(@"修羅场{ARG}")
						;初回
						PRINTFORML 「えっ……そんなっ……%K17_CNAME(ARG)%！？」
						PRINTFORMDL %CALLNAME:TARGET%は珍しくかなり动揺したようで、足を震わせながらなんとか立っていた
						PRINTW
						PRINTFORML 「まったく……%K17_CNAME(ARG)%にも手を出していたのね……いつからよ……」
						PRINTFORMDL %CALLNAME:ARG%は『%CALLNAME:TARGET%\@ARG==K17C_神綺ID ? ちゃん#\@、違うの！』と言い訳していた……
						PRINTFORMDL なんだか空气が一変した……
						PRINTFORMDL ……
						PRINTFORMDL …………
						PRINTFORMDW ………………
						;勝手に想像して　亲子丼とか浮气とかそんな感じのあれそれ
						PRINTFORML 「まあいいわ……で、これって所謂……アレよね……」
						PRINTFORMDL %CALLNAME:MASTER%は太ももをぎゅっと抓られてしまった
						PRINTFORML 「まあ……二人でコソコソされるのは……いや、だし……私も参加するわよ」
						;PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:ARG%に対抗意识があるようだった
						PRINTFORML 「ともかく独り占めは禁止！」
						PRINTW
						
					ELSE
						;二回目以降
						PRINTFORML 「えっと……また……なの……」
						PRINTFORMDL %CALLNAME:TARGET%は少し呆れた様子でため息を付き、%CALLNAME:MASTER%と%CALLNAME:ARG%の间に割って入ってきた
						PRINTFORMDL %CALLNAME:ARG%はまた『%CALLNAME:TARGET%\@ARG==K17C_神綺ID ? ちゃん#\@、違うの……』と言い訳していた……
						PRINTW
					ENDIF
				ELSE
					PRINTFORML 「まったく……よりにもよって%K17_CNAME(ARG)%と一绪にだなんて……」
				ENDIF
			;知らない人
			CASEELSE
				PRINTFORML 「……私も混ぜてもらうわよ？」
		ENDSELECT
		TRYCALL K17_乱交开始(ARG)
	ENDIF
	;-------------------------------------------------
	;气まずそうに立ち去る
	;记入チェック（=0, 非表示、1, 表示）
	;してる方が恋人だった场合、そそくさと立ち去る（恋人が混じっている多人数プレイかつTARGETが恋人でない场合も立ち去る
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		
		PRINTFORML 「っごめんなさい、お邪魔しました……」
		;知り合いか見る
		SIF K17_GET_FRIENDS(ARG)
			PRINTFORML （やだ……%K17_CNAME(ARG)%ったら……あんなことするの……）
		;恋人か見る
		SIF TALENT:ARG:恋人
			PRINTFORML （まあ恋人同士なんだから、ああいうことするわよね……）
		
		;思慕以上でMASTERに恋人がいないorアリスが恋人
		SIF K17_GRT() >= K17C_思慕 && (!(CFLAG:MASTER:既成事实 & 合意_恋人) || CFLAG:TARGET:既成事实 & 合意_恋人)
			CFLAG:TARGET:情事目击 = ARG
		
		
	ENDIF
	;-------------------------------------------------
	;MASTERに诱われて参加
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG:1 == 4
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;その他
	PRINTW
ENDIF
RETURN 1

;==================================================
;情事を見られた
;==================================================
@M_KOJO_EVENT_K17_7(ARG,ARG:1)
;口上主はTARGET
;ARGに目撃者
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;情事を見られた（目撃者の馴れ合い度:低）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		;知り合いか見る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_パチュリーID,K17C_幽香ID,K17C_咲夜ID,K17C_メディスンID
				PRINTFORML 「%K17_CNAME(ARG)%！？」
				PRINTFORML 「いや……その……えっと、ごめん……」
			;尊敬系
			CASE K17C_魅魔ID,K17C_ルイズID,K17C_神綺ID,K17C_梦子ID
				PRINTFORML 「っ！？　%K17_CNAME(ARG)%！？」
				PRINTFORML 「これは、その、えっと……」
				PRINTFORML 「ごっ、ごめんなさい、軽率でした……」
			;その他
			CASEELSE
				PRINTFORML 「っ！？　……その、ごめんなさい」
		ENDSELECT
		;--------------
		;诶嘿嘿が終了された场合の处理
		;--------------
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		
		;フラグ保存
		SIF CFLAG:既成事实 & 合意_诶嘿嘿
			TRYCALL K17_RELATION_EV( K17C_RTF_诶嘿嘿 )
	ENDIF
	;-------------------------------------------------
	;目撃者が負けじと参加（目撃者の馴れ合い度:高）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;知り合いか見る
		SELECTCASE ARG
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_パチュリーID,K17C_幽香ID,K17C_咲夜ID,K17C_メディスンID
				PRINTFORML 「っ……%K17_CNAME(ARG)%？」
				;相手が恋人か見る　あわわわ……
				IF !TALENT:ARG:恋人
					PRINTFORML 「って……ちょっと、割り込まないの……%K17_CNAME(ARG)%はそっち側ね」
				ENDIF
				
			;尊敬系
			CASE K17C_魅魔ID,K17C_ルイズID,K17C_神綺ID,K17C_梦子ID
				PRINTFORML 「っ！？　%K17_CNAME(ARG)%！？！？」
				PRINTFORML 「えっ、%K17_CNAME(ARG)%も……一绪に！？　は、はい、どうぞ……」
				
			CASEELSE
				PRINTFORML 「っ！？　びっくりしたわ……」
		ENDSELECT
		TRYCALL K17_乱交开始(ARG)
	ENDIF
	;-------------------------------------------------
	;目撃者が立ち去る（恋人同士限定か
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		;知り合いか見る
		SELECTCASE K17_GET_FRIENDS(ARG)
			;气安い系
			CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_パチュリーID,K17C_幽香ID,K17C_咲夜ID,K17C_メディスンID
				PRINTFORML 「あっ、%K17_CNAME(ARG)%……」
				PRINTFORML 「气を遣われちゃったわね……」
				PRINTFORML 「%K17_CNAME()%、今度ちゃんと%K17_CNAME(ARG)%をフォローしてあげるのよ」
			;尊敬系
			CASE K17C_魅魔ID,K17C_ルイズID,K17C_神綺ID,K17C_梦子ID
				PRINTFORML 「っ！？　%K17_CNAME(ARG)%！？」
				PRINTFORML 「……流石に%K17_CNAME(ARG)%に气を遣わせてしまったのはまずいわね……」
			;その他
			CASEELSE
				PRINTFORML 「っ！？　……み、見られちゃったわね……」
		ENDSELECT
		PRINTFORML （私のことより、%K17_CNAME()%の裸見られるの……嫌なんだからね）
	ENDIF
	;-------------------------------------------------
	;MASTERに诱われて目撃者も参加
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG:1 == 4
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;その他
	PRINTW
	
ENDIF
RETURN 1

;==================================================
;目撃した情事を問い詰める
;==================================================
@M_KOJO_EVENT_K17_8(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;MASTERだけ問い詰め
	;CFLAG:TARGET:情事目击
	;思慕以上でMASTERに恋人がいないorアリスが恋人
	;参加してない时だけだから非情にレアケースじゃないですかね
	;これ誰得なんだ！？　削除予定地
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		;恋慕以上＆知り合いのとき
		IF (K17_GRT() >= K17C_恋慕 || CFLAG:TARGET:既成事实 & 合意_恋人) && K17_GET_FRIENDS(CFLAG:TARGET:情事目击)
			PRINTFORML 「ねえ、私%K17_RS("にもう飽きちゃった/の事嫌いになっちゃった/もう捨てられちゃったの")%？」
			PRINTFORMDL いつもより少し思い詰めた表情でいきなりそう切り出されて面食らった
			PRINTFORMDL そんなことは決してない
			PRINTW
			;嘘だ！
			PRINTFORML 「ああ、ごめんなさい。責めてるつもりじゃないのよ」
			PRINTFORML 「ただその、もう相手にしてくれないのかと思って……」
			PRINTFORMDL そう言って俯いたまま%CALLNAME:MASTER%の胸に颜を埋めてしまった
			PRINTFORML 「ごめんなさい、面倒くさい女で……」
			PRINTFORMDL %CALLNAME:MASTER%はしばらくの间、%CALLNAME:TARGET%の头を抚で続けることしかできなかった……
			PRINTW
			PRINTFORML 「あのね、%K17_CNAME(CFLAG:TARGET:情事目击)%の代わりでもいいし、他の娘に手出ししててもいいの……」
			PRINTFORML 「だけど私もいるってこと、ちゃんと觉えておいてよね」
			PRINTFORMDL 最后は笑颜を向けてそう言っていたが、少し无理をしているようにも感じた
			PRINTFORMDL %CALLNAME:MASTER%はもう少し%CALLNAME:TARGET%を大事にしようと思った
		ELSE
			;诶嘿嘿前　研究材料に使いました
			PRINTFORML 「あのー……ね、この前の……」
			PRINTFORML 「私もちょっと愤怒すぎたわ、ごめんなさい」
			PRINTFORMDL よくわからないが、颜を真っ赤にしながら逆に謝られてしまった
			PRINTW
			PRINTFORMDL （ごめんなさい……%K17_CNAME()%でえっちな妄想しちゃいました……）
		ENDIF
	ENDIF
	;-------------------------------------------------
	;二人とも説教
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		PRINTFORML 「ちょっと%K17_CNAME()%、ああ%K17_CNAME(CFLAG:TARGET:情事目击)%もいいかしら」
		PRINTFORML 「ああ、别に怒ってるわけじゃないのよ」
		PRINTFORML 「ただ……その、场所を、ね。これからも气をつけてね」
		PRINTFORML 「ホントにそれだけだから、じゃ」
		PRINTFORMDL %CALLNAME:TARGET%は赤くなりながらそれだけ一方的に告げるとさっさと切り上げてしまった
		PRINTFORMDL %CALLNAME:MASTER%はもう少し场所も考えようと思った
	ENDIF
	;その他
	PRINTW
ENDIF
RETURN 1

;==================================================
;パンツ没収された
;==================================================
@M_KOJO_EVENT_K17_9(ARG,ARG:1)
;口上主はTARGET
;ARG:1 == 1		同じ场所に居てパンツを回收された
;ARG:1 == 2		遠距離移动中にパンツを回收された
;--------------------------------------------------
#DIM DYNAMIC iDoll		;人形フラグ
#DIM DYNAMIC iPants_Num	;输送中のアリスのパンツ枚数
VARSET iDoll
iPants_Num = 0
CFLAG:K17C_ID:K17C_CF_パンツ没収 = MIN(CFLAG:K17C_ID:K17C_CF_パンツ没収,9999)
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL

	;--------------------------------------------------
	;初回限定
	;--------------------------------------------------
	iPants_Num = K17_CHECK_输送パンツ(TARGET)
	IF FIRSTTIME("パンツ没収")
		PRINTL
		PRINTFORML 「さーて、なに隠してるのかしら……」
		PRINTW
		;手持ちに自分のパンツがあるか見る　仕様変更に対応
		IF iPants_Num
			PRINTFORML 「やだ……これって私の……下着？」
			PRINTFORML 「どうやって！　……いやなんでっ！？」
			PRINTFORML 「えっ……これってもしかして……」
			PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%に疑いの眼差しを向け考え込んでいる
			CFLAG:K17C_ID:K17C_CF_パンツ没収++
		ELSE
			PRINTFORML 「あら……これって……女の子の下着！？」
			PRINTFORML 「え？　え！？　なんでこんなもの持ってるの？」
		ENDIF

		PRINTFORMDL もっと罵られるかと思ったが、意外と冷静な反応だった
		PRINTFORMDL こういうことには疎いんだろうか
		PRINTW
		PRINTFORML 「……何故下着なんて狙ったのかしら？」
		PRINTFORMDL そりゃあ、だって……なぁ？
		PRINTFORMDL %CALLNAME:MASTER%はどうして下着が欲しいのか、一から%CALLNAME:TARGET%に説明させられた
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW ………………
		PRINTFORML 「へ、へぇ……ずいぶんといい趣味？　してるわね」
		
		;アリスパンツあり　海外の人は下着ドロあんま理解できないらしいです
		IF iPants_Num
			PRINTFORML 「性骚扰という意味ではリアクション取れなくて、ごめんなさいね」
			PRINTFORML 「いや、謝ることではないわね。……まだちょっと混乱してるみたい」
		ENDIF
		PRINTFORML 「……というか理解に苦しむわ、文化の違いかしら」
		PRINTFORML 「ともかく人の物を盗むなんて、ろくな奴にならないわ」
		PRINTFORML 「とにかくこんな恶作剧、もうやめなさい」
		
	;--------------------------------------------------
	;二回目以降
	;--------------------------------------------------
	ELSE
		PRINTL
		PRINTFORML 「まーた、なにか隠してるわね……出しなさい」
		PRINTW
		;手持ちに自分のパンツがあって时间停止暴露してるとき
		IF iPants_Num && CFLAG:时间停止暴露 == 1
		
			;アリス胖次2回目以降
			PRINTFORML 「またこれ……私の下着よね？」
			
			;思慕前だとビンタ
			IF K17_GRT(TARGET) < K17C_思慕
				PRINTFORML 「もうやめなさいって言ったでしょ！」
				PRINTFORMDL ピシャリ　と平手打ちを食らってしまった
				RETURN 1
			ELSE
				PRINTFORML 「まったく、%K17_RS("他の女の子にも/いつも/誰にでも/いつまで")%こんな恶作剧してるの？」
				PRINTFORMDW くどくど……
				PRINTFORMDW …………くどくど
				PRINTFORMDW ………くどくど………くどくど
				PRINTFORMDW %CALLNAME:MASTER%は女の子への接し方を少し考えた……！
			ENDIF
			
		;アリスのパンツだけあったとき
		ELSEIF iPants_Num
			PRINTFORML 「これ……私の……」
			PRINTFORML 「えっ……これってもしかして……」
			PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%に疑いの眼差しを向け考え込んでいる
			CFLAG:K17C_ID:K17C_CF_パンツ没収++
		;その他のパンツ
		ELSE
			PRINTFORML 「やっぱりまた女の子の下着ね」
		ENDIF
	ENDIF
	
	;--------------------------------------------------
	;时间停止暴露 もうちょい条件緩くするか考え中 とりあえず20％でいいか 咲夜さん即バレ仕方ないね
	;現行犯なので疑いなくてもバレる
	;--------------------------------------------------
	IF K17_CHECK_时间停止暴露(TARGET,20)
		PRINTFORML 「それと……これ私の下着なんだけど……」
		PRINTFORML 「间違いないわ。もしかしてバレないとでも思ったのかしら？」
		PRINTFORML 「さーて、これはどうやって盗んだのかしらね……？」
		PRINTFORMDL これは腹をくくらなきゃならないようだ
		PRINTL
		PRINTFORMDW %CALLNAME:TARGET%に时间停止能力がバレてしまった！
		PRINTW
		CALL K17_时间停止暴露
	ENDIF
	
	PRINTW
	PRINTFORML 「とりあえずこれは没収よ」
	PRINTFORML 「これからは%K17_CNAME()%の見方を変えないとね」
	;パンツ没収でアリスのプライドと态度が復活するのだ
	CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_プライド,1)
	CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,1)
	;疑いあれば追加なし　バレてるなら恋慕未満でなし
	IF CFLAG:K17C_ID:K17C_CF_疑い || (CFLAG:时间停止暴露 && K17_GRT(TARGET) < K17C_恋慕)
		SIF RESULT == 0
			PRINTW
		RETURN 1
	ENDIF
	;--------------------------------------------------
	;思慕以上あれば追加イベ
	;--------------------------------------------------
	IF K17_GRT(TARGET) >= K17C_思慕
		PRINTFORML 「まったく……こんなものが欲しいなら、いくらでもあげるのに」
		PRINTFORMDL なん……だと……！？
		PRINTW
		PRINTFORML 「普段から人形の服も作ってるから、裁縫は得意なのよ」
		SELECTCASE RAND:3
			CASE 0
				PRINTFORMDL お手制！　それはすごい
				PRINTFORMDL もちろん%CALLNAME:TARGET%の履いたものが欲しい
				PRINTFORML 「はぁあああ！？　新品に決まってるでしょ！」
				PRINTFORMDL それじゃ意味ない！
			CASE 1
				PRINTFORML 「今持ってるわよ。……はい、どうぞ」
				PRINTFORMD 渡されたパンツは、見れば見るほど
				PRINTDATADL
					DATAFORM 精巧にできていた
					DATAFORM 本物のようだった
					DATAFORM 可爱らしい出来だった
					DATAFORM 職人魂の込められたものだった
				ENDDATA
				PRINTFORMDL ……人形用じゃないか！
				iDoll = K17_GET_DOLL(0)
				IF iDoll && RAND:2
					iDoll = K17_GET_DOLL(-1)
					PRINTFORM 「あらそれは%K17C_人形名:iDoll%のよ」
					TRYCALL K17_人形台詞(K17C_人形:iDoll,1,"ハズカシー")
				ELSE
					PRINTFORM 「あらそれは
					PRINTDATA
						DATAFORM 倫敦人形
						DATAFORM 仏蘭西人形
						DATAFORM 京人形
						DATAFORM 和蘭人形
						DATAFORM 露西亜人形
						DATAFORM オルレアン人形
					ENDDATA
					PRINTFORML のよ」
				ENDIF
				PRINTFORMDL 反応に困る！
			CASE 2
				PRINTFORML 「今持ってるわよ。はい、どうぞ」
				PRINTFORMD 渡されたのは
				PRINTDATAD
					DATAFORM 上海人形
					DATAFORM 蓬莱人形
					DATAFORM 倫敦人形
					DATAFORM 仏蘭西人形
					DATAFORM 京人形
					DATAFORM 和蘭人形
					DATAFORM 露西亜人形
					DATAFORM オルレアン人形
					DATAFORM ゴリアテ人形
				ENDDATA
				PRINTFORMDL の刺繍が施されたハンカチだった
				PRINTFORMDL ……これはこれで嬉しいけども
				PRINTFORML 「あら、女性が持ってるものならいいんでしょ？　それまだ新しいわよ」
				PRINTFORMDL 違うそうじゃない
		ENDSELECT
		PRINTW
	ENDIF
ENDIF
RETURN 1

;==================================================
;推倒た
;==================================================
@M_KOJO_EVENT_K17_10(ARG,ARG:1)
#DIM DYNAMIC iRT = 0
#DIM DYNAMIC iFriends = 0

;----------
;アリス以外のTARGETを取得　友人优先
;----------
iFriends = K17_GET_TARGETS_ID()
iRT = K17_GRT_EX(TARGET)
;--------------------------------------------------
;口上主はTARGET
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	
	;-------------------------------------------------
	;MASTERを推倒た（开始时）
	;二人きり
	;押し倒された瞬间には既成事实入ってない　すぐ抜け出すと合意を得ない
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;-------------------------
		;开始时の保存
		;喘ぎタイプ決定
		;开始时の主导权
		;积攒度の一时保存
		;-------------------------
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = TARGET
		TCVAR:K17C_ID:K17C_TC_中出しカウント = 0
		IF TALENT:MASTER:性别 >= 2
			TCVAR:K17C_ID:K17C_TC_积攒度 = BASE:MASTER:精力
		ELSE
			TCVAR:K17C_ID:K17C_TC_积攒度 = CFLAG:积攒度
		ENDIF
		
		;-----------
		;抱きつきモード
		;-----------
		IF ARG:1 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_おねだり系
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_おねだり系)
			PRINTFORML 「ふふっ……なんだか甘えたい气分なの……%K17_RS("にゃぅ/ふにゃ")%～」
			PRINTFORMDL %CALLNAME:TARGET%が甘えるように%CALLNAME:MASTER%に擦り寄って抱き付いてきた
			PRINTW
			RETURN 1
		ENDIF
		;-----------
		;掌握把柄のお仕置き
		;-----------
		IF CFLAG:掌握把柄 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_无理矢理系
			PRINTFORMDL %CALLNAME:MASTER%は%CALLNAME:TARGET%の外見からは、想像もできない物凄い力で押さえつけられた
			PRINTFORML 「ふふっ……さぁてお仕置きよ……觉悟は良いかしら……？」
			PRINTFORMDL そう耳元で妖艶に囁いた%CALLNAME:TARGET%の目は普段とは違い、%CALLNAME:MASTER%は少し恐怖を感じた……
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_无理矢理系)
			PRINTW
			RETURN 1
		ENDIF
		
		;-----------
		;通常カウンター诶嘿嘿初回
		;-----------
		IF CFLAG:既成事实 & 合意_诶嘿嘿 && FIRSTTIME("押し倒され",1)
			PRINTFORML 「ね、ねえ……今日は……その……えっと……」
			PRINTFORMDL %CALLNAME:TARGET%はなにやらもじもじと太ももを擦り合わせて、%CALLNAME:MASTER%に縋り付いていた
			PRINTFORML （なっ……なによ、いつもなら好き勝手に……するくせに……うぅ……）
			PRINTW
			PRINTFORML 「そ、そっちがその气なら、私にだって考えがあるのよ……」
			PRINTFORML 「こう見えても魔女なんですからねっ……」
			PRINTFORMDL %CALLNAME:TARGET%がそう言って手を振ると、%CALLNAME:MASTER%は魔法の糸で缚られる
			PRINTFORMDL 締め付けられているように見えるがそれほど痛くなく、むしろ优しく包まれているように%CALLNAME:MASTER%は感じた
			PRINTFORML 「ふふっ……どうかしら？　……あっ、痛くない？　平气？」
			PRINTW
			PRINTFORML 「なに笑ってるのよっ、もうっ……」
			PRINTFORMDL こんなに可爱らしい魔女になら襲われるのも悪くない……
			PRINTFORML 「油断してると食べられちゃうんだから……が、がおーぅ」
			PRINTFORMDL 颜を赤らめた%CALLNAME:TARGET%に%CALLNAME:MASTER%は、优しく寝かしつけられるかのように押し倒された
			CALLF FIRSTTIME("押し倒され")
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_お手伝い系)
		;-----------
		;合意无しでカウンター诶嘿嘿初回にきた场合　もったいないので积攒度半分超えててもこれで
		;-----------
		ELSEIF !(CFLAG:既成事实 & 合意_诶嘿嘿) || CFLAG:积攒度 >= 500 || CFLAG:K17C_ID:K17C_CF_喘ぎタイプ == K17C_攻め_合意襲い系
			PRINTFORML 「ふっー……ふっー……」
			PRINTFORML 「これでも……っこれでも結構、我慢したつもりなのよ……%K17_CNAME()%？　わかってるの？」
			PRINTFORMDL %CALLNAME:MASTER%は何が何だかわからないうちに、物凄い力で押さえつけられていた
			PRINTFORMDL 身动きを取ろうにも、普段人形を操作しているのであろう光の糸が%CALLNAME:MASTER%の身体に巻き付いていて动けない
			PRINTW
			PRINTFORML 「ごめんなさい、怖がらないで……でも、もう抑えきれないのよ、この气持……」
			PRINTFORML 「%K17_CNAME()%を……おっ、犯すわ……」
			PRINTFORMDL 颜を真っ赤に染めて、额に薄っすら汗を滲ませた%CALLNAME:TARGET%が%CALLNAME:MASTER%に覆いかぶさってきた
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_合意襲い系)
		;-----------
		;二回目以降　通常处理
		;-----------
		ELSE
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_お手伝い系)
			iRT = K17_LOWER_LIMIT_RAND(iRT,K17C_思慕,K17C_恋慕)
			SELECTCASE iRT
				CASE IS >= K17C_恋慕
					;台詞
					PRINTDATAL
						DATAFORM 「あのね、えっと……その……%K17_RS("抱いて/えっちしよ/せっくすしよ")%？%K17_RS("　ねっ？/")%%K17_HEART()%」
						DATAFORM 「%K17_CNAME()%がこんな%K17_RS("欲しがり/淫らな/えっちな")%身体にしたのよ……責任取りなさいよね……」
						DATAFORM 「%K17_RS("し、しちゃう/お、襲っちゃう/お、犯しちゃう")%……から……」
					ENDDATA
					;情景
					PRINTDATAD
						DATAFORM %CALLNAME:MASTER%は自らの身体を擦り付けるようにして縋り付く%CALLNAME:TARGET%に、
						DATAFORM %CALLNAME:MASTER%の手を取り、そっと自らの%K17_RS("胸/頬/太もも")%に寄せる%CALLNAME:TARGET%に
						DATAFORM %CALLNAME:MASTER%の膝の上で身体を揺すって、%K17_RS("股间/胸")%を擦り付ける%CALLNAME:TARGET%にそのまま
					ENDDATA
					PRINTFORMDL %K17_RS("优しく/ゆっくりと")%%K17_RS("抱き付かれ倒された/抱き付かれた/押し倒された")%
				CASE IS >= K17C_思慕
					;台詞
					PRINTDATAL
						DATAFORM 「……しよ？　ねっ？%K17_RS("　ねっ？/")%%K17_HEART()%」
						DATAFORM 「……し、しないの？　じゃあ%K17_RS("こっち/私")%から……」
						DATAFORM 「す、するから……%K17_RS("しちゃう/その气にさせちゃう")%からね……」
					ENDDATA
					;情景
					PRINTDATAD
						DATAFORM %CALLNAME:MASTER%の身体に寄り添う%CALLNAME:TARGET%に、
						DATAFORM %CALLNAME:MASTER%の手を取り、%K17_RS("优しく/ぎゅっと/指を絡めて")%握る%CALLNAME:TARGET%に
						DATAFORM %CALLNAME:MASTER%の%K17_RS("腿をすりすりする/胸に头を擦り付ける/頬をつつく")%%CALLNAME:TARGET%に、
					ENDDATA
					PRINTFORMDL %K17_RS("优しく/柔らかく")%%K17_RS("抱き付かれ倒された/抱き付かれた/押し倒された")%
				CASEELSE
					PRINTFORML 「ねぇ……いいでしょ？　なんだか……はまってきちゃったかも……だから」
					PRINTFORMDL %CALLNAME:MASTER%は%CALLNAME:TARGET%に%K17_RS("优しく/ゆっくりと")%押し倒された
			ENDSELECT
			PRINTFORML 「%K17_CNAME()%が%K17_RS("いけない/悪い/こんな身体にした")%のよ、%K17_RS("わるーい/イケナい/えっちな")%%K17_RS("魔法使い/魔女")%が襲っちゃうんだから……%K17_RS("がおーぅ/ふふっ/ふっふっふ～")%」
			
		ENDIF
		
		;----------------------------
		;乱交
		;----------------------------
		IF iFriends
			PRINTW
			SELECTCASE iFriends
				CASE K17C_灵梦ID,K17C_魔理沙ID,K17C_パチュリーID,K17C_幽香ID,K17C_咲夜ID,K17C_メディスンID
					;アリスが恋人な场合
					IF TALENT:TARGET:恋人
						PRINTFORML 「%K17_CNAME()%、ちゃんと%K17_CNAME(iFriends)%も爱してあげてね」
					ENDIF
				CASE K17C_魅魔ID,K17C_ルイズID,K17C_神綺ID,K17C_梦子ID
					IF TALENT:TARGET:恋人
						PRINTFORML 「今回は一绪にするけど……あんまり%K17_CNAME(iFriends)%と比べちゃだめよ？」
					ENDIF
				CASEELSE
					;アリスが恋人な场合
					IF TALENT:TARGET:恋人
						PRINTFORML 「%K17_CNAME()%、ちゃんとあの娘も爱してあげてね」
					ENDIF
			ENDSELECT
			TRYCALL K17_乱交开始(iFriends)
			CALL K17_SET_AUTO_PVOICE(iRT,-1,K17C_攻め_おねだり系)
		ENDIF
		PRINTW
		RETURN 1
	ENDIF
	
	
	;-------------------------------------------------
	;抱きつきモード満足
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && ARG:1 == 1
		PRINTFORML 「ん～満足しちゃった……ふふっ」
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;抱きつきモード强制終了
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && ARG:1 == 2
		PRINTFORML 「なっ、なによぅ、そんなに嫌がらなくてもいいじゃない……」
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;なだめられた（诶嘿嘿終了时）
	;押し倒されたけどすぐに抜け出した
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2 && !ARG:1 && !(CFLAG:既成事实 & 合意_诶嘿嘿)
		PRINTFORML 「っ……はぁ……ごめんなさい、气の迷いよ……」
		PRINTFORMDL %CALLNAME:MASTER%に拒絶されてしまった%CALLNAME:TARGET%は、目に涙を浮かべて目を背けてしまった
		PRINTFORMDL かなりのショックを受けているようだった
		PRINTW
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;なだめられた（通常終了时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		;弱みまだ残ってるか見る
		IF CFLAG:掌握把柄
			PRINTFORML 「とりあえず今回の所はこれで許してあげるわね……」
			PRINTW
			RETURN 1
		ENDIF
		
		;感想戦
		TRYCALL K17_诶嘿嘿感想戦( TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 , TCVAR:K17C_ID:K17C_TC_积攒度 )
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		;タイプリセ
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_攻め_おねだり系
		PRINTW
		RETURN 1
	ENDIF
	
ENDIF
RETURN 1


;==================================================
;浴场で遭遇
;==================================================
@M_KOJO_EVENT_K17_11(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出された
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;仲良くなる前反応
		PRINTFORML 「ッッ！？！？　で、でてけええ！」
		PRINTFORMDL 中に居たのは裸姿の%CALLNAME:TARGET%だった
		PRINTFORMDL 慌てた様子で桶を振りかぶっていた
				
		IF !TCVAR:K17C_ID:K17C_TC_お澡堂イベント && !CFLAG:MASTER:同行 && K17_CHECK_RANDOM_EVENT(TARGET)
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL それだけ告げると、追い出された
		ELSE
			PRINTFORMDL 出て行く際に%K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%がチラリと見えた
			;追い出しは连打禁止
			TCVAR:K17C_ID:K17C_TC_お澡堂イベント = 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;目が合った（追い出されない）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「きゃっ！？」
		PRINTFORMDL 中に居たのは裸姿の%CALLNAME:TARGET%だった
		PRINTFORML 「って%K17_CNAME()%か、誰かと思ってびっくりしたわ」
		PRINTFORMDL 身体を弾ませてこちらに寄ってくる
		IF !TCVAR:K17C_ID:K17C_TC_お澡堂イベント && !CFLAG:MASTER:同行 && K17_CHECK_RANDOM_EVENT(TARGET)
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL それだけ告げると、真っ赤になって湯船に浸かってしまった
		ELSE
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%がチラリと見えた
		ENDIF
	ENDIF

PRINTW
ENDIF
RETURN 1

;==================================================
;寝床に忍び込み
;==================================================
@M_KOJO_EVENT_K17_12(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL && !FLAG:时间停止
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;追い出される（愤怒）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「ちょっと%K17_CNAME()%、今私怒ってるの……」
		PRINTFORML 「お互い头冷やすためにも今日はもう帰ってちょうだい」
	ENDIF
	;-------------------------------------------------
	;寝床に侵入　寝てる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 1
		TRYCALL K17_上海イベント
		
		SELECTCASE K17_GRT()
			CASE IS >= K17C_恋慕允许无套
				PRINTFORML 「……%K17_CNAME()%……、えへへ……%K17_RS("好き/もっと、しよ/もっと、爱して")%……」
			CASE IS >= K17C_思慕
				PRINTFORML 「……%K17_CNAME()%……、%K17_RS("好き/えっち/ばかぁ")%……」
			CASEELSE
				PRINTFORML 「…………%K17_RS("ふにゃ/すぅー/ふぁ")%…………%K17_RS("魔理沙ぁ/シャン……ハイ/お母さん")%？　……」
		ENDSELECT
		PRINTFORMDL 普段の様子よりずっと%K17_RS("儿童っぽい/可爱らしい/素直そうな")%%CALLNAME:TARGET%が幸せそうに眠っていた
	ENDIF
	;-------------------------------------------------
	;寝床に侵入（相手が恋慕）起きる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 2
		;TRYCALL K17_上海イベント
		PRINTFORML 「っ……びっくりしたぁ、泥棒かと思ったわよ」
		PRINTFORML 「よかったぁ、%K17_CNAME()%で……」
	ENDIF
	;-------------------------------------------------
	;寝床に侵入（相手が恋慕・衰弱）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 3
		TRYCALL K17_上海イベント
		PRINTFORMDL よほど疲れているのか%CALLNAME:TARGET%は起きそうにない
	ENDIF
	;-------------------------------------------------
	;追い出される
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 4
		TRYCALL K17_上海イベント
		PRINTFORMDL 眠そうに目をこすり、あくびを噛み杀している%CALLNAME:TARGET%がやってきた
		PRINTFORML 「なに……騒がしいんだけど？」
		PRINTFORML 「悪いけど今は帰ってちょうだい」
	ENDIF
	;-------------------------------------------------
	;追い出される（衰弱）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG:1 == 5
		TRYCALL K17_上海イベント
		PRINTFORMDL 眠そうに目をこすり、あくびを噛み杀している%CALLNAME:TARGET%がやってきた
		PRINTFORML 「なに……騒がしいんだけど？」
		PRINTFORML 「悪いけど今は帰ってちょうだい」
	ENDIF
PRINTW
ENDIF
RETURN 1

;==================================================
;お仕事中
;==================================================
@M_KOJO_EVENT_K17_13(ARG,ARG:1)
;口上主はTARGET
;ARG:1に残っている工作量
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;仕事开始（职场へ移动する）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		IF CFLAG:职业种类 == K17C_职业种类_人形劇
			;人形劇
			SELECTCASE K17_GRT_EX()
				CASE IS >= K17C_思慕
					PRINTFORML 「それじゃあ仕事があるから、行ってくるわね、%K17_CNAME()%」
				CASEELSE
					PRINTFORML 「んっ、そろそろ仕事の时间だから行くわね」
			ENDSELECT
			TRYCALL K17_人形台詞(K17C_上海,0,"ガンバルゾー")
			TRYCALL K17_人形台詞(K17C_蓬莱,1,"オー")
		ELSE
			;家事
			SELECTCASE K17_GRT_EX()
				CASE IS >= K17C_思慕
					PRINTFORML 「さて、ちょっとうちのことやっちゃわないと……またね、%K17_CNAME()%」
				CASEELSE
					PRINTFORML 「んっ、そろそろ家事しなきゃ……行くわね」
			ENDSELECT
			TRYCALL K17_人形台詞(K17C_上海,0,"カジ　スルゾー")
			TRYCALL K17_人形台詞(K17C_蓬莱,1,"オー")
		ENDIF
	ENDIF
	;-------------------------------------------------
	;業務中
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		IF CFLAG:职业种类 == K17C_职业种类_人形劇 && TIME <= 720
			;人形劇　公演中
			;
			PRINTFORMDL 儿童たちの欢声が聞こえてくる
			SIF !(TCVAR:K17C_TC_人形劇 & 8)
				PRINTFORML 「さぁ、続きは%K17_RS("どうなっちゃうのかな～/どうなるんでしょう～")%？」
		ELSE
			;家事＆片付け
			PRINTFORML 「%K17_RS("ふんふーん/ふふ～ん/ん～")%……♪」
			PRINTFORMDL %CALLNAME:TARGET%の鼻歌が聞こえてきた
		ENDIF
		
	ENDIF
	;-------------------------------------------------
	;仕事終了
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		IF CFLAG:职业种类 == K17C_职业种类_人形劇
			;人形劇片付け終了
			PRINTFORML 「はいっ、じゃあまた次回をお乐しみにね～」
			PRINTFORML 「みんな、それまでいい子でいるのよ」
			PRINTFORMDL %CALLNAME:TARGET%はまだまばらにいた儿童たちに、手を振って挨拶していた
		ELSE
			;家事＆片付け
			PRINTFORML 「%K17_RS("ふんふーん/ふふ～ん/ん～")%……♪」
			PRINTFORMDL %CALLNAME:TARGET%の鼻歌が聞こえてきた
		ENDIF
		
	ENDIF
	
	PRINTW
ENDIF
RETURN 1

;==================================================
;食事系
;==================================================
@M_KOJO_EVENT_K17_14(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;持っていた食物を食べられた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == -1
		IF TASTE_REACTION("辛い")
			;辛い
			PRINTFORML 「かっ、辛すぎよっ%K17_RS("火が出るかと/舌がおかしくなるかと/喉が焼ける")%思ったわよ」
		ELSEIF TASTE_REACTION("甘い")
			;甘い
			PRINTFORML 「うーん、ちょっと……私には甘すぎたみたい……」
		ELSEIF TASTE_REACTION("わさび")
			;わさび
			PRINTFORML 「なっ……涙出てきちゃったわよっ」
		ELSEIF TASTE_REACTION("すっぱい")
			;レモン
			PRINTFORML 「ん～～、す、酸っぱいわ」
		ELSE
			;普通
			PRINTFORML 「ごちそうさま、ふふっ美味しかったわ」
		ENDIF
		
		;感想
		IF TASTE_REACTION("辛い") || TASTE_REACTION("甘い") || TASTE_REACTION("わさび") || TASTE_REACTION("すっぱい")
			;味付けあり　アリスは味觉普通
			PRINTFORMDL 勝手に食べたくせに……ひどいっ
		ELSE
			PRINTFORMDL 勝手に食べられてしまった……
			PRINTFORML 「ごめんなさい、美味しそうだったからつい……」
			IF K17_GRT() >= K17C_思慕
				PRINTW
				PRINTFORML 「……ほら、いらっしゃい」
				TRYCALL K17_甘やかし
			ENDIF
		ENDIF
	ENDIF
	PRINTW
ENDIF
RETURN 1

;==================================================
;MASTERが推倒た
;==================================================
@M_KOJO_EVENT_K17_15(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL && !FLAG:时间停止 && !CFLAG:睡眠
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;未实装（推倒コマンドに統合？
	;MASTERが推倒た（ウフフ开始时）
	;记入チェック（=0, 非表示、1, 表示）
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;逢瀬終了（ウフフ終了时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2

		;感想戦
		TRYCALL K17_诶嘿嘿感想戦( TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 , TCVAR:K17C_ID:K17C_TC_积攒度 )
		TCVAR:K17C_ID:K17C_TC_诶嘿嘿主导权 = 0
		TCVAR:K17C_ID:K17C_TC_积攒度 = 0
		CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_おねだり系
	ENDIF
ENDIF
PRINTW
RETURN 1

;==================================================
;添い寝する
;==================================================
@M_KOJO_EVENT_K17_16(ARG,ARG:1)
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;添い寝を始めた（开始时）(存在せず
	;记入チェック
	;LOCAL:1 = 0
	;-------------------------------------------------
	;IF LOCAL:1 && ARG == 1
		;PRINTFORML
		;RETURN 1
	;ENDIF
	;-------------------------------------------------
	;添い寝を終了した（終了时）
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_MESSAGE_COM_K17_睡眠
		SIF !RESULT
			PRINTFORML 「ん……もう終わりなの？」
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;添い寝or恋慕同居　マスターが朝起きた　相手寝てるor起きてる
	;このままKOJO_MESSAGE_SEND("EVENT",2,TARGET,1,0)へ行く
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	;その他
	IF LOCAL:1 && ARG == 3
		IF CFLAG:TARGET:睡眠
			SELECTCASE K17_GRT()
				CASE IS >= K17C_恋慕允许无套
					PRINTFORML 「……%K17_CNAME()%……、えへへ……%K17_RS("好き/もっと、しよ/もっと、爱して")%……」
				CASE IS >= K17C_思慕
					PRINTFORML 「……%K17_CNAME()%……、%K17_RS("好き/えっち/ばかぁ")%……」
				CASEELSE
					PRINTFORML 「…………%K17_RS("ふにゃ/すぅー/ふぁ")%…………%K17_RS("魔理沙ぁ/シャン……ハイ/お母さん")%？　……」
			ENDSELECT
			PRINTFORMDL 普段の様子よりずっと%K17_RS("儿童っぽい/可爱らしい/素直そうな")%%CALLNAME:TARGET%が幸せそうに眠っていた
			;寝てたら朝フェラoff
			TCVAR:K17C_ID:K17C_TC_朝フェラ = 1
		ENDIF
	ENDIF
ENDIF
RETURN 1
;==================================================
;时止め終了时
;見づらい、複雑なんとかしろ
;==================================================
@M_KOJO_EVENT_K17_17(ARG,ARG:1)
#DIM iRT
;口上主はTARGET
;排他と明记されていないモノは状况によっては连続で表示されるので注意
;ARGに射精状况
;ARG:1に射精状态
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
;各种初期化
;-------------
iRT = K17_GRT(TARGET)

IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;ARG=1～3は排他
	;謎の快感or绝顶　恶作剧された
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 1 || ARG == 2)
		IF ARG == 1
			PRINTFORML 「%K17_RS("なっ/ひっ/んくっ/ひゃぁ/")%……！？」
		ELSEIF ARG == 2
			PRINTFORML 「っ～～～～～！！！　%K17_BLUSH(2)%」
		ENDIF
		PRINTFORMDL %CALLNAME:TARGET%はとっさに口を押さえて声を遮った
		IF K17_AP_FINISH() != ""
			CFLAG:K17C_ID:K17C_CF_喘ぎタイプ = K17C_受け_お手伝い系
			PRINTFORML （%K17_AP_FINISH()%）
		ENDIF
		;-------------------------------------------------
		;时间停止暴露
		;-------------------------------------------------
		IF CFLAG:时间停止暴露
			SELECTCASE iRT
				CASE IS >= K17C_思慕诶嘿嘿
					PRINTFORML 「……普通にすればいいのに……ばかっ」
				CASE IS >= K17C_思慕
					PRINTFORML 「なっ……なんてことするの……」
				CASEELSE
					PRINTFORML 「さっ……最低……」
			ENDSELECT
		;-------------------------------------------------
		;疑いなし
		;-------------------------------------------------
		ELSEIF !CFLAG:K17C_ID:K17C_CF_疑い
			;自分のパンツ没収未经验
			SIF !FIRSTTIME("时间停止解除")
				PRINTFORML （……%K17_CNAME()%に会うと、よくこうなる气がする……）
			PRINTFORML （これって……もしかして私の身体……%K17_CNAME()%のこと求めてる……の？）
		ENDIF
		;时间停止经验保存
		CALLF FIRSTTIME("时间停止解除")
	ENDIF
	
	;-------------------------------------------------
	;パンツ紛失のみ
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「%K17_RS("なっ/えっ/ふぇ")%……！？」
		IF CFLAG:时间停止暴露
			;停止バレ
			IF iRT >= K17C_恋慕
				PRINTFORML 「もうっ……そんなに欲しかったらあげるのに」
			ELSE
				PRINTFORML 「また……こんなことするなんて……」
				
			ENDIF
		ELSEIF CFLAG:K17C_CF_パンツ没収
			;没収经验あり　認识的にはパンツを盗む能力
			IF iRT >= K17C_恋慕
				PRINTFORML 「もうっ……そんなに欲しかったらあげるのに」
			ELSE
				PRINTFORML 「……また恶作剧したわね……」
			ENDIF
			CFLAG:K17C_ID:K17C_CF_疑い++
		ELSE
			;まだ没収はされてない
			;初回
			IF FIRSTTIME("时间停止パンツ紛失")
				PRINTFORML （%K17_RS("パンツ/下着/ショーツ")%が……なくなった！？　今日ちゃんと履いてたわよね……？）
			ELSE
				PRINTFORML （また%K17_RS("パンツ/下着/ショーツ")%が……なくなった！？　%K17_RS("今日ちゃんと履いてたわよね/どこかに落としたの")%……？）
			ENDIF
			IF !CFLAG:K17C_CF_疑い
				;疑いなし
				PRINTFORML （やだ……%K17_CNAME()%に气づかれてない……よね？）
				PRINTW
				RETURN 1
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉口内射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		;精液中毒低精饮 ;精液中毒高精饮
		IF ARG:1 == 1 || ARG:1 == 4 || ARG:1 == 6
			PRINTFORML 「%K17_SPLIT_SHUFFLE(@"……/%K17_RS("ごくっ/んぐっ/んっく")%/……")%」
		;精液中毒低吐き出し ;濃厚精液＆精液中毒低吐き出し
		ELSEIF ARG:1 == 2 || ARG == 5
			PRINTFORML 「%K17_SPLIT_SHUFFLE(@"……/%K17_RS("うえぇ/うっ/っぐぇ")%/……")%」
		;精液中毒低手で覆う
		ELSEIF ARG:1 == 3
			PRINTFORML 「げほっげほっ……」
		ENDIF
		IF CFLAG:时间停止暴露
			;停止バレ
			IF iRT >= K17C_恋慕
				PRINTFORML 「もうっ……なんてことするの……」
			ELSE
				PRINTFORML 「また……こんなことするなんて……」
				
			ENDIF
		ELSE
			;まだバレてない
			PRINTFORML （……こんな急に……なんなの？）
			IF ABL:精液中毒 >= 3
				;飲んだ
				PRINTFORML （これってまさか……精液！？%K17_RS(@"/……%K17_CNAME()%のよね？")%）
				CFLAG:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉颜面射精】
	;【无自觉手淫射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 5 || ARG == 6)
		IF ARG:1 == 1
			;幼稚持ち＆精液经验100未満 ;通常ぬぐい取り 
			PRINTFORML 「っ……なに……これ……」
			PRINTW
			RETURN 1
		ELSEIF ARG == 5 && ARG:1 == 2
			;自觉してぬぐう
			IF CFLAG:时间停止暴露
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「いきなり……こんな%K17_RS("ことしないで/ところにかけないで")%よっ、もうっ……」
				ELSE
					PRINTFORML 「こんなところにかけるなんて……」
				ENDIF
			ELSE
				;未バレ
				PRINTFORML （やだ……これ精液……よね%K17_RS(@"/……%K17_CNAME()%の？")%）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ELSE
			;精液舐めとり
			PRINTFORML 「…………っ」
			IF CFLAG:时间停止暴露
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「いきなり……こんなことしないでよっ、もうっ……%K17_RS("ぺろっ/はむっ")%」
					PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%に見せつけるように舐めとった
				ELSE
					PRINTFORML 「こんなところにかけるなんて……んくっ」
					PRINTFORML 「%K17_RS("変态っ/ばかっ/すけべっ/えっち")%……」
				ENDIF
			ELSE
				;舐めた
				PRINTFORML （思わず舐めちゃったけど……これ……精液……！？）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉手淫射精】
	;记入チェック（=0, 非表示、1, 表示）
;	LOCAL:1 = 1
	;-------------------------------------------------
;	IF LOCAL:1 && ARG == 6
;		;ぬぐい取り
;		IF ARG:1 == 1
;			PRINTFORML 「っ……なに……これ……」
;		;舐めとり
;		ELSEIF ARG:1 == 2
;			PRINTFORML 「…………っ」
;			IF CFLAG:时间停止暴露
;				;停止バレ
;				IF iRT >= K17C_恋慕
;					PRINTFORML 「急にこんなことしないでよっ、もうっ……\@ARG:3?ぺろっ#\@」
;				ELSE
;					PRINTFORML 「こんなところにかけるなんて……\@ARG:3?んくっ#\@」
;				ENDIF
;			ELSE
;				;停止未バレ
;				PRINTFORML （思わず舐めちゃったけど……これ……精液……！？）
;				IF iMOB
;					PRINTFORML （いったい、だ……だれの……）
;					PRINTFORMDL 一瞬%CALLNAME:TARGET%は青ざめ、落ち着かないようにきょろきょろと辺りを警戒した
;					IF iRT >= K17C_恋慕
;						PRINTFORML （わ、私……%K17_CNAME()%以外の人に……%K17_RS("穢された/污された/精液かけられた")%！？）
;					ENDIF
;					CFLAG:K17C_CF_疑心暗鬼 = 1
;				ELSE
;					;モブなし
;					CFLAG:K17C_ID:K17C_CF_疑い++
;				ENDIF
;			ENDIF
;		ENDIF
;	ENDIF
	;-------------------------------------------------
	;【无自觉肛门射精】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 7
		;Ａ感觉0
		IF ARG:1 == 1
			PRINTFORML （いづっ……なに……急に……%K17_CALL_P(K17C_部位A)%）
			PRINTW
			RETURN 1
		;ソレ以外
		ELSEIF ARG:1 == 2
			
			IF CFLAG:时间停止暴露
				;停止バレ
				IF iRT >= K17C_恋慕
					PRINTFORML 「急にこんなことしないでよっ、もうっ……」
				ELSE
					PRINTFORML 「こんなことするなんて……くっ……」
				ENDIF
			ELSE
				;未バレ
				PRINTFORML （この感觉……%K17_CALL_P(K17C_部位A)%に……出された……の？）
				CFLAG:K17C_ID:K17C_CF_疑い++
			ENDIF
		ENDIF
	ENDIF
	;-------------------------------------------------
	;【无自觉处女丧失】
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 8
		PRINTFORML （いづっ……なに……急に……）
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;【无自觉膣内射精】
	;1非处女膣内射精口服避孕药なし
	;2非处女膣内射精口服避孕药あり
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 9 && (ARG:1 == 1 || ARG:1 == 2)
		PRINTFORML 「なっ……っ～～～～～%K17_BLUSH(2)%」
		PRINTFORML （これって……膣内に……出された……の？）
		IF CFLAG:时间停止暴露 && iRT >= K17C_恋慕
			;バレありの恋慕以上
			IF CFLAG:允许无套 >= 2
				;允许无套してる
				PRINTFORML 「こんなことしなくても……普通にしなさいよ、ばかっ」
				PRINTFORMDL %CALLNAME:TARGET%は辺りを气にして、颜を赤くした
			ELSE
				;解禁してない
				PRINTFORML 「こんなっ……勝手にするなんて……」
				PRINTFORMDL %CALLNAME:TARGET%の机嫌を損ねてしまった
				CALL K17_MARK_反抗刻印(0)
			ENDIF
		ELSEIF CFLAG:时间停止暴露
			;バレありの恋慕未満
			PRINTFORML 「ひっ……ひどい……こんなっ」
			PRINTFORMDL %CALLNAME:TARGET%は悔しげな颜で%CALLNAME:MASTER%を睨みつけた
		ELSE
			;未バレ
			PRINTFORML （なっ……いつの间に！？）
			PRINTFORML （知らない间に、%K17_CNAME()%に……%K17_RS("中出し/膣内射精/种付け")%された……の？）
			CFLAG:K17C_ID:K17C_CF_疑い++
		ENDIF
		
		;-----------------
		;口服避孕药　危険日か見る
		;-----------------
		IF ARG:1 == 1
			IF ESTRUS_CYCLE(TARGET) >= 100
				PRINTFORML （き……今日は%K17_RS("赤ちゃんできちゃう/妊娠しちゃう")%……）
			ELSE
				PRINTFORML （……今日は%K17_RS("赤ちゃん/妊娠")%平气だよね……？）
			ENDIF
		ELSEIF ARG:1 == 2
			;口服避孕药あり
			PRINTFORML （口服避孕药飲んでるから……%K17_RS("赤ちゃん/妊娠")%は%K17_RS("大丈夫/平气")%……よね？）
		ENDIF
	
	;无自觉
	ELSEIF ARG:1 == 3
		PRINTFORML （あ……れ……これって%K17_RS("生理/おりもの")%……？）
		IF !CFLAG:K17C_ID:K17C_CF_疑い
			PRINTFORML （違う……濡れ……えっ、えっ、私の身体、勝手に%K17_RS("情欲/发情")%してる……の？）
			SIF EQUIP:下半身内衣１ || EQUIP:下半身内衣２
				PRINTFORML （やだ……下着……污れちゃう……）
		ENDIF
		PRINTW
		RETURN 1
	ENDIF
	
	;-------------------------------------------------
	;疑い　停止バレの后处理
	;-------------------------------------------------
	IF CFLAG:K17C_ID:K17C_CF_疑い && CFLAG:K17C_ID:K17C_CF_パンツ没収 && !CFLAG:时间停止暴露
		;パンツ没収经验済み
		SELECTCASE CFLAG:K17C_ID:K17C_CF_疑い
			CASE IS <= 10
				PRINTFORML （……これってもしかして、%K17_CNAME()%に恶作剧されているの……？）
			CASE IS >= 10
				PRINTFORML （これってやっぱり……%K17_CNAME()%に恶作剧されてるってことなのね……）
			CASE IS >= 40
				PRINTFORML （あとは証拠ね……次からは罠を仕掛けるわ……）
		ENDSELECT
		CFLAG:K17C_ID:K17C_CF_疑い = MIN(CFLAG:K17C_ID:K17C_CF_疑い +5,100)
		SIF CFLAG:K17C_ID:K17C_CF_疑い >= 10
			PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%の疑いを深めた
			
	ELSEIF CFLAG:K17C_ID:K17C_CF_疑い && !CFLAG:K17C_ID:K17C_CF_パンツ没収 && !CFLAG:时间停止暴露
		;パンツ没収未经验で疑いがついた
		PRINTFORML （えっ……えっ……%K17_RS("どういうことなの/なにかをされたの/なにをされたの")%……やだぁ%K17_RS("/恐い")%……）
		PRINTFORMDL %CALLNAME:TARGET%は不安を感じているようだ……
		CFLAG:K17C_ID:K17C_CF_疑い = MIN(CFLAG:K17C_ID:K17C_CF_疑い +2,100)
		SIF CFLAG:K17C_ID:K17C_CF_疑い >= 40
			PRINTFORML （犯人を捕まえる……次から罠を仕掛けるわ）
	ENDIF
	;恋慕以下でバレてれば反抗刻印 恶作剧の数だけつくはず
	SIF iRT < K17C_恋慕 && CFLAG:时间停止暴露
		CALL K17_MARK_反抗刻印(1)
	CALLF FIRSTTIME("时间停止恶作剧")
	PRINTW
ENDIF
RETURN 1
;==================================================
;ナマでやらせろ时
;==================================================
@M_KOJO_EVENT_K17_18(ARG,ARG:1)
#DIM DYNAMIC iRT
iRT = K17_GRT()
;口上主はTARGET
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;避孕要求台詞
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		SELECTCASE iRT
			CASE IS >= K17C_恋慕
				PRINTFORML 「あ……あのね、まだ赤ちゃん出来ちゃうのは……%K17_RS("いけない/ダメだと")%と思うの……」
				PRINTFORML 「それにね……えっと、その……」
				PRINTFORMDL %CALLNAME:TARGET%は真っ赤になり、%CALLNAME:MASTER%に颜を寄せて囁いた
				PRINTFORML 「えっちするのは嫌いじゃないの、だからしばらく……したい、から……赤ちゃん出来ちゃうのはだめ、なの……」
				PRINTFORML 「だから%K17_RS("ゴム/避孕")%して……」
			CASEELSE
				PRINTFORML 「せめて%K17_RS("ゴム/避孕")%して……」
		ENDSELECT
		
	ENDIF
	;-------------------------------------------------
	;断った
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「だめぇ……赤ちゃん出来ちゃうよぅ……」
		
	ENDIF
	;-------------------------------------------------
	;断ったのに粘られて切れた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「%K17_RS("いやっ/やだっ/イヤっ")%、じゃあもう、えっちしないからっ」
		
	ENDIF
	;-------------------------------------------------
	;危険日以外許可
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML 「わかった……じゃあ危ない日以外だけ、だからね……？」
		PRINTFORML （いいのかなぁ……）
		
	ENDIF
	;-------------------------------------------------
	;危険日許可
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTFORML 「あ、赤ちゃん……作りたいの？」
		PRINTFORML 「生えっちしたいなら、口服避孕药飲むから……」
		PRINTFORMDL %CALLNAME:MASTER%は儿童を作りたいのだとハッキリ伝えた……
		PRINTFORML 「……あぅ……わかったわよ、じゃあいいけど……」
		PRINTFORML 「出来ちゃったら、本当に産むから……ね」
		TRYCALL K17_RELATION_EV(K17C_RTF_允许无套)

	ENDIF
ENDIF
PRINTL
RETURN 1
;==================================================
;神社暮らしを承認して貰う
;==================================================
@M_KOJO_EVENT_K17_19(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;認められる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「ありがとう、%K17_CNAME()%
		PRINTFORML 「房租は家事の手伝いか……大丈夫、結構得意よ」
		PRINTFORML 「%K17_CNAME()%のためにもがんばるから、よろしくね」
		PRINTFORMDL %CALLNAME:TARGET%は新たな生活に目を輝かせ、嬉しそうに%CALLNAME:MASTER%に笑颜を向けた
		PRINTL
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;認められない
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「そ、そう……残念だわ」
		PRINTFORMDL %CALLNAME:TARGET%は肩を落とし、見るからに残念そうだった
		PRINTL
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;帰宅时
;==================================================
@M_KOJO_EVENT_K17_20(ARG,ARG:1)
;口上主はLOCALS or RESULT
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;通常帰宅　おやすみ口上で統一
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		;CALL M_KOJO_EVENT_K17_3(1)
		;PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;约会中帰宅
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		CALL M_KOJO_SPEVENT_K17_3(0)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;玄関先でお見送り
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		CALL M_KOJO_SPEVENT_K17_3(0)
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;陷落素質取得时
;==================================================
@M_KOJO_EVENT_K17_21(ARG,ARG:1)
;口上主はARG
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
IF LOCAL
	CFLAG:K17C_ID:K17C_CF_オナニーフラグ = 1
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTL
		PRINTFORML （これはもう、認めるしかないようね……）
		PRINTFORML （魔法使いともあろう者が、完敗よ……）
		PRINTFORML （%K17_CNAME()%……好きよ%K17_HEART()%　大好き%K17_HEART()%　爱してる%K17_HEART(2)%）
		PRINTW
		
		;处女判定
		IF TALENT:处女
			;自主トレ设定:おねだりH
			PRINTFORMDL しばらくベッドの上でジタバタしていた%CALLNAME:TARGET%だがやがて……
			PRINTFORML 「ぅ……ふっ……くぅ…………」
			PRINTFORMDL 恐る恐る蜜壶へ手を伸ばしていた
			PRINTFORML 「これ…………いいっ…………%CALLNAME:MASTER%のこと考えるとっ……ふにゃああ」
			PRINTFORML 「しちゃう……の？　…………して……するの……犯してぇ……」
			PRINTFORML 「しちゃいたいの……受け入れちゃう…………准备できちゃってるっ……」
			PRINTFORMDW %CALLNAME:TARGET%は普段からは考えられないような、あられもない格好で自慰に耽っている
			PRINTFORML 「いく……いくいく……イク～～～～っっ！！！」
			PRINTW
		ELSE
			TRYCALL K17_H妄想_喘ぎ(K17C_攻め_おねだり系)
			PRINTFORML 「%K17_喘ぎ声(K17C_攻め_おねだり系,6,1)%%K17_快乐_喘ぎ声(K17C_攻め_おねだり系,8000,K17C_部位V)%%K17_喘ぎ声(K17C_攻め_おねだり系,6,1,1)%」
			PRINTFORML 「%K17_喘ぎ_绝顶(K17C_攻め_おねだり系,K17C_部位V)%」
			PRINTW
		ENDIF
		PRINTFORML （あぁ……よかったぁ%K17_HEART()%　……けど……知らなかった……）
		PRINTFORML （…………本当に好きになっちゃうと、自分で慰めるだけじゃ切なくなるのね……）
		;経験值+余計悶々としちゃう
		EXP:自慰经验 += 1
		EXP:Ｖ经验 += 1
		EXP:Ｂ经验 += 1
		EXP:Ｖ绝顶经验 += 1
		EXP:自慰经验 += 1
		CFLAG:积攒度 /= 4
		CFLAG:积攒度 += 200
		
		;态度を2段阶下げる
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,-2)
		SIF RESULT
			PRINTFORML （もっと素直になってもいいよね）
		;フラグ保存
		SIF (K17_RT_FG(TARGET) & K17C_RTF_恋慕) && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_恋慕)
			CALL K17_RELATION_EV(K17C_RTF_恋慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;思慕取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTL
		PRINTFORML 「……………………%CALLNAME:MASTER%のこと好き……なのかも」
		PRINTFORML （これ……声に出してみると、すごく胸がどきどきする）
		PRINTFORML （やっぱりそういうこと……なの？）
		PRINTW
		
		;处女判定
		IF TALENT:处女
			;自主トレ设定:犯されH
			PRINTFORMDL %CALLNAME:TARGET%はベッドにうつ伏せになりながら枕を足の间に挟んだ
			PRINTFORMDL 鼓动を确认していたつもりの手が、いつの间にかいやらしく胸を揉んでしまっていた
			PRINTFORML 「……はぁはぁ……うっく…………」
			PRINTFORMDL お尻をふりふりと振って枕に股を押し付けている
			PRINTFORML 「これ……すごいっ…………%CALLNAME:MASTER%！……きゃあぁん」
			PRINTFORML 「だめよっ……こんな……无理矢理っ……がっついちゃだめぇ……」
			PRINTFORML 「がまんっ……して…………まだだめ……なんだからっ……」
			PRINTFORMDW %CALLNAME:TARGET%は普段からは考えられないような、あられもない格好で自慰に耽っている
			PRINTFORML 「だめ……だめだめっ……イかされちゃう～～っっ！！！」
		ELSE
			TRYCALL K17_H妄想_喘ぎ(K17C_受け_合意襲い系)
			PRINTFORML 「%K17_喘ぎ声(K17C_受け_合意襲い系,6,1)%%K17_快乐_喘ぎ声(K17C_受け_合意襲い系,8000,K17C_部位C)%%K17_喘ぎ声(K17C_受け_合意襲い系,6,1,1)%」
			PRINTFORML 「%K17_喘ぎ_绝顶(K17C_受け_合意襲い系,K17C_部位C)%」
		ENDIF
		PRINTW
		PRINTFORML （すごかったぁ%K17_HEART()%　…………けど……これ……）
		PRINTFORML （…………自己嫌悪だわ……%CALLNAME:MASTER%のことネタにしちゃった……）
		;経験值+スッキリ
		EXP:自慰经验 += 1
		EXP:Ｃ经验 += 1
		EXP:Ｂ经验 += 1
		EXP:Ｃ绝顶经验 += 1
		EXP:自慰经验 += 1
		CFLAG:积攒度 /= 4
		;态度を1段阶下げる
		CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,-1)
		SIF RESULT
			PRINTFORML （ちょっとは素直になってもいいわよね）
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;爱欲取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML （だめっ……もう……あの人の身体なしじゃ生きられないのかも）
		TRYCALL K17_H妄想_喘ぎ(K17C_攻め_无理矢理系)
		PRINTFORML 「%K17_喘ぎ声(K17C_攻め_无理矢理系,6,1)%%K17_快乐_喘ぎ声(K17C_攻め_无理矢理系,8000,K17C_部位V)%%K17_喘ぎ声(K17C_攻め_无理矢理系,6,1,1)%」
		PRINTFORML 「%K17_喘ぎ_绝顶(K17C_攻め_无理矢理系,K17C_部位V)%」
		PRINTW
		PRINTFORMDL 身体は完全に虜になってしまっていた……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_恋慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_恋慕)
			CALL K17_RELATION_EV(K17C_RTF_恋慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;爱人取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML （いけないことだって思ってるのに完全にハマってるわね……）
		TRYCALL K17_H妄想_喘ぎ(K17C_攻め_おねだり系,0)
		PRINTFORML 「%K17_喘ぎ声(K17C_攻め_おねだり系,6,1)%%K17_快乐_喘ぎ声(K17C_攻め_おねだり系,8000,K17C_部位C)%%K17_喘ぎ声(K17C_攻め_おねだり系,6,1,1)%」
		PRINTFORMDL 今日もまた心とは别に身体が%CALLNAME:MASTER%を求めてしまっていた……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;セフレ取得
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 5
		PRINTL
		PRINTFORML （身体だけの关系っていうのも……いい……のかなぁ？）
		TRYCALL K17_H妄想_喘ぎ(K17C_受け_合意襲い系)
		PRINTFORMDL 头では否定しても、火照った身体の疼きは止むことはなかった……
		;フラグ保存
		SIF K17_RT_FG(TARGET) & K17C_RTF_思慕 && !(CFLAG:K17C_ID:K17C_CF_RTF & K17C_RTF_思慕)
			CALL K17_RELATION_EV(K17C_RTF_思慕)
		RETURN 1
	ENDIF
ENDIF
RETURN 1
;==================================================
;调教終了时に自慰
;==================================================
;テンプレ无视ごめんなさい てかなんかちょっと间違ってた
;自慰经验100の格の違いを見せないと！　かっ飛ばせ！かっ飛ばせ！アリス！
;
;	[テンプレ]
;ARG:0に自慰状况　1通常自慰　2同居时自慰　3中だし精液自慰　4无知持ち　5陷落素質あり自慰中毒高め　6自慰中毒高め（陷落なし）
;ARG:1に自慰种类　1Ｂ　2A　6C　7V　8部位指定无し　ARG==6の时　1尻穴膣腔同时　2膣腔のみ

;	[現在の実值]
;ARG:0に自慰状况　1通常自慰　2同居时自慰　3中だし精液自慰　4无知持ち　5陷落素質あり自慰中毒4以上　6自慰中毒4以上（陷落关系なし）おもちゃ
;ARG:1に自慰种类	ARG==5 1B　2A　3C　4V　5なし　各感度1or感觉10……部位番号はABLの要素番号とは違うみたい　感觉だけかと思ってた……
;					ARG==6　1尻穴膣腔同时　2膣腔のみ
;无知はまた今度
;--------------------------------------------------
@M_KOJO_EVENT_K17_22(ARG,ARG:1)
#DIM DYNAMIC iRand,2=0,0	;妄想种类と妄想
#DIM DYNAMIC iType = 0		;喘ぎTYPE
#DIM DYNAMIC ABLnum= -1		;部位番号　引数からABLの番号に変更 -1のままだとスキップ
VARSET LOCALS		;オプションの呼び名文字列
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL

	;-------------------------------------------------
	;无知
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		IF ABL:自慰中毒 >= 5
			;保护者连絡
			PRINTFORML （……死にたい……恥ずかしいぃ……）
			PRINTFORML （でも大人になるってこういうことなの……？）
		ELSE
			PRINTFORML （なに……これ……なにこれぇ……气持ちいぃ%K17_HEART()%）
			PRINTFORMDL %CALLNAME:TARGET%は未知の快乐に身を委ね、何度も快感に打ちひしがれている……
		ENDIF
	RETURN 1
	ENDIF


	;-------------------------------------------------
	;无知自慰以外　ここから　同居は妄想スキップ
	;-------------------------------------------------
	IF ARG != 2 && ARG != 7
		PRINTFORML 「%K17_RS("うーん/えーと/")%……今日は……どうしようかしら……よし」
		PRINTFORMDL %CALLNAME:TARGET%は布団に倒れ込むと目を瞑って、妄想に耽り始めた……
		PRINTFORMDL ……
		PRINTFORMDL …………
		PRINTFORMDW ………………
	ENDIF
	
	;-------------------------------------------------
	;无知自慰以外で陷落ないとき
	;思慕付き前だからここで诱わないと誰にも見てもらえないぞ、がんばれがんばれ
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG != 4 && K17_GRT(TARGET) < K17C_思慕
		PRINTFORML （图书館で見つけた%K17_RS("官能小説/薄い本/えっちな本")%の场面思い出して……）
		PRINTDATAL
			DATAFORM （んっ……こんなこと……あっ……いけないってわかってるのにぃ……）
			DATAFORM （くっ……こんな欲求……なくなればいいのにぃ……）
			DATAFORM （あぅ……こんなことばっかりぃ……だめなのにぃ……）
			DATAFORM （んくぅ……こんなとこ……もし見られたら……だめなのにぃ……）
		ENDDATA
		;でも感じちゃうビクンッビクンッ
		PRINTDATAL
			DATAFORM （でも私って……これ結構しちゃってる……の、よねぇ……）
			DATAFORM （でも身体……勝手に、ムラムラしちゃってる……）
			DATAFORM （でも身体……勝手に……赤ちゃん……欲しがってるの……？）
			DATAFORM （でもこれ……气持ちいぃの……しちゃうのぉ……）
		ENDDATA
		PRINTFORML （そろそろ……%K17_RS("イケそう/绝顶できそう/終わりそう")%……）
		PRINTFORML 「……いっ……%K17_RS("ぃきゅぅ/ぃくぅ/ぃっちゃぅ")%…………」
		PRINTW
		PRINTFORMDL %CALLNAME:TARGET%の%K17_RS("足/身体")%がぴくんぴくんと痙攣した
		PRINTFORML 「はぁ……%K17_HEART()%」
		PRINTFORMDL 一瞬紧张した身体がくたりと力が抜け横たわる
		PRINTFORML （……これ……今まで一体何度やってきたのかしら……）
		PRINTFORML （でも……やめられないのよね……はぁ……）
		SIF TALENT:处女
			PRINTFORML （経験ないのにこんなことばっかり上手くなる……）
		PRINTFORMDL %CALLNAME:TARGET%は少し自己嫌悪した
		RETURN 1
	ENDIF
	
	
	;-------------------------------------------------
	;无知自慰以外
	;こっちがメイン　アリスの妄想ひとりえっち
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG != 4 && ARG != 7
		iRand:0=RAND:K17C_妄想种类数
		iRand:1=RAND:K17C_受け妄想数
		;同居以外は妄想先出し
		IF ARG != 2
			;妄想の取り出し　CONVERTしてそれっぽく→見送り
			SELECTCASE K17_GRT(TARGET)
				CASE IS >= K17C_恋慕
					;恋慕から攻め受け
					;妄想取り出しひでーなこれ……长文だとだめだなぁ
					;PRINTFORML （……%K17_SEXY_CONVERT(K17_H妄想(iRand:0,iRand:1),13,K17_HEART())%……）
					PRINTFORML （……%K17_H妄想(iRand:0,iRand:1)%……）
					PRINTW
				CASE IS >= K17C_思慕
					;思慕は受けのみ
					iRand:0=K17C_受け
					PRINTFORML （……%K17_H妄想(iRand:0,iRand:1)%……）
					;PRINTFORML （……%K17_SEXY_CONVERT( K17_H妄想(iRand:0,iRand:1),13,K17_HEART())%……）
					PRINTW
			ENDSELECT
			;既読で変わった场合があるので保存
			iRand:1 = RESULT
		ELSEIF ARG== 2
			
			;もし处女or自慰暴露初回なら小悪魔受け固定
			SIF TALENT:TARGET:处女 || CFLAG:TARGET:K17C_CF_自慰暴露追加イベ  == 0
				iRand:1 = K17C_小悪魔受け
		ENDIF
			
		;タイプ決定
		iType = K17_喘ぎタイプ_H妄想(iRand:0,iRand:1)
		
		;-------------------------------------------------
		;同居
		;自慰暴露を入れる
		;-------------------------------------------------
		IF ARG == 2
			;同居　恋慕以上なんでタイプ確定打ちしてもいいかな
			PRINTFORMDL 本人は气づいていないのだろうが、その声もだんだんと大きくなっていた……
			TRYCALL K17_H妄想_喘ぎ(iType)
			
			;幸運补正+10%　关系性补正+3%　つく
			IF K17_LUCKY_SUKEBE(55)
				TRYCALL K17_ONABARE(K17C_ID)
				RETURN 1
			ENDIF
			
			;こっちでも鑑賞と大差ないやつ
			PRINTFORMDL そろそろ達するのか、%CALLNAME:TARGET%がぎゅっと%CALLNAME:MASTER%の手を握ってくるので、思わず握り返してしまった
			PRINTFORML 「…………？　えっ」
			PRINTFORMDL %CALLNAME:TARGET%が快感に震えながらこちらに气づいて、颜を真っ赤にした
			PRINTW
			PRINTFORML 「えっ、ちょっと、まってぇ、%K17_喘ぎ_绝顶(iType,-1,"\n　見られながら")%」
			PRINTFORMDL %CALLNAME:TARGET%は慌てた様子だったが快感%K17_RS("を止められず/に堪えきれず/に耐えられず")%、びくびくと痙攣した
			PRINTFORMDL 恥ずかしそうに身体を丸めて绝顶するが、肝心な所が%CALLNAME:MASTER%から丸見えだった
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			
			;性癖暴露处理
			;自慰暴露イベント入ったか見る
			IF FIRSTTIME("自慰暴露")
				PRINTFORML 「えっと……これはその……」
				PRINTFORMDL %CALLNAME:TARGET%は绝顶から恢复するとしどろもどろになって説明を始めた
				PRINTFORML 「……ちちち、違うのよこれは」
				PRINTFORML 「その……人形のね、研究？　そう！　それでちょっと……」
				PRINTFORMDL その言い訳は苦しいと思うが……
				PRINTW
				PRINTFORMDL それに本当にそんな　"研究"　をしているとするなら、ぜひちゃんと見てみたいものだ
				PRINTFORML 「ッッッ！」
				PRINTFORML （バ、バレてるわね……）
				PRINTW
				PRINTFORMDL それにしても%CALLNAME:TARGET%は　"研究熱心"　なようだ
				PRINTFORML （女の子だって……性欲あるんだからっ……）
				PRINTFORML （内绪で一人えっちしちゃうことだってあるわよ……%K17_BLUSH()%）
				PRINTFORML （それに%K17_CNAME()%にも責任あるんだからねっ……）
				PRINTW
				PRINTFORMDL もっと　"研究发表"　して他の人にも教えてあげないと
				PRINTFORML 「っ～～～！？！？　こ、これは发表できるようなものじゃっ……！」
				PRINTFORML 「な、内绪よ！　内绪の研究なの！」
				PRINTFORML 「ていうか、わかってていじわる言ってるでしょ！？」
				
			ELSE
				PRINTFORML 「あっ……いや……あぅ……うぅー」
				PRINTFORMDL 绝顶が終わると%CALLNAME:TARGET%はシーツを头まで被ってしまい唸っていた
				PRINTFORMDL %CALLNAME:TARGET%はやっぱり　"研究熱心"　だった
				PRINTFORML 「ちっ、違っ……」
			ENDIF
			
			PRINTFORMDW じゃあ、一体どんな　"研究"　をしていたのか、ちゃんと言って欲しい……
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%は%K17_RS("ひとりえっち/自慰/おなにー/女の子の身体")%研究をしてましたっ%K17_BLUSH(2)%」
			PRINTFORML 「さっ、最悪の台詞だわ」
			;鑑賞と同じ
			TRYCALL K17_自慰暴露追加イベント(2,iRand:1)
			
			PRINTFORMDL なんだか堪らず%CALLNAME:TARGET%を抱きしめて、ずっと头を抚でながら眠りについた……
			
			;CFLAG:K17C_ID:K17C_CF_オナニーフラグ = 1
			RETURN 1
			
		;-------------------------------------------------
		;ARG==3,5,6のオプション选择
		;-------------------------------------------------
		ELSEIF ARG == 3
			;中出し精液
			LOCALS = %K17_CNAME()%の精液で
			ABLnum = K17C_部位V
		ELSEIF ARG == 5
			;部位描写あり 
			SELECTCASE ARG:1
				[SKIPSTART]
				CASE 1
					ABLnum = K17C_部位B
				CASE 2
					ABLnum = K17C_部位A
				CASE 3
					ABLnum = K17C_部位C
				CASE 4
					ABLnum = K17C_部位V
				[SKIPEND]
				CASE 1
					ABLnum = K17C_部位C
				CASE 2
					ABLnum = K17C_部位V
				CASE 3
					ABLnum = K17C_部位A
				CASE 4
					ABLnum = K17C_部位B
			ENDSELECT
		ELSEIF ARG == 6
			;おもちゃあり
			LOCALS +="おもちゃで"
			SELECTCASE ARG:1
				CASE 1
					LOCALS += K17_CALL_P(K17C_部位A)+"と"+K17_CALL_P(K17C_部位V)
				CASE 2
					ABLnum = K17C_部位V
			ENDSELECT
		ENDIF
		
		
		;-------------------------------------------------
		;喘ぎ
		;-------------------------------------------------
		TRYCALL K17_H妄想_喘ぎ(iType,ARG==6 ? 1#0)
		
		;-------------------------------------------------
		;绝顶处理
		;-------------------------------------------------
		;部位
		PRINTFORML 「%K17_喘ぎ声(iType,6,1)%%K17_快乐_喘ぎ声(iType,8000,ABLnum)%%K17_喘ぎ声(iType,6,1,1)%」
		PRINTFORML 「%K17_喘ぎ_绝顶(iType,ABLnum,LOCALS)%」
		PRINTW
		
		;感想戦
		PRINTFORML 「はぁ……%K17_HEART()%」
		PRINTFORMDL 激しく绝顶した%CALLNAME:TARGET%の身体から力が抜けると、くたりと横たわる
		PRINTFORMDL 额に手をやり荒い息を整えていた
		PRINTFORML （%K17_RS("欲求不満/溜まってるの/生理近いの")%かしら……）
		SELECTCASE iType
			;受け
			CASE K17C_受け_おねだり系
				PRINTFORML （あんな、%K17_RS("おねだりし/溺爱され/甘え")%ちゃう%K17_RS("妄想/想像")%なんて……）
			CASE K17C_受け_合意襲い系
				PRINTFORML （あんな、自分から诱って%K17_RS("无理矢理/滅茶苦茶に/犯")%されちゃう%K17_RS("妄想/想像")%なんて……）
			CASE K17C_受け_无理矢理系
				PRINTFORML （あんな、%K17_RS("无理矢理/乱暴/犯")%されちゃう%K17_RS("妄想/想像")%なんて……）
			CASE K17C_受け_お手伝い系
				PRINTFORML （あんな、%K17_RS("好き勝手/滅茶苦茶に/乱暴に")%されちゃう%K17_RS("妄想/想像")%なんて……）
			;攻め
			CASE K17C_攻め_おねだり系
				PRINTFORML （あんな、自分から%K17_RS("おねだり/溺爱")%しちゃう%K17_RS("妄想/想像")%なんて……）
			CASE K17C_攻め_合意襲い系,K17C_攻め_无理矢理系 
				PRINTFORML （あんな、自分から%K17_RS("无理矢理/滅茶苦茶に/犯")%しちゃう%K17_RS("妄想/想像")%なんて……）
			CASE K17C_攻め_お手伝い系
				PRINTFORML （あんな、自分から%K17_RS("乱れちゃう/乐しんじゃう")%%K17_RS("妄想/想像")%なんて……）
		ENDSELECT
		
		PRINTFORMDL %CALLNAME:TARGET%はかなりの自己嫌悪に陷った
		SIF CFLAG:TARGET:初始位置 != CFLAG:MASTER:初始位置
			CFLAG:K17C_ID:K17C_CF_オナニーフラグ = 1
	;无知以外自慰終端
	ENDIF
ENDIF
RETURN 1
;==================================================
;浴场连れだし
;==================================================
@M_KOJO_EVENT_K17_23(ARG,ARG:1)
#DIM DYNAMIC iMOB = 0
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;断られた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「ちょっと待ちなさい、流石に裸を晒す关系じゃないでしょ？」
	ENDIF
	;-------------------------------------------------
	;一绪に入ってくれた
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「こっちの人って他人とお澡堂入るの好きよねぇ……」
		PRINTFORML 「あんまりジロジロ見るのは禁止よ」
		PRINTFORMDL 恥ずかしがっている%CALLNAME:TARGET%をよそに%CALLNAME:MASTER%はさっさと服を脱いでしまう
		PRINTFORML 「さ、先に入っていて」
		PRINTW
		PRINTFORMDL そう言われて%CALLNAME:MASTER%は先に浴场に入ったが、なかなか%CALLNAME:TARGET%が入ってこない
		PRINTFORMDL 何度か声をかけると、ようやく恥ずかしそうに身体を隠した%CALLNAME:TARGET%がやってきた
		
		;アリスの他に同行者がいるかチェック
		FOR i,1,CHARANUM
			SIF !TARGET:i
				BREAK
			
			IF (CFLAG:(TARGET:i):同行) && TARGET:i != K17C_ID
				iMOB = TARGET:i
				BREAK
			ENDIF
		NEXT
		
		;连れ出しは先MASTERだけ移动するのが現仕様なので、その位置で他TARGETが居ないか見とく
		;アリスの位置では他TARGETを考慮しない
		;设定して气づいたけどお澡堂に他キャラいると、そっちが先に読まれてここはこないっぽい
		IF K17_CHECK_RANDOM_EVENT(TARGET,-1,0) && K17_GET_CHARA_POSNUM(MASTER) == 0 && !iMOB
			;れっつとらぶる
			TRYCALL K17_お澡堂イベント(TARGET)
			SIF RESULT
				PRINTFORMDL それだけ告げると、真っ赤になって湯船に浸かってしまった
		ENDIF
		IF !RESULT
			PRINTFORMDL %K17_RS(HIP(TARGET)+"/"+OPPAI_DESCRIPTION(TARGET,1)+"/"+THIGHS(TARGET))%がチラリと見えた
		ENDIF
	ENDIF
	
	PRINTW
ENDIF
RETURN 1
;==================================================
;懐妊
;==================================================
@M_KOJO_EVENT_K17_24(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		PRINTFORML 「あ、あのね、%K17_CNAME()%との赤ちゃん……\@EXP:分娩经验?また#\@授かったみたいなの」
		PRINTFORMDL %CALLNAME:TARGET%は嬉しそうに笑颜で%CALLNAME:MASTER%を見つめていた
	ENDIF
	;-------------------------------------------------
	;思慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「えっと……その……あの……ね、\@EXP:分娩经验?また#\@出来ちゃった、みたいなの」
		PRINTFORMDL %CALLNAME:TARGET%は不安げに%CALLNAME:MASTER%の方を見つめるが、すぐに视线を外してしまう
	ENDIF
	;-------------------------------------------------
	;陷落素質无し
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		;詰問はきつい
		PRINTFORML 「どうするのよ、%K17_CNAME()%のせいで\@EXP:分娩经验?また#\@出来ちゃったわよっ……どうするのよっ」
		PRINTFORMDL %CALLNAME:TARGET%は妊娠に不安を感じているようだ
		PRINTFORMDL %CALLNAME:MASTER%は泣きそうになってしまう%CALLNAME:TARGET%の头を抚でて、宥めすかすことしかできなかった……
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;无自觉
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		PRINTFORML （なんだろう……最近体調がおかしい……ような）
		PRINTW
		RETURN 1
	ENDIF
	
	;報告陷落あり　分娩经验を見る
	IF !EXP:分娩经验
		PRINTW
		PRINTFORMDL どうやら觉悟をしなくてはならないようだ
		PRINTFORML 「私、産むわ……でも、初めてだから、ちょっと不安なんだけれど……」
		PRINTFORMDL %CALLNAME:TARGET%のほうは先に觉悟ができているようで、爱おしそうに自分の腹を抚でている
		PRINTFORMDL そんな姿を見て、%CALLNAME:MASTER%は%CALLNAME:TARGET%を抱きしめていた
		PRINTFORML 「ひゃぁっ……どうしたの……急に……大丈夫よ、きっと元气な子を産むわ」
	ELSE
		PRINTFORML 「私、また産むわよ……%K17_CNAME()%との儿童なら何人でも欲しいもの、いいでしょう？」
		PRINTFORMDL 分娩经验を経て、%CALLNAME:TARGET%は母亲になる%K17_RS("喜び/幸せ")%を知ったようだ
	ENDIF
	
ENDIF
PRINTW
RETURN 1
;==================================================
;出産
;==================================================
@M_KOJO_EVENT_K17_25(ARG,ARG:1)
;口上主はLOCAL
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;恋慕 思慕
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && (ARG == 1 || ARG == 2)
		PRINTFORML 「大丈夫よ、元气な子を産めたわ
		PRINTFORML 「ほら、見て、この子。%K17_RS("目元/口元")%が%K17_CNAME()%そっくりよ」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;陷落素質无し
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 3
		PRINTFORML 「……不安だけれど、これからこの子は私一人で育てなきゃ……」
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;无自觉
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 4
		RETURN 1
	ENDIF
	;その他
	PRINTFORML  
ENDIF
RETURN 1

;==================================================
;自慰暴露
;09/20	なんか作り雑だなー関数化予定地
;09/21	少しマシになったはず　フラグ取得はK17_自慰暴露追加イベント関数にて
;09/24	同居自慰追加 ARG:1にて見られた瞬间、追い出し　あと一绪
;==================================================
@M_KOJO_EVENT_K17_26(ARG,ARG:1)
#DIM Virgin = 0		;まんまの意味　行ったり来たりするので保护しておく
#DIM iRand = 0		;受け妄想の一时受け渡し
#DIM iType = 0		;タイプの保存
#DIM iRes = 0		;初回かどうか見とく

;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;見られた瞬间 通常自慰暴露
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			IF FIRSTTIME("自慰暴露",1) && ARG:1==0
				SELECTCASE K17_GRT(TARGET)
				
				;诶嘿嘿经验なし
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「！？！？……%K17_RS("ひっぃ～～～/きゃああああ/ふぇえええええ")%？」
					;诶嘿嘿+接吻经验あり
					CASEELSE
						PRINTFORML 「……%K17_RS("ひゃっ/きゃぁ/ふぇええ/あぁっ")%！？」
				ENDSELECT
				PRINTFORML 「あっ……いや……えっ……」
				PRINTFORMDL 普段の様子からは想像できないような声を聞いてしまった
				PRINTFORML 「えっと……ちちち、違うのよこれは」
				PRINTFORML 「その……人形のね、研究？　そう！　それでちょっと手が離せなかったのよ」
				PRINTFORMDL その言い訳は苦しいと思うが……
			
			ELSEIF ARG:1==0
				SELECTCASE K17_GRT(TARGET)
				
					;诶嘿嘿经验なし
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「！？！？……%K17_RS("っ～～～～/きゃああああ/ふぇえええええ")%？」
					;诶嘿嘿+接吻经验あり
					CASEELSE
						PRINTFORML 「%K17_RS("ひゃっ/きゃぁ/ふぇええ/あぁっ")%！？」
				ENDSELECT
				PRINTFORML 「あっ……いや……えっ……えぇ……また……なの？」
				PRINTFORMDL 普段の様子からは想像できないような声を聞いてしまった
				PRINTFORMDL %CALLNAME:TARGET%はやっぱり　"研究熱心"　だった
				PRINTFORML 「ちっ、違っ……」
				
			ENDIF
			
			;-------------------------------------------------
			;追加イベ
			;同居自慰　見られた瞬间
			;-------------------------------------------------
			IF ARG:1==1
				;PRINTFORMDL そろそろ達するのか、%CALLNAME:TARGET%がぎゅっと%CALLNAME:MASTER%の手を握ってくるので、思わず握り返してしまった
				PRINTFORML 「…………？　えっ」
				PRINTFORMDL %CALLNAME:TARGET%が快感に震えながらこちらに气づいて、颜を真っ赤にした
				PRINTW
				PRINTFORML 「えっ、ちょっと、まってぇ、%K17_喘ぎ_绝顶(K17C_受け_无理矢理系,-1,"\n　見られながら")%」
				PRINTFORMDL %CALLNAME:TARGET%は慌てた様子だったが快感%K17_RS("を止められず/に堪えきれず/に耐えられず")%、びくびくと痙攣した
				PRINTFORMDL 恥ずかしそうに身体を丸めて绝顶するが、肝心な所が%CALLNAME:MASTER%から丸見えだった
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW ………………
			ENDIF
			IF FIRSTTIME("自慰暴露",1) && ARG:1==1
				PRINTFORML 「えっと……これはその……」
				PRINTFORMDL %CALLNAME:TARGET%は绝顶から恢复するとしどろもどろになって説明を始めた
				PRINTFORML 「……ちちち、違うのよこれは」
				PRINTFORML 「その……人形のね、研究？　そう！　それでちょっと……」
				PRINTFORMDL その言い訳は苦しいと思うが……
			ELSEIF ARG:1==1
				PRINTFORML 「あっ……いや……あぅ……うぅー」
				PRINTFORMDL 绝顶が終わると%CALLNAME:TARGET%はシーツを头まで被ってしまい唸っていた
				PRINTFORMDL %CALLNAME:TARGET%はやっぱり　"研究熱心"　だった
				PRINTFORML 「ちっ、違っ……」
			ENDIF
			
			
		RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 1
		;何もしない
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1==0
			IF FIRSTTIME("自慰暴露",1)
				SELECTCASE K17_GRT(TARGET)
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「だから、えっと……早く出て行きなさいッ！」
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……んもう%K17_BLUSH(2)%　恥ずかしいところ見られたわ……」
						PRINTFORML 「だいたい%K17_CNAME()%にも責任……あるんだからね」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……え？　嘘でしょ……ホントに帰っちゃう……の？」
				ENDSELECT
			ELSE
				;見たりしたりした以降
				PRINTFORML 「でっ、でてってッ！…………ぁぇ……」
				SELECTCASE K17_GRT(TARGET)
					CASE IS<K17C_思慕诶嘿嘿
						PRINTFORML 「やっぱり前ので引かれちゃったのかしら……」
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……えっ……嘘……强く言い過ぎちゃったのかしら……」
						PRINTFORML 「それとも前ので引かれちゃったの……？」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……え？　嘘でしょ……ホントに帰っちゃう……の？」
						PRINTFORML 「もう……飽きちゃったのね……」
				ENDSELECT
			ENDIF
			PRINTFORML 「ばっ……ばかぁぁ！」
			;自主トレがばれてアリスのプライドが下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_プライド,-1)
			RETURN 1
		ENDIF
		
		;-------------------------------------------------
		;何もしない　同居自慰
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1 && ARG:1==1
			IF FIRSTTIME("自慰暴露",1)
				SELECTCASE K17_GRT(TARGET)
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……んもう%K17_BLUSH(2)%　恥ずかしいところ見られたわ……」
						PRINTFORML 「だいたい%K17_CNAME()%にも責任……あるんだからね」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……え？　嘘でしょ……ホントに寝ちゃう……の？」
				ENDSELECT
			ELSE
				;見たりしたりした以降
				PRINTFORML 「えっ！？…………ぇぇ……」
				SELECTCASE K17_GRT(TARGET)
					CASE IS < K17C_恋慕允许无套
						PRINTFORML 「……えっ……嘘……强く言い過ぎちゃったのかしら……」
						PRINTFORML 「それとも前ので引かれちゃったの……？」
					CASE IS >= K17C_恋慕允许无套
						PRINTFORML 「……え？　嘘でしょ……ホントに寝ちゃう……の？」
						PRINTFORML 「もう……飽きちゃったのね……」
				ENDSELECT
			ENDIF
			PRINTFORML 「ばっ……ばかぁぁ……」
			;自主トレがばれてアリスのプライドが下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_プライド,-1)
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 2
		;そのまま続行
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;薄い本展開だー！　アリスの女の子の身体の仕組み研究会！鑑賞編
			;見ててあげるからどうぞそのまま
			
			IF FIRSTTIME("自慰暴露")
				PRINTFORML 「みっ……見るって……？」
				PRINTFORMDL その　"研究"　が興味深いから見てみたい
				PRINTFORML 「ッッッ！」
				PRINTFORML （バ、バレてるわね……）
				PRINTW
				PRINTFORMDL それにしても%CALLNAME:TARGET%は　"研究熱心"　なようだ
				PRINTFORML （女の子だって……性欲あるんだからっ……）
				PRINTFORML （内绪で一人えっちしちゃうことだってあるわよ……%K17_BLUSH()%）
				SIF TALENT:K17C_ID:恋慕
					PRINTFORML （それに%K17_CNAME()%にも責任あるんだからねっ……）
				PRINTW
				PRINTFORMDL もっと　"研究发表"　して他の人にも教えてあげないと
				PRINTFORML 「っ～～～！？！？　こ、これは发表できるようなものじゃっ……！」
				PRINTFORML 「な、内绪よ！　内绪の研究なの！」
				PRINTFORML 「ていうか、わかってていじわる言ってるでしょ！？」
				PRINTFORMDW じゃあ、このことは秘密にするから……
				CALLF FIRSTTIME("自慰暴露鑑賞初回")
			ELSEIF FIRSTTIME("自慰暴露鑑賞初回")
				PRINTFORML 「ほんとに……見るだけ……よ？」
				PRINTFORMDL その前に……
			ELSE
				PRINTFORML 「まっ……また、見たいの……？」
				PRINTFORMDL その前に……
			ENDIF
			
			
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%の%K17_RS("ひとりえっち/自慰/おなにー/身体")%研究发表、観てください%K17_BLUSH(2)%」
			PRINTFORML 「さっ、最低の台詞だわ」
			
			;思慕↑追加イベ
			TRYCALL K17_自慰暴露追加イベント(ARG,iRand)
			IF RESULT
				PRINTFORMDL なんだか堪らず%CALLNAME:TARGET%を后ろから抱きすくめてしまった
				PRINTFORMDL 元々震えていた身体が更にびくりと跳ね上がった
				PRINTFORML 「ほっ……%K17_RS("本当に触るの/本当にしちゃうの/本番えっち")%は……だっ、だめ……よ？」
				PRINTFORMDL ベッドに座って%CALLNAME:TARGET%を膝の上に置いた
				PRINTFORML 「こっ、ここで%K17_RS("する/させたい/して欲しい")%の！？」
				PRINTFORMW （これ、やばい……近っ、近すぎよっ）
				
				;とりあえず今のところランダム　そのうち喘ぎタイプによって变动させる
				SELECTCASE RAND:4
					CASE 0
						PRINTFORML （ドキドキしてるの……バレちゃうっ）
						PRINTFORMDL %CALLNAME:TARGET%の心臓の鼓动が伝わってくる
					CASE 1
						PRINTFORML （%K17_CNAME()%の匂い……興奮しちゃうっ）
						PRINTFORMDL %CALLNAME:TARGET%のいい匂いが伝わってくる
					CASE 2
						PRINTFORML （お尻に%K17_CNAME()%の……硬いの……当たってる）
						PRINTFORMDL %CALLNAME:TARGET%の%HIP(TARGET)%の感触が膝から伝わってくる
					CASE 3
						PRINTFORML （身体熱くなってる……のバレちゃうっ）
						PRINTFORMDL %CALLNAME:TARGET%の熱くなった体温が伝わってくる
				ENDSELECT
				
			;思慕以上追加イベ終端
			ENDIF
			
			IF K17_RT_FG() & K17C_RTF_诶嘿嘿
				PRINTFORML （…………えっ……ホントに、しない……の？）
			ELSE
				PRINTFORML 「いい？　絶対、ぜーったい、%K17_RS("秘密/内绪/人に言ったらだめ")%、だからね……？」
			ENDIF
			;自主トレがばれてアリスのプライドが下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_プライド,-1)
			PRINTL
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 3
		;追い出し
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			PRINTFORML 「さっ……最低！　変态！　出てけぇえええ！」		
			;追い出し时プライドは保たれる
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 4
		;やっちゃう
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;薄い本展開だー！　アリスの女の子の身体の仕組み研究会！実技編
			;一人より二人でする方が气持ちいいよ
			;二人でおなにーの見せ合いだと思ってました
			;なのでアリスに勘違いさせとく
			
			;自慰暴露ックス初回　鑑賞もまだ
			IF FIRSTTIME("自慰暴露")
				PRINTFORML 「ふっ……ふたり……で？　え？」
				PRINTFORMDL その　"研究"　が興味深いから一绪にやってみたい
				PRINTFORML 「ッッッ！」
				PRINTFORML （こっ、これってバレてる……のよね？）
				PRINTW
				PRINTFORMDL それにしても%CALLNAME:TARGET%は　"研究熱心"　なようだ
				PRINTFORML （女の子だって……性欲あるんだからっ……）
				PRINTFORML （内绪で一人えっちしちゃうことだってあるわよ……%K17_BLUSH()%）
				SIF TALENT:K17C_ID:恋慕
					PRINTFORML （それに%K17_CNAME()%にも責任あるんだからねっ……）
				PRINTW
				PRINTFORMDL もっと　"研究发表"　して他の人にも教えてあげないと
				PRINTFORML 「っ～～～！？！？　こ、これは发表できるようなものじゃっ……！」
				PRINTFORML 「な、内绪よ！　内绪の研究なの！」
				PRINTFORML 「ていうか、わかってていじわる言ってるでしょ！？」
				PRINTFORMDW じゃあ、このことは秘密にするから……
				CALLF FIRSTTIME("自慰暴露ックス初回")
			ELSEIF FIRSTTIME("自慰暴露ックス初回")
				;自慰暴露ックスが初、鑑賞済み
				PRINTFORML 「えっ？　えっ！？　えぇぇ！？」
				PRINTFORML 「……一绪に……って……その、見せ合いっこしたい……の？」
				PRINTFORMDL その前に……
				
			ELSE
				;自慰暴露ックス2回目以降
				PRINTFORML 「また……しちゃうの……？」
				PRINTFORMDL その前に……
			ENDIF
			PRINTFORMDL ……
			PRINTFORMDL …………
			PRINTFORMDW ………………
			PRINTL
			PRINTFORMW 「%CALLNAME:TARGET%の%K17_RS("ひとりえっち/自慰/おなにー/身体")%研究、一绪にしてください%K17_HEART()%」
			PRINTFORML 「っ～～～～%K17_BLUSH()%」
			
			;自慰暴露ックス済か見る
			IF !(CFLAG:K17C_ID:K17C_CF_自慰暴露追加イベ & 2)
				iRand = K17C_小悪魔受け
				iRes = 0
			ELSE
				iRes = 1
			ENDIF
			;思慕↑追加イベ
			TRYCALL K17_自慰暴露追加イベント(ARG,iRand)
			;タイプ決定
			iType = K17_喘ぎタイプ_H妄想(K17C_受け,iRand)
			;初回限定　恋慕未満　无理矢理固定
			SIF iRes == 0 ||  K17_GRT() < K17C_恋慕
				iType = K17C_受け_无理矢理系
			
			PRINTFORMDL なんだか堪らず%CALLNAME:TARGET%を后ろから抱きすくめてしまった
			PRINTFORMDL 元々震えていた身体が更にびくりと跳ね上がった
			
			
			
			;受け妄想をそのまま実現化
			SELECTCASE iType
				;--------------------
				;诱い受け　强气受け　初回のみ小悪魔受けでこうなる　仕方ないねっ
				;--------------------
				CASE K17C_受け_无理矢理系
					VARSET Virgin
					PRINTFORML 「ほっ……%K17_RS("本当に触るの/本当にしちゃうの/本番えっち")%は……だっ、だめ……よ？」
					PRINTFORMDW ……
					PRINTFORML 「見せ合いっこ……だけよ？」
					PRINTFORMDW …………！！
					PRINTFORMW 「だ、だめっ、落ち着いてっ！ 　ね？」
					PRINTFORMW 「きゃっあ！？」
					PRINTFORMW 「わかった！　わかったから！」
					PRINTFORMW 「%K17_RS("手で/裸見ていいから/あそこも見ていいから")%っ！　それか%K17_RS("お口/お尻/素股/おっぱい")%でっ！　してあげるからっ！」
					PRINTFORMW 「%K17_RS("いや/きゃ")%ああああぁぁっ、%K17_RS("やめて/だめ")%えええええぇぇぇ！」
					PRINTFORMDL これも妄想の続きなんだろうか……
					SIF K17_GRT(TARGET) < K17C_恋慕
						PRINTFORMW 「演技じゃないッ！　演技じゃないのッ！」
					IF TALENT:TARGET:处女
						PRINTFORML 「わたっ、私、处女なのっ！」
						;そうか大事なものなので取っておく
						Virgin = TALENT:TARGET:处女
					ENDIF
					
					;竿判定避孕要求
					SIF TALENT:MASTER:性别 >= 2 && (!CFLAG:TARGET:允许无套 && ESTRUS_CYCLE(TARGET) != 15) || (CFLAG:TARGET:允许无套 < 2 && ESTRUS_CYCLE(TARGET) == 150)
						PRINTFORML 「%K17_RS("避孕/ゴムつけて")%っ、せめて%K17_RS("避孕して/ゴムして")%えええぇぇぇ！！」
					;女MASTERでも处女失うのでこれであってるのか
					PRINTFORML 「ほんとに……插れちゃうのだめええええぇぇぇ」
					
					
				;--------------------
				;姫受け　わんこ受け
				;--------------------
				CASE K17C_受け_おねだり系
					;恋慕↑
					PRINTFORML 「えっ……てっきり襲いかかられちゃうかと……思ってた」
					PRINTFORML 「ね、ねぇ……一绪にって……その……見せっこ……だけ？」
					PRINTFORMDW %CALLNAME:TARGET%は润んだ瞳で、ねだるように性器を見せつけ腰を振った
					PRINTFORMW 「……ぃて……」
					PRINTFORMW 「してぇ……早く、ね？　しよっ、ねっ%K17_HEART()%　ねっ%K17_HEART()%」
					PRINTFORMDL 次第にお互いの股间が触れ合い、%CALLNAME:TARGET%の性器から、くちゅり、といやらしい音が鳴った
					PRINTFORMW 「内绪にしてもらうんだからぁ……好きにして、いいのよ？」
					;竿判定
					IF TALENT:MASTER:性别 >= 2
						PRINTFORML 「えいっ……あぁん%K17_HEART()%　插れられちゃった%K17_HEART()%」
					ELSE
						PRINTFORML 「えいっ……あぁん%K17_HEART()%　くっついちゃった%K17_HEART()%」
					ENDIF
					
					
				;--------------------
				;小悪魔受け　襲い受け
				;--------------------
				CASE K17C_受け_合意襲い系
					;また犯す气でしょ！　エロ同人のように！
					PRINTFORML 「ふんっ……また、その、しちゃう气でしょ……」
					PRINTFORMDL 言いながら、%CALLNAME:TARGET%はチラチラとベッドの方に视线を送っている
					PRINTFORML 「きゃっ！？　ちょ、ちょっと……%K17_BLUSH()%」
					PRINTFORMDL %CALLNAME:MASTER%は軽く触れただけのつもりだったが、%CALLNAME:TARGET%は尻餅をついてベッドに座ってしまった
					PRINTFORMDL これはつまり、诱われているのだろう……
					PRINTW
					PRINTFORML 「%K17_RS("服破いたり/中に出したり/乱暴に")%したら承知しないんだからね……」
					PRINTFORML 「絶対に%K17_RS("屈したりしない/負けない")%からっ」
					PRINTFORMDL ここまで行くとなんだかちょっと可爱い
					PRINTFORMDL 言われた通り徹底的にシてあげよう
					
					
				;--------------------
				;健气受け
				;--------------------
				CASE K17C_受け_お手伝い系
					;責任とりえっち
					PRINTFORML 「……その、%K17_RS("興奮/发情")%しちゃったの……？」
					PRINTFORML 「わた、私の……せいよね？　いいわよ……」
					PRINTDATADL
						DATAFORM %CALLNAME:TARGET%は背を向けると、\@TEQUIP:下半身着衣状况 & 1?%K17_GET_SKIRT(TARGET)%をめくって#\@お尻を突き出し壁に手をついた
						DATAFORM %CALLNAME:TARGET%は胸元のボタンを外すと、谷间を作って%CALLNAME:MASTER%に跪いた
						DATAFORM %CALLNAME:TARGET%はベッドに寝そべると、\@TEQUIP:下半身着衣状况 & 1?%K17_GET_SKIRT(TARGET)%をめくって#\@%K17_RS("两足を開いた/两足をＭ字に開いた/片足を持ち上げて股を開いた")%
					ENDDATA
					PRINTFORML 「責任取るから……好きにしていいよ？」
					PRINTFORMDL その声は心なしか嬉しそうに聞こえた……
					
			ENDSELECT
			
			PRINTL
			RETURN 1
		ENDIF
		;-------------------------------------------------
		CASE 5
		;事后
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;处女丧失、恋慕未満、初回はここ入る
			IF (TALENT:TARGET:处女 == 0 && Virgin == 1) || K17_GRT(TARGET) < K17C_恋慕 || iRes == 0
				IF TALENT:TARGET:处女 == 0 && Virgin == 1
					;おきのどくですが处女が失われた场合
					PRINTFORML 「…………こんな……ひどいわ……ぐすっ……」
					PRINTFORML 「ほんとに……初めてだったのに……ぐすっ……」
				ENDIF
				PRINTFORML 「先っちょだけって……言ったのに……」
				PRINTFORML 「最低よ……うぅっ……ぐすっ……」
				PRINTFORML （なにが最低かって……すごく……气持ち……よかった……こんなっ、最っ低……）
				PRINTW
				PRINTFORMDL やっぱりやり過ぎたのだろうか
				IF K17_GRT(TARGET) >= K17C_思慕
					PRINTFORML 「……つっ……次はちゃんとすること、いいわね？」
					;天使か
				ELSE
					PRINTFORML 「早く出てって……」
				ENDIF
				Virgin = 0
				
			;そのうちここで感想をプレイヤーに訊いてタイプチョイスの仕方を変えるか
			ELSEIF K17_GRT(TARGET) >= K17C_恋慕
				SELECTCASE iType
					CASE K17C_受け_无理矢理系
						PRINTFORML 「はぁはぁ……すごかった%K17_HEART()%」
						PRINTFORML 「でもこれ……癖になったらどうするのよ……」
						PRINTFORMDL お互い興奮しすぎたようだ……
						
					CASE K17C_受け_おねだり系
						PRINTFORML 「はぁはぁ……あぁ……」
						PRINTFORML 「犯されちゃったぁ%K17_HEART()%」
						PRINTFORMDL 果たして犯すとは一体……
						
					CASE K17C_受け_合意襲い系
						PRINTFORML 「はぁはぁ……負けましたぁ%K17_HEART()%」
						PRINTFORML 「興奮しすぎよ……もうっ……」
						PRINTFORMDL 言叶とは裏腹に嬉しそうだった……
						
					CASE K17C_受け_お手伝い系
						PRINTFORML 「もう満足した……？　ホントに好き勝手してくれたわね……」
						PRINTFORML 「でもなんかちょっと可爱かったわよ？」
						PRINTFORMDL そう言って%CALLNAME:MASTER%を見上げてくる%CALLNAME:TARGET%は妖艶で可爱かった
				ENDSELECT
			ENDIF
			
			;一回セットしてフラグ保存
			CALL K17_SET_AUTO_PVOICE(,,iType)
			;自主トレがばれてアリスのプライド 态度が下がる
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_プライド,-2)
			CALL K17_TALENT_UPDOWN(TARGET,K17C_TALENT_态度,-2)
			RETURN 1
		ENDIF
	ENDSELECT
ENDIF
RETURN 0


;==================================================
;相手からデートのお诱い
;==================================================
@M_KOJO_EVENT_K17_27(ARG,ARG:1)
;口上主はLOCAL
;ARG:1は目的地
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SELECTCASE ARG
		;诱い文句
		CASE 0
			IF CFLAG:K17C_ID:K17C_CF_デートイベント && CFLAG:K17C_ID:K17C_CF_告白イベント
				PRINTFORML 「ねえ、また一绪にデートしましょう？」
			ELSEIF CFLAG:K17C_ID:K17C_CF_デートイベント
				PRINTFORML 「ねえ、いやじゃなかったら、またデートしましょう？」
			ELSE
				PRINTFORML 「ねえ、えーっと……たまには外に遊びに行ってみない？」
			ENDIF
			PRINTL
		;受けた
		CASE 1
			PRINTFORML 「じゃあ早速行きましょう」
			PRINTW
		;断った
		CASE 2
			PRINTFORML 「あら、何か用事でもあったかしら？　じゃあ、また今度ね……」
			PRINTW
	ENDSELECT
ENDIF
RETURN 1

;==================================================
;脱衣口上
;==================================================
@M_KOJO_EVENT_K17_28(ARG,ARG:1)
#DIM DYNAMIC iRand = 0
;口上主はTARGET
;ARGに脱がし方选择
;ARG:1（ARG=3の场合のみあり）地の文の反応
;--------------------------------------------------
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;时间停止
;通常处理
LOCAL = 1
;-------------
IF LOCAL && FLAG:时间停止
	RETURN 1
ENDIF
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;泥酔时
;通常处理
LOCAL = 1
;-------------
IF LOCAL && TCVAR:TARGET:泥酔
	PRINTFORML 「……うー……暑いわぁ……脱いじゃえ……あははっ」
	PRINTFORML （あれぇ……いいんだっけ……えっと……まあいいかぁ）
	PRINTW
	RETURN 1
ENDIF
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;睡眠时时
;通常处理
LOCAL = 1
;-------------
IF LOCAL && CFLAG:睡眠
	PRINTFORML 「%K17_SHUFFLE_寝言(K17_RS("やんっ/っ/んっ/うぅん"))%」
	PRINTW
	RETURN 1
ENDIF
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;时间停止　泥酔以外
;通常处理　合意系
LOCAL = 1
;-------------
IF LOCAL && !(CFLAG:K17C_CF_喘ぎタイプ & K17C_喘ぎF_襲い)

	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0
		;全裸にする
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示开始
			;------------------
			PRINTFORML 「全部……脱がされちゃった……」
			
			;初回　0反応固定
			IF FIRSTTIME("脱衣-全裸")
				;性别判定
				IF TALENT:MASTER:性别 == 2
					PRINTFORML （男の人に……こんな全部見せちゃうなんて……やだぁ恥ずかしい……）
				ELSE
					PRINTFORML （女同士だし……别に見られても……平气……だよね……？）
				ENDIF
				iRand = 1
			ENDIF
			
		ENDIF
		;-------------------------------------------------
		CASE 1
		;下着姿にする
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示开始
			;------------------
			PRINTFORML 「服……脱がされちゃった……」
			
			;初回　0反応固定
			IF FIRSTTIME("脱衣-下着姿")
				;性别判定
				IF TALENT:MASTER:性别 == 2
					;既に全裸見てるか見る
					SIF FIRSTTIME("脱衣-全裸",1)
						PRINTFORML （男の人に……ここまで見せちゃうなんて……やだぁ恥ずかしい……）
				ELSE
					PRINTFORML （女同士だし……下着くらいなら、别に見られても……平气……だよね……？）
				ENDIF
				iRand = 1
			ENDIF
		ENDIF
		;-------------------------------------------------
		CASE 2
		;半脱ぎ
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			;------------------
			;表示开始
			;------------------
			PRINTFORML 「えっと……下着だけ脱ぐの……？　なんだか変な感じよ」
			;初回　0反応固定
			IF FIRSTTIME("脱衣-半脱ぎ")
				;性别判定
				IF TALENT:MASTER:性别 == 2
					PRINTFORML （男の人に……こんな格好見られちゃうなんて……恥ずかしいわ……）
				ELSE
					PRINTFORML （女同士だし……下着くらいなら、别に見られても……平气……だよね……？）
				ENDIF
				iRand = 1
			ENDIF
		ENDIF
		;-------------------------------------------------
		CASE 3
		;パンツちょうだい
		;记入チェック（=0, 非表示、1, 表示）
		LOCAL:1 = 1
		;-------------------------------------------------
		IF LOCAL:1
			PRINTFORMDL 大人しく脱がされる%CALLNAME:TARGET%に%CALLNAME:MASTER%は、パンツが欲しいと伝えた
			
			;パンツ没収时に説明を受けているか見る
			IF FIRSTTIME("パンツ没収",1) && FIRSTTIME("脱衣-パンツ获得")
				PRINTFORML 「えっと……何故下着なんて欲しいのかしら？」
				PRINTFORMDL そりゃあ、だって……えーと……
				PRINTFORMDL %CALLNAME:MASTER%はどうして下着が欲しいのか、一から%CALLNAME:TARGET%に説明させられた
				PRINTFORMDL ……
				PRINTFORMDL …………
				PRINTFORMDW ………………
				PRINTFORML 「へ、へぇ……ずいぶんといい趣味？　してるわね」
				PRINTW
			ELSE
				PRINTFORML 「やっぱり……その……欲しいんだ……」
				PRINTFORML （こ……これって……私の下着で色々%K17_RS("妄想/想像")%しちゃうってことなんだよね）
				PRINTW
			ENDIF
			SELECTCASE ARG:1
				;-------------------------------------------------
				CASE 0
				;交换です
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTFORMDL どうして%CALLNAME:TARGET%も下着を欲しがったのだろうか……
					PRINTFORML 「に……人形作りの研究のためよ」
					PRINTFORMDL ああ、なるほど。　"研究材料"　というわけか
					;自慰暴露をしっかり見られたことがあるか見る
					IF FIRSTTIME("自慰暴露",1)
						PRINTFORMDL そう見透かされて、%CALLNAME:TARGET%は真っ赤になって俯いてしまった
					ELSE
						PRINTFORMDL %CALLNAME:TARGET%は%CALLNAME:MASTER%の下着を手に取りマジマジと見つめ颜を赤らめていた
					ENDIF
					PRINTFORML （ごめんなさい、嘘つきました。これ……%K17_RS("おなにー/ひとりえっち/妄想ひとりえっち")%%K17_RS("捗っちゃう/に使っちゃう/で材料にしちゃう")%……かも）
				ENDIF
				;-------------------------------------------------
				CASE 1
				;OK（嬉々
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「それで……なにする气なのよ……%K17_RS("えっち/すけべ/変态")%……%K17_BLUSH()%」
						DATAFORM 「别にいいけど……本物がこっちにいるんだから……ね？%K17_HEART()%」
						DATAFORM 「ねえ、もう下着はいいから……私のことももっと%K17_RS("欲しがって/可爱がって")%？　ね？%K17_HEART()%」
					ENDDATA
				ENDIF
				;-------------------------------------------------
				CASE 2
				;OK（渋々
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「あまり変なことに使っちゃダメ……%K17_RS("よ/なんだからね/だらかね")%……」
						DATAFORM 「まあいいけど……っ～～！！　なに匂い嗅ごうとしてるのよっ、%K17_RS("やめて/ダメだ/ヤだ")%ったらっ」
						DATAFORM 「こんなもので、そこまで%K17_RS("必死/懸命")%にならないでよっ、恥ずかしい……」
					ENDDATA
				ENDIF
				;-------------------------------------------------
				CASE 3
				;嫌です
				;记入チェック（=0, 非表示、1, 表示）
				LOCAL:1 = 1
				;-------------------------------------------------
				IF LOCAL:1
					PRINTDATAL
						DATAFORM 「%K17_RS("ダメ/いや/やぁ")%よ……それよりちゃんと私を%K17_RS("構いなさい/可爱がりなさい/欲しがりなさい")%よ……%K17_BLUSH()%」
						DATAFORM 「洗わずそのままだなんて……流石にちょっと%K17_RS("引くわね/イヤよ/……")%」
					ENDDATA
				ENDIF
			ENDSELECT
			PRINTW
			RETURN 1
		ENDIF
	ENDSELECT
	
	;局部見せ描写
	IF ARG != 3 
		;露出判定　害羞は持っておこう
		;露出癖見る
		IF iRand == 0
			iRand = K17_LOWER_LIMIT_RAND(ABL:露出癖,1,5)
		ELSE
			;初回
			iRand = 0
		ENDIF
		SELECTCASE iRand
			CASE IS >= 5
				PRINTFORMDL %CALLNAME:TARGET%は胸を突き出して%NIPPLE_DESCRIPTION(TARGET,1)%を見せつけながら、軽く脚を軽く開いて見せた
				PRINTFORML 「これからどうされちゃうのかしら……ね%K17_HEART()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%は脚を開いたり上げたりして、%CALLNAME:MASTER%に見せつけた
				PRINTFORML （そんな%K17_RS("すごい/えっちな/獣みたいな")%眼で見られたら……%K17_RS("興奮し/濡れ/发情し/挑衅したくなっ")%ちゃう……）
				PRINTFORMDL そしてうっとりした目つきで%CALLNAME:MASTER%に寄り添い、视线を感じる箇所を見せつけて挑衅していた
				PRINTFORMDL %CALLNAME:TARGET%は興奮しているのか、息が荒い
				
			CASE IS >= 3
				PRINTFORMDL %CALLNAME:TARGET%は%NIPPLE_DESCRIPTION(TARGET,1)%は隠さずにいたが、脚は恥ずかしそうに閉じていた
				PRINTFORML 「もうっ、%K17_RS("食い入るように/飢えた獣みたいな眼で/ギラついた眼で")%見すぎよっ、%K17_RS("えっち/すけべ/変态")%%K17_HEART()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%は小さくため息をつくと、ゆっくり脚を開いて%CALLNAME:MASTER%に見せつけてきた
				PRINTFORML （%K17_RS("えっちな眼で見てくれるの/興奮してもらえるの/お預けしてるみたいで")%……ちょっと乐しくなってきちゃった……）
				PRINTFORMDL こちらを煽るようにワザと際どいところをチラチラと見せながら、様々なポーズをとる
				PRINTFORMDL %CALLNAME:TARGET%は興奮しているのか、息が荒い
				
			CASE IS >= 1
				;胸が見えているか見る
				IF ARG != 1
					PRINTFORMDL %CALLNAME:TARGET%は恥ずかしそうに脚を閉じ、手で%OPPAI_DESCRIPTION(TARGET,1)%を隠しているが、チラチラと%NIPPLE_DESCRIPTION(TARGET,1)%が見え隠れしていた
				ELSE
					IF TALENT:胸围サイズ >= 0
						PRINTFORMDL %CALLNAME:TARGET%は恥ずかしそうに脚を閉じ、手で%OPPAI_DESCRIPTION(TARGET,1)%を隠しているが、%K17_GET_CLOTHNAME_TOP_UNDER(TARGET)%で作られた谷间がくっきりと浮かび上がっていた
					ELSE
						PRINTFORMDL %CALLNAME:TARGET%は恥ずかしそうに脚を閉じ、手で%OPPAI_DESCRIPTION(TARGET,1)%を隠しているが、%K17_GET_CLOTHNAME_TOP_UNDER(TARGET)%の隙间からチラチラと%NIPPLE_DESCRIPTION(TARGET,1)%が見え隠れしていた
					ENDIF
				ENDIF
				PRINTFORML 「%K17_RS("み、見/の、覗き/な、眺め")%過ぎよ……%K17_BLUSH()%」
				PRINTW
				PRINTFORMDL %CALLNAME:TARGET%は颜を背けぎゅっと目を閉じ、恥ずかしさに震えながらゆっくりと脚を開いた
				PRINTFORML （あっ……今%K17_RS("見せちゃった/見えちゃってる")%……よね？　すごい……%K17_RS("ドキドキし/興奮し/えっちな气分になっ")%ちゃう）
				PRINTFORMDL %CALLNAME:TARGET%は紧张しているのか、息が荒い
			CASEELSE
				PRINTFORMDL %CALLNAME:TARGET%は恥ずかしそうに脚を閉じ、手でしっかりと%OPPAI_DESCRIPTION(TARGET,1)%を隠していた
				PRINTFORML 「やっぱり、その、恥ずかしい……%K17_BLUSH()%」
				PRINTW
				PRINTFORMDL %CALLNAME:MASTER%は戸惑う%CALLNAME:TARGET%の两脚を掴んで、そのまま開かせた
				PRINTFORML （私の%K17_CALL_P(K17C_部位V)%……見られちゃってる……%K17_CNAME()%、%K17_RS("すごい/えっちな/興奮した")%眼で……見てる……）
				PRINTFORMDL %CALLNAME:TARGET%は紧张しているのか、身体は震え息が荒い
		ENDSELECT
	ENDIF
	PRINTW
	RETURN 1
ENDIF


;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
;时间停止　泥酔以外
;通常处理　襲い系or无理矢理フラグ
LOCAL = 1
;-------------
IF LOCAL && CFLAG:K17C_CF_喘ぎタイプ & K17C_喘ぎF_襲い
	SELECTCASE ARG
		;-------------------------------------------------
		CASE 0,1,2
		;全裸にする
		;下着姿にする
		;半脱がし
		;-------------------------------------------------
		PRINTFORMDL %CALLNAME:MASTER%は%K17_RS("嫌がる/暴れる/逃げようとする")%%CALLNAME:TARGET%を捕まえ、%K17_RS("无理矢理/强引に/乱暴に")%服を%K17_RS("脱がした/剥いだ/剥いた")%
		PRINTFORML 「%K17_RS("……/くっ、")%女の子を\@TEQUIP:拘束||TEQUIP:绳?拘束して#力ずくで\@无理矢理脱がすなんて……%K17_RS("最低/変态/すけべ")%っ%K17_AP_DEC(1)%」
		;-------------------------------------------------
		CASE 3
		;パンツちょうだい
		;-------------------------------------------------
		SELECTCASE ARG:1
			;-------------------------------------------------
			CASE 0
			;交换
			;-------------------------------------------------
			PRINTFORML 「い、いらないわよっ……%K17_RS("最低/変态/すけべ")%っ%K17_AP_DEC(1)%」
			;-------------------------------------------------
			CASE 1,2
			;OK（嬉々
			;OK (渋々
			;-------------------------------------------------
			PRINTFORML 「%K17_RS("好きに/勝手に")%しなさいよ、%K17_RS("最低/変态/すけべ")%っ%K17_AP_DEC(1)%」
			;-------------------------------------------------
			CASE 3
			;拒否
			;-------------------------------------------------
			PRINTFORML 「いやよっ……%K17_RS("最低/変态/すけべ")%っ%K17_AP_DEC(1)%」
		ENDSELECT
	ENDSELECT
	PRINTW
ENDIF
RETURN 1

;==================================================
;愤怒口上
;==================================================
@M_KOJO_EVENT_K17_29(ARG,ARG:1)
;口上主はTARGET
;ARGはTARGETの度胸で分岐
;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL && !FLAG:时间停止 && !CFLAG:TARGET:睡眠
	PRINTL
	
	;-------------------------------------------------
	;诶嘿嘿中
	;-------------------------------------------------
	;无理矢理フラグ見る
	IF CFLAG:TARGET:诶嘿嘿
		CALL K17_无理矢理中出し(TARGET)
		IF RESULT
			PRINTW
			RETURN 1
		ENDIF
	ENDIF
	;-------------------------------------------------
	;怒らせてしまった
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 1
		SELECTCASE K17_GRT()
			CASE IS >= K17C_思慕
				PRINTFORML 「……うーん、ちょっと%K17_RS("調子乗り/やり")%すぎね、お互い头冷やしましょう」
				PRINTFORM 「私だって%K17_RS("怒るんですからね/怒るんだからね")%」
				TRYCALL K17_人形台詞(-1,1,K17_RS("バカジャネーノ/オコルゾー/プンプン"))
			CASEELSE
				PRINTFORM 「……もうっ、ちょっと調子乗りすぎよ」
				TRYCALL K17_人形台詞(-1,1,K17_RS("バカジャネーノ/オコルゾー/プンプン"))
		ENDSELECT
		PRINTW
		RETURN 1
	ENDIF
	;-------------------------------------------------
	;泣かせてしまった
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARG == 2
		PRINTFORML 「%K17_SPLIT_SHUFFLE(@"%K17_RS("ふぇぇ/ひっぐ/えっぐ/うぇえん/ぐすっ","/",2)%/……/……/%RESULTS:1%")%」
		TRYCALL K17_人形台詞(-1,1,K17_RS("アリス/ナクナヨ/ナミダ　フケ/ヨシヨシ")+"……")
		PRINTW
		RETURN 1
	ENDIF
ENDIF
RETURN 1


