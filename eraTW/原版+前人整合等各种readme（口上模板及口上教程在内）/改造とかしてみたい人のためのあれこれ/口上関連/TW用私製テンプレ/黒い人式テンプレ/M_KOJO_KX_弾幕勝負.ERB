;==================================================
;弹幕胜负
;==================================================
;
@M_KOJO_MESSAGE_COM_KX_DANMAKU(ARGS, 相手残机)
#DIM 相手残机
;全体の流れ
;①【战斗前】→②ダイスロールとプレイヤー选择肢、ハンデをつけた场合は【ハンデ口上】→③対応スキルが发动した场合【スキル口上】→④被弾判定、キャラが被弾したなら【被弾口上】→
;どちらかの残机が0になっていなければ②に戻る→⑤【战斗后口上】

;--------------------------------------------------
;记入チェック（=0, 非表示、1, 表示）
LOCAL = 0
;-------------
IF LOCAL
SIF FLAG:口上色
	TRYCALLFORM M_KOJO_COLOR_K{NO:TARGET}
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;战斗前
	HANDICAP_FIXED = 0
	HANDICAP_RAND = 0
	;ハンデをつけることができ、数值が大きいほどあなたが不利になる　数值が負ならあなたが有利に
	;キャラの能力に関わらずクッソ强くしたり弱くしたりできる
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "战斗前"
		;愤怒
		IF CFLAG:318 == 1
			PRINTFORMW
		ELSEIF RAND:4 == 0
			PRINTFORMW
		ELSEIF RAND:3 == 0
			PRINTFORMW
		ELSEIF RAND:2 == 0
			PRINTFORMW
		ELSE
			PRINTFORMW
		ENDIF
	ENDIF
	;-------------------------------------------------
	;ハンデ
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "ハンデ"
		;ハンデつけなかったら表示されないので无记入でよい
		PRINTFORML 
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;战斗中TARGET被弾时口上
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "被弾" 
		;别に一律で「やられたー」だけでもいいよ
		SELECTCASE 相手残机
			;残り残机3が表示されるのは【洽览深识】持ちのみ
			CASE 3
				PRINTFORML 
			CASE 2
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
			CASE 1
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
			CASE 0
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;战斗中
	;TARGETの【残忍酷薄】发动时
	;ARGはTARGETの残机
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "残忍酷薄"
		
	ENDIF
	;-------------------------------------------------
	;战斗中
	;TARGETの【乾坤一擲】发动时
	;ARGはTARGETの残机
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "乾坤一擲"
		
	ENDIF
	;-------------------------------------------------
	;战斗中
	;TARGETの【怪力乱神】发动时
	;ARGはTARGETの残机
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "怪力乱神"
		
	ENDIF
	
	;-------------------------------------------------
	;战斗后
	;记入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "战斗后" 
		PRINTFORML 
		;残り残机4が表示されうるのは【洽览深识】持ちのみ
		;残机が1以上ならあなたの負け、0の场合はあなたの勝利
		SELECTCASE 相手残机
			CASE 4
				PRINTFORML 
			CASE 3
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
			CASE 2
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
			CASE 1
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
			CASE 0
				;愤怒
				IF CFLAG:318 == 1
					PRINTFORMW
				ELSEIF RAND:4 == 0
					PRINTFORMW
				ELSEIF RAND:3 == 0
					PRINTFORMW
				ELSEIF RAND:2 == 0
					PRINTFORMW
				ELSE
					PRINTFORMW
				ENDIF
		ENDSELECT
	ENDIF
RESETCOLOR
ENDIF
RETURN 1

